## 操作シナリオ

ここでは、エイリアスを介してダウンタイムなしの更新機能を実装する方法について説明します。

## 前提条件

- 上海に2つのサーバーフリートを作成します。操作手順は次のとおりです。
  - [ビギナー向け事例](https://intl.cloud.tencent.com/document/product/1055/37401)の操作手順の最初の3つの手順を完了します。【デモパッケージのワンクリックアップロード】、【サーバーフリートのワンクリック作成】、【ゲームサーバーセッションの作成】をクリックし、最後に【完了】をクリックします。
- サーバーフリート1とサーバーフリート2（上海リージョン）が作成されました
  ![](https://main.qcloudimg.com/raw/ee8d09274e04c682d54893b187a6163b.png)

## 操作手順
### エイリアスの作成 
1. [GSEコンソール](https://console.cloud.tencent.com/gse/asset)にログインし、左側メニューの【エイリアス】をクリックします。
2. 左上のサービスエリアを選択し、【新規作成】をクリックします。
3. 新規作成したエイリアスページに進み、名称を入力し、プルダウンからエイリアスタイプを選択し、プルダウンから関連のサーバーフリートを選択し、説明情報を入力して、【OK】をクリックします。
 - 名称：ディレクトリで識別しやすいように、エイリアスの名称を入力します。この例では、「ダウンタイムなしの更新テスト」と入力します。
 - タイプ：標準エイリアスとターミナルエイリアスがあります。この例では、「標準エイリアス」を選択します。
    - 標準エイリアス：フリートをポイントします。システムはフリートの下にあるサーバーを自動的に検出し、それをクライアントに割り当てます。標準エイリアスを選択した場合、使用可能なサーバーフリートを関連付ける必要があります。
    - ターミナルエイリアス：フリートをポイントしません。使用できない理由をターミナル情報に入力すると、クライアントに送信されます。
 - サーバーフリートの関連付け：タイプに標準エイリアスを選択した後、「サーバーフリート1」を選択します。
 - 説明：さらに識別しやすいように、エイリアスの簡単な説明を入力します。この例では、「test」と入力します。
 - タグ：タグは、さまざまな次元からリソースのカテゴリー管理を行うために用います。既存のタグが要件を満たさない場合は、コンソールの[タグの管理](https://console.cloud.tencent.com/tag/taglist)に移動してください。
4. 情報を入力して【OK】をクリックすると、エイリアスの作成は完了です。
![](https://main.qcloudimg.com/raw/78bf5f7c5bf9b4faa316a97371f510c6.png)


### ゲームサーバーセッションの作成

コードでTencent Cloud APIを呼び出します。この例は、[Tencent Cloud APIのデバッグ](https://console.cloud.tencent.com/api/explorer?Product=gse&Version=2019-11-12&Action=CreateGameServerSession&SignVersion=)を介してすばやく作成されます。

>?入力パラメータの説明：
>- Region：リージョン。この例では、「華東地域（上海）」を選択します。
>- MaximumPlayerSessionCount：プレイヤーの最大数。この例では、10と入力します。
>- AliasId：エイリアスID。この例では、作成したばかりのエイリアスIDを入力します。

![](https://main.qcloudimg.com/raw/87a3085470fd8eb4a9b848230aae0f08.png)

[Tencent Cloud APIのデバッグ](https://console.cloud.tencent.com/api/explorer?Product=gse&Version=2019-11-12&Action=CreateGameServerSession&SignVersion=)を介して、ゲームサーバーセッションの作成に成功した場合、サーバーフリート1がゲームサーバーセッションを生成していることが確認できます。
![](https://main.qcloudimg.com/raw/2c9c73bc0a8818bb057bb13b767f15ae.png)


### エイリアスの構成の変更

1. コンソールで、左側メニューの【エイリアス】をクリックし、エイリアスリストページに進みます。
2. 新規作成したばかりのエイリアスを選択し、【変更】をクリックしてエイリアス編集ページに進み、エイリアスの設定を変更し、関連するサーバーフリートを「サーバーフリート2」に変更します。
![](https://main.qcloudimg.com/raw/7abbb80626481a3bbcef57bf4ac3d3c2.png)

### ゲームサーバーセッションの再作成

>?同じエイリアスを使用して、ゲームサーバーセッションを再度作成してください。

[Tencent Cloud APIのデバッグ](https://console.cloud.tencent.com/api/explorer?Product=gse&Version=2019-11-12&Action=CreateGameServerSession&SignVersion=)を介して、ゲームサーバーセッションを再度作成すると、サーバーフリート2がゲームサーバーセッションを生成し、新しいゲームサーバーセッションがサーバーフリート2に割り当てられていることが確認できます。
![](https://main.qcloudimg.com/raw/456b988a1a2822a387f8e30069d322a8.png)

#### ダウンタイムなしの更新の説明
バージョンの更新が必要な場合は、サーバーフリートを新規作成し、エイリアスが新しいサーバーフリートをポイントするようにします。
- 元のサーバーフリートはゲームサーバーセッションの数が減少するにつれて自動的にスケールインします。
- 新しいサーバーフリートは、ゲームサーバーセッションの数が増えるにつれて自動的にスケールアウトするため、サーバーのダウンタイムなしの更新が実現します。

