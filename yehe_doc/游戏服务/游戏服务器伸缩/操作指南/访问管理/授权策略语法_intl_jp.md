
### ポリシー構文

CAM ポリシーは以下のとおりです：

```json
{     
    "version":"2.0", 
    "statement": 
    [ 
        { 
            "effect":"effect", 
            "action":["action"], 
            "resource":["resource"], 
            "condition": {"key":{"value"}} 
        } 
    ] 
} 
```

- **バージョンversion** は必須項目であり、現時点では"2.0"のみを認めています。
- **ステートメント statement** は1つか複数の権限の詳細情報を説明することに使われます。この要素にはaction、resource，condition、effect 等いくつかの他の要素の権限または権限セットが含まれます。1つのポリシーには1つの statement 要素しかありません。
  1. **アクションaction**は、許可する、または拒否するアクションを説明することに使われます。アクションはAPI（`gse:`プレフィックス）又は機能セット（ permid プレフィックスが付いた特定の API セット）を指定できます。この要素は必須項目です。
  2. **リソースresource** は権限が適用されるリソースについて説明することに使われます。リソースは6セグメント式で説明されます。リソース定義の詳細は各製品によって異なります。リソースの指定方法については、作成したリソースステートメントに対応する製品ドキュメントをご参照ください。この要素は必須項目です。
  - **発効条件condition** は、ポリシー発効の制約条件を説明しています。条件はオペレーター、アクションキーとアクション値から構成されています。条件値は時間、IPアドレス等の情報を含んでいます。一部のサービスは、条件に対しほかの値を指定することを認めています。この要素は必須項目ではありません。
  - **影響effect** は、ステートメントによる結果が「許可」であるか「明示的な拒否」であるかを説明します。それにallow (許可)とdeny (明示的な拒否)という2種類が含まれています。この要素は必須項目です。
  
<span id="test5"></span>
## GSEの操作

CAMポリシーステートメントでは、CAMをサポートする任意のサービスの任意のAPIにアクションを指定できます。GSEについては、gse: を接頭辞とするAPIを使用してください。 例：`gse:AddMatch` や `gse:AddRule` など。
一つのステートメントで複数の操作を指定したい場合は、下記のとおり、コンマで区切ってください。

```json
"action":["gse:action1","gse:action2"]
```

ワイルドカードで複数のアクションを指定することも可能です。例えば、下記のとおり先頭が "Create" で始まるすべてのアクションを指定することが可能です。

```json
"action":["gse:Create*"]
```

CVMにおけるすべての操作を指定したい場合は、 * ワイルドカードを使用してください。下記のとおりです。

```json
"action"：["gse:*"]
```
<span id="test6"></span>
## GSEのリソースパス

GSEのポリシーステートメントにはいずれも独自のリソースがあります。リソースパスの一般的な形式は次のとおりです。

```json
qcs:project_id:service_type:region:account:resource
```

- **project_id**：プロジェクト情報を記述します。CAMのレガシーロジックとの互換性のためにのみ使用されます。入力する必要はありません。
- **service_type**：製品の略称です。例えば GSE 。
- **region**：リージョン情報です。例えば bj 。
- **account**：リソース所有者のルートアカウント情報です。例えば`uin/110702656` 。
- **resource**：GSEサービスリソースの詳細です。例えば`fleet/fleet-28a9refi-ur5pe34j`や`fleet/*`。

例えば、メインアカウントの北京エリアのフリート（fleet-28a9refi-ur5pe34j）をサブアカウントに承認する場合は、次のようにステートメントで指定できます。

```json
"resource":[ "qcs::gse:bj:uin/110702656:fleet/fleet-28a9refi-ur5pe34j"]
```

下記のとおり、 * ワイルドカードで特定アカウントのすべてのインスタンスを指定することができます。

```json
"resource":[ "qcs::gse::uin/110702656:fleet/*"]
```

すべてのリソースを指定したい場合、あるいは特定のAPI操作がリソースレベルの権限をサポートしていない場合、下記のとおり、 Resource 要素で * ワイルドカードを使ってください。

```json
"resource": ["*"]
```

一つのコマンドで複数のリソースを同時に指定したい場合は、コンマでそれらを区切ってください。下記は二つのリソースを指定する例です。

```json
"resource":["resource1","resource2"]

```



