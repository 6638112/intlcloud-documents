## 操作シナリオ

このドキュメントでは、主にゲームサーバーキューを作成する方法についてアドバイスしています。キューを使用して複数のリージョンにまたがるフリートを作成し、ゲームサーバーセッションをキューの任意のフリートに配置できるようにします。これにより、遅延を最小限に抑え、プレイヤーエクスペリエンスを向上させ、より多くのフリート容量をより効率的に使用し、新しいゲームに多くの容量をより速やかに提供することによって、ゲームのユーザビリティにより弾力性をもたらします。

## 前提条件

- [GSE申請書](https://intl.cloud.tencent.com/apply/p/k0b6pvbhs6)に記入し、使用資格を取得していること。
- [サーバーフリートの作成](https://intl.cloud.tencent.com/document/product/1055/36675)を完了していること。


## 操作手順
1. [GSEコンソール](https://console.cloud.tencent.com/gse/asset)にログインし、左側メニューの【ゲームサーバーキュー】をクリックします。
2. 左上のサービスエリアを選択し、【新規作成】をクリックします。
3. 新しいゲームサーバーのキューページに進み、[基本情報](#.E5.9F.BA.E6.9C.AC.E4.BF.A1.E6.81.AF)、[レイテンシーポリシー](#.E5.BB.B6.E8.BF.9F.E7.AD.96.E7.95.A5)、[ターゲット](#.E7.9B.AE.E6.A0.87)などの情報を記入します。

#### 基本情報
 - 識別子：有効な識別子を入力します。
 - タイムアウト時間の割り当て：ゲームサーバーセッションリクエストが複数のリージョンで待機できる最大時間を入力します。
![](https://main.qcloudimg.com/raw/2e5f440e4ab642b5e1c4d63255fa275e.png)

#### レイテンシーポリシー
プレイヤーの最大遅延時間を設定します。複数のポリシーを設定すると、一定時間後の最大レイテンシーを軽減することができます。ポリシーの優先度が低くなるにつれてレイテンシーの数値は大きくなります。優先度の低い最長プレイヤーレイテンシー値は、優先度の高いプレイヤーレイテンシー数値よりも大きくなります。お客様は一連のポリシーを使用することによって、時間の経過とともに最大レイテンシーを徐々に軽減し、最高のゲーム体験とプレイヤーの待機時間とのバランスを取ることができます。
 - **事例説明**：
	 タイムアウトが30秒のキューに対して、次のようなポリシーを定義します。複数のポリシーは、最大レイテンシー値が最小のポリシーからスタートして連続して実施されます。このグループのポリシーは、60ミリ秒の最大レイテンシーからスタートし、時間の経過とともに150ミリ秒まで増加します。最後のポリシーは、すべてのプレイヤーに許可される絶対最大レイテンシーを設定します。レイテンシーに関わらず、すべてのゲームサーバーセッションが確実に配置されるようにしたい場合は、最後のポリシーの最大レイテンシーを非常に高い値に設定します。 	 
  - **ポリシーの設定**：
![](https://main.qcloudimg.com/raw/56520abadad90057ca24f3bd458accc3.png)
   - **実行状況**：
      このサンプルでは、1番目のポリシーは、最初の10秒をかけてプレイヤーのレイテンシーが60ミリ秒を超えないすべてのフリートを探します。2番目のポリシーは、次の10秒をかけてプレイヤーのレイテンシーが100ミリ秒を超えないすべてのフリートを探します。3番目のポリシーは、残りの10秒をかけてプレイヤーのレイテンシーが150ミリ秒を超えないすべてのフリートを探します。ポリシーに最大プレイヤーレイテンシーを満たすフリートがないと判断された場合、割り当てられたポリシーの実行時間を待たずにそのまま結果が返されます。最大プレイヤーレイテンシーを満たすフリートがあると判断されたがアイドルではない場合は、割り当てられたポリシーの時間まで待機します。
					
#### ターゲット
ターゲットは、GSEによって実行されるリソーススケジューリングの範囲であり、サーバーフリートのリストです。フリートは、サーバーフリートIDまたはエイリアスIDで指定することができ、キューでターゲットの優先度を設定できます。レイテンシーポリシーとターゲットが同時に設定されている場合、実行ロジックはレイテンシーポリシーに基づきます。キューのターゲットを選択するときは、次の点をご確認ください。
   - **キュー内のターゲットの優先順位はとても重要です**。ゲームサーバーセッションの配置リクエストにレイテンシーデータを提供すると、GSEはターゲットの優先順位を付け直し、プレイヤーレイテンシーが最も低い利用可能なリソースを探します。レイテンシーデータを提供しない場合、GSEはターゲットリストの優先順位に従います。この場合、ゲームセッションは通常、最初にリストアップされているフリートにホストされ、必要な場合にのみバックアップフリートに配置されます。
   - **任意のエリアからあらゆる既存のサーバーフリートまたはエイリアスを追加することができます**。
   - **キューには少なくとも2つのフリートが含まれるべきで、できれば少なくとも2つのエリアにまたがる必要があります**。これによってフリートのエリア的な減速の影響が軽減され、予期しないプレイヤーのニーズ変化をより効率的に管理して、ホスティングの弾力性を高めることができます。
   - **サーバーフリートとエイリアスを関連付けている場合（推奨）、フリートをキューのターゲットとして設定するときにエイリアスを使用する**ことをお勧めします。
   - **キュー内のすべてのターゲットは、キューのゲームクライアントと互換性のあるゲームアセットを実行しなければなりません**。キューによって処理される新しいゲームセッションリクエストは、キュー内の任意のターゲットに配置される可能性があることに注意してください。
   - **このエリア内のどこにキューを作成するかを決定する必要があります**。理想的な状況の場合、ゲームクライアントサービス（セッションディレクトリサービスなど）を介してゲームサーバーセッションの配置リクエストを発信します。その場合、クライアントサービスがデプロイされた場所と地理的に近いエリアに、キューを作成することをお勧めします。このソリューションは、ゲームセッションの配置リクエストを送信する際のレイテンシーを最小限に抑えます。
![](https://main.qcloudimg.com/raw/52b0ab85b5e3a0dca52b649c70ca96d2.png)

4. 【OK】をクリックすると、ゲームサーバーキューが作成されます。作成が成功したら、ゲームサーバーのキューページで変更、削除などの操作を行うことができます。





