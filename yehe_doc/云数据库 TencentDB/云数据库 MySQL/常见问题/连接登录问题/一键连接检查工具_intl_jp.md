プライベート/パブリックネットワーク経由でMySQLインスタンスに正常にアクセスできない場合、接続チェックツールによって、プライベート/パブリックネットワーク接続の問題を容易に調査することができます。

Cloud Virtual Machine（CVM）経由でMySQLにアクセスし、アクセスエラーの問題に遭遇したときは、MySQLコンソールで提供する接続チェックツールを利用して、プライベート/パブリックネットワーク接続に関する問題を調査することが可能です。簡単な操作だけでプライベート/パブリックネットワークが接続できない問題を容易に解決できます。

## プライベートネットワーク接続チェック
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、チェックが必要なインスタンスを選択して、インスタンス名をクリックすると、インスタンス管理ページに入ります。
2. インスタンス管理ページで、【接続チェック】>【プライベートネットワークのチェック】ページを選択します。
3. プライベートネットワーク接続の問題をチェックするときは、【このインスタンスにアクセスするクラウドホスティングの追加】をクリックし、当該MySQLにアクセスするCVMを追加します。
>?CVMの選択時、デフォルトでは、同じリージョンのCVMのみが提供されます。リージョンを跨いでアクセスしたい場合は、[CCN](https://intl.cloud.tencent.com/document/product/1003)経由でネットワークの相互通信を実現してください。
>
4. 追加完了後、【チェック開始】をクリックします。チェックタスクが完了すると、チェックレポートが生成されます。
![](https://main.qcloudimg.com/raw/e233a1cd63718cfdc31347da83153fd8.png)

5. チェックレポートの「ステータス」の列で、【レポートを見る】をクリックするとチェック結果を確認できます。
 - チェック結果のステータスが【正常】の場合は、CVMがプライベートネットワーク経由で当該MySQLインスタンスに正常にアクセスできることを意味します。
 - チェック結果のステータスが【異常】の場合は、CVMがプライベートネットワーク経由で当該MySQL インスタンスに正常にアクセスできないことを意味します。推奨する対処方法を参考に調整した後、再度接続してください。
<table>
<thead><tr><th>検査項目</th><th>異常および対処方法</th></tr></thead>
<tbody><tr>
<td>MySQLインスタンスの状態</td>
<td>お客様のMySQLインスタンスが破棄済みであることが検出されました。インスタンスを破棄しようとしていない場合は、<a href="https://console.cloud.tencent.com/mysql/recycle">ごみ箱</a>から復元することができます</td></tr>
<tr>
<td rowspan=2>CVMインスタンスの状態</td>
<td>お客様のCVMインスタンスが破棄済みであることが検出されました。インスタンスを破棄しようとしていない場合は、<a href="https://console.cloud.tencent.com/cvm/recycler/cvm">ごみ箱から</a>復元することができます</td></tr>
<tr>
<td>お客様のCVMインスタンスが停止済みであることが検出されました。当該CVMインスタンスを引き続き使用したい場合は、<a href="https://console.cloud.tencent.com/cvm/instance">コンソール</a>にアクセスして当該CVMインスタンスを有効にしてください</td></tr>
<tr>
<td rowspan=2>CVMとMySQLが同じVPCに帰属</td>
<td>お客様のCVMとMySQLのネットワークタイプが異なることが検出されました。CVMとMySQLを同じネットワークタイプにする必要があります。<a href="https://intl.cloud.tencent.com/document/product/236/37864">ネットワークの問題</a>を参考にネットワークのタイプを修正してください</td></tr>
<tr>
<td>お客様のCVMとMySQLが同じVPCネットワークセグメントにないことが検出されました。CVMとMySQLを同じリージョンの同じVPCに置く必要があります<a href="https://intl.cloud.tencent.com/document/product/236/37864#wlwt">ネットワークの問題</a>を参考にVPCを修正してください</td></tr>
<tr>
<td>CVMセキュリティグループポリシー</td>
<td>お客様のCVMにバインドされているセキュリティグループの<strong>アウトバウンドルール</strong>がIPポートに対するアクセス通過させていないことが検出されました。<a href="https://intl.cloud.tencent.com/document/product/236/37864#caqzpzyw">CVMセキュリティグループ設定エラー</a>を参考にアウトバウンドルールを開放してください</td></tr>
<tr>
<td>MySQLセキュリティグループポリシー</td>
<td>お客様のMySQLインスタンスにバインドされているセキュリティグループの<strong>インバウンドルール</strong>がIPポートに対するアクセスを通過させていないことが検出されました。<a href="https://intl.cloud.tencent.com/document/product/236/37864#maqzpzyw">MySQLセキュリティグループ設定エラー</a>を参考にインバウンドルールを開放してください</td></tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/b183b27af9c6b5a28cdb708f8a5c44d8.png">

## パブリックネットワーク接続チェック
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、チェックが必要なインスタンスを選択して、インスタンス名をクリックすると、インスタンス管理ページに入ります。
2. インスタンス管理ページで、【接続チェック】>【パブリックネットワークのチェック】ページを選択します。
2. パブリックネットワーク接続の問題をチェックするときは、【このMySQLインスタンスにアクセスするパブリックネットワークサーバーの追加】をクリックして、当該MySQLインスタンスにアクセスするパブリックネットワークサーバーを追加します。
3. 追加完了後、【チェック開始】をクリックします。チェックタスクが完了すると、チェックレポートが生成されます。
![](https://main.qcloudimg.com/raw/43d9e61c2052797740e7ef6817251f5e.png)
4. チェックレポートの「ステータス」の列で、【レポートを見る】をクリックするとチェック結果を確認できます。
 - チェック結果の状態が【正常】の場合は、パブリックネットワークのサーバーがパブリックネットワーク経由で当該MySQLインスタンスに正常にアクセスできることを意味します。
 - チェック結果の状態が【異常】の場合は、パブリックネットワークのサーバーがパブリックネットワーク経由で当該MySQLインスタンスに正常にアクセスできないことを意味します。推奨する対処方法を参考に調整した後、再度接続してください。
<table>
<thead><tr><th>検査項目</th><th>異常および対処方法</th></tr></thead>
<tbody><tr>
<td>MySQLインスタンスの状態</td><td>お客様のMySQLインスタンスが破棄済みであることが検出されました。インスタンスを破棄しようとしていない場合は、<a href="https://console.cloud.tencent.com/mysql/recycle">ごみ箱</a>から復元することができます</td></tr>
<tr>
<td>パブリックネットワーク接続の有効状態</td>
<td>お客様のMySQLインスタンスはパブリックネットワーク接続が有効になっていないことが検出されました。<a href="https://intl.cloud.tencent.com/document/product/236/37788">パブリックネットワーク接続の有効化</a>をご参照ください</td></tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/01998fb06fe6d8a762dd5a2a9a5eb26c.png">
