### クラウドサーバはクラウドデータベースと同じ地域に配置されている場合、どうのようにMySQLに接続しますか？
クラウドサーバがクラウドデータベースと同じ地域に配置されている場合、プライベートネットワーク経由でアクセスしてください。接続方法について、[MySQLデータベースにアクセスする](https://intl.cloud.tencent.com/document/product/236/3130)をご参照ください。

### クラウドサーバとクラウドデータベースが異なる地域に配置されている場合、どうのようにMySQLに接続しますか？
クラウドサーバとクラウドデータベースが異なる地域に配置されている場合、パブリックネットワーク経由でアクセスしてください。接続方法について、[パブリックネットワーク経由でアクセスする](http://intl.cloud.tencent.com/document/product/236/9038)をご参照ください。

### クラウドデータベース接続のトラブルシューティングと解決方法
クラウドデータベースを使用する時に接続ログインの問題が発生した場合は、まずtelnetでクラウドデータベースのネットワークポートの接続性を確認し、次にクラウドサーバでコマンドラインを使用してクラウドデータベースにログインします。
>？クラウドデータベースのアカウントはデフォルトでrootで、パスワードは初期化オプションで設定されたアカウントパスワードです。
>
```
mysql -h [クラウドデータベースIP] -P[クラウドデータベースポート番号] -uroot -p[クラウドデータベースパスワード]
```
よくある問題の種類と解決方法を次に示します。
- 「ERROR 1045(28000):Access denied for user...」のメッセージが表示されたら、クラウドデータベースのアカウント番号、パスワードが正しいかを確認してください。パスワードを忘れた場合は、[パスワードリセット](http://intl.cloud.tencent.com/document/product/236/1271)をご参照ください。正しい情報を再入力してもエラーが報告された場合は、[MySQLコンソール](https://console.cloud.tencent.com/cdb)インスタンスの詳細ページにある【データベース管理】>【アカウント管理】をご参照ください。
2. 「ERROR 1040(00000):Too many connections」のメッセージが表示されたら、クラウドデータベースインスタンスの現在の最大接続数が制限を超えていることを示します。よくある原因と解決方法：
i. sleepスレッド数が多い。コンソールでwait_timeoutとinteractive_timeoutのパラメータ値を下げることをお勧めします。
ii. スロークエリが多発しています。long_query_timeパラメータ値はデフォルトで10s、1s～2sに変更してスロークエリーログを確認することをお勧めします。
iii. sleepスレッド数とスロークエリが少ない。コンソールでmax_connectionsパラメータ値を大きくすることをお勧めします。
3. 「ERROR 2003(HY000): Can‘t connect to MySQL server...」のメッセージが表示されたら、入力したクラウドデータベースのIP、ポート情報が正しいことを確認してください。正しい情報を再入力してもエラーが報告される場合は、このインスタンスのコンソールのセキュリティグループポリシーを閲覧して当該CVMにTencentDBへのアクセス権があるかを確認できます。詳細については、[クラウドデータベースセキュリティグループ](https://intl.cloud.tencent.com/document/product/236/14470)をご参照ください。
4. データ移行中に接続テストに失敗した場合は、表示された移行エージェントIPのセキュリティポリシーが有効になっているかを確認してください。
5. ユーザがinit_connectパラメータを設定しました。例えば：mysql>set global init_connect='insert into db_monitor.accesslog(thread_id,log_time,localname,matchname) values(connection_id(),now(),user(),current_user())'。
これにより、super権限を持たないユーザの接続がトリガされ、データベースに接続するたびにdb_monitor.accesslogテーブルにレコードを挿入するようにします。db_monitor.accesslogテーブルにコミットされていないトランザクションまたは関連するロック待機が存在する場合、db_monitor.accesslogテーブルへのinsert into処理がブロックされ、結果としてsuper権限を持たないユーザのすべての接続がブロックされ、クラウドデータベースの正常な使用に影響を与えます。init_connectパラメータは慎重に設定してください。
