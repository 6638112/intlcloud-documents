Tencent CloudはTencentDBインスタンスをホストするプラットフォーム：[VPC](https://intl.cloud.tencent.com/document/product/215/535)を提供します。TencentDBインスタンスのようなTencent Cloudリソースを、VPCで起動することができます。

一般的なスキームは、TencentDBインスタンスと同じVPCで実行されているウェブサーバーの間でデータを共有することです。このドキュメントでは、このスキームを使用してVPCを作成し、TencentDBインスタンスをVPCに追加して合わせて使用します。
このドキュメントでは、同じVPCにCVMおよびTencentDB for MySQLインスタンスを追加し、プライベートネットワークを介してクラウドリソースを相互接続する方法について説明します。

## 手順1：VPCを作成する
VPCには少なくともサブネットが1つあり、Tencent Cloudサービスリソースはサブネットにのみ追加できます。
1. [VPCコンソール](https://console.cloud.tencent.com/vpc)にログインします。
2. リストの上方で、VPCのリージョンを選択し、【+New】をクリックします。
3. VPC情報と元のサブネット情報を入力し、【OK】をクリックすれば完了です。このうち、VPCとサブネットのCIDRについては、作成後に変更できません。
 - VPC CIDR以下のネットワークセグメント中の任意の1個の使用をサポートします。異なるVPC間でプライベートネットワークを介して相互に通信するためには、両端末のCIDRの設定は重複してはいけません。
    - `10.0.0.0` - `10.255.255.255`（マスク範囲は16 - 28の間にあること）
    - `172.16.0.0` - `172.31.255.255`（マスク範囲は16 - 28の間にあること）
    - `192.168.0.0` - `192.168.255.255` （マスク範囲は16 - 28の間にあること）
 - サブネットのCIDRはVPCのCIDR内、または同じである必要があります。
 例えば、VPCのネットワークセグメントが`192.168.0.0/16`の場合、そのサブネットのネットワークセグメントは`192.168.0.0/16`、`192.168.0.0/17`などでも構いません。  
![](https://main.qcloudimg.com/raw/46b5e21b88d43da6f2697906bb5bfc21.png)

## 手順2：サブネットを作成する
ユーザーは同時に1つまたは複数のサブネットを作成できます。
1. [VPCコンソール](https://console.cloud.tencent.com/vpc)にログインします。
2. 左側のディレクトリにある【Subnet 】をクリックし、管理画面に進みます。
3. サブネットを作成するリージョンとVPCを選択して、【+New】をクリックします。
4. サブネット名、CIDR、アベイラビリティーゾーン、および関連するルートテーブルを入力します。
![2](https://main.qcloudimg.com/raw/84bd6ce8469eae5d399ce96a89168299.png)
5. （オプション）【+Add a line 】をクリックすると、同時に複数のサブネットを作成できます。
6. 【OK】をクリックすれば完了です。

## 手順3：ルートテーブルを作成してサブネットに関連付ける
カスタムルートテーブルを作成し、そのルーティングポリシーを編集して、指定したサブネットに関連付けることができます。サブネットに関連付けられたルートテーブルは、サブネットのアウトバウンドルートを指定するために使用されます。
1. VPCコンソールにログインして、左側のサイドバーメニューで【Route Tables 】を選択します。
2. リストの上部でリージョンとVPCを選択し、【+New】をクリックします。
3. ポップアップダイアログボックスで、名前、所属するネットワークおよび新規作成のルーティングポリシーを入力し、【Create】をクリックします。ルートテーブルリストに戻ると、新規作成したルートテーブルを表示することができます。
![](https://main.qcloudimg.com/raw/4e59f2e780b5296fe85b204bd86b8b73.png)
4. コンソール左側のサイドバーメニューで【Subnet】をクリックし、ルートテーブルに関連付けるサブネットを選択し、【操作】列で【Change route  table】をクリックして関連付けます。

## 手順4． CVMインスタンスを追加する
1. [VPCコンソール](https://console.cloud.tencent.com/vpc)にログインします。
2. 左側のサイドバーメニューで【Subnet】をクリックし、管理画面に進みます。
3.CVMインスタンスを追加するサブネットの行で「Add a CVM」アイコンをクリックします。
![](https://main.qcloudimg.com/raw/2bafceab2bb6a5a31fe76844e19bb07e.png)
4. 画面のプロンプトに従って、CVMの購入を完了します。詳細については、CVMドキュメント[購入方式](https://intl.cloud.tencent.com/document/product/213/506)をご参照ください。

## 手順5：TencentDBインスタンスを追加する
#### データベースの新規作成
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、【新規作成】をクリックして、購入画面に進みます。
2. 購入画面の【ネットワーク】オプションでは、以前に作成したVPCおよび対応するサブネットを選択し、新規購入したTencentDBインスタンスをVPCに追加します。
![](https://main.qcloudimg.com/raw/c8f5065a7ceafc763163b4abe82564bf.png)

#### 既存のデータベース
1. インスタンスリストで、インスタンス名または操作列の【管理】をクリックして、インスタンス詳細画面に進みます。
2. 詳細画面の【所属するネットワーク】で、対応するVPCに切り替えられます。
