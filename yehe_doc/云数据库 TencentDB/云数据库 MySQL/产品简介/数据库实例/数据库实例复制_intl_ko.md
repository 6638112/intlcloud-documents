데이터베이스 인스턴스 복제는 단일 혹은 멀티 백업 데이터베이스를 서버에 배치하는 방식의 데이터 동기화로, MySQL의 데이터를 여러 시스템에 분산합니다. TencentDB for MySQL은 세 가지 데이터 복제 방식을 제공합니다.

>?
>- Master는 마스터 데이터베이스 인스턴스, Salve는 백업 데이터베이스 인스턴스를 의미합니다.
>- MySQL 5.6, 5.7, 8.0 버전에서는 세 가지 복제 방식(비동기화, 반동기화, 강제 동기화)을 제공하며, 5.5 버전은 비동기화 방식만 지원합니다.


### 비동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 작업 포함) 요청을 보내면 Master는 업데이트 완료 후 즉시 응용 프로그램에 응답하고, 다시 Slave에 데이터를 복제합니다.

데이터를 업데이트할 때 Master는 Slave의 응답을 대기할 필요가 없으므로 비동기화 복제된 데이터베이스 인스턴스는 일반적으로 성능이 뛰어난 편입니다. 또한 Slave를 사용할 수 없어도 Master가 외부에 서비스를 제공하는 데 아무런 문제가 없습니다. 다만 데이터를 Slave에 실시간으로 동기화하는 것이 아니기 때문에 Master는 Slave에 딜레이가 있을 경우 장애가 발생해 낮은 확률로 데이터가 불일치할 수 있습니다.
TencentDB for MySQL 비동기화 복제는 1 마스터 1 슬레이브 아키텍처를 채택합니다.

### 반동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 작업 포함) 요청을 보내면 Master는 업데이트 완료 후 즉시 Slave에 데이터를 복제합니다. Slave가 **데이터를 받아 relay log(실행할 필요 없음)에 write한 후** Master에 완료 정보를 반환할 수 있으며, Master는 반드시 Slave의 완료 정보를 받아야만 응용 프로그램에 응답할 수 있습니다.

데이터 복제 시에만 오류가 발생할 경우(Slave 노드 사용 불가 또는 데이터 복제에 사용한 네트워크에 이상 발생) Master는 애플리케이션에 일시적으로(MySQL은 기본 10초 정도) 응답하지 않으며, 복제 모드를 비동기화 복제로 하향 조정합니다. 데이터 복제가 정상화되면 반동기화 복제로 복구됩니다.
TencentDB for MySQL 반동기화 복제는 1 마스터 1 슬레이브 아키텍처를 채택합니다.

### 강제 동기화 복제
애플리케이션이 데이터 업데이트(insert, update, delete 작업 포함) 요청을 보내면 Master는 업데이트 완료 후 즉시 Slave에 데이터를 복제합니다. Slave는 **데이터를 받아 실행 완료** 후 Master에 완료 정보를 반환할 수 있으며, Master는 반드시 Slave의 완료 정보를 받아야만 응용 프로그램에 응답할 수 있습니다.

Master에서 Slave에 데이터 복제 시 동기화 방식으로 진행되므로 Master가 업데이트될 때마다 Slave에 성공적으로 복제되어야 합니다. 따라서 강제 동기화 복제는 마스터/슬레이브 데이터의 일치성을 최대한 확보할 수 있습니다. 그러나 모든 Master 업데이트 요청이 Slave의 반환에 고도로 종속되므로 Slave가 1대인데 사용이 불가능할 경우 Master의 작업에 큰 영향을 미칩니다.

TencentDB for MySQL 강제 동기화 복제는 1 마스터 2 슬레이브 아키텍처를 채택합니다. Slave 1대만 실행에 성공해도 반환이 가능하므로 Slave가 1대일 때의 문제점을 해결할 수 있으며, 강제 동기화 복제 클러스터의 가용성을 높입니다.


