ユーザーがインスタンスの実行情報を確認、把握しやすくするため、MySQLは豊富な性能監視項目と便利な監視機能（カスタマイズビュー、時間の比較、監視項目のマージなど）を提供します。ユーザーは、[MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインして、インスタンス管理ページの【インスタンスの監視】で確認することができます。
>
>- クラウド監視の[MySQL監視データインターフェース](https://intl.cloud.tencent.com/document/api/248/11006)で、TencentCloud APIによってインスタンスの監視メトリックを取得することもできます。
>- 単一インスタンスのテーブル数が100万を超えると、データベース監視に影響を与える可能性があります。テーブル数の基準を合理的に決め、単一インスタンスのテーブル数が100万を超えないように制御してください。

## 監視をサポートするインスタンスタイプ
MySQLはマスターインスタンス、読取専用インスタンス及びディザスタリカバリインスタンスの監視をサポートしており、各インスタンスのクエリーのために独立した監視ビューを提供します。

## 監視のタイプ
MySQLには、リソース監視、エンジン監視（一般）、エンジン監視（拡張）、デプロイ監視の4種類の監視タイプが含まれ、異なる監視タイプのメトリックを確認することによって、迅速かつ正確にインスタンスの性能及び実行状況を把握することができます。
- **リソース監視**：CPU、メモリ、ディスク及びネットワーク関連の監視データを提供します。
- **エンジン監視（一般）**：接続数、ロック情報、ホットスポットテーブル、スローログなどに関連する監視データを提供し、障害診断と性能の最適化に便利です。
- **エンジン監視（拡張）**：エンジンに関連する豊富な監視メトリックを提供して、データベースに存在する、又は潜在的な問題を最大限に発見するサポートをします。
- **デプロイ監視**：マスター／スレーブ遅延に関連する監視メトリックを提供します。デプロイ監視はホストと予備機に分けられます。
 - デプロイ監視がホストである場合：監視インスタンスがマスターインスタンスである場合、そのマスターインスタンスはどのインスタンスのスレーブインスタンスでもないため、ホストでのレプリケーション関連の監視データは無効です。この場合、そのIO及びSQLスレッドのステータスは未起動です。監視インスタンスがディザスタリカバリインスタンスと読取専用インスタンスである場合に限り、対応するレプリケーション関連の監視データが有効になり、かつIO及びSQLスレッドが起動になります。
 
 - デプロイ監視が予備機である場合：高可用性バージョンのマスターインスタンスとディザスタリカバリインスタンスはデフォルトでマスター／スレーブアーキテクチャであるため、監視インスタンスがマスターインスタンス及びディザスタリカバリインスタンスである場合に限り、その予備機でのレプリケーション関連の監視データは有効になります。これは、マスターインスタンス、ディザスタリカバリインスタンス、及びその非表示スタンバイノードの遅延距離及び時間を反映するために使用されます。予備機での関連する監視データに注意することをお勧めします。マスターインスタンス及びディザスタリカバリインスタンスに障害が生じた場合は、非表示スタンバイノードに対応するその監視インスタンスをすぐにマスターインスタンスにアップグレードさせることができます。
 
![](https://main.qcloudimg.com/raw/183cebeb93cdeaca2dedeb228ab8f0be.png)

## 監視粒度
2018年08月11日以降、MySQLの監視粒度は適応ポリシーを実行しており、現在、監視粒度のカスタム選択をサポートしていません。監視粒度の適応ポリシーは下記の通りです。

| 期間 | 監視粒度 | 適応性 | 保留期間 |
|:-------|:--------|:----|:-----|
| (0h、4h] | 5s | 期間は4時間以内、監視粒度は5秒 | 1日 |
| (4h、2d] | 1min | 期間は4時間超2日以内、監視粒度は1分に調整 | 15日 |
| (2d、10d] | 5min | 期間は2日超10日以内、監視粒度は5分に調整 | 31日 |
| (10d、30d] | 1h | 期間は10日超30日以内、監視粒度は1時間に調整 | 62日 |

>現在、MySQLでは最長30日以内の監視データを確認することができます。



## 監視メトリック
Tencent Cloudのクラウド監視は、インスタンスディメンションからMySQLインスタンスに以下の監視メトリックを提供しています。

>クラウドデータベースの監視メトリックの使用方法については、クラウド監視APIの[MySQLインターフェース](https://intl.cloud.tencent.com/document/product/248/11006)をご参照ください。

| メトリック（中国語） | メトリック（英語） | 単位 |説明|
|---------|---------|---------|---------|
|1秒当たりの実行操作数|qps|回/秒|データベースの1秒当たりの実行SQL数（insert、select、update、delete、replaceを含む）、QPSメトリックは主にTencentDBインスタンスの実際の処理能力を示す|
|スローログ数|slow_queries|回|クエリー時間がlong_query_time秒を超えたクエリーの数|
|全テーブルスキャン数|select_scan|回/秒|実行された全テーブルの検索クエリー数|
|クエリー数|select_count|回/秒|1秒当たりのクエリー数|
|更新数|com_update|回/秒|1秒当たりの更新数|
|削除数|com_delete|回/秒|1秒当たりの削除数|
|挿入数|com_insert|回/秒|1秒当たりの挿入数|
|置換数|com_replace|回/秒|1秒当たりの置換数|
|総リクエスト数|queries|回/秒|set、showなどを含む、実行されたすべてのSQLステートメント|
|現在開いている接続数|threads_connected|セッション|現在開いている接続数|
|接続利用率|connection_use_rate|%|現在開いている接続数/最大接続数   |
|クエリー使用率|query_rate|%|1秒当たりの実行操作数 QPS/推奨される1秒当たりの操作数|
|ディスク使用容量|real_capacity|MB|MySQLデータディレクトリのみを含み、binlog、relaylog、undolog、errorlog、slowlogのログスペースは含まない|
|ディスク容量|capacity|MB|MySQLデータディレクトリ及びbinlog、relaylog、undolog、errorlog、slowlogのログスペースを含む|
|CVM送信トラフィック|bytes_sent|Byte/秒|1秒当たりに送信されたバイト数|
|CVM受信トラフィック|bytes_received|Byte/秒|1秒当たりに受信されたバイト数|
|ディスク利用率|volume_rate|%|ディスク使用容量/インスタンス購入量|
|クエリキャッシュヒット率|qcache_hit_rate|%|クエリキャッシュヒット率|
|クエリキャッシュ使用率|qcache_use_rate|%|クエリキャッシュ使用率|
|待機中のテーブルロック数|table_locks_waited|回/秒|すぐに取得できないテーブルロックの数|
|臨時テーブル数|created_tmp_tables|回/秒|作成された臨時テーブルの数|
|innodbキャッシュヒット率|innodb_cache_hit_rate|%|Innodbエンジンのキャッシュヒット率|
|innodbキャッシュ使用率|innodb_cache_use_rate|%|Innodbエンジンのキャッシュ使用率|
|innodbディスク読込数|innodb_os_file_reads|回/秒|Innodbエンジンが1秒当たりにディスクファイルを読み込んだ回数|
|innodbディスク書き込み数|innodb_os_file_writes|回/秒|Innodbエンジンが1秒当たりにディスクファイルに書き込んだ回数|
|innodb fsyncの数|innodb_os_fsyncs|次/秒|Innodbエンジンが1秒当たりにfsync関数を呼び出した回数|
|Innodbが現在開いているテーブル数 |innodb_num_open_files|個| Innodbエンジンが現在開いているテーブルの数|
|myisamのキャッシュヒット率|key_cache_hit_rate|%|myisamエンジンのキャッシュヒット率|
|myisamのキャッシュ使用率|key_cache_use_rate|%|myisamエンジンのキャッシュ使用率|
|CPU利用率|cpu_use_rate|%|アイドル時間の過剰使用を許可すると、CPU使用率が100％を超える可能性がある|
|メモリ使用率|memory use rate| %|アイドル時間の過剰使用を許可すると、メモリ使用率が100％を超える可能性がある|
|メモリ使用量|memory_use|MB|アイドル時間の過剰使用を許可すると、実際のメモリ使用量は購入規格を上回る可能性がある|
|一時ファイルの数|created_tmp_files|回/秒|一時ファイルが作成された1秒当たりの回数|
|開いているテーブル数||opened_tables|個|インスタンスディメンション|開いているテーブルの個数|
|コミット数|com_commit|回/秒|1秒当たりのコミット回数|
|ロールバック数|com_rollback|回/秒|1秒当たりのロールバック回数|
|作成されたスレッドの数|threads_created|個|接続を処理するために作成されたスレッドの数|
|実行中のスレッド数|threads_running|個|アクティブな（スリープしていない）スレッドの数|
|最大接続数|max_connections|セッション|最大接続数|
|ディスクの一時テーブル数|created_tmp_disk_tables|回/秒|ディスクの一時テーブルが作成された1秒当たりの回数|
|次の行を読み込むリクエストの数|handler_read_rnd_next|回/秒|次の行を読み込むリクエストの1秒当たりの回数|
|内部ロールバック数|handler_rollback|回/秒|トランザクションが1秒当たりにロールバックされた回数|
|内部コミット数|handler_commit|回/秒|1秒当たりのトランザクションのコミット数|
|InnoDBの空ページ数|innodb_buffer_pool_pages_free|個|Innodbエンジンのメモリの空ページ数|
|InnoDBの総ページ数|innodb_buffer_pool_pages_total|ページ|Innodbエンジンのメモリの総ページ数|
|InnoDBの論理読み取り|innodb_buffer_pool_read_requests|回/秒|Innodbエンジンが1秒当たりに完了した論理読み取りリクエスト数|
|InnoDBの物理読み取り|innodb_buffer_pool_reads|回/秒|Innodbエンジンが1秒当たりに完了した物理読み取りリクエスト数|
|InnoDBの読込量|innodb_data_read|Byte/秒|Innodbエンジンが1秒当たりに読み込んだデータのバイト数|
|InnoDBの総読込数|innodb_data_reads|回/秒|Innodbエンジンが1秒当たりにデータを読み込んだ回数|
|InnoDBの総書き込み数|innodb_data_writes|回/秒|Innodbエンジンが1秒当たりにデータを書き込んだ回数|
|InnoDBの書き込み数|innodb_data_written|Byte/秒|Innodbエンジンが1秒当たりに書き込んだデータのバイト数|
|InnoDBの行削除数|innodb_rows_deleted|回/秒|Innodbエンジンが1秒当たりに削除した行数|
|InnoDBの行挿入数|innodb_rows_inserted|回/秒|Innodbエンジンが1秒当たりに挿入した行数|
|InnoDBの行更新量|innodb_rows_updated|回/秒|Innodbエンジンが1秒当たりに更新した行数|
|InnoDBの読込行数|innodb_rows_read|回/秒|Innodbエンジンが1秒当たりに読み込んだ行数|
|InnoDBが行ロックを取得した平均時間|innodb_row_lock_time_avg|ミリ秒|Innodbエンジンの行ロックの平均時間|
|InnoDBが行ロックを待機した回数|innodb_row_lock_waits|回/秒|Innodbエンジンが1秒当たりに行ロックを待機した回数|
|キーキャッシュの未使用ブロック数|key_blocks_unused|個|myisamエンジンの未使用のキーキャッシュブロック数|
|キーキャッシュの使用ブロック数|key_blocks_used|个|myisamエンジンで使用されているキーキャッシュブロック数|
|キーキャッシュのデータブロック読込回数|key_read_requests|回/秒|myisamエンジンが1秒当たりにキーキャッシュブロックを読み込んだ回数|
|ハードディスクのデータブロック読込回数|key_reads|回/秒|myisamエンジンが1秒当たりにハードディスクのデータブロックを読み込んだ回数|
|データブロックのキーバッファ書き込み回数|key_write_requests|回/秒|myisamエンジンが1秒当たりにキーキャッシュブロックに書き込んだ回数|
|データブロックのディスク書き込み回数|key_writes|回/秒|myisamエンジンが1秒当たりにハードディスクのデータブロックに書き込んだ回数|
|マスター／スレーブ遅延距離|master_slave_sync_distance|MB|マスター／スレーブのbinlogの差異|
|マスター／スレーブ遅延時間|	seconds_behind_master|	秒|マスター／スレーブ遅延時間|
|IOスレッドのステータス|	slave_io_running|	ステータス値（0-Yes、1-No、2-Connecting）|IOスレッドの実行状態|
|SQLスレッドのステータス|	slave_sql_running|	ステータス値（0-Yes、1-No）|SQLスレッドの実行状態|
