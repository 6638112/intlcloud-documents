
## 작업 시나리오
본 문서에서는 TencentDB for MySQL 엔진 버전 업그레이드 시 콘솔에서 버전을 업그레이드하는 방법에 대해 소개합니다.
TencentDB for MySQL은 다음 버전의 데이터베이스 엔진 업그레이드를 지원합니다.
- MySQL 5.5에서 MySQL 5.6으로 업그레이드
- MySQL 5.6에서 MySQL 5.7로 업그레이드

>?
>- 데이터베이스 엔진 버전의 다운그레이드는 지원하지 않습니다.
>- 주요 버전 간 업그레이드를 지원하지 않습니다. MySQL 5.5 인스턴스를 MySQL 5.7 또는 상위 버전으로 업그레이드할 경우, 반드시 먼저 MySQL 5.6으로 업그레이드해야 합니다.
>- 현재 MySQL 5.7에서 MySQL 8.0 업그레이드를 지원하지 않습니다. 

## [버전 업그레이드 규칙](id:shengjiguize)
- `create table …  as select …` 구문을 지원하지 않습니다.
- TencentDB for MySQL 5.6, 5.7의 마스터/슬레이브 동기화는 GTID를 기반으로 구현되며, 기본적으로 InnoDB 엔진만 지원합니다.
- MySQL 5.5 버전을 MySQL 5.6 버전으로 업그레이드 시 MyISAM 엔진의 테이블을 InnoDB로 변경합니다. **업그레이드 전 MyISAM을 InnoDB로 변경하시기 바랍니다**.
- 업그레이드 중 TencentDB for MySQL이 slow\_log 테이블을 삭제합니다. 로그 정보를 보관하려면 메인 버전 업그레이드 전에 로그 내용을 저장하시기 바랍니다.
- **업그레이드하려는 버전의 인스턴스에 기타 인스턴스(마스터 인스턴스, 읽기 전용 인스턴스 등)를 연결할 경우, 복사된 데이터의 일치성을 위해 버전 업그레이드가 함께 진행됩니다**.
- TencentDB for MySQL 버전 업그레이드 시 데이터를 이전해야 할 수 있습니다. 오랜 시간이 소요되므로 잠시만 기다려주시기 바랍니다. 사용자의 비즈니스에 영향을 미치지 않으며, 액세스할 수 있습니다.
- 버전 업그레이드 완료 후 인스턴스가 전환될 수 있으므로(MySQL 데이터베이스 연결이 몇 초간 끊김), 프로그램에 자동 재연결 기능을 적용하고 점검 시간 내에 전환되도록 설정하시기를 권장합니다. 자세한 내용은 [인스턴스 점검 시간 설정](https://intl.cloud.tencent.com/document/product/236/10929)을 참조하십시오.
>- 단일 인스턴스의 테이블 수량이 100만 개를 초과하면 업그레이드에 실패할 수 있습니다. 데이터베이스 모니터링에도 영향을 미칠 수 있으므로 테이블 수량을 합리적인 수준으로 유지하고, 단일 인스턴스 테이블 수량은 100만 개를 넘지 않도록 제어하십시오.

## 작업 순서
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb/)에 로그인한 후, 인스턴스 리스트에서 변경할 인스턴스를 선택한 다음 '작업' 열에서 [더보기]>[버전 업그레이드]를 클릭합니다.
>?MySQL 8.0은 상위 버전으로 업그레이드할 수 없습니다.
>
2. 팝업 대화 상자에서 업그레이드가 필요한 데이터베이스 버전을 선택한 후 [업그레이드]를 클릭합니다.
데이터베이스 버전 업그레이드는 데이터 이전과 연관되므로, 업그레이드 완료 시 몇 초간 MySQL 데이터베이스의 연결 끊김이 발생할 수 있습니다. 따라서 업그레이드 실행 시 전환 시간을 [점검 시간 내]로 선택하면 인스턴스 업그레이드 완료 후 다음 [점검 시간] 내에 전환을 실행할 수 있습니다.
>!전환 시간을 [점검 시간 내]로 선택하면 데이터베이스 사양 업그레이드 완료 시 즉시 전환되지 않고 인스턴스의 [점검 시간] 내에 전환이 실행되며, 그전까지 동기화가 유지됩니다. 이로 인해 전체 인스턴스 업그레이드 소요 시간이 길어질 수 있습니다.
>
![](https://main.qcloudimg.com/raw/8a27b736891296d8c64077cf01409f08.png)

## 이슈 질문
#### 업그레이드 전에 TencentDB for MySQL이 자동으로 데이터를 백업하나요?
CDB 일일 실시간 이중 시스템 핫 백업은 데이터 백업 + 로그 백업(binlog)을 기반으로 7일~732일간 손실 없이 복구할 수 있습니다.

#### CDB에서 MySQL 5.7을 MySQL 5.6으로 다운그레이드할 수 있나요?
다운그레이드는 지원하지 않습니다. MySQL 5.6 버전이 필요한 경우 MySQL 5.7 인스턴스를 폐기/반품한 뒤, MySQL 5.6 인스턴스를 다시 구매하시기 바랍니다. 불편을 드려 죄송합니다.

#### 업그레이드 중 마스터/슬레이브 딜레이 문제가 발생할 수 있나요?
마스터 인스턴스 업그레이드 시 데이터를 대조하기 때문에 마스터/슬레이브가 딜레이될 수 있습니다.

#### 버전 업그레이드를 완료하면 인스턴스가 전환될 수 있는데, TencentDB for MySQL 인스턴스를 정상적으로 사용할 수 있나요?
인스턴스의 정상적인 업그레이드 과정은 사용자 이용에 영향을 미치지 않습니다. 그러나 인스턴스 연결이 몇 초간 끊길 수 있으니 프로그램에 자동 재연결 기능을 적용하고, 인스턴스를 점검 시간 내에 전환하도록 설정하시기 바랍니다.

### TencentDB for MySQL 버전 업그레이드에 시간이 얼마나 소요되나요? 업그레이드 진행률은 어디에서 조회할 수 있나요?
데이터베이스의 업그레이드 소요 시간은 데이터베이스 내의 데이터 양 및 데이터 복사 등에 따라 달라지므로 구체적인 시간은 알 수 없습니다.
TencentDB for MySQL 버전 업그레이드 시 데이터를 이전해야 할 수 있습니다. 오랜 시간이 소요되므로 잠시만 기다려주시기 바랍니다. 사용자의 비즈니스에 영향을 미치지 않으며, 액세스할 수 있습니다.

#### 인스턴스가 왜 계속 '업그레이드 전환 대기' 상태인가요?
사용자가 전환 시간을 '점검 시간 내 전환'으로 선택했을 수 있습니다. 업그레이드 완료 후 점검 시간 내에 인스턴스 전환 작업이 진행됩니다.
즉시 전환하려면 인스턴스 리스트의 '작업' 열에서 [즉시 전환]을 클릭하십시오. 연결이 몇 초간 끊길 수 있으니 서비스의 재연결 메커니즘을 확보하시기 바랍니다.
