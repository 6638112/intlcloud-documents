데이터 손실 또는 손상에 대비해 자동/수동 백업을 통해 데이터베이스를 백업할 수 있습니다.

## 백업 개요
### 백업 모드
TencentDB for MySQL의 고가용성 버전과 파이낸스 버전 모두 **자동 백업**, **수동 백업** 두 가지 방식의 데이터베이스 백업을 지원합니다.

### 백업 유형
TencentDB for MySQL 고가용성 버전과 파이낸스 버전은 아래의 두 가지 백업 유형을 지원합니다.
- **물리 백업**, 물리 데이터 전체 복제(자동 백업과 수동 백업 모두 지원)
- **로직 백업**, SQL 명령 백업(수동 백업 지원)
>?
>- 물리 백업 복구 방식은 xbstream으로 언패킹해야 합니다. 자세한 내용은 [물리 백업으로 데이터베이스 복구](https://intl.cloud.tencent.com/document/product/236/31910)를 참조 바랍니다.
>- 단일 인스턴스의 테이블 수량이 100만 개를 초과하면 백업에 실패할 수 있으며 데이터베이스 모니터링에도 영향을 미칠 수 있으므로 테이블 수량을 합리적인 수준으로 적용하시고, 단일 인스턴스 테이블 수량이 100만 개를 넘지 않도록 제어하시기 바랍니다.
>- Memory 엔진 테이블의 데이터는 메모리에 저장되므로 Memory 엔진 테이블은 물리 백업을 사용할 수 없습니다. 데이터 손실을 피하려면 Memory 엔진 테이블을 InnoDB 테이블로 전환하시기를 권장합니다.
>- 인스턴스에 기본 키가 없는 테이블이 대량으로 존재할 경우 백업에 실패할 수 있으며 인스턴스의 고가용성에도 영향을 미칠 수 있으니, 기본 키가 없는 테이블에 기본 키 혹은 2단계 인덱스를 생성하시기 바랍니다.

| 물리 백업의 장점 | 로직 백업의 단점 |
|---------|---------|
| <li>백업 속도가 빠릅니다.<li>스트리밍 백업과 압축을 지원합니다.<li>백업 성공률이 높습니다.<li>백업이 쉽고 효율적입니다.<li>백업을 기반으로 커플링 작업 시 RO 증가, 재해 복구 증가 등이 더 빨라집니다.<li>물리 백업이 완료되는 평균시간은 로직 백업의 1/8 수준입니다.<li>물리 백업 가져오기 속도가 로직 백업보다 약 10배 빠릅니다.| <li>복구 시 SQL을 실행하고 인덱스를 생성해야 하며, 복구 시간이 깁니다.<li>백업 속도가 느립니다. 데이터양이 많을 경우 속도가 더 느려집니다.<li>백업하는 과정에서 인스턴스에 부하를 주며, 마스터/슬레이브의 딜레이가 늘어날 수 있습니다.<li>부동 소수점의 정밀도 정보를 손실할 수 있습니다.<li>다양한 요인(오류 뷰 등)으로 백업에 실패할 수 있습니다.<li>백업을 기반으로 커플링 작업을 진행하며 RO 증가, 재해 복구 증가 등의 작업이 느려질 수 있습니다. |

### 백업 객체
| 데이터 백업 | 로그 백업 |
|---------|---------|
| MySQL 고가용성 버전과 파이낸스 버전: <li>자동 백업은 전체 물리 백업을 지원합니다.<li>수동 백업은 전체 물리적 백업, 전체 로직 백업과 단일 라이브러리 단일 테이블의 로직 백업을 지원합니다.<li>자동 백업과 수동 백업 모두 압축 및 다운로드를 지원합니다. | 데이터베이스의 binlog 로그 파일은 고가용성 버전과 파이낸스 버전을 지원합니다: <li>로그 파일은 인스턴스의 백업 용량을 차지합니다.<li>로그 파일은 다운로드할 수 있으나 압축할 수 없습니다.<li>로그 파일 보관시간을 설정할 수 있습니다.|

## 주의 사항
- 2019년 02월 26일부터 TencentDB for MySQL의 자동 백업은 물리 백업만 지원합니다. 자동 백업 설정은 기본적으로 물리 백업으로 적용되며, 더는 로직 백업은 제공되지 않습니다. 인벤토리를 로직 백업으로 자동 백업한 인스턴스는 차츰 물리적 백업으로 자동 교체됩니다.
해당 교체 작업은 서비스 액세스에 영향을 미치지 않지만, 자동 백업을 선호하는 사용자의 스타일에 영향을 미칠 수 있습니다. 로직 백업을 원하시면 [TencentDB for MySQL 콘솔](https://console.cloud.tencent.com/cdb)에서 수동 백업 모드를 사용하거나 [API 호출](https://intl.cloud.tencent.com/document/product/236/15844)을 통해 로직 백업을 생성할 수 있습니다.
- 로직 백업 혹은 물리 백업 모두 파일이 압축되므로, 일부 파일 다운로드를 사용할 수 없습니다. 따라서, 수동 로직 백업 중의 일부 DB 테이블 백업 기능으로 교체할 수 있습니다. 자세한 내용은 [수동 백업](#manual-backup)을 참조 바랍니다.
- 인스턴스 백업 파일은 백업 용량을 차지하므로 합리적으로 사용하시기를 바라며, 무료 한도를 초과한 백업 용량은 요금이 부과됩니다. 자세한 내용은 [백업 용량 요금 설명](https://intl.cloud.tencent.com/document/product/236/32344)을 참조 바랍니다.
- 비즈니스양이 많지 않은 시기에 백업하시기를 권장합니다.
- 백업이 필요한 파일은 보관시간 초과로 인해 삭제되지 않도록, 필요한 백업 파일은 이른 시일 내에 로컬에 다운로드해두시기 바랍니다.
- 백업 기간에는 테이블 잠금으로 백업에 실패하지 않도록 DDL 작업을 금지합니다.
- 기본 버전의 MySQL 인스턴스는 데이터베이스 백업을 지원하지 않습니다.


## MySQL 데이터 자동 백업
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 뒤 Instance List 페이지에서 인스턴스 이름을 클릭하고, 관리 페이지로 이동하여 [Backup and Restore]>[Auto Backup Settings]를 선택합니다.
![](https://main.qcloudimg.com/raw/69fed1aac393a518bd8cc2ad1fea550f.png)
2. 팝업된 백업 설정 대화 상자에서 각 백업 매개변수를 선택하고 [OK]를 클릭합니다. 매개변수 설명은 다음과 같습니다.
>?
>- [롤백 기능](https://intl.cloud.tencent.com/document/product/236/7276)은 백업 주기와 백업 보관 일자 내의 데이터 백업 + 로그 백업(binlog)을 기반으로, 자동 백업의 빈도수와 보관일을 단축하여 인스턴스 데이터의 롤백 시간 및 범위에 영향을 주므로, 백업 설정의 밸런스를 적절히 조절하시기 바랍니다.
>예시, 백업 주기가 월요일, 목요일로 설정되어 있고 보관 일자가 7일이라면, 7일 이내(데이터 백업 및 로그에 실제 저장 시간이 백업됩니다)의 임의 시점으로 롤백할 수 있습니다.
>- 자동 백업은 직접 삭제할 수 없으며, 백업 보관시간 설정을 통해 만료 시에 자동으로 삭제하도록 할 수 있습니다.
>
<table>
<thead>
<tr>
<th>매개변수</th>
<th>설명</th>
</tr>
</thead>
<tbody>
<tr>
<td>백업 주기</td>
<td>데이터 안전을 위해, 일주일에 최소 2회 백업하도록 설정하시기 바랍니다.</td>
</tr>
<tr>
<td>백업 시간</td>
<td><ul><li>기본 백업 시간은 시스템이 자동 할당한 백업 시작 시간입니다.<li>시간 구간을 사용자가 지정할 수 있으며 비즈니스 양이 많지 않은 시기로 설정하시기를 권장합니다. 백업 시작 시간은 백업이 시작되는 시간으로, 백업이 종료되는 시간이 아닙니다.<br>예를 들어, 02:00-06:00를 선택하면 시스템은 02:00-06:00 시간 내에서 임의의 시점에 백업을 시작하며, 구체적인 시작 시간은 백그라운드 백업 정책과 백업 시스템의 상황에 따라 다를 수 있습니다.
</td>
</tr>
<tr>
<td>데이터 백업 보관시간</td>
<td>데이터 백업 파일은 7일에서 732일까지 보관할 수 있으며, 기본적으로 7일 동안 보관됩니다.</td>
</tr>
<tr>
<td>로그 백업 보관시간</td>
<td>로그 백업 파일은 7일에서 732일까지 보관할 수 있으며, 기본적으로 7일 동안 보관됩니다.<strong>로그 백업 일수는 데이터 백업 일수보다 작거나 같아야 합니다.</strong>  </td>
</tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/a371d4ba960264aa5630b59a3bfe5096.png"  style="margin:0;">


<span id = "manual-backup"></span>
## MySQL 데이터 수동 백업
수동 백업 기능을 통해 사용자 스스로 백업 작업을 시작하도록 허용할 수 있습니다.
>?
>- 수동 백업은 전체 물리 백업, 전체 로직 백업과 단일 라이브러리 테이블 로직 백업을 지원합니다.
>- 수동 백업은 용량을 낭비하지 않도록 백업 리스트에서 백업 용량을 직접 삭제하여 백업 공간을 확보할 수 있으며, 직접 삭제하지 않으면 계속 보관됩니다.
>- 인스턴스가 일일 자동 백업 작업을 실행하는 동안에는 수동 백업을 시작할 수 없습니다.
>
1. Instance List 페이지에서 인스턴스 이름을 클릭하여 관리 페이지에 접속한 뒤, [Backup and Restore]>[Manual Backup] 탭을 선택합니다.
2. 팝업된 백업 설정 대화 상자에서 백업 모드와 객체를 선택하고 [OK]를 클릭합니다.
![](https://main.qcloudimg.com/raw/a16e644f51756b6a98597945e45329cd.png)
>?로직 백업에서 단일 라이브러리 백업 혹은 단일 테이블을 백업하려면 왼쪽의 [Select Tabel]에서 백업할 데이터베이스 혹은 데이터 테이블을 체크하고, 데이터베이스 혹은 테이블을 오른쪽 리스트에 추가해 주세요. 만약 데이터베이스가 아직 없다면, 먼저 데이터베이스 혹은 테이블을 생성하시기 바랍니다.
>
![](https://main.qcloudimg.com/raw/76924e2c76ac348b68ed113d679d6907.png)

## 핵심 질문
#### 1. 백업 보관시간이 지나도 백업을 다운로드하거나 복구할 수 있나요?
만료된 백업 세트는 자동으로 삭제되므로, 다운로드 및 복구할 수 없습니다.
- 수요에 따라 적당한 백업 보관시간을 설정하거나 [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에서 백업 파일을 로컬로 다운로드하실 수 있습니다.
- 이 밖에도, 콘솔에서 인스턴스 데이터를 수동으로 백업하면 계속 저장할 수 있습니다.
>?수동 백업 또한 백업 용량을 차지하므로 별도의 요금이 추가되지 않도록 백업 용량을 합리적으로 사용하시기 바랍니다.

#### 2. 백업을 직접 삭제할 수 있나요?
- 자동 백업은 직접 삭제할 수 없으며, 백업 보관시간 설정을 통해 만료 시에 자동으로 삭제하도록 할 수 있습니다. 
- 수동 백업은 [MySQL 콘솔](https://console.cloud.tencent.com/cdb)의 백업 리스트에서 수동으로 삭제할 수 있으며, 직접 삭제하지 않으면 계속 보관됩니다.

#### 3. 데이터 및 로그 백업을 비활성화할 수 있나요?
비활성화할 수 없습니다. 단, [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에서 백업 빈도를 낮추고, 더는 사용하지 않는 수동 백업 데이터를 삭제해 백업 용량의 점유율을 낮출 수 있습니다.

#### 4. 백업 용량 비용을 절약하는 방법은 무엇인가요?
- 사용하지 않는 수동 백업 데이터를 삭제합니다(수동 백업은 [MySQL 콘솔](https://console.cloud.tencent.com/cdb)의 인스턴스 관리 페이지>백업 및 복구 페이지에서 삭제할 수 있습니다). 
- 비핵심 서비스 데이터의 자동 백업 빈도를 하향 조정합니다.(콘솔에서 백업 주기 및 백업 보관시간을 변경할 수 있으며, 일주일에 최소 2회 백업을 권장합니다).
>?[롤백 기능](https://intl.cloud.tencent.com/document/product/236/7276)은 백업 주기와 백업 보관 일자 내의 데이터 백업 + 로그 백업(binlog)을 기반으로, 자동 백업의 빈도수와 보관일을 단축하여 인스턴스 데이터의 롤백 시간 및 범위에 영향을 주므로, 백업 설정의 밸런스를 적절히 조절하시기 바랍니다.
>
- 비핵심 서비스의 데이터 백업과 로그 백업 저장시간을 단축합니다(백업 보관시간이 7일이면 대부분의 시나리오에 충분합니다).

| 비즈니스 시나리오             | 백업 보관시간                                                 |
| -------------------- | ------------------------------------------------------------ |
| 핵심 서비스             | 7일 - 732일 권장                                              |
| 비핵심, 비데이터류 서비스 | 7일 권장                                                      |
| 보관 서비스             | 데이터 백업 보관시간은 7일로 설정하고, 실제 비즈니스 수요에 따라 수동으로 데이터를 백업하며, 사용 완료 시에는 삭제하시기를 권장합니다. |
| 테스트 서비스             | 데이터 백업 보관시간은 7일로 설정하고, 실제 비즈니스 수요에 따라 수동으로 데이터를 백업하며, 사용 완료 시에는 삭제하시기를 권장합니다. |

