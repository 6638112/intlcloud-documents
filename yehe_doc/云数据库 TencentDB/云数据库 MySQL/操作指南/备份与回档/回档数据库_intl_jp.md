## 操作シナリオ
TencentDBは勝手にユーザーのデータを変更することは一切ありません。ユーザーによるデータ損壊は自動的にロールバックを行いリカバーすることが可能です。ロールバック機能を使用するとTencent Cloudにおけるデータベース又はテーブルに対してロールバック操作を行うことが可能です。ロールバックはデータバックアップとログバックアップ（binlog）に基づくものであり、リアルタイムにデータのロールバックを行うことが可能です。

TencentDBのロールバックは定期イメージとリアルタイムトランザクションの再作成により、TencentDB又はテーブルを指定した時間にロールバックし、すべてのデータのタイムスライスが一致することを保証することができます。その間、元々のデータベース又はテーブルのアクセスは影響されません。ロールバック操作により、元のインスタンスに新しいデータベース又はテーブルが作成されます。ロールバック完了後、新しいデータベースと元のデータベース/テーブルの両方が表示されます。

## 注意事項
- ロールバック機能を自動バックアップに設定されたバックアップ周期と保存期間に関連付け、保存期間内、且つバックアップ周期内のデータバックアップ+ログバックアップ（binlog）に基づいたロールバックを提供します。バックアップ周期の設定については、[MySQLデータの自動バックアップ](https://cloud.tencent.com/document/product/236/35172#.E8.87.AA.E5.8A.A8.E5.A4.87.E4.BB.BD-mysql-.E6.95.B0.E6.8D.AE)をご参照ください。データの安全性を確保するため、自動バックアップに設定されたバックアップ周期として、1週間にMySQLを2回以上バックアップするように設定してください。
 - 例えば、バックアップ周期を月曜日と木曜日、バックアップの保存期間を7日間に設定した場合は、保存期間内の任意の日にロールバックすることができます。
 - 例えば、バックアップ周期を毎日、バックアップの保存期間を10日間に設定した場合は、保存期間内の任意の日にロールバックすることができます。


##　操作手順


1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインします。
2. インスタンスリストでロールバックする一つか複数のインスタンスを選択し、【その他の操作】>【ロールバック】を選択します。
>
>- 1つのインスタンスのみでロールバックを実行する場合は、インスタンス管理ページに移動して、右上の【ロールバック】をクリックします。
>- 同じAPPIDでは同時に5個のロールバックタスクを提出することが可能です。
>
![](https://main.qcloudimg.com/raw/85f08362342f02fb27ded34a487b4090.png)
3. ロールバックするデータベーステーブルを選択し、【次へ：ロールバック時間とデータベーステーブル名の設定】をクリックします。
>
>- 現在、名前に数字、アルファベット、アンダーライン、またはそれらの組み合わせが含まれているテーブルのみをロールバックできますが、名前に特殊文字が含まれているテーブルはサポートされていません。
>- 指定されたテーブルのロールバックモードでは、同じインスタンスは500個までのデータベース又はテーブルを同時にロールバックすることができます。
>- ロールバックしようとするデータベーステーブルが削除された場合は、TencentDBインスタンスにログインしてテーブルを作成してから、コンソールでロールバックを実行する必要があります。
>
![](https://main.qcloudimg.com/raw/6cb2fa4d3e8b0d795bd5bf19f8d69d86.png)
4. ロールバックされたデータベーステーブル名とロールバック時間を設定し、【ロールバック】をクリックします。
>
>- 各インスタンスに一つのロールバック時間しか設定できません。
>- 一括ロールバック時間の設定を選択し、すべてのデータベーステーブルは一括ロールバック時間を基準とします。
>- 単一のテーブルのロールバック時間の設定を選択し、データベーステーブルはそれぞれ設定されたロールバック時間を基準とします。
>- ロールバック後のデータベーステーブル名は64桁以内の英文字、数字、小数点（.）、ハイフン（-）、アンダーライン（_）、$のみをサポートしています。
>
![](https://main.qcloudimg.com/raw/62377981b147bdb453d79631b3557d12.png)
5. 送信後、【操作ログ】>【ロールバックログ】ページに戻り、ロールバックの進捗状況を確認できます。【詳細を見る】をクリックすると、リアルタイムにロールバックログを確認できます。
![](https://main.qcloudimg.com/raw/b5206b3c23d532553fb54dfc4fe7bfd0.png)
6. ロールバック完了後、【データベース管理】>【データベースリスト】ページを選択すると、元のインスタンスでロールバック後の新しいデータベーステーブルが表示されます。
![](https://main.qcloudimg.com/raw/9b939d9a6a7da59092df0051f452b5cd.png)


