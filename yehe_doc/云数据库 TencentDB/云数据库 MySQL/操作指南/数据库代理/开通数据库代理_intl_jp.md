
ここでは、TencentDB for MySQLコンソールを介してデータベースプロキシを有効化する方法をご紹介します。

[データベースプロキシ](https://intl.cloud.tencent.com/document/product/236/42048) はクラウドデータベースサービスとアプリケーションサービスの間に位置するネットワークプロキシサービスであり、アプリケーションサービスがデータベースにアクセスする際に、すべてのリクエストをプロキシするために用いられます。データベースプロキシは自動読み取り/書き込み分離、コネクションプール、コネクション保持などの高度な機能を提供し、可用性が高く、高性能で、運用・保守性を持ち、使いやすくシンプルであるなどの特徴があります。


## 注意事項
- データベースプロキシが現在サポートするリージョン：北京、上海、広州。
- データベースプロキシが現在サポートするバージョン：2ノード、3ノードのMySQL 5.7（カーネルマイナーバージョンは20201230およびそれ以上）、マスターインスタンスのカーネルマイナーバージョンのアップグレードは、関連する読み取り専用インスタンスとディザスタリカバリインスタンスも同時にアップグレードします。 [カーネルマイナーバージョンのアップグレード](https://intl.cloud.tencent.com/document/product/236/36816)をご参照ください。

## 操作手順
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストで、プロキシの有効化が必要なマスターインスタンスを選択し、インスタンスIDまたは「操作」の列の【管理】をクリックし、インスタンス管理ページに進みます。
2. インスタンス管理ページで、【データベースプロキシ】ページを選択し、【今すぐ有効化】をクリックします。
![](https://main.qcloudimg.com/raw/46d9e9b30975b51bee00a16c64f31c8b.png)
3. ポップアップしたダイアログボックスで、仕様ノードを選択し、【OK】をクリックします。
 - ネットワークタイプ：VPCのみをサポートします。デフォルトではマスターインスタンスと一致します。
 - プロキシの仕様：現在は1つの仕様のみサポートします。
 - ノードの個数：プロキシノードの個数。推奨プロキシ個数は、マスターインスタンスと読み取り専用インスタンスのCPUコア数合計の1/8（切り上げ）です。例えば、マスターインスタンスが4コアのCPUで、読み取り専用インスタンスが8コアのCPUの場合、推奨プロキシ数＝(4+8)/8 ≒2となります。
![](https://main.qcloudimg.com/raw/a3d8fafb1930d0298deb9cf2f08e706c.png)
4. アクティブ化成功後、データベースプロキシページで基本情報の確認とプロキシノードの確認を行うことができます。
>?
>- プロキシノードリストの「接続数」を見るか、各プロキシノードのパフォーマンス監視を見ることで、各ノードへのアクセスが偏っているかどうかを判断することができます。各プロキシノードへの接続数が不均衡となっている場合、【リロードバランシング】をクリックして接続を分散させることができます。
>- リロードバランシングはプロキシノードの再起動をトリガーし、再起動中は一時的にサービスが利用できなくなります。 オフピーク時にサービスを再起動することをお勧めします。業務に再接続メカニズムが備わっていることを確認してください。
>
![](https://main.qcloudimg.com/raw/083d38858367fd7fe65e90fb92210178.png)

