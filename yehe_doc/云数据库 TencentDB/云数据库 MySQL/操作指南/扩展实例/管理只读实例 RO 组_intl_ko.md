## 작업 시나리오
TencentDB for MySQL은 1개 또는 다수의 읽기 전용 인스턴스로 구성된 읽기 전용 인스턴스 RO그룹 생성을 지원합니다. 원 마스터 멀티 슬레이브 응용 시나리오에 적용되어 사용자의 데이터베이스 읽기 부하 성능을 대폭 강화할 수 있습니다.

## 전제 조건
- 읽기 전용 인스턴스를 생성하기 전에 먼저 CDB 마스터 인스턴스를 생성해야 합니다. 자세한 내용은 [구매 가이드](https://intl.cloud.tencent.com/document/product/236/5160)를 참조 바랍니다.
- TencentDB for MySQL 사용 전에 데이터베이스를 초기화해야 합니다. 자세한 내용은 [MySQL 데이터베이스 초기화](https://intl.cloud.tencent.com/document/product/236/3128)를 참조 바랍니다.

## 작업 순서

### 읽기 전용 인스턴스 RO그룹 생성
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb/ )에 로그인한 뒤 인스턴스 리스트에서 인스턴스 명칭 혹은 '작업' 열의 [관리]를 클릭하여 상세 정보 페이지를 엽니다.
2. 인스턴스 상세 페이지에서, [인스턴스 아키텍처 그림]의 [읽기 전용 인스턴스 추가]를 클릭하여, 읽기 전용 인스턴스 관리 페이지로 이동합니다.
![](https://main.qcloudimg.com/raw/83e817ae1b9205d6cdf061684f7d3c12.png)
3. 읽기 전용 인스턴스 페이지에서 [생성]을 클릭하여, 읽기 전용 인스턴스를 생성합니다.
4. 구매 페이지에서 CDB 읽기 전용 인스턴스에 적합한 구성을 선택하고, 착오가 없는지 확인한 뒤 [Buy Now]를 클릭하여 읽기 전용 인스턴스를 구매합니다.
> RO그룹 옵션 설정을 [RO그룹 생성]으로 지정할 경우, 구매 인터페이스에 아래와 같이 새로 생성한 RO그룹의 기본 정보를 입력해야 합니다.
>- RO그룹 이름 설정: 단일60자 미만의 중국어, 영어, 숫자, `-`, `_`, `.`를 지원합니다.
>- 딜레이 초과 제거: 제거 정책 실행 여부. 제거된 인스턴스 가중치는 0으로 자동 설정됩니다. 읽기 전용 딜레이가 임계값을 초과하여 제거되면 사용자에게 알림 공지가 발송됩니다. 또한 인스턴스 상태가 서비스 중지 동기화되며, 가중치는 0이 됩니다. 읽기 전용 인스턴스 딜레이 시간이 임계값보다 작을 경우, 다시 RO그룹에 추가됩니다. 동시에 인스턴스가 딜레이 초과 제거 기능을 활성화하는지 관계 없이, 읽기 전용 인스턴스 장애가 제거된 후 인스턴스 복구도 새로 RO그룹에 추가됩니다.
>- 딜레이 임계값: 읽기 전용 인스턴스 설정 딜레이가 임계값을 초과하면 초과된 임계값의 읽기 전용이 RO그룹에서 제거됩니다.
>- 최소 보관 인스턴스 수: 그룹 내에서 보장되어야 하는 인스턴스 하한치로, 현재 읽기 전용 인스턴스 수가 아래 하한과 같거나 적고, 딜레이 시간이 임계값을 초과하면 현재 읽기 전용이 일괄 제거되지 않습니다.
>
>[](https://main.qcloudimg.com/raw/080eae0860b13115d0151f4414c4b63a.png)
>
 - RO그룹 지정
 <table>
  <tr>
    <th width="25%">RO그룹 지정</th>
    <th width="75%">설명</th>
  </tr>
  <tr>
    <td>시스템 자동 할당(미지정)</td>
    <td>한번에 여러 개의 인스턴스를 구매할 경우, 각 인스턴스에 독립된 RO 그룹이 1개씩 할당됩니다. 가중치 할당 방식은 시스템 자동 할당으로 설정됩니다.</td>
  </tr>
  <tr>
    <td>RO그룹 생성</td>
    <td>한번에 여러 개의 인스턴스를 구매할 경우 모두 이 RO그룹에 할당됩니다. 가중치 할당 방식은 시스템 자동 할당으로 설정됩니다.</td>
  </tr>
  <tr>
    <td>기존 RO그룹</td>
    <td>기존 RO 그룹을 1개 지정합니다. 한 번에 다수의 인스턴스를 구입하시면 이 RO 그룹에 할당됩니다. 가중치 분배 방식은 RO그룹 설정과 동일합니다. 만약 RO 그룹이 시스템으로 자동 할당되면 구매 사양에 따라 자동으로 RO그룹을 추가합니다. 사용자 정의 할당일 경우 기본값은 0입니다. <b>동일한 RO 그룹 내부 네트워크 주소가 같기 때문에 VPC 네트워크에서는 동일한 보안 그룹 설정을 공유합니다. RO그룹을 지정하면 구매 시 보안 그룹을 사용자 정의할 수 없습니다.</b></td>
  </tr>
</table>
 - 과금 방식: 읽기 전용 인스턴스는 현재 종량제 과금 방식을 지원합니다.
 - 인스턴스 사양과 필요한 디스크를 선택하십시오.
5. 인스턴스 리스트로 돌아가면 생성된 인스턴트 상태는 '발송 중'이 됩니다. 상태가 '실행 중'으로 전환되면 읽기 전용 인스턴스 생성에 성공한 것입니다.


### 읽기 전용 인스턴스 RO그룹 설정
읽기 전용 RO그룹의 설정 인터페이스에서 읽기 전용 RO그룹의 이름, 딜레이 초과 정책, 초과 임계값, 최소 보관 인스턴스, 읽기 가중치 등 기본 정보를 설정할 수 있습니다.
>
>- RO그룹 내에서 읽기 전용 인스턴스는 다른 규격을 사용할 수 있으며, 읽기 트래픽 가중치를 설정할 수 있습니다.
>- 동일한 RO그룹 내에서 읽기 전용 인스턴스는 다른 만료 시간과 과금 방식을 지원합니다.
>
1. 인스턴스 리스트에서 설정할 읽기 전용 인스턴스 RO그룹의 CDB 마스터 인스턴스를 선택하고, [Operation] 열에서 [관리]를 클릭합니다.
2. [읽기 전용 인스턴스] 탭의 RO그룹 관리 페이지에서 [설정]을 클릭하여 읽기 전용 인스턴스 RO그룹 페이지로 이동합니다.
![](https://main.qcloudimg.com/raw/f03a6fc7e5460181e1e933157b4922cb.png)
3. 읽기 전용 인스턴스 RO그룹 설정 페이지에서는 읽기 전용 인스턴스 RO그룹에 대한 상세 설정만 가능합니다.
![](https://main.qcloudimg.com/raw/94a42aa7ed813d8ba68560c40749998f.png)
   - RO그룹 이름: 단일60자 미만의 중국어, 영어, 숫자, `-`, `_`, `.`를 지원합니다.
   - 딜레이 초과 제거: 제거 정책 실행 여부. 제거된 인스턴스 가중치는 0으로 자동 설정됩니다. 읽기 전용 딜레이가 임계값을 초과하여 제거되면 사용자에게 알림 공지가 발송됩니다.
   - 딜레이 임계값: 읽기 전용 인스턴스 딜레이가 임계값을 초과하면 초과된 임계값의 읽기 전용이 RO그룹에서 제거됩니다.
   - 최소 보관 인스턴스 수: 그룹 내에서 보장되어야 하는 인스턴스 하한치로, 현재 읽기 전용 인스턴스 수가 아래 하한과 같거나 적고, 딜레이 시간이 임계값을 초과하면 현재 읽기 전용이 일괄 제거되지 않습니다.
   - 읽기 가중치 할당: RO그룹은 시스템의 자동 할당 가중치와 사용자 정의 가중치 두 종류의 가중치 설정 방식을 지원합니다. 가중치 입력 범위는 0~100이며, 반드시 정수여야 합니다. 시스템이 자동으로 고성능 I/O 버전 MySQL 인스턴스의 읽기 가중치 값 리스트를 설정합니다.
<table>
  <tr>
    <th>인스턴스 사양</th>
    <th>가중치</th>
  </tr>
  <tr>
		<td>메모리 1000MB</td>
		<td>1</td>
  </tr>
  <tr>
		<td>메모리 2000MB</td>
		<td>1</td>
  </tr>
  <tr>
		<td>메모리 4000MB</td>
		<td>2</td>
  </tr>
	  <tr>
		<td>메모리 8000MB</td>
		<td>2</td>
  </tr>
	  <tr>
		<td>메모리 12000MB</td>
		<td>4</td>
  </tr>
	  <tr>
		<td>메모리 16000MB</td>
		<td>4</td>
  </tr>
	  <tr>
		<td>메모리 24000MB</td>
		<td>8</td>
  </tr>
	  <tr>
		<td>메모리 32000MB</td>
		<td>8</td>
  </tr>
	  <tr>
		<td>메모리 48000MB</td>
		<td>10</td>
  </tr>
	  <tr>
		<td>메모리 64000MB</td>
		<td>12</td>
  </tr>
	  <tr>
		<td>메모리 96000MB</td>
		<td>14</td>
  </tr>
	  <tr>
		<td>메모리 128000MB</td>
		<td>16</td>
  </tr>
	  <tr>
		<td>메모리 244000MB</td>
		<td>26</td>
  </tr>  <tr>
		<td>메모리 488000MB</td>
		<td>50</td>
  </tr>
</table> 
 - 부하 리밸런싱:
 부하 리밸런싱을 비활성화하면 가중치 수정 시 신규 부하에만 적용되고, 기존에 장기간 연결로 액세스했던 읽기 전용 인스턴스를 바꾸지 않아 데이터베이스가 끊기지 않습니다.
  부하 리밸런싱을 활성화하면 데이터베이스 연결이 몇 초간 끊어졌다 다시 연결될 수 있습니다. 새로 추가한 연결은 설정한 가중치 균형에 따라 부하됩니다.

### 읽기 전용 인스턴스 RO 그룹 폐기와 삭제
- RO그룹은 수동 삭제 기능을 제공하지 않습니다.
- RO그룹은 그룹 내의 마지막 읽기 전용 인스턴스가 완전히 폐기되면 자동 삭제됩니다.
- 빈 RO그룹 보관은 지원하지 않습니다.
