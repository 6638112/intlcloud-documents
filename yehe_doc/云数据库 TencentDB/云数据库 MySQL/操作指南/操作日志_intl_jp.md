## 概要
データベースにおいて、時間のかかっているSQL(遅いSQL)のことを「スロークエリ」と呼び、対応するステートメントを「スロークエリステートメント」と呼びます。データベース管理者（DBA）がスロークエリステートメントを解析してスロークエリの発生原因を見つける過程を「スロークエリ解析」と呼びます。

コンソールの【操作ログ】ページで、インスタンスのスローログの詳細、エラーログの詳細、ロールバックログの表示およびスローログのダウンロードを行うことができます。コマンドラインインターフェイス（CLI）またはTencentDB APIを使用してデータベースログを閲覧しダウンロードすることもできます。詳細については、[スロークエリログのクエリ](https://intl.cloud.tencent.com/document/product/236/15845)および[バイナリログのクエリ](https://intl.cloud.tencent.com/document/product/236/15843)をご参照ください。

>?TencentDB for MySQL（Basic Editionを含まない）インスタンスは操作ログ管理機能をサポートしています。
>

#### MySQLでのスロークエリに関する説明
- long_query_time：スロークエリの閾値パラメータで、精度はマイクロ秒クラスまででき、デフォルトは10sです。SQLステートメントの実行時間がこの数値を超過すると、スローログに記録されます。 
long_query_timeパラメータを調整すれば、元のスローログに影響することはありません。例えば、スローログの閾値パラメータが10sであれば、10sを超過したスローログが報告されます。この値を1に変更しても、元々報告していたログはそのまま表示されます。
- log_queries_not_using_indexes：未使用のインデックスの照会を記録するかどうかについて、デフォルトはOFFです。


##　操作手順
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストでインスタンス名または「操作」列の【管理】をクリックして、インスタンス管理画面に進みます。
2. 【操作ログ】画面で、インスタンスのスローログの詳細、エラーログの詳細、ロールバックログを表示したり、スローログをダウンロードしたりできます。
<table>
<thead><tr><th>機能</th><th>説明</th></tr></thead>
<tbody><tr>
<td>スローログの詳細</td><td>1か月以内のデータベースで実行時間が10sを超過したSQLステートメントを記録します</td>
<tr>
<td>スローログのダウンロード</td><td>スローログのダウンロードを提供します</td></tr>
</tr>
<td>エラーログの詳細</td><td>データベース実行エラーのログを記録します</td></tr>
<tr>
<td>ロールバックログ</td><td>ロールバックタスクのステータスと進行状況を記録します</td></tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/460115a1a260cb7437561556c2f8cb9a.png"  style="margin:0;">

3. スロークエリログのダウンロードページで、「操作」カラムの【ダウンロード】をクリックしてスロークエリログをダウンロードします。
4. 表示されたダイアログボックスで、ダウンロードアドレスをコピーして、TencentDBインスタンスと同じVPC内のLinux CVMインスタンスにログインして、wgetコマンドを使ってプライベートネットワークを介して高速、高効率のダウンロードを行うことをお勧めします。
>?
>- ログサイズが0KBになっている場合、ダウンロードすることができません。
>- 【ローカルダウンロード】を選択して直接ダウンロードすることもできますが、時間がかかります。
>- wgetのコマンドフォーマット：wget -c 'ログファイルのダウンロードアドレス' -O カスタムファイル名.log
>
例：
```
wget -c 'http://szx.dl.cdb.tencentyun.com:303/cfdee?appid=1210&time=1591&sign=aIGM%3D' -O test.log
```
