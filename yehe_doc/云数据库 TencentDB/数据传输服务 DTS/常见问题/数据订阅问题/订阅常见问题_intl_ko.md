### 데이터 구독은 여러 개 SDK가 동시에 연결되어 동일한 채널을 소비하도록 지원합니까?
지원하지 않습니다. 동일한 채널에 최대 한 개의 SDK만 연결하고 데이터를 소비할 수 있습니다. 사용자가 여러 개의 다운스트림으로 동일한 DB 테이블을 구독해야 하는 경우, 여러 개의 채널을 구축하여 문제를 해결할 수 있습니다.

### 데이터 구독은 한 개의 SDK가 동시에 여러 개 채널을 연결하도록 지원합니까?
지원합니다. 한 개의 SDK에서 동시에 여러 개의 채널을 소비할 수 있습니다.

### 오류: already has sdk on this channel이라는 SDK 실행 오류가 보고되었습니다. 원인이 무엇입니까?
하나의 채널은 한 개의 SDK에만 연결할 수 있습니다. 연결이 추가되면 이 오류가 보고됩니다. 이때 프로그램이 완전히 로그아웃되었는지 확인해야 합니다. 확인 후 다시 연결하고 여전히 동일한 오류가 보고되면 재시작 시간의 간격을 다소 길게 설정할 수 있습니다(예: 20초).

### 데이터 구독이 증분 데이터를 실시간으로 구독할 때 새로 추가된 데이터는 새로운 데이터를 참조합니까, 아니면 수정된 데이터를 포함합니까?
구독할 수 있는 증분 데이터에는 모든 추가, 삭제, 수정(DML) 및 구조 변경(DDL)이 포함됩니다.

### TencentDB 인스턴스와 로컬 데이터베이스의 테이블 구조는 동일하지만 인덱스는 다릅니다. 데이터 구독 기능을 사용하여 실시간 동기화할 수 있습니까?
가능합니다. 데이터 구독에서 데이터 변경만 구독할 경우 양쪽 인덱스가 다른 점은 영향을 주지 않습니다. 구조 변경을 구독하고 TencentDB 인스턴스에 인덱스 변경이 관련된 경우, 양쪽 인덱스가 다르기 때문에 구조 변경은 로컬 소비에 실패할 수 있습니다.

### 데이터 구독 채널이 소비 장소를 수정하지 못합니다. 원인이 무엇입니까?
장소 수정 오류 시 인터페이스에 해당 알림이 표시됩니다. 일반적으로 구독 채널 다운스트림에서 소비가 있기 때문입니다. 먼저 DTS 콘솔에서 소비 출처 IP를 조회하고 다운스트림 SDK가 데이터를 소비하고 있는지 조회합니다. 그럴 경우 먼저 다운스트림 소비를 중단하고 소비 장소를 다시 수정해야 합니다.

### 데이터가 정상적으로 소비되고 있는지 어떻게 확인합니까?
데이터 입력 상황에서(또는 데이터를 모두 소비하지 않은 경우) 데이터가 정상적으로 소비되고 있으면 콘솔의 소비 장소가 정상적으로 마이그레이션됩니다.

### 데이터 구독의 소비자 측 기록에 ack가 없는 상황에서 SDK가 재시작된 후 중복 데이터를 수신하는 이유는 무엇입니까?
SDK의 message에 ACK가 없으면 SDK는 계속해서 메시지를 가져오게 됩니다. SDK 안에 캐시가 가득 쌓이면 SDK는 더 이상 새로운 메시지를 수신하지 않습니다. 이때 서버가 저장한 소비 장소는 ACK가 있기 전의 최종 message 장소가 됩니다.
SDK가 재시작할 때 메시지가 유실되지 않도록 서버는 ACK가 없는 바로 앞의 message에 해당하는 장소부터 다시 데이터를 전송하게 됩니다. 따라서 SDK는 이때 일부 메시지를 중복해서 수신하게 됩니다.

### SDK가 로그아웃한 후 며칠 뒤 다시 실행할 경우 데이터를 구독할 수 없습니까? 오류: Maybe checkpint is too old?
데이터 구독 채널에서 데이터를 보관하는 기간은 1일입니다. [현재 시간 -1일, 오늘 시간]부터 구독 채널은 만료된 데이터를 삭제하게 됩니다. 따라서 이전에 SDK가 로그아웃할 때 마지막 소비 데이터의 시간에 해당하는 데이터가 현재 구독 채널의 유효 데이터 범위 내에 있지 않을 경우, 이 소비 장소에 해당하는 데이터를 구독할 수 없습니다. 이 문제를 해결하기 위해 SDK를 실행하기 전에 먼저 소비 장소를 수정하여 소비 장소가 유효한 데이터 범위 내에 있도록 해야 합니다.

### SDK가 정상적으로 데이터를 가져오는 과정에서 갑자기 멈춰서 데이터를 구독할 수 없게 되었습니다. 재시작 후 다시 일부를 소비하다가 또 멈추는 이유는 무엇입니까?
이런 상황은 대부분 SDK 코드가 ackAsConsumed 인터페이스를 호출하여 소비 장소를 보고하지 않아 발생한 것입니다. SDK 내부에 캐시 용량을 제한적으로 설정했기 때문에 ackAsConsumed를 호출하여 장소를 보고하지 않으면 이 캐시 용량 데이터는 삭제되지 않습니다. 캐시가 꽉 차면 새로운 데이터를 가져올 수 없어 SDK가 멈추게 되고 데이터를 구독할 수 없는 현상이 나타납니다.
>!BEGIN 및 COMMIT 메시지를 포함하여 여기에 있는 모든 메시지는 소비를 위해 확인되어야 합니다. 물론 서비스 로직이 관여하지 않을 수 있는 메시지도 포함됩니다.

### SDK가 구독하는 데이터가 완전한 트랜잭션인지 어떻게 확인할 수 있습니까? 제공한 소비 장소에 따라 트랜잭션 중간의 record를 가져옵니까?
그렇지 않습니다. 사용자가 지정한 소비 장소 또는 이전 소비 장소에 근거하여 서버는 이 소비 장소에 해당하는 전체 트랜잭션의 시작 위치를 검색하게 됩니다. 전체 트랜잭션 헤더의 시작부터 다운스트림 SDK로 데이터를 전송하므로 완전한 트랜잭션임을 확인할 수 있습니다.

### TencentDB 마스터/슬레이브 스위치와 마스터 데이터베이스 재시작 시 데이터 구독에 문제가 발생하거나 데이터가 손실될 수 있습니까?
문제가 발생하지 않습니다. TencentDB 인스턴스에 마스터/슬레이브 스위치와 재시작이 발생할 때 데이터 구독은 자동으로 전환됩니다. SDK의 경우 이 과정은 투명하게 이뤄집니다.

### SDK 실행 시 Do DTS authentication fail, caused by: get channel info from msg failed 오류 보고가 발생합니다. 원인이 무엇입니까?
입력한 매개변수 ip, port, secretId, secretKey, channelId가 일치하는지 확인해야 합니다.

### SDK 실행 시 secretId 보고에는 권한이 없습니까?
기본적으로 서브 계정에는 권한이 없습니다. 루트 계정이 서브 계정에 name/dts:AuthenticateSubscribeSDK 작업 권한을 부여하거나 DTS의 모든 작업 권한 QcloudDTSFullAccess를 부여해야 합니다.
>?QcloudDTSFullAccess 정책은 사용자가 자체적으로 생성해야 합니다. 현재 액세스 서비스는 QcloudDTSFullAccess를 사전에 생성하지 않습니다.

- 모든 채널에 대해 SDK 액세스 권한을 부여합니다.
```
{
    "version": "2.0",
    "statement": [
        {
            "action": [
                “dts:AuthenticateSubscribeSDK”
            ],
            "resource": "*",
            "effect": "allow"
        }
    ]
}
```
- 지정한 channel에 대해 SDK 액세스 권한을 부여합니다.
```
{
    "version": "2.0",
    "statement": [
        {
            "action": [
                “dts:AuthenticateSubscribeSDK”
            ],
            “resource”: “qcs::dts:::channel/{channelId}”,
            "effect": "allow"
        }
    ]
}
```


### 데이터 구독에서 중복 데이터를 받을 수 있습니까?
정상적인 소비 중에는 그렇지 않습니다. SDK가 비정상적으로 로그아웃되면 가장 마지막에 확인한 장소 정보가 제때에 보고되지 않아 다음 실행 시 중복 데이터를 받을 수 있습니다. 이런 상황이 발생할 확률은 매우 적습니다.
전체 트랜잭션이 확인되지 않은 경우 다음 실행 시 이 트랜잭션의 헤더부터 다시 가져오지만, 이런 경우 중복 데이터라고 볼 수 없습니다. SDK의 핵심 로직은 트랜잭션의 무결성을 보증합니다. 

### 하나의 데이터 구독 인스턴스가 여러 개의 TencentDB 인스턴스를 구독할 수 있습니까?
여러 개를 구독할 수 없습니다. 현재 하나의 데이터 구독 인스턴스는 하나의 TencentDB 인스턴스만 구독할 수 있습니다.

### SDK 실행 과정에서 OOM이 발생하면 어떻게 합니까?
사양이 더 좋은 호스트를 선택합니다. 한 개의 SDK가 고속 상태로 안정적으로 실행될 때, CPU 리소스 소모는 싱글코어 이하이고 메모리 사용은 1.5GB 이하입니다.
