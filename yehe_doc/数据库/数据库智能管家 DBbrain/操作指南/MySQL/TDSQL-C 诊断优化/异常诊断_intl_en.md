## Feature Description

The exception diagnosis feature provides you with real-time performance monitoring, health inspections, and failure diagnosis and optimization, so that you can intuitively know the real-time operation status of database instances, locate newly appeared performance exceptions in real time, and optimize the system based on the optimization suggestions. Exception diagnosis provides real-time and historical view modes.

## Overview

Log in to the [DBbrain console](https://console.cloud.tencent.com/dbbrain/analysis) and select **Performance Optimization** on the left sidebar. On the displayed page, select a database type and an instance at the top, and select the **Exception Diagnosis** tab.

![](https://qcloudimg.tencent-cloud.cn/raw/46142d574bdd2899c13d51c88457d7ff.png)

## Viewing Monitoring Information
The **Exception Diagnosis** tab displays **CPU Utilization**, **Memory Utilization**, **Inbound Traffic**, **Outbound Traffic**, and **Health Score**. To view details on disk utilization, click **Details** in the top-right corner. AI-based health scores can reflect the actual status of your databases.

## Viewing Diagnosis Information
- The **Real-Time Diagnosis** or **Diagnosis Records** section displays the current instance's real-time or historical information about the number of running threads, CPU utilization, and diagnosis events.
- The **Diagnosis Prompt** section displays the overview information of diagnosis event history, including **Level** (**Healthy**, **Note**, **Alarm**, **Serious**, or **Critical**), **Start Time**, **Diagnosis items**, and **Duration**. DBbrain performs health inspections on the instance once every ten minutes.

#### Viewing diagnosis details
1. Log in to the [DBbrain console](https://console.cloud.tencent.com/dbbrain/analysis) and select **Performance Optimization** on the left sidebar. On the displayed page, select a database type and an instance at the top, and select the **Exception Diagnosis** tab.
2. In the **Real-Time Diagnosis** or **Diagnosis Records** section, select a time range and zoom in the view by using the mouse wheel. You can click **View Details** or click an item in the **Diagnosis Prompt** section to enter the **Diagnosis Details** page.
3. Click a diagnosis event in the view to display the event details.
   - Event Details: Include the **Diagnosis items**, **Time Range**, **Risk Level**, **Duration**, and **Overview**.
   - Description: Includes problem snapshots and performance trends of the exception or health inspection event.
   - Intelligent Analysis: Analyzes the root cause of the performance exception to help you locate the specific operation.
   - Optimization Suggestion: Provides optimization suggestions, including but not limited to SQL optimization (index and rewrite), resource configuration optimization, and parameter fine-tuning.
Click **Optimization Comparison** on the **Optimization Suggestion** tab. In the pop-up window, you can view the SQL statement's execution plan, index advice, table structure, and performance before and after SQL optimization.
The performance of an optimized SQL statement is estimated based on the analysis of the statistics of database tables related to the statement, the OPTIMIZER_SWITCH configuration, and the index selectivity. A chart is used to visually show the decrease in the performance. You can also compare the execution plans before and after SQL optimization to further verify the optimization results.

#### Ignoring/Unignoring an alarm

- You can click **Ignore** to ignore an alarm. Then, other diagnosis item alarms of the instance generated by the same root cause will also be ignored. Ignored alarms will be grayed out.
>?Only diagnosis item alarms that are not generated by health inspections can be ignored or unignored.

- You can click **Unignore** to unignore an ignored alarm. Then, other diagnosis item alarms of the instance generated by the same root cause will also be unignored. Ignored diagnosis items are not displayed by default.


1. Log in to the [DBbrain console](https://console.cloud.tencent.com/dbbrain/analysis) and select **Performance Optimization** on the left sidebar. On the displayed page, select a database type and an instance at the top, and select the **Exception Diagnosis** tab.
2. In the **Diagnosis Prompt** section, hover over an alarm to display the **Ignore** button and click it. You can click **Ignore** or **Unignore** on the row of an alarm to ignore or unignore it and other alarms generated by the same root cause. 
Or, go to the **Event Details** page and click **Ignore** or **Unignore** in the top-right corner.  
## Viewing SQL and Slow SQL Information
- The **Real-Time SQL** or **Historical SQL** section displays the overall information and distribution of requests made to the instance, including the trends of total requests as well as SELECT, REPLACE, INSERT, DELETE, and UPDATE requests.
- The **Real-Time Slow SQL** or **Historical Slow SQL** section displays the trends of slow SQL statements (slow logs) and CPU utilization. You can click **View Details** in the top-right corner to enter the **Slow SQL Analysis** page and view analysis details.

>?For self-built database instances accessed directly, as server resource monitoring metrics cannot be collected, some features may not be displayed. We recommend you access such instances through the Agent.
>

