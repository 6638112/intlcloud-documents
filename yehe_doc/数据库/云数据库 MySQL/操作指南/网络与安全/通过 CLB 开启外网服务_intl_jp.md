TencentDB for MySQLは、プライベートネットワークとパブリックネットワークの2つのアドレスタイプをサポートしています。デフォルトでは、インスタンスに内部的にアクセスするためのプライベートネットワークアドレスを提供します。パブリックネットワークにアクセスする必要がある場合は、パブリックネットワークアドレスを有効にした後、LinuxまたはWindows CVMを介してアクセスするインスタンスに接続されることに加えて、Cloud Load Balancer（CLB）を介してパブリックネットワークサービスを有効にしてアクセスすることもできます。CLBを介してパブリックネットワークサービスを有効にするには、セキュリティグループルールを設定する必要があります。

以下、CLBを介してパブリックネットワークサービスを有効にして、MySQL workbenchを介してインスタンスに接続される方法について、説明します。

##  前提条件
バックエンドサービス機能の利用を申請しました。
1. [CLBクロスリージョンバインディング2.0申請ページ](https://cloud.tencent.com/apply/p/y72ehzwbwzk)に進みます。
2. 必要事項をご記入の上、申請を提出します。
3. ベターテスト申請を提出した後、[CLBへチケットをサブミット](https://console.cloud.tencent.com/workorder/category?level1_id=6&level2_id=163&source=14&data_title=%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%20CLB&level3_id=1068&radio_title=%E9%85%8D%E9%A2%9D/%E7%99%BD%E5%90%8D%E5%8D%95&queue=96&scene_code=41669&step=2)し、対応する開始タイプをアカウントに追加します。
 - CLBインスタンスとMySQLインスタンスが同じVPCにある場合：CLB_IP_VPCGWとCLB_IP_LBタイプを追加します。
 - CLBインスタンスとMySQLインスタンスが異なるVPCにある場合：CLB_IP_Userタイプを追加します。

## 手順1：CLBの新規購入
>?TencentDB for MySQLと同じリージョンにCLBインスタンスがある場合、購入する必要はありません。
>
[CLB購入ページ](https://buy.cloud.tencent.com/clb)に進み、構成を選択してから**今すぐ購入**をクリックします。
>!
>- リージョンは、TencentDB for MySQLが配置されているリージョンを選択する必要があります。
>- ネットワークは、データベースと同じまたは異なるVPCを選択できます。

## 手順2：CLBの設定
CLBの設定は、同じVPCのシナリオと異なるVPCのシナリオに分けられます。以下、それぞれ紹介します。

### シナリオ1：CLBインスタンスとMySQLインスタンスが同じVPCにある
1. VPC間のアクセス機能を有効にします（有効にすると、CLBは他のプライベートネットワークIPへのバインディングをサポートします）。
a. [CLBコンソール](https://console.cloud.tencent.com/clb/instance)にログインし、リージョンを選択し、インスタンス管理リストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
b. **基本情報**ページの**バックエンドサービス**で、**設定をクリック**をクリックします。
C. ポップアップ表示されたダイアログで**サブミット**をクリックして有効にすることができます。

2. パブリックネットワークリッスンポートを設定します。
a. [CLBコンソール](https://console.cloud.tencent.com/clb/instance)にログインし、リージョンを選択し、インスタンス管理リストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
b. インスタンス管理ページで、**監視装置（リスナー）管理**ページを選択し、**TCP/UDP/TCP SSLリスナー**の下方で、**新規作成**をクリックします。
c. ポップアップ表示されたダイアログで、手順に従って設定を実行してから、**サブミット**をクリックして作成を完了できます。

### シナリオ2：CLBインスタンスとMySQLインスタンスが異なるVPCにある
1. VPC間のアクセス機能を有効にします（有効にすると、CLBは他のプライベートネットワークIPへのバインディングをサポートします）。
a. [CLBコンソール](https://console.cloud.tencent.com/clb/instance)にログインし、リージョンを選択し、インスタンス管理リストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
b. **基本情報**ページの**バックエンドサービス**で、**設定をクリック**をクリックします。
c. ポップアップ表示されたダイアログで**サブミット**をクリックします。
d. サブミット後、**バックエンドサービス**で、**SNAT IPの追加**をクリックします。
e. ポップアップ表示されたダイアログで、**サブネット**を選択してから、IPがアサインされた**追加**をクリックし、アサイン方法は、自動的に入力するか、アサインされたIPを手動で入力できます。完了したら**保存**をクリックします。
2. パブリックネットワークリッスンポートを設定します。
a. [CLBコンソール](https://console.cloud.tencent.com/clb/instance)にログインし、リージョンを選択し、インスタンス管理リストでインスタンスIDをクリックして、インスタンス管理ページに進みます。
b. インスタンス管理ページで、**監視装置（リスナー）管理**ページを選択し、**TCP/UDP/TCP SSLリスナー**の下方で、**新規作成**をクリックします。
c. ポップアップ表示されたダイアログで、手順に従って設定を実行してから、**サブミット**をクリックして作成を完了できます。

## 手順3：MySQLインスタンスへのバインディング
1. リスナーを作成したら、**リスナー管理** ページで、作成したリスナーをクリックし、右側に表示される**バインディング**をクリックします。
2. ポップアップ表示されたダイアログで、ターゲットタイプを**その他のプライベートネットワークIP**として選択し、MySQLインスタンスのIPアドレスとポートを入力し、**確認**をクリックしてバインディングを完了させます。
>!ログインアカウントは、標準アカウント（帯域幅をシフトアップ）である必要があります。バインディングできない場合は、[作業依頼書サブミット](https://console.cloud.tencent.com/workorder/category)して対処を協力します。
>

## 手順4：MySQLセキュリティグループの設定
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb/instance)にログインし、リージョンを選択し、インスタンスリストでインスタンスIDまたは**操作**列の**管理**をクリックして、インスタンス管理ページに進みます。
2. インスタンス管理ページで、**セキュリティグループ**ページを選択し、**セキュリティグループの設定**をクリックします。セキュリティグループ設定ルールは、すべてのポートをインターネットにオープンして、外部IPがセキュリティグループにアクセスできるように確認することです。詳細の設定方法については、[セキュリティグループの設定](https://intl.cloud.tencent.com/document/product/236/14470)をご参照ください。
![](https://staticintl.cloudcachetci.com/yehe/backend-news/I4a8207_37.png)

## 手順5：MySQL Workbenchクライアントによるインスタンスへの接続
1. MySQL Workbenchをインストールします。公式ダウンロードアドレスは、[MySQL Workbench](https://dev.mysql.com/downloads/)ダウンロードページをご参照ください。
 1. ダウンロードページに進んでから、**MySQL Workbench**をクリックします。
 2. ページにジャンプした後、Windows (x86, 64-bit), MSI Installer後に**Downloads**をクリックします。
 3. **No thanks, just start my download**をクリックします。
2. インストール完了後、MySQL Workbenchを開いてMySQL Connections後にプラス記号をクリックして、接続するインスタンス情報を追加します。
![](https://qcloudimg.tencent-cloud.cn/raw/1bdd5024d708284fd8dc06b2177e0ea6.png)
3. ポップアップ表示されたダイアログで、以下の設定が完了したら、**ok**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/ec8f7b944542bc28721446a1e2dbede5.png)
<table>
<thead><tr><th>パラメータ</th><th>説明</th></tr></thead>
<tbody><tr>
<td>Connection name</td>
<td>この接続に名前を付けます。</td></tr>
<tr>
<td>Connection Method</td>
<td>接続方法は、Standard（TCP/IP）を選択します。</td></tr>
<tr>
<td>Hostname</td>
<td>CLBインスタンスのアドレスを入力します。CLBインスタンスの詳細ページの基本情報から、VIP情報をクエリーできます。</td></tr>
<tr>
<td>Port</td>
<td>CLBインスタンスのポートを入力します。CLBインスタンスの詳細ページの&gt;リスナー管理から、TCPポート番号をクエリーできます。</td></tr>
<tr>
<td>Username</td>
<td>接続するMySQLインスタンスのアカウント名を入力します。インスタンス管理ページ&gt;データベース管理&gt;アカウント管理から作成したアカウント。</td></tr>
<tr>
<td>Store in Vault...</td>
<td>接続するMySQLインスタンスのアカウントのパスワードを入力して、このパスワードを保存します。Usernameにアカウントに対応するパスワードを入力します。</td></tr>
</tbody></table>
4. MySQL Workbenchのホームページに戻り、作成した直後の接続するインスタンス情報をクリックして、MySQLインスタンスに接続します。
![](https://qcloudimg.tencent-cloud.cn/raw/04cb6e563f25bedcaad235be50890aec.png)
5. 接続成功後のインターフェースは以下の通りです。
![](https://qcloudimg.tencent-cloud.cn/raw/ad6c60db6691f5b2f825d36362877fe7.png)
