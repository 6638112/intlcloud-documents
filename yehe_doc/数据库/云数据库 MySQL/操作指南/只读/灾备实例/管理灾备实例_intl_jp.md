## 概要
サービスの継続提供やデータに対する高い信頼性、あるいはモニタリングを必要とするケースでは、MySQLは、クロスリージョンのディザスタリカバリインスタンスを提供し、低コストでサービスの継続提供能力を引き上げながら、データの信頼性を向上させます。
>?ディザスタリカバリインスタンスはメインインスタンスと同じ料金体系です、詳細については、[製品の定価](https://buy.intl.cloud.tencent.com/price/cdb)をご参照ください。

## 機能特徴
- 独立したデータベース接続アドレスを使用すると、ディザスタリカバリインスタンスは、デバイスの冗長化コストを抑えながら、再寄りアクセスやデータ分析などの際に、読み取りアクセス機能を提供できます。
- マスター/スレーブの高可用性アーキテクチャの使用により、データベースにおけるシングルポイントリスクのリスクを回避します。
- ディザスタリカバリインスタンスは、プライベートネットワークの専用回線を使用して同期します。同期レイテンシーが低く、安定性がより高くい。リンク同期の品質がパブリックネットワークよりもはるかに優れています。。
- 現在、プロモーション期間中につき、専用回線の使用量は無料です。商業化料金は別途通知されます。

#### 稼働の仕組み
- MySQLがディザスタリカバリデータベースとして使用されるケースにおいて、ディザスタリカバリインスタンスは、マスターインスタンスデータベースのバックアップになります。
- マスターインスタンスが変更されると、変更されたログ情報がディザスタリカバリインスタンスにコピーされ、ログの再生によってデータの同期が実現されます。
- マスターインスタンスに障害が発生した場合、ディザスタリカバリインスタンスを数秒以内にアクティブ化させ、読み書きの全機能をリカバーさせられます。

## 機能の制限
- ディザスタリカバリインスタンスの購入は、メモリ1GB、ハードディスク50GB以上の仕様、かつMySQL 5.6以降のバージョンであるInnoDBエンジンの高性能マスターインスタンスに対してのみサポートしています。マスターインスタンスがこの仕様よりも低い場合は、マスターインスタンスの仕様をアップグレードする必要があります。また、マスターインスタンスでGTID機能が有効になっていることを確認してください。
>?GTIDが有効になっていない場合は、[コンソール](https://console.cloud.tencent.com/cdb/)のインスタンスの詳細ページから有効化できます。GTIDの有効化は時間を要し、インスタンスに数秒の瞬断が生じるため、ビジネストラフ中に操作し、データベースにアクセスするプログラムに再接続メカニズムを追加することをお勧めします。
- ディザスタリカバリインスタンスの最低動作環境は、メモリ1GB、ハードディスク50GB、マスターインスタンスで使用される1.1倍以上のストレージ容量です。
- 1つのマスターインスタンスにつき、作成可能なディザスタリカバリインスタンスは最大1つです。ディザスタリカバリインスタンスが隔離状態にある間も、新たに作成することはできません。
- ディザスタリカバリインスタンスは現在、プロジェクトの移行、ロールバック、SQL操作、文字セットの変更、アカウント管理、ポートの変更、データインポート、ロールバックログ、読み取り専用インスタンス機能をサポートしません。

## 操作手順
### ディザスタリカバリインスタンスの作成
### 手順1：ディザスタリカバリインスタンスの作成
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb/)にログインし、インスタンスリストでインスタンスIDまたは**操作**カラムの**管理**をクリックして、詳細ページに進みます。
2. インスタンス詳細ページの基本情報にて、GTID機能が有効であることを確認し、インスタンスアーキテクチャ図で**ディザスタリカバリインスタンスの追加**をクリックして、ディザスタリカバリインスタンスの購入ページに進みます。
![](https://qcloudimg.tencent-cloud.cn/raw/3535c0274c3dfa18134ccc735edd0f46.png)
3. 購入ページにて、ディザスタリカバリインスタンスの**料金モード**、**リージョン**、**同期ポリシー**等の基本情報を設定します。
 - 同期ポリシーが**すぐに同期**の場合、データはディザスタリカバリインスタンスが作成された直後に同期されます。
4. 誤りのないことを確認したら、**今すぐ購入**をクリックすると、ディザスタリカバリインスタンスが出荷されます。
5. インスタンスリストに戻り、インスタンスの状態が**実行中**になれば、それ以降の操作に進むことができます。

### ディザスタリカバリインスタンスの管理
- **ディザスタリカバリインスタンスの確認**
ディザスタリカバリインスタンスは、所在リージョンで確認できます。インスタンスリストからそのリージョンにあるすべてのディザスタリカバリインスタンスを調べることができます。
![](https://qcloudimg.tencent-cloud.cn/raw/096486c7562d5385bfd50a187f85b307.png)
- **従属関係の確認**
各ディザスタリカバリインスタンスまたはマスターインスタンスの右側にあるアイコンをクリックすると、従属関係を確認できます。
![](https://qcloudimg.tencent-cloud.cn/raw/89d342733d4c2264dd5dc00a1c7d4143.png)
![](https://qcloudimg.tencent-cloud.cn/raw/b403e312c47c98d79f1015c6e821082d.png)
- **同期ディレーの確認**
マスターインスタンスとディザスタリカバリインスタンスとの間の同期ディレーは、ディザスタリカバリインスタンスのインスタンス詳細ページの上部で確認できます。
![](https://qcloudimg.tencent-cloud.cn/raw/053c38735dd3dd5b7e46d5c82687dd09.png)
- **ディザスタリカバリインスタンスの機能**
ディザスタリカバリインスタンスは、インスタンスの詳細、インスタンスのモニタリング、バックアップの管理およびログスロークエリ機能を提供します。

### ディザスタリカバリインスタンスからマスターインスタンスへのアップグレード
ディザスタリカバリインスタンスをマスターインスタンスに切り替える必要がある場合は、コンソールでディザスタリカバリインスタンスをマスターインスタンスに手動で切り替えることができます。
1. [インスタンスリスト](https://console.cloud.tencent.com/cdb)で、マスターインスタンスにアップグレードするディザスタリカバリインスタンスを選択して、インスタンスIDをクリックし、インスタンス管理ページに進みます。
2. インスタンス管理ページで、右上にある**マスターインスタンスへの切り替え**をクリックすると、ディザスタリカバリインスタンスをマスターインスタンスにアップグレードできます。切り替え後、元のマスターインスタンスとの同期接続が切断され、インスタンスデータベースのデータ書き込み機能とMySQLの全機能がリカバーされます。
>!同期接続が切断された後は再接続できませんので、慎重に操作してください。
> 
![](https://qcloudimg.tencent-cloud.cn/raw/5eb3f1f08b46d4c20ab3b4038309ab03.png)

