TencentDB for MySQLは、バックアップファイルを別のリーションに保存するためのクロスリージョンバックアップ機能を提供します。これにより、データの信頼性を向上させながら、ユーザーの監視管理とディザーストリカバリー機能を向上させることができます。このドキュメントではクロスリージョンバックアップ機能を説明します。

>?クロスリージョンバックアップ機能を使用する場合は、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請を行ってください。

## 背景情報
データは企業運営の重要な構成要素であり、情報化が利便性をもたらすと同時に、電子データやストレージ情報が毀損・紛失しやすいという特徴も現れています。一方、自然災害、システム障害、従業員の誤操作、ウイルス感染について、いずれかの事故によって企業の運営が中断し、壊滅的な被害が出る可能性があります。したがって、コアデータの安全性と整合性を確保することは、各企業が考慮しなければならないことです。

TencentDB for MySQLは、クロスリージョンバックアップ機能を提供し、バックアップファイルを他の地域に保存することで、自然災害やシステム障害などによるデータ破損を最小限に抑えることができます。また、クロスリージョンバックアップにより、データベース・リカバリの高可用性を実現し、データの可用性と安全性、オフサイトでのバックアップリカバリ、オフサイトでのディザーストリカバリ、長期的なデータアーカイブ、監視管理などのニーズに対応できます。
![](https://qcloudimg.tencent-cloud.cn/raw/0ef38b85a725ba88de13c31179d06e17.jpeg)

## クロスリージョンバックアップの説明
- クロスリージョンバックアップでは、インスタンスが配置されているリージョンまたはバックアップが配置されているリージョンにデータをリカバーできます。
- クロスリージョンバックアップを有効にしても、ローカルのデフォルトバックアップに影響を与えません。両方が同時に存在します。
- ローカルの自動バックアップが完了すると、クロスリージョンバックアップがトリガーされます。つまり、クロスリージョンバックアップのストレージデバイスに自動バックアップが転送されます。
- クロスリージョンバックアップの保存日数は、クロスリージョンストレージのバックアップライフサイクルにのみ影響を与えます。
- オフサイトに保存されているバックアップとbinlogは、無料ストレージスペースを使用できません。また、クロスリージョンバックアップの使用容量は、マスターインスタンスが置かれるバックアップリージョンまでの使用容量が計算されます。
- クロスリージョンバックアップの有効/無効、およびリージョンオプションの変更はストックバックアップに影響しません。
- オフサイトバックアップを有効にすると、最新の有効なバックアップと、最新の有効なバックアップ時刻から現在の時刻までのbinlogをターゲットリージョンに同期します。
- オフサイトバックアップ機能を再度有効にすると、有効な時点より前のオフサイトバックアップではポイントインタイムリカバリー機能を使用できなくなります。

## 課金説明
クロスリージョンバックアップの費用については、[バックアップスペースの費用に関する説明](https://intl.cloud.tencent.com/document/product/236/32344)をご参照ください。

##　クロスリージョンバックアップとローカルのデフォルトバックアップの違い

| 比較項目 | クロスリージョンバックアップ | ローカルのデフォルトバックアップ |
|---------|---------|---------|
| デフォルトで有効になるか | デフォルトでは無効となりますので、手動で有効にしてください | デフォルトで有効となります |
| バックアップストレージリーション | バックアップは指定されたオフサイトリージョン（最大2つ指定可能）に保存されます | バックアップはインスタンスの置かれるリージョンに保存されます |
| バックアップ復元 | データを<li>元のインスタンス<li>の目的リージョンに復元できる新しいインスタンス | <li>元のインスタンス<li>の現在のリージョンに復元できる新しいインスタンス</li> |
| 無料のストレージスペースを使用するか | 無料のストレージスペースを使用できません | 無料のストレージスペースを使用できます |

## サポート地域
この機能をサポートする地域は、北京、上海、広州、深セン、成都があり、他の都市はこれから利用できるようになります。

## クロスリージョンバックアップの有効化
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストのインスタンスIDまたは**操作**列の**管理**をクリックして、インスタンス管理ページに進みます。
2. インスタンス管理ページで、**バックアップ復元** > **クロスリージョンバックアップ**を選択します。
3. クロスドメインバックアップの設定ウィンドウで設定を完了したら、**OK**をクリックしてクロスドメインバックアップを有効にします。
 - クロスリージョンバックアップの有効と無効：デフォルトで無効となります。
 - バックアップbinlog：クロスリージョンバックアップが有効になっているときに自動的にオンになります。オンになっている場合、バックアップbinlogのみをオフにすることができます。
 - バックアップリージョン：バックアップリージョンはマスターインスタンスと異なるリージョンを最低1つ、最大2つ選択します。
 - バックアップリージョンの保存期間：デフォルトは7日間です。3日から1830日まで設定できます。有効期限が切れると、バックアップセットは自動的に削除されます。
4. クロスリージョンバックアップが完了すると、バックアップは目的リージョンに同期され、ソースインスタンスのバックアップリストで確認できます。
クロスリージョンバックアップファイルは**バックアップリージョン**の下に、選択したすべてのバックアップリージョンが表示されます。
バックアップリストの表示可能フィールドは次のとおりです。
<table>
<thead><tr><th>フィールド</th><th>説明</th></tr></thead>
<tbody><tr>
<td>ファイル名</td>
<td>ファイル名はバックアップ作成時に設定できます。作成後は変更されません。</td></tr>
<tr>
<td>バックアップ時点</td>
<td>バックアップ有効化時間</td></tr>
<tr>
<td>タスク開始時間<br>タスク終了時間</td>
<td>バックアップの実行開始時間と実行終了時間</td></tr>
<tr>
<td>バックアップサイズ</td>
<td>今回バックアップファイルのサイズ</td></tr>
<tr>
<td>タイプ</td>
<td>バックアップファイルのタイプであり、クロスリージョンバックアップの場合は物理コールドバックアップです</td></tr>
<tr>
<td>バックアップ方式</td>
<td>自動バックアップ</td></tr>
<tr>
<td>バックアップ方法</td>
<td>完全バックアップ</td></tr>
<tr>
<td>バックアップリージョン</td>
<td>バックアップファイルが存在するすべての地域を表示する</td></tr>
<tr>
<td>状態</td>
<td>バックアップタスクステータスを表示する</td></tr>
<tr>
<td>操作</td>
<td><a href="https://www.tencentcloud.com/document/product/236/50651">ダウンロード</a><br><a href="https://intl.cloud.tencent.com/document/product/236/38864">クローン</a></td></tr>
</tbody></table>


## クロスリージョンバックアップの無効化
コンソールでクロスリージョンバックアップを無効にすることができます。無効にしても、クロスリージョンバックアップファイルはすぐには削除されません。バックアップファイルは、設定されたライフサイクルが満期するときに自動的に削除されます。
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストのインスタンスIDまたは**操作**列の**管理**をクリックして、インスタンス管理ページに進みます。
2. インスタンス管理ページで、**バックアップ復元** > **クロスリージョンバックアップ**を選択します。
3. クロスドメインバックアップの設定ウィンドウで無効を選択し、**OK**をクリックします。

## よくあるご質問
#### クロスリージョンバックアップを無効にした後に費用が発生するのはなぜですか。
無料ストレージスペースを使い切り、限度額を超えたバックアップスペースは課金されます。クロスリージョンバックアップを無効にすると、新しいバックアップは作成されませんが、古いバックアップはすぐには削除されません。既存のバックアップには保存期間があり、バックアップの有効期限が切れるまでの間、バックアップファイルがストレージ容量を消費するため、有効期限が切れるまでに費用が発生することがあります。バックアップファイルが期限切れになると自動的に削除され、クロスリージョンバックアップの費用が発生しないよう、バックアップの保存期間を設定してください。
