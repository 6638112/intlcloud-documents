
## 작업 시나리오
본문은 TencentDB for MySQL 엔진을 업그레이드하는 방법을 설명합니다.
TencentDB for MySQL는 데이터베이스 엔진 업그레이드를 지원합니다.
- MySQL 5.5 -> MySQL 5.6
- MySQL 5.6 -> MySQL 5.7

>?
>- 데이터베이스 엔진 다운그레이드는 지원되지 않습니다.
>- 주요 버전을 스킵하여 업그레이드할 수 없습니다. 예를 들어 TencentDB for MySQL 5.5 인스턴스를 MySQL 5.7 이상으로 업그레이드하려면 먼저 MySQL 5.6으로 업그레이드해야 합니다.
>- 현재 MySQL 5.7은 MySQL 8.0으로 업그레이드할 수 없습니다. 
>- 클라우드 디스크 버전의 단일 노드 인스턴스는 엔진 버전 업그레이드를 지원하지 않습니다.

## [업그레이드 규칙](id:shengjiguize)
- `create table …  as select …` 구문은 지원되지 않습니다.
- TencentDB for MySQL 5.6, 5.7의 원본/복제본 동기화는 GTID를 기반으로 구현되며, 기본적으로 InnoDB 엔진만 지원합니다.
- 마지막 전체 백업이 논리적 콜드 백업인 경우 MySQL 5.5에서 5.6으로 업그레이드하는 동안 MyISAM 테이블이 InnoDB 테이블로 전환됩니다. **업그레이드하기 전에 먼저 전환을 완료하는 것이 좋습니다.**
- 업그레이드하는 동안 TencentDB for MySQL은 slow\_log 테이블을 지웁니다. 필요한 경우 업그레이드하기 전에 로그를 저장하십시오.
- **업그레이드할 인스턴스가 다른 인스턴스(예: 원본 또는 읽기 전용 인스턴스)와 연결된 경우 이러한 인스턴스는 데이터 일관성을 보장하기 위해 함께 업그레이드됩니다.**
- TencentDB for MySQL 업그레이드는 데이터 마이그레이션을 포함하며 일반적으로 비교적 오랜 시간이 걸립니다. 귀하의 비즈니스는 업그레이드 중에 영향을 받지 않으며 평소와 같이 액세스할 수 있습니다.
- 버전 업그레이드가 완료된 후 인스턴스 전환이 필요합니다(즉, MySQL 데이터베이스 연결이 몇 초 동안 끊어질 수 있음). 자동 재접속 기능이 설정된 애플리케이션을 사용하고 인스턴스 점검 시간 내에 전환을 선택하는 것이 좋습니다. 자세한 내용은 [인스턴스 점검 시간 설정](https://intl.cloud.tencent.com/document/product/236/10929)을 참고하십시오.
- 단일 인스턴스의 테이블 수량은 100만을 초과 시에 업그레이드에 실패할 수 있습니다. 또한 데이터베이스 모니터링에도 영향을 미칠 수 있으므로, 테이블 수량을 합리적으로 구성하고 단일 인스턴스 테이블 수량은 100만 미만으로 제어하시기 바랍니다.

## 작업 단계
1. [TencentDB for MySQL 콘솔](https://console.cloud.tencent.com/cdb/)에 로그인한 후 인스턴스 리스트에서 업그레이드할 인스턴스를 선택한 다음 **작업** 열에서 **더 보기** > **버전 업그레이드**를 선택합니다.
>?MySQL 8.0은 상위 버전으로 업그레이드할 수 없습니다.
>
2. 팝업 창에서 업그레이드할 데이터베이스 버전을 선택한 후 **업그레이드**를 클릭합니다.
데이터베이스 업그레이드에는 데이터 마이그레이션이 포함되므로, 업그레이드가 완료된 후 MySQL 데이터베이스와의 몇 초 간의 연결 끊김이 발생할 수 있습니다. 업그레이드가 시작되면 전환 시간을 **점검 시간 내**로 선택하여 인스턴스 업그레이드가 완료된 후 **점검 시간** 내에 전환이 시작되도록 할 수 있습니다.
>!전환 시간을 **점검 시간 내**로 선택하면 데이터베이스 사양 업그레이드 완료 시 즉시 전환되지 않고 대신 인스턴스가 다음 **점검 시간**에 전환될 때까지 동기화가 계속됩니다. 결과적으로 인스턴스를 업그레이드하는 데 걸리는 전체 시간이 늘어날 수 있습니다.
>
![](https://qcloudimg.tencent-cloud.cn/raw/5fd7b83457ffb0cab80112ad32e8e0be.png)

## FAQ
#### 업그레이드 전에 TencentDB for MySQL이 자동으로 데이터를 백업하나요?
TencentDB for MySQL은 데이터 백업 및 로그 백업(binlog)을 기반으로 지난 7 - 1830일 동안 데이터의 무손실 복원을 지원하는 일일 실시간 이중 서버 핫 백업 메커니즘을 채택합니다.

#### TencentDB for MySQL을 MySQL 5.7에서 MySQL 5.6으로 다운그레이드할 수 있습니까?
아니요. 데이터베이스 엔진 다운그레이드는 지원되지 않습니다. MySQL 5.6 인스턴스를 사용하려면 기존 MySQL 5.7 인스턴스를 종료하거나 반환한 다음 MySQL 5.6 인스턴스를 구입해야 합니다.

#### 업그레이드 중 원본/복제본 딜레이 문제가 발생할 수 있나요?
원본 인스턴스 업그레이드는 데이터 비교가 필요하며 원본/복제본가 딜레이가 발생할 수 있습니다.

#### 데이터베이스 엔진 버전 업그레이드 후 인스턴스 전환이 TencentDB for MySQL 인스턴스에 영향을 줍니까?
업그레이드는 비즈니스에 영향을 미치지 않지만 MySQL 인스턴스용 TencentDB는 몇 초 동안 연결이 끊어질 수 있습니다. 애플리케이션에 대한 자동 재연결 기능을 구성하고 인스턴스 점검 시간 내 전환을 선택하는 것이 좋습니다.

#### TencentDB for MySQL 인스턴스의 데이터베이스 엔진 버전을 업그레이드하는 데 얼마나 걸립니까? 업그레이드 진행 상황을 어떻게 확인합니까?
소요 시간은 인스턴스의 데이터 볼륨과 데이터 복제에 대한 읽기 요청에 따라 다릅니다.
TencentDB for MySQL 업그레이드에는 데이터 마이그레이션이 포함되며 일반적으로 비교적 오랜 시간이 걸립니다. 귀하의 비즈니스는 업그레이드 중에 영향을 받지 않으며 평소와 같이 액세스할 수 있습니다.

#### 인스턴스가 항상 ‘업그레이드 후 전환 대기’ 상태인 이유는 무엇입니까?
전환 시간을 **점검 시간 내 전환**으로 선택하여 업그레이드 후 다음 점검 시간 내에 전환이 시작되기 때문일 수 있습니다.
즉시 전환하려면 인스턴스 리스트에서 대상 인스턴스를 찾고 **작업** 열에서 **즉시 전환**을 클릭합니다. 연결이 몇 초간 끊길 수 있으니 귀하의 비즈니스에 재연결 메커니즘이 있는지 확인하십시오.


