## 작업 시나리오
지정 시간을 초과한 SQL 명령 쿼리를 '슬로우 쿼리'라고 하며, 그와 상응하는 명령을 '슬로우 쿼리 명령'이라고 합니다. 그리고 데이터베이스 관리자(DBA)가 슬로우 쿼리 명령에 대해 분석하고 슬로우 쿼리가 발생한 원인을 찾는 과정을 '슬로우 쿼리 분석'이라고 합니다.

콘솔의 작업 로그 페이지에서 인스턴스의 슬로우 로그 상세, 오류 로그 상세, 롤백 로그를 확인할 수 있으며, 슬로우 로그를 다운로드할 수 있습니다. 이외에도 명령 라인 인터페이스(CLI)혹은 CDB API를 사용하여 데이터베이스 로그를 확인 및 다운로드할 수 있습니다. 자세한 내용은 [슬로우 쿼리 로그 조회](https://intl.cloud.tencent.com/document/product/236/15845)와 [이진법 로그 조회](https://intl.cloud.tencent.com/document/product/236/15843)를 참고 바랍니다.

>?TencentDB for MySQL(단일 노드 - 기본형 제외) 인스턴스는 작업 로그 관리 기능을 지원합니다.
>

#### MySQL 슬로우 쿼리 관련 설명
- long_query_time: 슬로우 쿼리 임계 값 매개변수로, 정확도가 마이크로초 수준에 달하며 기본 10s로 설정되어 있습니다. SQL 명령 실행 시간이 해당 값을 초과하면 슬로우 로그로 기록됩니다. 
long_query_time 매개변수를 변경할 경우 기존 슬로우 로그에는 영향을 주지 않습니다. 예를 들어, 슬로우 로그 임계 값 매개변수가 10s였고, 10s를 초과한 슬로우 로그 기록이 보고되던 상황에서, 이를 1s로 변경해도 기존에 보고한 로그는 그대로 표시됩니다.
- log_queries_not_using_indexes: 인덱스를 사용하지 않은 쿼리를 기록할지 여부로서, 기본 설정 값은 OFF입니다.


- 작업 순서
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인 후, 인스턴스 리스트에서 인스턴스 ID 혹은 '작업'열의 [관리]를 클릭하여 인스턴스 관리 페이지에 접속합니다.
2. 인스턴스 관리 페이지의 [작업 로그]를 선택하면 인스턴스의 슬로우 로그 상세, 오류 로그 상세, 롤백 로그의 확인 할 수 있으며, 슬로우 로그를 다운로드 할 수 있습니다.  
<table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody><tr>
<td>슬로우 로그 상세</td><td>데이터베이스에서 실행 시간이 10s 이상이었던 1개월 이내의 SQL 명령 기록</td></tr>
<tr>
<td>슬로우 로그 다운로드</td><td>슬로우 로그 다운로드 제공</td></tr>
<tr>
<td>오류 로그 상세</td><td>매회 실행과 종료의 세부 정보, 그리고 실행 과정 중 모든 비교적 심각한 경고와 오류 정보 기록.</td><tr>
<tr>
<td>롤백 로그</td><td>롤백 작업의 실행 상태 및 진도 기록</td></tr>
</tbody></table>
<img src="https://main.qcloudimg.com/raw/c229d0fe6a4869998d3472b0a35efa28.png"  style="margin:0;">
3. 슬로우 로그 다운로드 페이지에서 '작업' 열의 [다운로드]를 클릭하여 슬로우 로그를 다운로드합니다.
4. 팝업된 대화 상자에서 권장한 대로 다운로드 주소를 복사하고, CDB가 속한 VPC의 CVM(Linux 시스템)에 로그인하여 wget 명령어로 내부 네트워크 고속 다운로드를 사용하면 더욱더 효율적입니다.
>?
>- 로그 용량이 0KB일 경우, 다운로드할 수 없습니다.
>- 또한 [로컬 다운로드]를 선택하여 직접 다운로드할 수 있지만, 다소 긴 시간이 소요될 수 있습니다.
>- wget 명령어 포맷: wget -c '로그 파일 다운로드 주소' -O 사용자 정의 파일 이름.log
>
예시는 다음과 같습니다:
```
wget -c 'http://szx.dl.cdb.tencentyun.com:303/cfdee?appid=1210&time=1591&sign=aIGM%3D' -O test.log
```
