## 작업 시나리오
TencentDB for MySQL은 사용자가 읽기 전용 인스턴스를 1개 혹은 여러 개 작성하도록 지원합니다. 사용자의 읽기/쓰기를 분리하고, 1 마스터 다중 응용 시나리오 솔루션을 지원하며 데이터베이스를 읽는 부하 성능을 대폭 업그레이드합니다.
현재 읽기 쓰기 분리 주소를 통합할 수 없습니다. 즉 읽기 요청과 쓰기 요청은 자동으로 분리합니다. 읽기 전용 인스턴스는 별도의 IP,  PORT를 통해 액세스합니다.
>?
>- 읽기 전용 인스턴스 요금에 대한 내용은 [제품 가격](https://buy.Intl.cloud.tencent.com/price/cdb)을 참고하십시오.
>- 읽기 전용 인스턴스는 인스턴스 세부 정보 페이지에서 고유한 내부 네트워크 주소 활성화 및 내부 IP와 포트의 사용자 정의 변경을 지원합니다.

#### 기본 개념
- RO 그룹: Cloud Load Balacer(CLB) 기능이 적용된 읽기 전용 인스턴스 그룹입니다. RO 그룹에 읽기 전용 인스턴스가 여러 개 있을 경우, 사용자의 읽기 요청량을 그룹 내의 각 읽기 전용 인스턴스에 균일하게 할당할 수 있습니다. 또한, RO 그룹의 데이터베이스는 외부 IP, PORT로 액세스할 수 있습니다.
- 읽기 전용 인스턴스: 읽기 요청을 지원하는 단일 노드(슬레이브 미포함) 인스턴스입니다. 읽기 전용 인스턴스는 단독으로 존재할 수 없으며, 각 읽기 전용 인스턴스는 모두 특정 RO그룹에 속합니다.

#### 기초 아키텍처
읽기 전용 인스턴스는 MySQL binlog 마스터 슬레이어 동기화 성능을 적용합니다. 마스터 인스턴스(소스 데이터베이스)를 변경 시 전체 읽기 전용 인스턴스에 동기화합니다. 전체 읽기 전용 인스턴스는 싱글 노드（슬레이어 서버 불포함）아키텍처를 적용합니다. 혹 읽기 전용 인스턴스가 다운될 경우, 끊임없이 복구를 시도합니다. 혹 더 뛰어난 고가용성을 원하시면 RO 그룹을 적용하시기 바랍니다.
![](https://main.qcloudimg.com/raw/bf2ef3ecfc232f6e69a99ead319a5cb2.png)

## 기능 제한
- **1GB 메모리, 50GB 디스크 및 그 이상의 사양과 더불어 MySQL 5.6 이상 버전 및 InnoDB 엔진 2노드, 3노드** 마스터 인스턴스만 읽기 전용 인스턴스를 구매할 수 있습니다. 마스터 인스턴스의 사양이 낮은 경우, 먼저 사양을 업그레이드하시기 바랍니다.
-읽기 전용 인스턴스의 최소 사양은 1gb 메모리, 50gb 하드디스크이며, 주 인스턴스 구입한 메모리 사양보다 크거나 같아야 합니다.  
- 마스터 인스턴스당 읽기 전용 인스턴스를 최대 5개 생성합니다.
- 백업, 롤백을 지원하지 않습니다.
- 데이터터를 읽기 전용 인스턴스에 마이그레이션할 수 없습니다.
- 데이터베이스를 생성/삭제할 수 없으며, phpMyAdmin(PMA)을 지원하지 않습니다. 
- 계정을 생성/삭제할 수 없으며, 계정에 계정과 비밀번호를 수정하는 권한이 없습니다.

## 주의 사항
- 읽기 전용 인스턴스는 계정과 데이터베이스를 점검하지 않고, 마스터 인스턴스로부터 동기화합니다.
- 만약 MySQL 버전은 5.6이나 GTID를 활성화하지 않았을 경우, 콘솔에서 GTID를 활성화할 수 있으며, 읽기 전용 인스턴스를 추가할 수 있습니다.
GTID를 오픈 시 많은 시간을 소모하며, 인스턴스는 몇초간 플래시합니다. 관련하여 서비스의 낮은 피크타임에 작업하며, 데이터베이스를 액세스하는 프로그램에 재연결 메커니즘 추가를 권장합니다.
- 읽기 전용 인스턴스는 InnoDB 엔진만 지원합니다.
- 데이터 동기화에 지연이 있으므로 멀티 읽기 전용 인스턴스간 소량의 데이터가 일치하지 않을 수 있습니다. 각 읽기 전용 인스턴스와 마스터 인스턴스의 동기화 딜레이는 콘솔에서 확인할 수 있습니다.
- 읽기 전용 인스턴스의 인스턴스 사양은 마스터 인스턴스와 다를 수 있으며, 부하 상황에 따라 유동적으로 업그레이드할 수 있습니다. 동일한 RO 그룹 내 읽기 전용 인스턴스의 인스턴스 사양은 서로 일치하는 것이 좋습니다.

## 작업 단계
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb/ )에 로그인한 후, 인스턴스 리스트에서 인스턴스 ID 또는 **작업** 열의 **관리**를 클릭하여 인스턴스 상세 페이지로 이동합니다.
2. 인스턴스 상세 페이지에서 **인스턴스 아키텍처**중의 **읽기 전용 인스턴스 추가**를 클릭하거나 읽기 전용 인스턴스 페이지에서 **생성**을 클릭하여 구매 페이지로 이동합니다. 
3. 구매 페이지에서 읽기 전용 인스턴스에 상응하는 설정을 선택하고, 착오가 없는지 확인한 뒤 **즉시 구매**를 클릭합니다.
 -**RO 그룹 지정**: 시스템 자동 할당, 신규 RO 그룹 및 기존 RO 그룹을 지원합니다.
    - 자동 시스템 할당: 한번에 여러 개의 인스턴스를 구매할 경우, 각 인스턴스에 독립된 RO 그룹이 1개씩 할당됩니다. 가중치 할당 방식은 시스템 자동 할당으로 설정됩니다.
    - RO 그룹 생성: 한번에 여러 개의 인스턴스를 구매할 경우 모두 이 RO그룹에 할당됩니다. 가중치 할당 방식은 시스템 자동 할당으로 설정됩니다.
    - 기존 RO 그룹: 기존 RO 그룹을 지정하고, 한 번에 여러 인스턴스를 구매하는 경우 이 RO 그룹에 모두 할당됩니다.
    가중치 할당 방식은 RO 그룹 설정과 동일하며, 시스템에서 RO 그룹이 자동으로 할당되도록 설정하면 구매 사양에 따라 RO 그룹이 자동으로 추가되며, 사용자 지정 할당인 경우 기본 가중치는 0입니다.
		동일한 RO 그룹의 인트라넷 주소가 동일하므로 VPC 네트워크는 동일한 보안 그룹 설정을 공유합니다. RO 그룹을 지정하면 구매 시 보안 그룹을 더 이상 커스터마이징할 수 없습니다.
 - **지연 임계값 초과 인스턴스 제거**: 제거 정책 활성화 여부. 제거된 인스턴스의 가중치는 자동으로 0으로 설정됩니다. 읽기 전용 인스턴스 지연이 임계값을 초과하여 제거 되면 사용자에게 알람이 발송됩니다. (읽기 전용 인스턴스 제거 알람과 알람 수신 객체 설정은 [알람 기능](https://intl.cloud.tencent.com/document/product/236/8457) 참고) 또한 인스턴스 상태가 동기적으로 서비스 중지되며, 가중치는 0이 됩니다. 읽기 전용 인스턴스 지연 시간이 임계값보다 작아질 경우, 다시 RO그룹에 추가 됩니다. 동시에 인스턴스에 지연 임계값 초과 인스턴스 제거 기능 활성화 여부에 관계없이 읽기 전용 인스턴스 장애가 제거되면 해당 인스턴스가 복구된 후 다시 RO 그룹에 추가됩니다.
![](https://main.qcloudimg.com/raw/5c002d37fdeb72a5396a394133672338.png)
4. 구매 완료 후 인스턴스 리스트로 되돌아갑니다. 인스턴스 상태가 **실행 중**으로 변경되면, 정상적으로 사용할 수 있습니다.

## FAQ
#### 읽기 전용 인스턴스 선별 규칙은 무엇입니까?
지연 임계값 인스턴스 제거를 활성화한 후 RO 그룹은 지연 임계값과 유지되는 최소 인스턴스 수를 기반으로 삭제할 인스턴스를 결정하고, 삭제된 인스턴스의 가중치는 자동으로 0으로 설정됩니다. 읽기 전용 인스턴스 지연이 임계값을 초과하여 제거되면 사용자에게 알림이 발생하고, 인스턴스 상태는 일시 중단 및 동기화되며 가중치는 0입니다. 읽기 전용 인스턴스 지연 시간이 임계값보다 작을 때 RO 그룹에 다시 추가됩니다.
- 지연 임계값: 읽기 전용 인스턴스 지연이 임계값을 초과하면 초과된 임계값의 읽기 전용 인스턴스가 RO그룹에서 제거됩니다.
- 최소 보관 인스턴스 수: 그룹 내에서 보장되어야 하는 인스턴스 하한치로, 현재 읽기 전용 인스턴스 수가 이 하한치와 같거나 적고, 딜레이 시간이 임계값을 초과하면 현재 읽기 전용이 일괄 제거되지 않습니다.

#### 읽기 전용 인스턴스가 폐기/반환되면 마스터 인스턴스에 어떤 영향을 미치나요?
읽기 전용 인스턴스의 폐기/반환은 마스터 인스턴스에 영향을 미치지 않습니다.
