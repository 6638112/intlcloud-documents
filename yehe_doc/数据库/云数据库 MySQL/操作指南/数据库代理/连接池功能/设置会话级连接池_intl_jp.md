ここでは、セッションレベル接続プールを設定する方法をご紹介します。

## 前提条件
- [データベースプロキシのバージョンが1.1.2以降](https://intl.cloud.tencent.com/document/product/236/45627)。
- マスターインスタンスデーターベースのバージョンはMySQL 5.7であり、データベースカーネルのサブバージョンが20211031以降であること。この条件を満たさない場合、[データベースカーネルサブバージョンのアップグレード](https://intl.cloud.tencent.com/document/product/236/36816)を実施してください。

## データベースプロキシ未使用
1. [MySQL コンソール](https://console.cloud.tencent.com/cdb)にログインします。
2. 上側でリージョンを選択し、インスタンスIDまたは**操作**列の**管理**をクリックすると、インスタンス管理画面が表示されます。
3. インスタンス管理画面の**データベースプロキシ**で、**今すぐ有効にする**をクリックします。
4. 表示されたダイアログウィンドウで、接続プール機能を有効にします。
![](https://qcloudimg.tencent-cloud.cn/raw/ae2436546dfc7c8f0f8b6c6d6f154482.png)

## データベースプロキシ使用中
1. [MySQL コンソール](https://console.cloud.tencent.com/cdb)にログインします。
2. 上側でリージョンを選択し、インスタンスIDまたは**操作**列の**管理**をクリックすると、インスタンス管理画面が表示されます。
3. インスタンス管理画面の**データベースプロキシ**で、概要の下側の接続プールに対応するところで**有効**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/9524cadfc5fe0d67a8a050f44ea5fada.png)
4. 表示されたダイアログボックスで、設定を選択して、**OK**をクリックします。
   - **接続プールの状態**：接続プールを有効にします。
   - **接続プールの種類** セッションレベル接続プールをサポートします。
   - **接続保持閾値**：アイドル接続をプロキシの接続プールにおいて保持する時間の閾値。設定範囲は1秒 - 300秒です。
>!接続プールの設定変更が完了すると、秒レベルの瞬断が発生するため、アプリケーションに再接続メカニズムがあることを確認してください。
>
![](https://qcloudimg.tencent-cloud.cn/raw/f354aa701758d2823c67468392e37617.png)
5. 接続プールが有効になっている場合、データベースプロキシ画面から**概要** > **基本情報**の順に選択して、詳細の確認と設定の変更を実施できます。

## 接続プールの無効化
1. [MySQL コンソール](https://console.cloud.tencent.com/cdb)にログインします。
2. 上側でリージョンを選択し、インスタンスIDまたは**操作**列の**管理**をクリックすると、インスタンス管理画面が表示されます。
3. インスタンス管理画面の**データベースプロキシ**で、概要の下側の接続プールに対応するところで**詳細/編集**をクリックします。
4. 表示されたダイアログボックスで、設定を選択して、**OK**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/6367f83dd1aaacc0dae91e9ec1085955.png)

