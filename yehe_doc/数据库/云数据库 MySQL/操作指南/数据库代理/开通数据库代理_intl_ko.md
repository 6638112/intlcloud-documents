
본문에서는 TencentDB for MySQL 콘솔을 통한 데이터베이스 프록시 활성화 방법에 대해 소개합니다. 

[데이터베이스 프록시](https://intl.cloud.tencent.com/document/product/236/42048)는 CDB 서비스와 애플리케이션 서비스 간의 네트워크 프록시 서비스입니다. 응용 프로그램 서비스가 데이터베이스에 액세스할 때 모든 요청을 프록시하는 데 사용됩니다. 자동 읽기/쓰기 분리, 연결 풀, 연결 지속성 등의 고급 기능을 제공하며 고가용성, 고성능, OPS 지원 및 사용 편의성을 자랑합니다.


## 주의 사항
- 데이터베이스 프록시는 현재 다음 리전에서 지원됩니다.
  - 베이징(1, 2, 4존 제외), 상하이(1존 제외), 광저우(1, 2존 제외), 청두(1존 제외), 충칭, 난징, 홍콩(1존 제외).
  - 도쿄(1존 제외), 방콕(1존 제외), 버지니아(1존 제외), 실리콘밸리(1존 제외), 뭄바이(1존 제외), 서울(1존 제외).
- 현재 데이터베이스 프록시가 지원하는 버전은 이중 노드, 삼중 노드 MySQL 5.7 (커널 마이너 버전은 20201230 이상이어야만 합니다)이 있으며, 마스터 인스턴스의 커널 마이너 버전을 업그레이드하면, 모든 관련된 읽기 전용 인스턴스와 재해 복구 인스턴스도 함께 업그레이드됩니다. 자세한 내용은 [커널 마이너 버전 업그레이드](https://intl.cloud.tencent.com/document/product/236/36816)를 참고 바랍니다. 

## 작업 단계
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 뒤, 인스턴스 리스트에서 프록시를 활성화할 마스터 인스턴스를 선택하고, 인스턴스 ID 혹은 **작업**열의 **관리**를 클릭하여 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 **데이터베이스 프록시** 탭을 선택하고 **지금 활성화**를 클릭합니다.
![](https://main.qcloudimg.com/raw/46d9e9b30975b51bee00a16c64f31c8b.png)
3. 팝업창에서 사양과 노드 수량을 선택하고 **확인**을 클릭합니다.
 - 네트워크 유형: VPC만 지원하며, 기본 설정은 마스터 인스턴스와 동일합니다. 
 - 프록시 사양: 현재 1개의 사양만 지원합니다. 
 - 노드 개수: 프록시 노드 수. 프록시 노드 수는 마스터 인스턴스와 읽기 전용 인스턴스 CPU 코어 수 합의 1/8(올림한 정수)로 설정을 권장합니다. 예: 마스터 인스턴스의 CPU가 4코어이고, 읽기 전용 인스턴스의 CPU는 8코어일 경우, 권장 프록시 수 = (4 + 8 ) / 8 ≈ 2
![](https://main.qcloudimg.com/raw/a3d8fafb1930d0298deb9cf2f08e706c.png)
4. 활성화 후 데이터베이스 프록시 페이지에서 기본 정보 확인과 프록시 노드 관리를 할 수 있습니다. 
>?
>- 프록시 노드 목록에서 **연결 수**를 확인하거나 각 프록시 노드의 성능 모니터링 데이터를 확인하여 노드의 연결 수가 불균형한지 확인할 수 있으며, 불균형한 경우 **리밸런싱**을 클릭하여 연결을 분산할 수 있습니다.
>- 리밸런싱으로 인해 프록시 노드가 다시 시작되고 다시 시작하는 동안 서비스를 일시적으로 사용할 수 없게 됩니다. 사용량이 적은 시간에 서비스를 다시 시작하는 것이 좋습니다. 귀하의 비즈니스에 재연결 메커니즘이 있는지 확인하십시오.
>
![](https://main.qcloudimg.com/raw/083d38858367fd7fe65e90fb92210178.png)

