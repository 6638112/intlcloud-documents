TencentDB for MySQL에 대해 데이터베이스 프록시가 활성화된 후 데이터베이스 프록시 연결 주소가 기본적으로 추가됩니다. 나중에 연결 주소를 추가하여 다른 비즈니스 로직을 구현할 수도 있습니다. 생성할 수 있는 연결 주소의 수는 데이터베이스 프록시 노드의 수와 동일합니다. 콘솔에서 연결 주소의 액세스 정책을 보고 수정할 수 있습니다.

## 전제 조건
[데이터베이스 프록시 활성화](https://www.tencentcloud.com/document/product/236/42052)가 완료되어 있어야 합니다.

## 액세스 정책 보기
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 후, 페이지 상단에서 리전을 선택한 다음 대상 인스턴스 ID를 클릭하여 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 **데이터베이스 프록시** > **액세스 정책**을 선택합니다.
![](https://staticintl.cloudcachetci.com/yehe/backend-news/T4hu809_12.png)

## 액세스 정책 수정
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 후, 페이지 상단에서 리전을 선택한 다음 대상 인스턴스 ID를 클릭하여 인스턴스 관리 페이지로 이동합니다.
2. 인스턴스 관리 페이지에서 **데이터베이스 프록시** > **액세스 정책**을 선택하고 대상 액세스 정책을 찾은 후 **설정**을 클릭합니다.
>?**데이터베이스 프록시** > **개요** > **연결 주소**에서도 대상 액세스 주소를 찾을 수 있습니다. 그 다음 **작업** 열에서 **구성 조정**을 클릭합니다.
>
3. 팝업 창에서 정책 구성을 수정하고 **확인**을 클릭합니다.
![](https://staticintl.cloudcachetci.com/yehe/backend-news/Axkx768_13.png)
<table>
<thead><tr><th>매개변수</th><th>설명</th></tr></thead>
<tbody><tr>
<td>읽기-쓰기 속성</td>
<td>프록시 액세스 주소의 읽기-쓰기 속성을 수정합니다. 읽기/쓰기 분리 또는 읽기 전용일 수 있습니다.</td></tr>
<tr>
<td>지연된 RO 인스턴스 제거</td>
<td>지연된 RO 인스턴스 제거 정책을 설정합니다. 이 옵션을 활성화한 후 지연 임계값 및 최소 RO 인스턴스를 설정할 수 있습니다. 시스템은 이 옵션의 활성화 여부에 관계없이 실패한 읽기 전용 인스턴스를 제거하거나 복원하려고 시도합니다. <ul><li>지연 임계값: 1보다 크거나 같은 정수(초)를 입력합니다. </li><li>최소 RO 인스턴스: 소스 인스턴스가 소유한 읽기 전용 인스턴스의 수에 따라 달라집니다. 0으로 설정하면 모든 읽기 전용 노드가 제거될 때 제거된 읽기 전용 인스턴스 중 하나 이상이 데이터베이스 프록시에 다시 합류하여 읽기 요청 처리를 계속할 때까지 모든 읽기 요청이 원본 인스턴스로 라우팅됩니다. </li></ul></td></tr>
<tr>
<td>연결 풀 상태</td>
<td>연결 풀 기능은 주로 비영구 연결 비즈니스 시나리오에서 빈번한 새 연결로 인해 발생하는 인스턴스 로드를 완화합니다. 이 옵션을 활성화한 후 지원되는 연결 풀 유형을 선택할 수 있으며 현재 기본적으로 세션 수준 연결 풀만 가능합니다.</td></tr>
<tr>
<td>트랜잭션 분할</td>
<td>이 기능을 활성화할지 여부를 설정할 수 있습니다. 활성화되면 한 트랜잭션의 읽기 및 쓰기가 실행을 위해 다른 인스턴스로 분리되고 읽기 요청은 읽기 전용 인스턴스로 전달되어 소스 인스턴스의 부하를 줄입니다.</td></tr>
<tr>
<td>읽기 가중치 할당</td>
<td>시스템에서 할당 또는 사용자 지정을 선택할 수 있습니다. 데이터베이스 프록시가 활성화되었을 때 여러 AZ가 구성된 경우 서로 다른 AZ에서 프록시 노드의 가중치를 별도로 할당할 수 있습니다.</td></tr>
<tr>
<td>장애 조치(읽기-쓰기 속성이 읽기/쓰기 분리임)</td>
<td>이 기능을 활성화할지 여부를 설정할 수 있습니다. 활성화된 후 데이터베이스 프록시가 실패하면 데이터베이스 프록시 주소가 소스 인스턴스로 요청을 라우팅합니다.</td></tr>
<tr>
<td>새로 추가된 RO 인스턴스에 적용</td>
<td>이 기능을 활성화할지 여부를 설정할 수 있습니다. 활성화되면 새로 구입한 읽기 전용 인스턴스가 데이터베이스 프록시에 자동으로 추가됩니다. <ul><li>읽기 가중치 할당이 시스템에서 할당됨으로 설정된 경우 새로 구매한 읽기 전용 인스턴스에는 사양에 따라 기본 가중치가 할당됩니다. </li><li>읽기 가중치 할당이 사용자 지정으로 설정된 경우 새로 구입한 읽기 전용 인스턴스가 추가되면 해당 가중치는 기본적으로 0이 되며 데이터베이스 프록시 탭의 연결 주소에서 구성 조정을 클릭하여 수정할 수 있습니다.</li></ul></td></tr>
</tbody></table>
