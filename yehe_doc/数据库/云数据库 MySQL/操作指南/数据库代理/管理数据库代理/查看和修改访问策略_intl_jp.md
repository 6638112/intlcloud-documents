TencentDB for MySQLで、データベースプロキシを有効にすると、デフォルトでデータベースのプロキシ接続アドレスが追加されます。その後、新しい接続アドレスを追加し、異なる接続アドレスを使用することで、異なるサービスロジックを実現し、作成できる接続アドレスの数がデータベースプロキシノードの数と同じようになります。コンソールでデータベースのプロキシ接続アドレスのアクセスポリシーを表示、変更できます。

##  前提条件
［データベースプロキシの有効化］(https://www.tencentcloud.com/document/product/236/42052)が完了していること。

## アクセスポリシーの表示
1. [MySQL コンソール](https://console.cloud.tencent.com/cdb)にログインし、上側でリージョンを選択して、対象インスタンスIDをクリックすると、インスタンス管理画面が表示されます。
2. インスタンス管理画面で、**データベースプロキシ** > **アクセスポリシー**を選択します。
![](https://staticintl.cloudcachetci.com/yehe/backend-news/T4hu809_12.png)

## アクセスポリシーの変更
1. [MySQL コンソール](https://console.cloud.tencent.com/cdb)にログインし、上側でリージョンを選択して、対象インスタンスIDをクリックすると、インスタンス管理画面が表示されます。
2. インスタンス管理画面で、**データベースプロキシ** > **アクセスポリシー**を選択し、ターゲットアクセスポリシーを見つけて**設定**をクリックします。
>?**データベースプロキシ** > **概要*** > **接続アドレス**の下でターゲットアクセスアドレスを見つけ、**操作**列の**設定を調整**をクリックすることもできます。
>
3. リダイレクトされた画面で、具体的なポリシー設定を変更し、**確定**をクリックします。
![](https://staticintl.cloudcachetci.com/yehe/backend-news/Axkx768_13.png)
<table>
<thead><tr><th>パラメータ</th><th>説明</th></tr></thead>
<tbody><tr>
<td>読み取り/書き込み属性</td>
<td>このプロキシアクセスアドレスの読み取り/書き込みプロパティを変更します。読み取り/書き込み分離または読み取り専用の選択をサポートします。</td></tr>
<tr>
<td>読み取り専用インスタンスのディレー削除</td>
<td>読み取り専用インスタンスのディレー削除ポリシーを設定します。このオプションを有効にすると、ディレー削除のしきい値と読み取り専用インスタンスの最小予約数を設定できます。このオプションが有効かどうかに関係なく、読み取り専用インスタンスに障害が発生すると、削除とリカバーが試行されます。<ul><li>ディレー削除のしきい値：1以上の整数を秒単位で入力します。</li><li>読み取り専用インスタンスの最小予約数：この数は、マスターインスタンスが所有する読み取り専用インスタンスの数に関連しています。0に設定すると、すべての読み取り専用ノードが削除されると、読み取り専用インスタンスが再び参加するまで、すべてのアクセスがマスターインスタンスに転送されます。</li></ul></td></tr>
<tr>
<td>接続プールのステータス</td>
<td>接続プール機能は、主に短い接続サービスで頻繁に新しい接続を確立することによるインスタンスの負荷を軽減するために使用されます。このオプションを有効にすると、サポートされている接続プールタイプを選択できます。現在、デフォルトでセッションレベルの接続プールのみサポートします。</td></tr>
<tr>
<td>トランザクションの分割</td>
<td>有効化するかどうかを設定します。有効化すると、読み取りと書き込みは1つのトランザクションで実行するために別のインスタンスに分割され、読み取りリクエストは読み取り専用インスタンスに転送され、マスターインスタンスの負荷を軽減します。</td></tr>
<tr>
<td>読み取りウェイトのアサイン</td>
<td>システムによる自動アサインまたはカスタマイズの選択をサポートします。データベースプロキシを有効化するときに複数のアベイラビリティーゾーンを構成した場合、異なるアベイラビリティーゾーンのプロキシノードのデータベースにアクセスするためのウェイトを個別に構成することをサポートします。</td></tr>
<tr>
<td>フェイルオーバー（読み取り/書き込みの属性は読み取り/書き込み分離です)</td>
<td>有効化するかどうかを設定します。有効化すると、データベースプロキシに故障が発生した場合、接続アドレスはマスターインスタンスにルーティングされます。</td></tr>
<tr>
<td>読み取り専用インスタンスの自動追加</td>
<td>有効化するかどうかを設定します。有効化すると、新しい読み取り専用インスタンスを購入する場合は、データベースプロキシに自動的に追加されます。<ul><li>読み取りウェイトがシステムによって自動的にアサインされると、新しく購入した読み取り専用インスタンスは、サイズのデフォルトのウェイトに従ってアサインされます。</li><li>読み取りウェイトをカスタマイズすると、新しく購入した読み取り専用インスタンスのウェイトは、参加時にデフォルトで0になり、データベースプロキシページの接続アドレスの下にある構成の調整で変更できます。</li></ul></td></tr>
</tbody></table>
