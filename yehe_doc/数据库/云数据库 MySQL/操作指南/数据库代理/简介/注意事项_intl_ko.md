본문은 TencentDB for MySQL 데이터베이스 프록시에 대한 참고 사항을 설명합니다.

- 프록시 연결 주소를 사용할 때 트랜잭션 분할을 활성화하지 않으면 트랜잭션 요청이 소스 인스턴스로 라우팅됩니다.

- 데이터베이스 프록시는 교차 AZ 구성을 지원합니다. 선택 가능한 AZ의 수는 현재 리전에서 사용 가능한 AZ의 수에 따라 다릅니다. 최대 3개의 AZ를 선택할 수 있습니다. 하나의 AZ만 선택할 수 있는 경우 리전에서 사용 가능한 AZ는 하나뿐입니다.

- 프록시 노드와 동일한 개수의 데이터베이스 프록시 주소를 여러 개 생성할 수 있습니다.

- 프록시 연결 주소를 사용하여 읽기/쓰기 분리를 구현하는 경우 비트랜잭션 읽기의 일관성이 보장되지 않습니다. 비즈니스에 읽기 일관성이 필요한 경우 이를 트랜잭션으로 캡슐화하거나 Hint 구문을 사용할 수 있습니다.

- 프록시 연결 주소를 사용할 경우 show processlist는 모든 노드의 결과를 반환하기 전에 병합합니다.

- 데이터베이스 프록시가 먼저 prepare 명령을 모든 노드에 발송하고 후속 execute 요청이 오면 prepare의 명령 유형에 따라 execute의 경로를 결정합니다. 예를 들어 쓰기 명령을 prepare했다면, execute할 때에 소스 데이터베이스로 발송하고, 트랜잭션 외의 쓰기 명령을 prepare했다면 읽기 전용 인스턴스로 발송됩니다.

 - 비즈니스 연결이 데이터베이스 프록시에 도착한 후 프록시는 소스 인스턴스 및 구성된 모든 읽기 전용 인스턴스에 연결합니다. 프록시 자체에는 최대 연결 수에 대한 제한이 없으며 주로 백엔드 데이터베이스 인스턴스의 최대 연결 수에 따릅니다. 소스 및 읽기 전용 인스턴스의 이 매개변수 값 중 가장 작은 값이 비즈니스 성능에 영향을 미칩니다.

- 데이터베이스 프록시가 활성화된 후 읽기 전용 인스턴스가 추가되거나 다시 시작되면 새 연결 요청만 라우팅됩니다. [데이터베이스 프록시 모니터링 확인하기](https://www.tencentcloud.com/document/product/236/42055)에서 설명한 대로 개요 또는 성능 모니터링을 통해 각 프록시 노드의 성능 지표를 볼 수 있습니다. 노드의 연결 수가 불균형한 경우 재조정을 통해 연결을 분산할 수 있습니다.

- 다양한 데이터베이스 프록시 기능에 대해 지원되는 버전:
 - 교차 AZ 구성: 프록시 v1.3.1 이상.
 - 연결 지속 시간 초과: 프록시 v1.2.1 이상.
 - 연결 풀: 프록시 v1.2.1 이상.
 - 트랜잭션 분할: 프록시 v1.3.1 이상.
 - 연결 주소 추가: 프록시 v1.3.1 이상.
 >?프록시 업그레이드 방법에 대한 자세한 내용은 [데이터베이스 프록시 커널 마이너 버전 업그레이드](https://www.tencentcloud.com/document/product/236/45627)를 참고하십시오.

