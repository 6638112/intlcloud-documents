この文書では、TencentDB for MySQLデータベースプロキシの新しいバージョンについて説明します。

データベースプロキシは、クラウドデータベースサービスとアプリケーションサービスの間にあるネットワークプロキシサービスであり、アプリケーションサービスがデータベースにアクセスするときにすべてのリクエストをプロキシするために用いられます。
データベースプロキシのアクセスアドレスは、元のデータベースのアクセスアドレスから独立しています。データベースプロキシアドレスを介したすべてのリクエストは、プロキシクラスターを介して中継され、データベースのマスターノードとスレーブノードにアクセスし、読み取り/書き込み分離を行います。読み取りリクエストは読み取り専用インスタンスに転送され、メインデータベースへの負荷が軽減されます。この機能は、運用・保守しやすく、高可用性、高性能などを特徴とします。
TencentDB for MySQLデータベースプロキシは、自動読み取り・書込み分離、トランザクション分割、接続プールなどの高度な機能を提供しているほか、アベイラビリティーゾーンをまたいだ読み取り専用インスタンスのマウント、複数データベースプロキシアクセスアドレスの有効化もサポートしています。

## 料金説明
データベースプロキシはベータ版テスト段階で、現在無料で使用できます。

## ユースケース
- 短い接続がメインの業務が大量にあり、パフォーマンスが不十分な場合。
- 業務で複数の読み取り専用インスタンスを使用し、アプリケーション側で読み取り/書き込み分離を手動で行うため、メンテナンスコストやリスクが高くなる場合。
- 接続数が多すぎて、インスタンスの負荷が高くなりすぎる場合。
- トランザクションに多数のリクエストがあり、マスターインスタンスの負荷が高すぎる場合。
- 異なるサービスはアクセスアドレスによる負荷分散を必要とする場合。
- アベイラビリティーゾーンをまたぐときに、アクセス遅延を短縮するために最寄りのアクセスを行う必要がある場合。

## 読み取り/書き込みプロパティの説明
各データベースプロキシのアクセスアドレスに対して、独自の読み取り/書き込みプロパティを設定できます。
- **読み取り/書き込み**：読み取り/書き込み分離機能をサポートして、サービスのリニア拡張を実現するために使用されます。
このプロパティには、少なくとも1つのマスターインスタンスと1つの読み取り専用インスタンスが含まれます。書き込みリクエストはマスターインスタンスにのみ送信されます。トランザクション分割や接続プールなどの読み取り/書き込み分離機能に対応し、読み取り専用インスタンスの遅延削除、確保するインスタンスの最小数、フェイルオーバーなどのポリシーをサポートします。
- **読み取り専用**：レポートなどの読み取り専用サービスをサポートするために使用されます。
このプロパティには、少なくとも1つの読み取り専用インスタンスが含まれます。マスターインスタンスはルーティングに参加しません。トランザクション分割や接続プールなどの読み取り/書き込み分離機能に対応し、読み取り専用インスタンスの遅延削除、確保するインスタンスの最小数、フェイルオーバーなどのポリシーをサポートします。

## データベースプロキシの特徴
- **高い安定性**
クラスターアーキテクチャを採用してデプロイし、マルチノードでスムーズなフェイルオーバーを確保します。
- **高可用性**
アベイラビリティーゾーンをまたいでデプロイすることで、データベースプロキシの可用性を向上させることができます。
- **高アイソレーション**
データベースプロキシは、独立したリソースを使用して、現在のインスタンスにプロキシサービスを提供します（各プロキシリソースは独立しており、リソースを共有しません）。
- **超高性能**
それぞれのプロキシは、1秒あたり最大約10万件のリクエストを処理することができます。
- **手軽でスピーディな拡張**
1～60個のプロキシノードの動的拡張をサポートします（ベータ版テスト期間では6個のノードのみサポートされます）。
- **パーフェクトなパフォーマンス監視**
読み取り/書き込みリクエスト数、CPU、メモリなどのパフォーマンス指標の秒単位の監視機能を提供し、[モニタリングデータ](https://www.tencentcloud.com/document/product/236/42055)と業務計画に従ってプロキシの数を調整することができます。
- **ホットリロード**
マスターインスタンスの切り替え、構成の変更、読み取り専用インスタンスの増減といった状況が発生すると、データベースプロキシは、ネットワークを中断したり再起動したりすることなく、設定を動的にホットリロードできます。
- **読み取り/書き込み分離に対応**
データベースプロキシの読み取り/書き込みプロパティを設定することで、マスターインスタンスの読み取り負荷を効果的に軽減できます。読み取り専用インスタンスを追加することで、データベースクラスターの水平スケーリング機能を提供します。また、ユーザーによるセルフサービスの読み取り/書き込み分離を実現し、ユーザーがサービスの読み取り/書き込みリクエストを自分で分割する複雑さを軽減するのに役立ち、特に読み取り負荷が高い状況に適しています。
例えば、アプリケーションで1つのプロキシ接続アドレスのみ設定する必要があるとします（データベースプロキシの読み取り/書き込みプロパティを読み取り/書き込み分離に設定した場合）。このアドレスは自動的に読み取り/書き込み分離を実現し、読み取りリクエストを読み取り専用インスタンスに送信し、書き込みリクエストをマスターインスタンスに送信します。読み取り専用インスタンスを追加または削除する場合でも、アプリケーション設定を調整する必要はありません。
- **接続プールに対応**
接続数が多すぎる、または短い接続が頻繁に新しい接続を確立することで、インスタンスの負荷が高くなるという問題を効果的に解決できます。
- **トランザクション分割に対応**
1つのトランザクションでの読み取りと書き込みを異なるインスタンスで実行するように分割し、読み取りリクエストを読み取り専用インスタンスに転送して、マスターインスタンスの負荷を軽減することができます。

## データベースプロキシの機能画面
![](https://staticintl.cloudcachetci.com/yehe/backend-news/QNE2634_8.png)

