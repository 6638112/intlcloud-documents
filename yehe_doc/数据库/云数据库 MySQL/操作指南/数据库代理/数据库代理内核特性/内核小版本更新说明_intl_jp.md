
このドキュメントでは、TencentDB for MySQLデータベースプロキシのバージョンアップ説明をご紹介します。

## データベースプロキシバージョンの確認
インスタンスの[データベースプロキシ](https://intl.cloud.tencent.com/document/product/236/42052)画面の**概要** > **プロキシバージョン**で確認してください。
![](https://qcloudimg.tencent-cloud.cn/raw/6868726aa0bdb77251d41979120986ae.png)

## バージョンアップの説明
| バージョン | 説明 |
|---------|---------|
| 1.1.3 | **機能更新**<br>は、MySQLによって前処理されたCOM_PREPAREメッセージでのhintルーティング情報の使用をサポートしています。PREPAREでhintを使用してルーティングターゲットを指定した後、後続のexecuteメッセージは指定のバックエンドノードに転送されます。<br>**問題の解決**<br>1. データベース代理のマスターインスタンスがマスター/スレーブ関係を切り替えた後、フロントエンドの接続はすぐにリセットされます。<br>2．読み取り専用インスタンスがディレーのしきい値を超えた後、Cloud Load Balancer（CLB）が失敗する可能性がある問題を修正しました。現在、読み取り専用インスタンスのしきい値以内に戻ると、ルーティングは正常に回復します。<br>３．MySQL 8.0が誤ったハンドシェイクを返すことによる接続失敗の可能性がある問題を修正しました。|
| 1.1.2 | **機能更新**<br>1. MySQL 8.0をサポートします。<br>2. セッションレベル接続プール機能をサポートし、ショートコネクショントランザクションがデータベースに接続を頻繁に確立する運用シーンに対応します。データベースプロキシは次回接続確立時に再利用できるように、接続を保持します。<br>3. 読み取り専用インスタンスの再接続機能をサポートします。ロングコネクションの運用シーンで、読み取り専用インスタンスが再起動し、または、新しい読み取り専用インスタンスを追加した場合、データベースプロキシは、自動的に読み取り専用インスタンスへの接続を確立し、ルーティングを回復します。<br>4. 内部メモリ管理メカニズムを更新しました。新しいバージョンでは、メモリ消費量がさらに抑えられます。<br>**バグフィックス**<br>1. バックエンドの接続がタイムアウトで切断されても、クライアントの接続が切断されないバグを修正しました。<br>2. 内部キャッシュによるメモリ消費量が著しく増加するバグを修正しました。<br>3. 滅多に発生しませんが、フォーマットが間違ったメッセージが返されるバグを修正しました。|
| 1.0.1 | **機能更新**<br>1. MySQL 5.7バージョンをサポートします。<br>2. 読み取り/書き込み分離をサポートします。<br>3. 読み取り/書き込み分離が有効になっている場合、読み取りウェイトを再設定することをサポートします。<br>4. マスター/スレーブレプリケーション遅延閾値の設定をサポートします。読み取り専用インスタンスは遅延が閾値に達すると、ルーティングから外され、遅延が閾値を下回ると、ルーティングを再開します。マスター/スレーブレプリケーションが中断した場合、中断された読み取り専用インスタンスを直接外します。<br>5. 最小保持数の設定をサポートします。読み取り専用インスタンスが外された際、最小保持数にnを設定した場合、ルーティングに最低限でn個の読み取り専用インスタンスを保持します。<br>6. フェイルオーバーの設定をサポートします。デフォルトは有効です。フェイルオーバーが無効になり、マスターインスタンスの読み取りウェイトが0の場合、すべての読み取り専用インスタンスが外されると、読み取りリクエストのエラーが発生します。フェイルオーバーが有効になっている場合、または、マスターデータベースの読み取りウェイトが0ではない場合、マスターインスタンスにルーティングされるようにリクエストされます。<br>7. hint構文によるルーティングノードの設定をサポートします。|
