TencentDB for MySQL은 콘솔을 통한 빠른 인스턴스 사양 변경을 지원하여 효율적인 용량 확장 및 축소가 가능합니다. 실제 비즈니스 상황(비즈니스 초기, 확장기, 전성기, 침체기 등)에 따라 MySQL 인스턴스 사양을 효율적으로 변경함으로써 리소스를 충분히 이용하고 실시간으로 비용을 최적화할 수 있습니다. 요금 변경에 대한 내용은 [인스턴스 비용 조정 설명](https://intl.cloud.tencent.com/document/product/236/32345)을 참고하십시오.

## 인스턴스 디스크 제한 초과 설명
- 원활한 비즈니스 진행을 위해 디스크 용량이 다 차기 전 미리 데이터베이스 인스턴스 사양을 업그레이드하거나 디스크 용량을 구매하시기 바랍니다.
>?디스크 용량에 대한 내용은 [MySQL 콘솔](https://console.cloud.tencent.com/cdb) 인스턴스 상세 페이지에서 확인할 수 있으며, [알람 설정](https://intl.cloud.tencent.com/document/product/236/8457)을 통해 디스크에 대한 알람 메시지를 즉시 받을 수 있습니다.
- 인스턴스 스토리지의 데이터 양이 인스턴스를 초과할 경우 인스턴스가 잠겨 데이터 읽기만 가능하고 입력은 불가능해집니다. 용량을 확장하거나 콘솔에서 일부 DB 테이블을 삭제하여 읽기 전용 모드를 해제할 수 있습니다.
- 데이터베이스가 반복적으로 잠기는 현상을 방지하려면 인스턴스의 남은 용량이 20% 이상 또는 50GB 이상으로 유지되어야 합니다. 해당 상태가 되면 인스턴스의 잠금 상태가 해제되고, 정상적으로 읽고 쓸 수 있습니다.

## 설정 변경 소개
사용자가 콘솔에서 인스턴스 설정을 변경하면 시스템은 데이터 마이그레이션을 통해 변경을 완료합니다. 기본적으로 일반 변경이 사용되며 로컬의(인스턴스가 속한 호스트) 남은 리소스가 충분하면 QuickChange를 선택할 수도 있습니다. 변경 절차는 다음과 같습니다. 
![](https://qcloudimg.tencent-cloud.cn/raw/8e7702c81886573a459dbf73b2846701.png)

- **일반 변경 모드**: 현재 호스트의 인스턴스를 새로운 호스트 인스턴스로 데이터 마이그레이션하여 변경을 완료합니다. 변경 과정에서 마이그레이션하거나 대조 검증할 데이터 양이 많다면 소요 시간이 길어질 수 있으며 설정 변경 완료 후 인스턴스 전환이 발생할 수도 있습니다.
- **QuickChange**: 현재 호스트에서 바로 변경을 완료하여 데이터 마이그레이션을 하지 않기 때문에 관련 준비 작업이 필요 없으며 전체 변경 시간이 짧습니다. 
>!
>- 로컬 잔여 리소스가 충분하여 QuickChange 조건을 충족할 수 있는 경우, 기본적으로 QuickChange 기능을 사용합니다. 사용하지 않으려면 설정 변경 페이지에서 비활성화할 수 있습니다(설정 변경 페이지에서 ‘QuickChange’ 활성화/비활성화 버튼 선택).

## 주의 사항
- RO 인스턴스는 독립 VIP 액세스를 활성화할 경우 QuickChange를 지원하지 않습니다. 
- RO 인스턴스가 속한 RO 그룹의 활성화된 인스턴스 수가 딜레이 제거 최소 인스턴스 수 이하일 경우, RO 인스턴스는 QuickChange를 지원하지 않습니다. 
- RO 인스턴스가 속한 RO 그룹에 RO 인스턴스가 한 개 남았을 때, 해당 RO 인스턴스는 QuickChange를 지원하지 않습니다. 
- 변경 시 인스턴스의 마이너 버전이 최신 버전이 아닌 경우 먼저 인스턴스 커널 마이너 버전을 최신 버전으로 업그레이드합니다. 마이너 버전 업그레이드 시 터보 변경 기능으로 인스턴스가 재시작되며, 재시작 여부는 변경 페이지의 터보 변경 프롬프트에 따라 달라집니다.

## [설정 변경 규칙](id:guize)
- TencentDB for MySQL 인스턴스 및 이에 연결된 읽기 전용 인스턴스와 재해 복구 인스턴스가 정상 상태(실행 중)이고, 현재 진행 중인 작업이 없을 때만 설정 변경 작업을 요청할 수 있습니다.
- 설정 변경 중에는 해당 변경 작업을 취소할 수 없습니다.
- 설정 변경 전후의 인스턴스 이름, 액세스 IP, 액세스 포트 모두 변경되지 않습니다.
- 설정 변경 중에는 MySQL의 전역 매개변수, 사용자 비밀번호 등을 가급적 변경하지 마십시오.
- 설정 변경 중에는 데이터 이동이 발생할 수 있으나, MySQL 인스턴스에 정상적으로 액세스할 수 있으며 비즈니스에도 영향을 미치지 않습니다.
- 설정 변경을 완료하면 인스턴스 전환(몇 초간 MySQL 데이터베이스 연결 끊김)이 일어날 수 있으므로, 프로그램 자동 재연결 기능 및 점검 시간 내 전환 완료 선택을 권장합니다. 자세한 내용은 [인스턴스 점검 시간 설정](https://intl.cloud.tencent.com/document/product/236/10929)을 참고하십시오.
- MySQL 단일 노드 - 기본형은 설정 변경 중 약 15분간 인스턴스를 사용할 수 없는 경우가 발생할 수 있으므로 피크 시간대를 피해 작업하시기를 권장합니다.

## 인스턴스 사양 및 스토리지 테이블
### 2노드/3노드(로컬 SSD 디스크)
<table class="table-striped">
<tbody>
<tr><th>격리 정책</th><th>CPU 및 메모리</th><th>최대 IOPS</th><th>스토리지 공간</th></tr>
<tr>
<td rowspan="14">범용형</td>
<td>1코어 1000MB</td><td>1200</td><td rowspan="10">25GB - 3000GB</td></tr>	
<tr>
<td>1코어 2000MB</td><td>2000</td></tr>
<tr>
<td>2코어 4000MB</td><td>4000</td></tr>
<tr>
<td>4코어 8000MB</td><td>8000</td></tr>
<tr>
<td>4코어 16000MB</td><td>14000</td></tr>
<tr>
<td>8코어 16000MB</td><td>20000</td></tr>
<tr>
<td>8코어 32000MB</td><td>28000</td></tr>
<tr>
<td>16코어 32000MB</td><td>32000</td></tr>
<tr>
<td>16코어 64000MB</td><td>40000</td></tr>
<tr>
<td>16코어 96000MB</td><td>40000</td></tr>
<tr>
<td>16코어 128000MB</td><td>40000</td><td rowspan="4">25GB - 6000GB</td></tr>
<tr>
<td>24코어 244000MB</td><td>60000</td></tr>
<tr>
<td>32코어 256000MB</td><td>80000</td></tr>
<tr>
<td>48코어 488000MB</td><td>120000</td></tr>
<tr>
<td rowspan="26">전용형</td>
<td>2코어 16000MB</td><td>8000</td><td rowspan="7">25GB - 3000GB</td></tr>	
<tr>
<td>4코어 16000MB</td><td>10000</td></tr>
<tr>
<td>4코어 24000MB</td><td>13000</td></tr>
<tr>
<td>4코어 32000MB</td><td>16000</td></tr>
<tr>
<td>8코어 32000MB</td><td>32000</td></tr>
<tr>
<td>8코어 48000MB</td><td>36000</td></tr>
<tr>
<td>8코어 64000MB</td><td>40000</td></tr>
<tr>
<td>12코어 48000MB</td><td>36000</td><td rowspan="15">25GB - 6000GB</td></tr>
<tr>
<td>16코어 64000MB</td><td>60000</td></tr>
<tr>
<td>12코어 72000MB</td><td>40000</td></tr>
<tr>
<td>12코어 96000MB</td><td>48000</td></tr>
<tr>
<td>16코어 96000MB</td><td>60000</td></tr>
<tr>
<td>24코어 96000MB</td><td>72000</td></tr>
<tr>
<td>16코어 128000MB</td><td>60000</td></tr>
<tr>
<td>32코어 128000MB</td><td>80000</td></tr>
<tr>
<td>24코어 144000MB</td><td>76000</td></tr>
<tr>
<td>24코어 192000MB</td><td>80000</td></tr>
<tr>
<td>32코어 192000MB</td><td>90000</td></tr>
<tr>
<td>48코어 192000MB</td><td>120000</td></tr>
<tr>
<td>32코어 256000MB</td><td>100000</td></tr>
<tr>
<td>48코어 288000MB</td><td>140000</td></tr>
<tr>
<td>48코어 384000MB</td><td>140000</td></tr>
<tr>
<td>64코어 256000MB</td><td>150000</td><td rowspan="2">25GB - 9000GB</td></tr>
<tr>
<td>64코어 384000MB</td><td>150000</td></tr>
<tr>
<td>64코어 512000MB</td><td>150000</td><td rowspan="2">25GB - 12000GB</td></tr>
<tr>
<td>90코어 720000MB</td><td>150000</td></tr>
</tbody></table>	

## 콘솔에서 인스턴스 설정 변경
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 후 인스턴스 리스트에서 변경할 인스턴스를 선택한 다음 **작업** 열에서 **더 보기** > **설정 변경**을 선택합니다.
2. 팝업 창에서 변경된 설정을 선택한 후 **제출**을 클릭합니다.
>?
>- 로컬 잔여 리소스가 충분할 경우, QuickChange 기능이 트리거됩니다. 본 페이지의 **QuickChange** 버튼을 통해 활성화/비활성화를 선택할 수 있습니다.
>![](https://main.qcloudimg.com/raw/c37bb99f0a2db0a9108c7068ad72ba7c.png)
>- 일부 QuickChange 시나리오는 재시작하지 않으며 이 경우 제출한 변경은 설정 변경이 완료된 후 바로 적용됩니다. 다음 이미지를 참고하십시오. 
![](https://main.qcloudimg.com/raw/6f5e9ab54f270c0833f5545cccbc8c6d.png)
>
![](https://main.qcloudimg.com/raw/ef2bf519dabe88cb23b9c73993602b9b.png)

## API로 인스턴스 설정 변경
UpgradeDBInstance 인터페이스를 사용해 인스턴스 설정을 변경할 수 있습니다. 자세한 내용은 [CDB 인스턴스 설정 변경](https://intl.cloud.tencent.com/document/product/236/15876)을 참고하십시오.

## FAQ
#### 데이터베이스 인스턴스 사양을 변경하면 인스턴스에 어떤 영향이 있나요?
- MySQL 설정 변경 중 데이터 마이그레이션이 일어날 수 있으나, 인스턴스 액세스에는 영향을 미치지 않습니다. 마이그레이션 완료 후 전환이 진행되며, 몇 초간 끊길 수 있으니 서비스의 재연결 메커니즘을 확보하시기 바랍니다.
- MySQL 단일 노드 - 기본형은 설정 변경 중 약 15분간 인스턴스를 사용할 수 없는 경우가 발생할 수 있으므로 피크 시간대를 피해 작업하시기를 권장합니다.

#### 데이터베이스를 다운그레이드할 수 없는 이유는 무엇인가요?
사용자의 스토리지가 디스크 최대 용량을 초과했을 수 있으므로, 먼저 데이터를 정리해야 합니다. 남은 용량이 20% 또는 50G 이상이어야 다운그레이드 작업을 진행할 수 있습니다.

#### 콘솔 설정 변경 후 왜 계속 '업그레이드 전환 대기 중 상태'가 뜨나요?
[콘솔](https://console.cloud.tencent.com/cdb)에서 설정 변경 시 **전환 시간**을 **점검 시간 내 전환**으로 선택하여 즉시 전환하지 못한 경우일 수 있습니다.
즉시 전환하려면 인스턴스 리스트의 **작업** 열에서 **즉시 전환**을 클릭하십시오. 연결이 몇 초간 끊길 수 있으니 서비스의 재연결 메커니즘을 확보하시기 바랍니다.

#### 인스턴스 사양 변경과 업그레이드에 시간이 얼마나 소요되나요?
데이터베이스의 업그레이드 소요 시간은 사용자의 데이터베이스에 저장된 데이터 양 및 데이터 복사 속도 등과 관련되므로 구체적인 시간은 예측할 수 없습니다.
업그레이드 중에도 인스턴스 사용에는 영향을 미치지 않습니다. 업그레이드 완료 후 VIP 전환 시 몇 초간 끊김이 발생할 수 있습니다.

#### 인스턴스 변경 진행률은 어디에서 조회할 수 있나요?
콘솔의 [작업 리스트](https://console.cloud.tencent.com/mysql/task)에서 작업 진행률을 조회할 수 있습니다.

#### 디스크 용량이 거의 다 찼습니다. 어떻게 해야 하나요?
디스크 용량 85% 이상 사용 시, 사용하지 않는 데이터 삭제 또는 디스크 용량 확장을 권장합니다. [콘솔](https://console.cloud.tencent.com/cdb)(인스턴스 목록 우측의 **작업** 열에서 **더 보기** > **설정 변경** 선택)에서 디스크 용량을 확장할 수 있습니다.

#### 인스턴스가 메모리 확장(디스크 확장)에 QuickChange를 지원하는지 어떻게 확인할 수 있나요?
변경 페이지에서 QuickChange 버튼 상태를 확인하여 관련 기능을 사용할 수 있는지 확인할 수 있습니다. 필요하지 않으면 수동으로 비활성화할 수 있으며 QuickChange 요구 사항에 맞지 않으면 해당 기능을 활성화할 수 없습니다. 
![](https://main.qcloudimg.com/raw/0ecdc6d86e3727e7a688a559ce217d7d.png)

#### 메모리 또는 디스크를 확장하면 인스턴스 마이너 버전에 영향을 미치나요? 
인스턴스 마이너 버전이 최신 버전이 아니면 최신 인스턴스 커널 마이너 버전으로 업데이트 될 수 있으며 이 경우 QuickChange 기능으로 인해 데이터베이스가 재시작될 수 있습니다. 

#### QuickChange 시 인스턴스가 재시작되나요?
특정 상황에서 인스턴스가 재시작될 수 있습니다. 재시작 여부는 다음 이미지와 같이 변경 페이지 하단의 관련 알람을 통해 알 수 있습니다.
![](https://main.qcloudimg.com/raw/d97d2daa7cb8e5aa0924355c59bc4fc8.png)

>?인스턴스 마이너 버전이 최신 버전이고 QuickChange 기능을 사용할 수 있는 경우 디스크만 변경한다고 해서 인스턴스가 재시작되지는 않습니다. 

#### 콘솔 업그레이드 시, QuickChange인지 어떻게 확인하나요?
설정 변경 페이지의 **QuickChange** 버튼 활성화 여부를 통해 확인할 수 있습니다.
![](https://main.qcloudimg.com/raw/0ecdc6d86e3727e7a688a559ce217d7d.png)

#### API 인터페이스 설정 변경 시, QuickChange인지 어떻게 확인하나요?
API 인터페이스는 현재 QuickChange가 아닌 마이그레이션 방식의 변경 업그레이드만 지원합니다. 추후 API 기능을 제공할 예정입니다.  

#### 데이터베이스 변경 시, 데이터베이스 매개변수가 변경되나요?
설정 변화에 맞춰 innodb_buffer_pool_size 매개변수가 변경될 수 있습니다. 

#### 데이터베이스 변경 시, QuickChange가 트리거되면 매개변수가 변경되나요?
일반 변경과 마찬가지로 매개변수는 인스턴스 사양 변화에 맞춰 변경될 수 있습니다. 

#### QuickChange와 일반 변경은 어떤 차이점이 있나요?
QuickChange는 데이터 마이그레이션 시간이 더 짧습니다. 

