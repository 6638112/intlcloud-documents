
MySQL용 TencentDB 인스턴스를 동일한 리전의 다른 AZ로 마이그레이션할 수 있습니다. 모든 속성, 설정 및 연결 주소는 마이그레이션 후에도 변경되지 않은 상태로 유지됩니다. 인스턴스를 마이그레이션하는 데 걸리는 시간은 인스턴스의 데이터 볼륨에 따라 다릅니다.

예를 들어 다음 시나리오에서 새 AZ로 마이그레이션할 수 있습니다.
- 인스턴스 유형을 수정하고 싶지만 현재 AZ가 새 인스턴스 유형을 지원하지 않는 경우 새 유형을 지원하는 AZ로 인스턴스를 마이그레이션할 수 있습니다.
- 현재 AZ에 확장을 위한 남은 리소스가 없는 경우 비즈니스 요구 사항을 충족하기에 충분한 리소스가 있는 동일한 리전의 다른 AZ로 인스턴스를 마이그레이션할 수도 있습니다.

## 전제 조건
- 인스턴스가 실행 중이어야 합니다.
- 인스턴스가 위치한 리전에 교차 AZ 마이그레이션을 지원하는 여러 AZ가 있어야 합니다.

## 요금 설명
이 기능은 무료입니다. 단일 AZ에서 여러 AZ로 인스턴스를 마이그레이션하는 경우에도 비용이 부과되지 않습니다.

## 기능 설명
- 인스턴스는 AZ가 전환될 때 일시적으로 영향을 받습니다. 따라서 애플리케이션에 자동 재연결 메커니즘이 있는지 확인하십시오.
- AZ 마이그레이션으로 인해 VIP가 변경되지는 않습니다.
- 원본 인스턴스는 AZ 마이그레이션 후 RO 인스턴스에서 분리되지 않으며 여전히 동기화할 수 있습니다.
- RO 인스턴스의 AZ를 선택할 수 있습니다.
- RO 인스턴스는 리전 간 마이그레이션을 지원하지 않습니다.
- 마이그레이션 전환 중에는 RO 그룹을 통한 액세스(제거)가 불가능합니다.
- 대상 인스턴스에 DTS 작업 중 클라우드 플랫폼에 대한 작업 잠금이 있는 경우 교차 AZ 마이그레이션을 수행할 수 없습니다.
- 진행 중인 DTS 작업이 있는 경우 AZ 마이그레이션 후 해당 작업을 다시 시작해야 합니다.
- dumper 내보내기 중에 원본 인스턴스가 AZ 간 마이그레이션 전환을 거치면 DTS 내보내기가 실패합니다.
- 2노드 또는 3노드 아키텍처에서 AZ 마이그레이션의 경우 원본 및 복제본 AZ 선택은 새 AZ 및 리전의 나머지 리소스에 따라 달라집니다. 콘솔에서 마이그레이션하는 동안 새 AZ를 선택할 수 있으며 복제본 AZ 옵션이 자동으로 업데이트됩니다.

## 마이그레이션 유형

| 마이그레이션 유형 | 적용 가능한 시나리오 | 지원되는 인스턴스 유형 |
|---------|---------|---------|
| 한 AZ에서 다른 AZ로 마이그레이션 |인스턴스가 위치한 AZ에 전체 로드 또는 인스턴스 성능에 영향을 미치는 기타 조건이 있는 경우입니다. |원본, RO 및 DR 인스턴스 |
| 하나의 AZ에서 여러 AZ로 마이그레이션 | 인스턴스의 재해 복구 기능을 개선하고 데이터 센터 간 재해 복구를 구현하려는 경우입니다. 원본 및 복제본 인스턴스는 서로 다른 AZ에 있습니다. 다중 AZ 인스턴스는 단일 AZ 인스턴스보다 높은 수준의 재해를 견딜 수 있습니다. 예를 들어 후자는 서버 및 랙 수준 오류를 허용할 수 있는 반면 전자는 데이터 센터 수준의 오류를 허용할 수 있습니다. |원본, RO 및 DR 인스턴스 |
| 여러 AZ에서 하나의 AZ로 마이그레이션 | 특정 기능 요구 사항을 충족하려는 경우입니다. | 원본, RO 및 DR 인스턴스 |

## 작업 단계
1. [MySQL용 TencentDB 콘솔](https://console.cloud.tencent.com/cdb)에 로그인합니다. 인스턴스 목록에서 **인스턴스 ID** 또는 작업 열의 **관리**를 클릭하여 인스턴스 세부 정보 페이지로 이동합니다.
2. **인스턴스 세부 정보** 페이지에서 **기본 정보** > **리전/AZ**를 선택하고 새 **AZ로 마이그레이션**을 클릭하거나 **가용성 정보** > **배포 모드**를 선택하고 **복제본 AZ 수정**을 클릭합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/cd1bd1b09029548391ba986c61027907.png)
3. 팝업 창에서 관련 설정을 조정하고 오류가 없는지 확인한 후 **제출**을 클릭합니다.
 - **대상 AZ**: 드롭다운 목록에서 원본 AZ를 변경하거나 **다중 AZ 배포**에 대해 **Yes**를 선택하여 복제본 AZ를 수정할 수 있습니다.
 - **데이터 일관성 검사를 위한 지연 임계값**: 이 옵션은 원본 AZ를 변경할 때만 사용할 수 있습니다. 임계값은 1초 - 10초 사이의 정수일 수 있습니다.
>!데이터 일관성 확인 중 지연이 있을 수 있습니다. 데이터 지연 임계값을 설정해야 합니다. 데이터베이스 일관성 검사는 지연이 설정 값을 초과하면 일시 중지되고 지연이 임계값 아래로 떨어지면 다시 시작됩니다. 임계값이 너무 작으면 마이그레이션 시간이 더 오래 걸릴 수 있습니다. 
 - **전환 시간**: 유지 관리 시간 또는 마이그레이션 완료 시 전환하도록 선택할 수 있습니다. 자세한 내용은 [인스턴스 유지 관리 기간 설정](https://intl.cloud.tencent.com/document/product/236/10929)을 참고하십시오.
![](https://qcloudimg.tencent-cloud.cn/raw/33577bc75f50cb9805478f71b372e07f.png)

