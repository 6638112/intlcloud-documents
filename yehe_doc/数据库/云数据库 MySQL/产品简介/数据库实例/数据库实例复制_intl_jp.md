
データベースインスタンスのレプリケーションとは、サーバーのために1つまたは複数のバックアップデータベースを設定する方式により、データの同期を行うことを指し、MySQLのデータを複数のシステムに分散させます。TencentDB for MySQLでは3種類のデータレプリケーション方式をサポートしています。

>?
>- Masterは、マスターデータベースインスタンスを指し、Slaveは、バックアップデータベースインスタンスを指します。
>- MySQLの5.6、5.7、8.0バージョンは、非同期、準同期、強力な同期の3種類のレプリケーション方式をサポートしています。5.5バージョンは非同期方式をサポートしています。


### 非同期レプリケーション
アプリケーションがデータ更新（insert、update、deleteなどの操作）のリクエストを発信すると、Masterが更新操作を実行し、それを終えると直ちにアプリケーションプログラムにレスポンスを返します。その後、MasterがSlaveへのデータのレプリケーションをあらためて行います。

データ更新のプロセスで、MasterはSlaveのレスポンスを待つ必要がなく、このため非同期レプリケーションのデータベースインスタンスは、一般的に高い性能を備えています。さらにSlaveは、Masterが対外的に提供するサービスを使用できず、それに影響することもありません。ただしデータがリアルタイムにSlaveに同期されないため、Slaveに遅延が生じている状況で、Masterに障害が発生すると、低い確率ながらデータの不一致が起こります。
Tencent CloudのTencentDB for MySQL非同期レプリケーションには1マスター1スレーブのアーキテクチャを採用しています。

### 準同期レプリケーション
アプリケーションがデータ更新（insert、update、deleteなどの操作）のリクエストを発信すると、Masterは更新操作を実行し、それを終えると直ちにSlaveとのデータのレプリケーションを行います。Slaveは**データを受信してrelay logの中に書き込み（実行は不要）**、その後Masterに成功の情報を返します。MasterはSlaveの成功の情報を受信してから、アプリケーションプログラムにレスポンスを返す必要があります。

データレプリケーションのみに異常が発生（Slaveノードが使用不能またはデータレプリケーション用のネットワークでエラー発生）した場合、Masterは、アプリケーションに対するレスポンスを一次停止し（MySQLはデフォルトで10秒前後）、レプリケーション方式を非同期レプリケーションに引き下げます。データレプリケーションが正常に回復すると準同期レプリケーションに戻ります。
Tencent CloudのTencentDB for MySQL準同期レプリケーションには1マスター1スレーブのアーキテクチャを採用しています。

### 強力な同期レプリケーション
アプリケーションがデータ更新（insert、update、deleteなどの操作）のリクエストを発信すると、Masterは更新操作を実行し、それを終えると直ちにSlaveとのデータのレプリケーションを行います。Slaveは**データを受信してrelay logの中に書き込み（実行は不要）**、その後Masterに成功の情報を返します。MasterはSlaveの成功の情報を受信してから、アプリケーションプログラムにレスポンスを返す必要があります。

データレプリケーションに異常が発生（Slaveノードが使用不能またはデータレプリケーション用のネットワークでエラー発生）した場合、データの一致性を保障するため、**レプリケーション方式はいずれもダウングレードされません**。この場合Masterは、異常がなくなるまで、アプリケーションに対するレスポンスを一時的に停止します。

Tencent CloudのTencentDB for MySQLの強力な同期レプリケーションには1マスター2スレーブのアーキテクチャを採用し、そのうちの1台のSlaveが実行に成功しさえすれば応答できます。1台のSlaveが使えないことがMaster上の操作に影響する問題を回避し、強力な同期レプリケーションクラスターの可用性を向上させています。


