
데이터베이스 인스턴스 복제는 MySQL의 데이터를 여러 시스템에 분산시키기 위해 서버에 하나 이상의 백업 데이터베이스를 구성하여 데이터를 동기화하는 것을 의미합니다. TencentDB for MySQL은 다음 세 가지 데이터 복제 모드를 지원합니다.

<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/2524-42970?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>

>?
>- Master는 인스턴스의 원본 노드를 나타내고 Slave는 인스턴스의 복제본 노드를 나타냅니다.
>- 현재 MySQL v5.6, v5.7 및 v8.0은 비동기화, 반동기화 및 강제 동기화의 세 가지 복제 모드를 지원합니다. MySQL v5.5에서는 비동기화 모드만 사용할 수 있습니다.


### 비동기화 복제
Master는 애플리케이션으로부터 데이터 업데이트(insert, update, delete 작업 포함) 요청을 받은 후 업데이트 작업을 수행합니다. 업데이트가 완료되면 Master는 즉시 애플리케이션에 응답을 보내고 Slave에 데이터를 복제합니다.

데이터 업데이트 중에 Master는 Slave의 응답을 기다릴 필요가 없으므로 비동기적으로 복제된 데이터베이스 인스턴스는 종종 더 높은 성능을 가지며 Slave 비가용성은 Master의 서비스 제공에 영향을 미치지 않습니다. 하지만 데이터가 실시간으로 Slave에 동기화되지 않기 때문에 Slave에서 지연이 발생하여 Master에 장애가 발생하면 약간의 데이터 불일치 가능성이 있습니다.
TencentDB for MySQL 비동기화 복제는 1원본 1복제본 아키텍처를 사용합니다.

### 반동기화 복제
Master는 애플리케이션으로부터 데이터 업데이트(insert, update, delete 작업 포함) 요청을 받은 후 업데이트 작업을 수행합니다. 업데이트가 완료되면 Master는 즉시 Slave에 데이터를 복제합니다. **데이터를 수신하여 relay log(우회)에 기록**한 후 Slave는 Master에 성공 메시지를 반환합니다. Slave에서 메시지를 받은 후에만 Master는 애플리케이션에 응답을 반환할 수 있습니다.

데이터 복제에 예외가 발생한 경우(Slave 노드를 사용할 수 없게 되거나 데이터 복제에 사용되는 네트워크에 예외가 발생함)에만 Master에서 애플리케이션에 대한 응답을 일시 중단하고(MySQL 기본값 약 10초) 복제가 비동기화 복제로 다운그레이드됩니다. 데이터 복제가 정상 상태로 돌아오면 반동기화 복제가 복구됩니다.
TencentDB for MySQL 반동기화 복제는 1원본 1복제본 아키텍처를 사용합니다.

### 강제 동기화 복제
Master는 애플리케이션으로부터 데이터 업데이트(insert, update, delete 작업 포함) 요청을 받은 후 업데이트 작업을 수행합니다. 업데이트가 완료되면 Master는 즉시 Slave에 데이터를 복제합니다. **데이터를 수신하여 relay log(우회)에 기록**한 후 Slave는 Master에 성공 메시지를 반환합니다. Slave에서 메시지를 받은 후에만 Master는 애플리케이션에 응답을 반환할 수 있습니다.

데이터 복제에 예외가 발생하면(Slave 노드를 사용할 수 없게 되거나 데이터 복제에 사용되는 네트워크에 예외가 발생함) **복제가 다운그레이드되지 않으며** Master는 데이터 일관성을 보장하기 위해 예외가 처리될 때까지 애플리케이션에 대한 응답을 일시 중단합니다.

TencentDB for MySQL 강제 동기화 복제는 1원본 2복제본에서 구현됩니다. 두 Slave 중 하나가 데이터를 성공적으로 업데이트하면 성공 메시지를 반환하여 단일 Slave의 비가용성이 Master의 작업에 영향을 미치지 않도록 방지하고 강제 동기화 복제 클러스터의 가용성을 향상시킬 수 있습니다.


