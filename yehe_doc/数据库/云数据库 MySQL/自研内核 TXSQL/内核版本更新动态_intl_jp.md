このドキュメントでは、MySQLカーネルのバージョンに関する更新情報について説明します。アップグレードが必要な場合は、[カーネルマイナーバージョンのアップグレード](https://intl.cloud.tencent.com/document/product/236/45627)をご参照ください。

## MySQL 8.0
### 20211202
#### 新機能：
- クイック変更列機能をサポートをサポートします。
- ヒストグラムの履歴バージョンの機能をサポートします。
- 物理テーブルのランダムサンプルを得るためのSQL2003 TABLESAMPLE（単一テーブル）をサポートします。
- 保留されないキーワードの追加:TABLESAMPLE BERNOULLI。
- 特定の入力フィールドのヒストグラムを作成するためのHISTOGRAM（）関数を追加します。
- compressedヒストグラムのサポートをサポートします。
- SQLトラフィック制限機能をサポートします（DBbrianスケジュールは2022年4月よりサポートする予定）。
- MySQLクラスターロールの設定機能をサポートします。デフォルトのロールはCDB_ROLE_UNKNOWNです。
- show replicasのコマンド実行結果に、ロールを表示するためのRole列を新規追加します。
- proxyをサポートします。

#### パフォーマンスの最適化：
- insert on duplicate key updateによるホットスポットの更新問題を改善しました。
- eventの複数の同一binlog eventを集約することによって、hash scanの適用速度を引き上げます。
- plan cacheが開いた状態でのスレッドプールモードでは、prepareステートメントによってチェックされるメモリが大幅に削減されます。

#### Bugの修正：
- ホットスポット更新最適化を起動した後、パフォーマンスが不安定になる不具合を修正しました。
- `select count(*)`並列スキャンが極端な場合に全テーブルをスキャンする可能性がある不具合を修正しました。
- さまざまな場合に統計情報が0を読み込むことによる実行計画の変更とそれによる機能トラブルを修正しました。
- queryが長時間にquery end状態となっている不具合を修正しました。
- 長いレコードで、統計情報が著しく低く見積もられる不具合を修正しました。
- Temptableエンジンを使用する際、選択された列のアグリゲート関数が255を超過する時にエラーが出るbugを修正しました。
- json_table関数列の大文字・小文字を区別してしまう問題を修正しました。
- 表現式のreturn true時に早く戻るため、ウィンドウ関数が正確性の問題を引き起こすbugを修正しました。
- derived condition pushdownがuser variables を含むときに下がり続けることによって引き起こされる正確性の問題を修正しました。
- SQL filterがRule規則でnamespaceを付け加えないことによるcrashの不具合を修正しました。
- 並列処理や競合が多い場合にスレッドプールをオンにすると、QPSがジッターする不具合を修正しました。
- マスター/スレーブbpの同期が極端な場合（ホストサーバーのファイルシステムが壊れている場合）にファイルハンドルリークの不具合を修正しました。
-  index mappingの不具合を修正しました。
- 統計情報のキャッシュ同期の不具合を修正しました。
- update構文またはストレージ過程の実行時においてメッセージをクリアしていないこといよるcrashの不具合を修正しました。

### 20210830
#### 新機能：
- プリロード行数制限機能をサポートしています。
- プランキャッシュチェックの最適化機能をサポートしています。
- ANALYZE構文（UPDATE HISTOGRAM c USING DATA 'json'）を拡張して、直接ヒストグラムを書き込む機能をサポートします。

#### パフォーマンスの最適化：
- インデックスプルダウンの代わりにヒストグラムを使用して、評価誤差とI/Oのオーバーヘッドを削減します。この機能はデフォルトではオフになっています。

#### Bugの修正：
- online-DDL期間中に統計情報がゼロになる可能性がある状況を修正しました。
- スレーブのgenerated columnが更新されない状況を修正しました。
- binlogが圧縮されたときにインスタンスがhangする問題を修正しました。
- 新しく生成されたbinlogファイルのprevious_gtids eventでgtidが欠落する問題を修正しました。
- システム変数を変更するときにデッドロックが発生する恐れがあるという問題を修正しました。
- show processlistのスレーブsqlスレッドのinfoが正しく表示されない問題を修正しました。
- 公式8.0.23にhash joinに関するbugfixを移植しました。
- 公式writesetに関するbugfixを移植しました。
- 公式8.0.24にクエリーオプティマイザに関するbugfixを移植しました。
- FAST DDLでflush listを最適化し、ページの同時実行性を解放するbugを修正しました。
- 大量のテーブルのインスタンスで、データディクショナリをアップグレードするときに、大量のメモリを消費する状況を最適化しました。
- instant add columnの後に新しいプライマリキーを作成するシーンでcrashが引き起こされる問題を修正しました。
- フルテキストインデックスクエリーでのメモリの増加によって生じるOOMの問題を修正しました。
- show processlisによって返される結果セットのTIMEフィールドに-1が表示される問題を修正しました。
- ヒストグラムの互換性により、テーブルが開かない場合があるという問題を修正しました。
- Singletonヒストグラムを作成する際の浮動小数点の累積誤差を修正しました。
- row形式のログのテーブル名に長い中国語文字が含まれるため、発生するレプリケーションの中断という問題を修正しました。

### 20210330
#### 新機能：
- マスター/スレーブbp同期機能のサポート：HAが発生し、プライマリ/スタンバイの切り替えが行われた後、スタンバイデータベースはwarmupしてホットデータをbuffer poolにロードするには、長い時間がかかります。スタンバイマシンのウォームアップを加速するために、TXSQLはマスター/スレーブbp同期機能をサポートしています。
- Sort Merge Join機能をサポートします。
- FAST DDL機能をサポートします。
- ユーザー側がcharacter_set_client_handshakeパラメータをクエリーし、現在値を表示する機能をサポートします。

#### パフォーマンスの最適化：
- スキャンflush listダーティーページの最適化：ダーティーメカニズムを最適化することにより、インデックス作成プロセスでのパフォーマンスのジッターによる問題が解消され、システムの安定性が向上します。

#### 公式bugの修正：
- offline_mode、cdb_working_modeパラメータを変更する際のデッドロックの問題を修正しました。
- trx_sysのmax_trx_idの同時実行の永続化という問題を修正しました。

### 20201230
#### 新機能：
- 公式の[8.0.19](https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-19.html)、[8.0.20](https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-20.html)、[8.0.21](https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-21.html)、[8.0.22](https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-22.html)の変更をマージします。
- thread_handlingスレッドモードまたは接続プールモードの動的設定をサポートしました。

#### パフォーマンスの最適化：
- BINLOG LOCK_doneロックの競合を最適化し、書き込みパフォーマンスを向上させました。
- Lock Free Hashを使用して、trx_sys mutexの競合を最適化し、パフォーマンスを向上させました。
- redo logのディスクへのフラッシュを最適化しました。
- buffer poolの初期化時間を最適化しました。
- 大きなテーブルdrop tableがAHIをクリーンアップして最適化しました。
- 監査性能を最適化しました。

#### 公式bugの修正：
- innodb一時テーブルのクリーンアップによって引き起こされるパフォーマンスジッターの問題を修正しました。
- コア数が多いインスタンスでのread onlyのパフォーマンス低下という問題を修正しました。
- hash scanによって、1032エラーが発生する不具合を修正しました。
- ホットスポット更新機能の同時実行によるセキュリティの問題を修正しました。

### 20200630
#### 新機能：
- 大きなテーブルの非同期削除が可能：ファイルを非同期かつゆっくりとクリーンアップすることで、大きなテーブルの削除によるサービスパフォーマンスのジッターを回避します。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- リソースの競合を減らすために、アイドルタスクの自動的にkillすることをサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- 透過的データの暗号化機能をサポートします。

#### 公式bugの修正：
- relay_log_posとmaster_log_posの間のチェックポイントに一貫性がないため、切り替えが失敗するエラーを修正しました。
- 非同期でディスクにデータを保存することにより発生するデータファイルエラーを修正しました。
- fsyncがEIOを返すことを繰り返してデッドループに陥ってしまうという不具合を修正しました。
- フルテキストインデックスにおけるマルチバイト文字セットでのフレーズ検索（phrase search）に発生したクラッシュ問題を修正しました。

## MySQL 5.7
### 20211031
#### 新機能：
- writesetレプリケーション機能をサポートしています。

#### パフォーマンスの最適化：
- checkpointを積極的に推進し、バックアップの成功率を引き上げます。
- hash scanインデックス選択を最適化します。
- ホットスポット更新のパフォーマンスを最適化し、insert on duplicate key updateをサポートします。

#### Bugの修正：
- ホットスポットの更新を開くと、パフォーマンスが不安定になる不具合を修正しました。
- instant ddlの後にupdate操作をロールバックするとcrashを引き起こす不具合を修正しました。
- 列の圧縮を有効にした後、create table selectステートメントが圧縮属性を継承しない不具合を修正しました。
- skip-grant-tableオプションを有効にした後、show variables like 'tencent_root%’ステートメントがインスタンスのcrashを引き起こす不具合を修正しました。
- read onlyモードでQuery Rewriterプラグインがcrashする不具合を修正しました。
- パーティションテーブルでのhash scanの1032の不具合を修正しました。
- mtsモードで最初の大きなトランザクションsbmが0になる不具合を修正しました。
- slave_preserve_commit_order=ON，slave_transaction_retries=0のときのstop slaveがデッドロックする不具合を修正しました。
- いくつかのXAトランザクションのbugを修正しました。
- default値を持つjsonフィールドを作成した後、show create時にSQLエラーがアセンブルされる不具合を修正しました。
- トランザクションがブロックされた後、接続を切断されたトランザクションをロールバックできない不具合を修正しました。
- 長いレコードで、innodb persistentメソッドの統計情報が0になることがある不具合を修正しました。
- 8.0を移植して、ANALYZE TABLEでクエリーが蓄積されてしまう不具合を修正しました。
- innodbの統計情報が、変更後にServer層に速やかに同期されない不具合を修正しました。
- 統計サンプリングが書き込みを長時間ブロックするため、クラッシュが引き起こされる不具合を修正しました(Bug#31889883)。
- innodbの統計情報の更新処理で、一定の確率で0を読み込むことになる不具合を修正しました(BUG#105224)。
- MVCCに発生する可能性のある複雑さがO(N^2)の挙動を修正しました（Bug#28825617）。
- 接続が解放されたときに、一時テーブルを閉じてbinlog rotateをトリガーすることによるcrashを修正しました。

### 20210630
#### 新機能：
- 現在のslaveがリプレイしたbinlogタイムスタンプを表示するために、コマンドSHOW SLAVE DETAIL [FOR CHANNEL channel]を追加しました。
- transaction_read_only/transaction_isolationパラメータをサポートします。

#### パフォーマンスの最適化：
- hash scanの適用速度を最適化しました。slave端末では、eventの複数の同一binlog eventを集約することにより、hash scanの適用速度を引き上げます。

#### Bugの修正：
- 更新ステートメントによってトリガーされる一時テーブルのプライマリキーの重複、列が見つからない、列が長すぎるといった問題を修正しました。
- DDLプロセスにおいて統計情報がゼロになる可能性がある問題を修正しました。
- 接続状態統計においてundo log size統計が不正確になる問題を修正しました。
- metadata_locksテーブルのクエリーによるインスタンスcrashの問題を修正しました。
- 「of」を予約されていないキーワードに変更しました。
- バージョン番号の動的変更が新しい接続で無効と表示される問題を修正しました。
- page_cache cleanningのワイルドポインタへのアクセスといった問題を修正しました。
- alter tableステートメントを実行すると、「Incorrect key file for table」というエラーレポートが発生する場合がある問題を修正しました。
- パーティションテーブルが大量のメモリを使用する問題を修正しました。
- show processlisによって返される結果セットのTIMEフィールドに-1が表示される問題を修正しました。
- slaveノードでのXAトランザクションレプリケーションロックの待機の問題を修正しました。
- equal rangeクエリーでのパーティションテーブルの誤ったロックの問題を修正しました。

### 20210331
#### 新機能：
- delete/insert/replaceのreturning構文をサポートします。このstatmentによって操作されるデータ行を返すことができます。そのうち、deleteステートメントは前のイメージデータを返し、insert/replaceは後のイメージデータを返します。
- 列圧縮機能のサポート：現在、行形式の圧縮とデータページの圧縮がありますが、これら2つの圧縮方法は、テーブル内のいくつかの大きなフィールドと他の多くの小さなフィールドを処理すると同時に、小さなフィールドの読み取りと書き込みを頻繁に行います。大きなフィールドへのアクセス頻度が低い場合、その読み取り/書き込みアクセスにより、コンピューティングリソースに無駄な浪費が多く発生します。列の圧縮により、アクセス頻度の低い大きなフィールドを圧縮できると同時に、フィールドの行全体のストレージスペースを削減でき、読み取り/書き込みアクセスの効率を引き上げます。
- ユーザー側のcharacter_set_client_handshakeパラメータの照会をサポートし、現在値機能を表示します。
- ログファイルが占有するpage cacheの自発的なクリーンアップをサポート：この機能は、スライディングウィンドウを使用し、posix_fadviseを介してログファイルが占有するpage cacheを自発的にクリーンアップし、オペレーティングシステムのメモリ負荷を軽減し、マシン全体の安定性を向上させます。

#### パフォーマンスの最適化：
- CREATE INDEXの並列化：CREATE INDEXプロセスでは外部マージソートを実行する必要がありますが、これには時間がかかります。今回、並列外部マージソートアルゴリズムを導入し、CREATE INDEXの所要時間を50%以上削減させます。
- スキャンflush listダーティーページの最適化：ダーティーメカニズムを最適化することにより、インデックス作成プロセスでのパフォーマンスのジッターによる問題が解消され、システムの安定性が向上します。

#### 公式bugの修正：
- メモリリークの問題を修正しました。
- 8.0バージョンjsonの修正を移植して、jsonの使用の安定性を向上させます。
- hash scanによって、1032エラーが発生する不具合を修正しました。
- ホットスポット更新機能の同時実行によるセキュリティの問題を修正しました。
- 公式gcol bugの修正を一括移植しました。
- 一部のシナリオでdatetimeタイプと文字列の比較に失敗する問題を修正しました。
- マスター/スレーブbp同期機能のファイルハンドラが解放されないbugを修正しました。
- offline_modeを設定しながらの接続の新規作成によって引き起こされる可能性のあるデッドロックのbugを修正しました。
- 範囲の照会同時実行シナリオでのm_end_rangeの誤った設定によって引き起こされるcrashの問題を修正しました。
- groupby jsonフィールドのtemporay tableの更新に時間がかかる問題を修正しました。

### 20201231
#### 新機能：
- SELECT FOR UPDATE/SHAREにNOWAITとSKIP LOCKEDの選択項目の使用をサポートしました。
- thread_handlingスレッドモードまたは接続プールモードの動的設定をサポートしました。
- マスター/スレーブのbuffer poolの同期機能をサポートしました。
- ユーザーの接続状態監視機能、監視項目には、同期・非同期IO、メモリ、ログ量、CPU時間、ロックにかかる時間などが含まれます。

#### パフォーマンスの最適化：
- トランザクションのサブシステムを最適化し、並列処理のパフォーマンスを向上させました。
- 大規模トランザクションのcrash recover起動時間を最適化しました。
- redo logのディスクへのフラッシュを最適化しました。
- buffer poolの初期化時間を最適化しました。
- utf8/utf8mb4の文字列効率を最適化しました。
- 監査性能を最適化しました。
- gtid_purgedの設定がブランクでなければならないという制限を解除しました。
- バックアップロックの最適化：LOCK TABLES FOR BACKUP、LOCK BINLOG FOR BACKUP、UNLOCK BINLOGという3つの新しいSQLステートメントを導入しました。FLUSH TABLES WITH READ LOCKのバックアップをロックする方法では、データベース全体でサービスが提供できなくなるのに比べ、これら3つのステートメントは軽量級のデータバックアップロックに用いられ、バックアップ中のデータアクセスをサポートします。これらのステートメントは、物理バックアップか論理バックアップかに関わらず、バックアップの一貫性の保護を実現するために使用できます。
- 大きなテーブルdrop tableの最適化

#### 公式bugの修正：
- performance_schemaのクエリー時にハングする不具合を修正しました。
- digest_add_token関数のoverflowの不具合を修正しました。
- MySQLの公式truncate tableでibufアクセスによって引き起こされるcrashを修正しました。
- left joinのステートメントにおいてconstの事前計算によって引き起こされるクエリーの正確性に関する不具合を修正しました。

### 20200930
#### パフォーマンスの最適化：
- バックアップロックの最適化 
FLUSH TABLES WITH READ LOCKのバックアップをロックする方法では、データベース全体でサービスの提供ができなくなりますが、このバージョンでは、軽量級のデータバックアップロック方法が提供されています。
- 大きなテーブルdrop tableの最適化 
アダプティブハッシュの高速クリーンアップの最適化（innodb_fast_ahi_cleanup_for_drop_tableコントロール）により、大きなテーブルをdropするときに時間のかかるアダプティブハッシュインデックスのクリーンアップを大幅に短縮できます。

#### 公式bugの修正：
- MySQLの公式truncate tableでibufアクセスによって引き起こされるcrashを修正しました。
- 高速列作成をした後にコールドスタンバイをプルできないという不具合を修正しました。
- innodbメモリテーブルオブジェクトの頻繁なリリースによって引き起こされるパフォーマンスの低下という不具合を修正しました。
- left joinのステートメントにおいてconstの事前計算によって引き起こされるクエリーの正確性に関する不具合を修正しました。
- Ruleクラス名の競合によってcoreの問題を引き起こす、sqlトラフィック制限とquery rewriteプラグインを修正しました。
- 複数sessionでのinsert on duplicate key updateステートメントの同時更新という不具合を修正しました。
- auto_increment_incrementの同時挿入によって引き起こされるduplicate key errorによる失敗という不具合を修正しました。
- innodbメモリオブジェクトの削除がダウンタイムを引き起こす不具合を修正しました。
- ホットスポット更新機能の同時実行によるセキュリティの問題を修正しました。
- jemallocバージョンを5.2.1にアップグレードした後、スレッドプールが有効になり、coredumpがトリガーされるという不具合を修正しました。
- fwriteでエラー処理が行われないために監査ログが不完全になる不具合を修正しました。
- rootユーザーとして起動したときに、mysqld_safeがログを出力しない不具合を修正しました。
- alter table exchange partitionによってddl logファイルが大きくなる不具合を修正しました。

### 20200701
#### 公式bugの修正：
- INNOBASE_SHARE index mappingのエラーの不具合を修正しました。

### 20200630
#### 新機能：
- SELECT FOR UPDATE/SHAREのステートメントにNOWAITとSKIP LOCKEDの選択項目の使用をサポートしました。
- 大量のトランザクションを最適化する機能をサポートし、大量のトランザクションによるマスターに対するスレーブのディレー、バックアップ失敗等の不具合を修正しました。
- 監査機能を最適化し、非同期監査機能をサポートしました。

#### 公式bugの修正：
- digest_add_token関数のオーバーフローの不具合を修正しました。
- insert blobによるインスタンスcrashの不具合を修正しました。
- hash scanでevent中に同じ行に対する更新が発生してレコードが見つからず、マスター/スレーブのレプリケーション中断が起きる不具合を修正しました。
- performance_schemaのクエリー時にハングする不具合を修正しました。

### 20200331
#### 新機能：
- 公式のMySQL 5.7.22 JSONシリーズ関数が追加されました。
- 電子商取引のフラッシュセール（seckill）ケースに基づく[ホットスポットの更新](https://intl.cloud.tencent.com/document/product/1035/36037)機能をサポートしています。
- [SQLスロットリング](https://intl.cloud.tencent.com/document/product/1035/36037)をサポートしています。
- データ暗号化機能は、KMSカスタムキーの暗号化をサポートしています。

#### 公式bugの修正：
- フルテキストインデックスにおけるマルチバイト文字セットでのフレーズ検索（phrase search）に発生したクラッシュ問題を修正しました。
- 同時実行数が多い場合、CATSロックスケジューリングモジュールに発生したクラッシュ問題を修正しました。

### 20190830
#### 新機能：
- binlogファイルが破損した場合にスキップして解析を続ける機能をサポートします。マスターインスタンスとbinlogの両方が破損した場合に、最大限にスタンバイデータベースからデータを復元して利用します。
- 非GTIDモードからGTIDモードへのデータ同期をサポートします。
- ユーザーがshow full processlistステートメントを使用して「ユーザースレッドのメモリ使用状況」を確認することをサポートします。
- テーブルの[高速列作成機能](https://intl.cloud.tencent.com/document/product/236/35990)をサポートし、データをコピーせず、ディスク領域やディスクI/Oを消費せず、サービスのピーク時にもリアルタイムで変更できます。
- 永続的な自動インクリメント値をサポートします。

#### 公式bugの修正：
- GRANTステートメントの列名に予約語がある場合にレプリケーションが中断するという不具合を修正しました。
- パーティションテーブルで逆方向スキャンを実行するとSQLの実行効率が低下するという不具合を修正しました。
- プライマリキーを含むテーブルの仮想インデックスのデータ不整合によって、クエリー結果の異常が発生するという不具合を修正しました。
- InnoDBでプライマリキーを範囲検索するとデータが欠落するという不具合を修正しました。
- スペースインデックスを持つテーブルでDDLを実行するによって引き起こされるcrashを修正しました。
- binlogのサイズが大きすぎると、ハートビート情報内のファイルの長さがオーバーフローし、マスター/スレーブが中断するという不具合を修正しました。
- eventを削除すると他のeventが時間通りに実行されなくなるという不具合を修正しました。
- 検索結果をまとめるとエラーが発生するという不具合を修正しました。

### 20190615
#### 新機能：
- 透過的データの暗号化機能をサポートします。

### 20190430
#### 公式bugの修正：
- サブクエリーでロングテキスト機能を使用した場合のNULLポインタ参照の不具合を修正しました。
- Hash Scanを実行するとマスター/スレーブが中断するという不具合を修正しました。
- マスターデータベースのbinlogの切り替えによってslaveノードのI/Oスレッドが中断するという不具合を修正しました。
- NAME_CONSTによって引き起こされるcrashを修正しました。
- 文字セットによるillegal mix of collationの不具合を修正しました。

### 20190203
#### 新機能：
- 大きなテーブルの非同期削除が可能：ファイルを非同期かつゆっくりとクリーンアップすることで、大きなテーブルの削除によるビジネスパフォーマンスの変動を回避します。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- CATSのスケジューラをロックする方式をサポートします。
- GTIDを有効にすると、トランザクション内の一時テーブルおよびCTS構文を作成・削除することができます。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- 暗黙的なプライマリキーをサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- super権限以外のユーザーが他のユーザーのセッションをkillする機能をサポートします。cdb_kill_user_extraパラメータを使用して設定します。デフォルト値はroot@%です。
- エンタープライズクラスの暗号化関数をサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。

#### 公式bugの修正：
- binlogキャッシュファイルの容量が不足している場合にレプリケーションが中断されるという不具合を修正しました。
- fsyncがEIOを返すことを繰り返してデッドループに陥ってしまうという不具合を修正しました。
- GTIDの欠番によってレプリケーションが中断され、再開できないという不具合を修正しました。
  
### 20180918
#### 新機能：
- リソースの競合を減らすために、アイドル状態のトランザクションを自動的にkillすることをサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- MemoryエンジンからInnoDBエンジンへの自動切り替え：グローバル変数cdb_convert_memory_to_innodbがONの場合、テーブルエンジンはテーブルの作成/変更時にMemoryからInnoDBに変換されます。
- インデックスの非表示機能をサポートします。
- Jemallocによるメモリ管理をサポートします。これにより、jlibcメモリ管理モジュールを置き換え、メモリ使用量を削減し、メモリ割り当て効率を向上させることができます。
  
#### パフォーマンスの最適化：
- binlogの切り替えを最適化し、rotateのホールドロック時間を短縮させることで、システムパフォーマンスを向上させます。
- Crash Recovery時の回復速度を向上させます。
  
#### 公式bugの修正：
-  マスター/スレーブの切り替えによるeventの無効化の不具合を修正しました。
- REPLAY LOG RECORDによって引き起こされるCrashを修正しました。
- Lose index scansによってクエリー結果にエラーが発生するという不具合を修正しました。

### 20180530
#### 新機能：
- SQL監査機能をサポートします。
- テーブルレベルの並列レプリケーションをサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
  
#### パフォーマンスの最適化：
- slaveインスタンスのロックを最適化し、slaveインスタンスの同期パフォーマンスを向上させます。   
- select ... limitステートメントのプッシュダウンを最適化します。
  
#### 公式bugの修正：
- relay_log_posとmaster_log_posの間のチェックポイントに一貫性がないために切り替えが失敗するエラーを修正しました。
- Crash on UPDATE ON DUPLICATE KEYによるCrashの不具合を修正しました。
-JSONカラムのインポートによる「Invalid escape character in string.」のエラーを修正しました。
  
### 20171130
#### 新機能：
- information_schema.metadata_locksビューをサポートし、現在のインスタンスにおけるMDLの付与及び待機状態を確認します。
- ALTER TABLE NO_WAIT | TIMEOUT構文をサポートし、DDL操作に待機タイムアウトを与えます。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- スレッドプール機能をサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。

#### 公式bugの修正：
- bytes_dataに基づいてinnodb_buffer_pool_pages_dataを計算し、このパラメータのオーバーフローを回避します。
- 非同期モードで速度制限プラグインが使用できないという不具合を修正しました。

## MySQL 5.6
### 20211030
#### 新機能：
- 大規模トランザクションレプリケーションの最適化をサポートします。

#### パフォーマンスの最適化：
- hash scanの適用速度を最適化しました。

#### Bugの修正：
- 大量のテーブルクエリーでOOMが発生する不具合を修正しました。
- innodb_thread_concurrecyを0に設定することで発生するデッドループの不具合を修正しました。
- 長いレコードで統計情報が0になる不具合を修正しました。
- sbmジャンプの不具合を修正しました。
- LOCK_binlog_end_pos hangの不具合を修正しました。

### 20210630
#### 新機能：
- 大規模トランザクションレプリケーションの最適化をサポートします。

#### Bugの修正：
- index mergeがオンになっている場合のコピーの正確性の問題を修正しました。
- rowモードでcdb_more_gtid_feature_supportedがオンになっている場合、create table selectの実行が中断されると、レプリケーションが中断される状況を修正しました。
- max(id)がshow create tableのAUTO_INCREMENTより大きいというBugを修正しました。

### 20201231
#### 公式bugの修正：
- hash scanによって、1032エラーが発生する不具合を修正しました。 
- rowフォーマットのreplace intoによって、マスター/スレーブのauto incrementの値が不一致になるという不具合を修正しました。
- SQL解析に要求されたメモリを解放しないことによって引き起こされるメモリリークを修正しました。
- create table as selectのテーブル作成時に、sql mode検査をスキップする不具合を修正しました。
- Insertステートメントがデフォルト値を挿入する時に、sql mode検査をスキップする不具合を修正しました。
- バインドされたパラメータを使用してupdateステートメントを実行する時に、sql mode検査をスキップする不具合を修正しました。 

### 20200915
#### 新機能：
- [SQLトラフィック制限](https://intl.cloud.tencent.com/document/product/1035/36037) 機能をサポートしています。

#### パフォーマンスの最適化：   
- buffer poolの初期化アクセラレーションを最適化します

#### 公式bugの修正：
- マスター/スレーブのrename tableがハングする不具合を修正しました。 
- event_schedulerの設定をdisableに、cdb_skip_event_schedulerをonからoffに変更した際に、crashが発生する不具合を修正しました。 
- tencentrootの最大リンク数にsrv_max_n_threadsがカウントされず、sync_wait_array関連のアサーションが失敗する不具合を修正しました。 
- 他のクラウドサービスのMySQL 5.6とTencent MySQL 5.6のシステムデータベース中の一部のテーブル構造が異なるため、マスター/スレーブの並列レプリケーションを行った際に、crashが発生する不具合を修正しました。 
- INSERT ON DUPLICATE KEY UPDATE THE WRONG ROWの不具合を修正しました。 
- index_mappingにエラーが発生する不具合を修正しました。 
- mtr失敗のbugを修正しました。 
- hash scanがイベントで同じ行へを更新する時に、レコードが見つからなくなり、マスター/スレーブのレプリケーション中断が起きる不具合を修正しました。 

### 20190930
#### 新機能：
- ユーザーはshow full processlistステートメントを使用して「ユーザースレッドのメモリ使用状況」を確認できます。  

#### 公式bugの修正：
- スタンバイデータベースのレプリケーションフィルターによるgtid欠番の不具合を修正しました。
- Binlogのサイズが大きすぎると、ハートビート情報内のファイルの長さがオーバーフローし、マスター/スレーブが中断するという不具合を修正しました。
- 文字セットによるillegal mix of collationの不具合を修正しました。
- Hash Scanを実行するとマスター/スレーブが中断するという不具合を修正しました。
- NAME_CONSTの使用によって引き起こされるcrashを修正しました。
- マスターデータベースのbinlogの切り替えによってslaveノードのI/Oスレッドが中断するという不具合を修正しました。
- innodb_log_checusumによるバックアップに互換性がないという不具合を修正しました。

### 20190530
#### 公式bugの修正：
- RCモードでダーティデータが読み込まれるという不具合を修正しました。
- 一時テーブルを削除すると待機マシンの再生に失敗するという不具合を修正しました。
- 高並列処理でのデッドロックの不具合を修正しました。
  
### 20190203
#### 新機能：
- 大きなテーブルの非同期削除が可能：ファイルを非同期かつゆっくりとクリーンアップすることで、大きなテーブルの削除によるビジネスパフォーマンスの変動を回避します。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- super権限以外のユーザーが他のユーザーのセッションをkillする機能をサポートします。cdb_kill_user_extraパラメータを使用して設定します。デフォルト値はroot@%です。
- GTIDを有効にすると、トランザクション内の一時テーブルおよびCTS構文を作成・削除することができます。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
  
#### パフォーマンスの最適化：   
- パーティションテーブルのレプリケーションと再生を最適化することで、パーティションテーブルの再生速度を向上させます。
  
#### 公式bugの修正：
- 一時的な空き容量が不足しているため、マスター/スレーブ間でデータが一致しないという不具合を修正しました。
- ホットログレコードを更新するとハングアップするという不具合を修正しました。
- 並列レプリケーションでのSeconds_Behind_Master値に異常が発生するという不具合を修正しました。

### 20180915
#### 新機能：
- MEMORYエンジンからInnoDBエンジンへの自動切り替え：グローバル変数cdb_convert_memory_to_innodbがONの場合、テーブルエンジンはテーブルの作成/変更時にMEMORYからInnoDBに変換されます。
- リソースの競合を減らすために、アイドル状態のトランザクションを自動的にkillします。。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
  
#### 公式bugの修正：
- REPLAY LOG RECORDによって引き起こされるcrashを修正しました。
- decimalの精度によるマスター/スレーブ間の時間データに不整合が生じる不具合を修正しました。

### 20180130
#### 新機能：
- スレッドプール機能をサポートします。この機能を有効化するには、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して申請する必要があります。
- slaveノードはレプリケーションフィルタリングルールの動的な変更をサポートします。

#### パフォーマンスの最適化：
- drop tableによるパフォーマンスの変動。
  
#### 公式bugの修正：
- パスワード文字列の認証によるデータベースのcrashの不具合を修正しました。
  
### 20180122
#### 新機能：
- SQL監査機能をサポートします。

#### 公式bugの修正：
- 整数オーバーフローのエラーを修正しました。
- フルテキストインデックスにおけるクエリーにエラーが発生するという不具合を修正しました。
- レプリケーション中にslaveがcrashするという不具合を修正しました。
	
### 20170830
#### 公式bugの修正：
- 非同期モードでbinlog速度制限が無効になるという不具合を修正しました。
- buffer_pool状態に異常が発生するという不具合を修正しました。
- SEQUENCEと暗黙的なプライマリキーの競合を修正しました。
  
### 20170228
#### 公式bugの修正：
- drop tableの文字コードのbugを修正しました。
- replicate-wild-do-tableが小数点などの特殊文字を含むdb又はtableを正しくフィルタリングできない不具合を修正しました。
- スタンバイデータベースにrotateイベントが発生した後にSQLスレッドが早く終了するという不具合を修正しました。
  
### 20161130
#### パフォーマンスの最適化：
- lock_logロックを分割し、lock logにかかる時間を短縮させ、並列処理のパフォーマンスを向上させます。
- マスターデータベースのACKスレッドが独立して動作するようにして、応答時間を向上させます。
- ファントムリードを防ぐために、ACKを待機している間、ユーザースレッドがkill機能を禁止します。
- sync_binlog !=1の場合に、不要なlock_syncロックになることを修正しました。

