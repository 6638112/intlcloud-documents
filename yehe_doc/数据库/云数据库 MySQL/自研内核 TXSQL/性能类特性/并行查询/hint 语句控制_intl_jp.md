TencentDB for MySQLは、関連するパラメータを調整することにより、並列クエリー機能を有効または無効にすることをサポートしています。コンソールを通じて、SQLステートメント全体の並列クエリー機能を有効または無効にしたり、実行条件パラメータを設定したりできます。hintステートメントを使用して単一のSQLステートメントの並列実行方式を指定することもサポートしています。
>?hintステートメントは、SQLステートメントを実行するかどうかを指定でき、指定されたSQLステートメントにsessionレベルのパラメータを適用できます。hintステートメントは、指定された並列テーブルのクエリーもサポートしています。
>

## hintステートメントの使用例

| 機能 | コマンドライン | 説明 |
|---------|---------|---------|
| 並列クエリーの有効化 | `SELECT /*+PARALLEL(x)*/ ... FROM ...;` | xは0より大きい必要があり、xはこのSQLステートメントで使用される並列クエリーの並列度を表します。|
| 並列クエリーの無効化 | `SELECT /*+PARALLEL(x)*/ ... FROM ...;` | xは0に設定され、並列クエリー機能を無効にすることを意味します。|
| 並列テーブルの指定 | 並列クエリースケジュールの実行を許可または禁止するテーブルを指定するには、次の2つの方法があります。<li>PARALLELを介して、並列クエリースケジュールを実行するテーブルを指定できます<br>`SELECT /*+PARALLEL(t)*/ ... FROM ...;`<li>NO_PARALLELを介して、並列クエリースケジュールの実行を禁止するテーブルを指定できます<br>`SELECT /*+NO_PARALLEL(t)*/ ... FROM ...;`</li> | tはテーブル名です。|
| 並列テーブルと並列クエリーの並列度を同時に指定します | `SELECT /*+PARALLEL(t x)*/ * ... FROM ...;` | xは0より大きい必要があり、xはこのSQLステートメントで使用される並列クエリーの並列度を表します。tはテーブル名です。|
| hintステートメントを介してsessionレベルのパラメータを設定し、指定されたSQLステートメントに対してのみ有効です | `SELECT /*+SET_VAR(var=n)*/ * ... FROM ...;` | varは、sessionスコープをサポートする並列クエリーパラメータです。|

## hintステートメントのユースケース例
**シーン1：**
`select /*+PARALLEL（）*/ * FROM t1，t2；`
txsql_parallel_degreeによって設定された値の並列度（デフォルトの並列度）で並列クエリーを実行するように強制します。ステートメントが並列クエリーの実行条件を満たさない場合、シリアルクエリーにフォールバックします。

**シーン2：**
`select /*+PARALLEL（4）*/ * FROM t1，t2；`
システムのデフォルトの並列度の値に関係なく、このステートメントは並列度4で並列クエリーを実行するように強制します。このステートメントに対してtxsql_parallel_degree=4を設定し、ステートメントが並列クエリーの実行条件を満たさない場合、シリアルクエリーにフォールバックします。

**シーン3：**
`select /*+PARALLEL（t1）*/ * FROM t1，t2；`
t1テーブルを選択して並列クエリーを実行します。並列度は、システムのデフォルトの並列度です。t1テーブルがtxsql_parallel_table_record_thresholdによって設定された値よりも小さい場合、シリアルクエリーにフォールバックします。

**シーン4：**
`select /*+PARALLEL（t1 8）*/ * FROM t1，t2；`
t1テーブルを選択して並列クエリーを実行します。並列度は8です。t1テーブルがtxsql_parallel_table_record_thresholdによって設定された値よりも小さい場合、シリアルクエリーにフォールバックします。

**シーン5：**
`select /*+NO_PARALLEL（t1）*/ * FROM t1，t2；`
t1テーブルを選択して並列クエリーの実行を禁止します。t1テーブルがtxsql_parallel_table_record_thresholdによって設定された値よりも大きい場合、シリアルクエリーにフォールバックします。

**シーン6：**
`select /*+SET_VAR(txsql_parallel_degree=8)*/ * FROM t1，t2；`
システムのデフォルトの並列度の値に関係なく、このステートメントは並列度8で並列クエリーを実行するように強制します。このステートメントに対してtxsql_parallel_degree=8を設定します。

**シーン7：**
`select /*+SET_VAR(txsql_parallel_cost_threshold=1000)*/ * FROM t1，t2`
このステートメントに対してtxsql_parallel_cost_threshold=1000を設定します。このステートメントの実行コストが1000を超える場合は、並列クエリーを使用できます。

**シーン8：**
`select /*+SET_VAR(txsql_optimizer_context_max_mem_size=500000)*/ * FROM t1，t2`
単一ステートメントに対してtxsql_optimizer_context_max_mem_size=500000を設定します。このステートメントが申請できる並列クエリースケジュール環境の最大メモリ制限は、500000に調整されます。

##  関連ドキュメント
- [並列クエリーのオン・オフ](https://www.tencentcloud.com/document/product/236/52512)
- [並列クエリーの確認](https://www.tencentcloud.com/document/product/236/53411)

