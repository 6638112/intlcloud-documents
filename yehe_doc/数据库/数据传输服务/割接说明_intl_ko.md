
## 주의 사항
- 세션을 더 잘 구분하고 데이터 보안을 강화하려면 데이터 마이그레이션을 위한 별도의 데이터베이스 계정을 만드는 것이 좋습니다.
- 비즈니스 전환 실패로 인한 원본 데이터베이스와 대상 데이터베이스 간의 데이터 불일치를 방지하려면 전환 전에 원본 데이터베이스의 비즈니스를 백업 데이터베이스로 전환합니다.
- 컷오버는 원본 데이터베이스에 대한 데이터 쓰기를 일시 중지해야 하므로 사용량이 적은 시간에 업무를 중단하는 것이 좋습니다. 

## 작업 단계
1. [DTS 콘솔](https://console.cloud.tencent.com/dts/migration)에 로그인하고 증분 마이그레이션 관련 여부에 따라 진행합니다.
   - 증분 마이그레이션 있음: [2](#step2)단계로 이동합니다.
   - 증분 마이그레이션 없음: [6](#step6)단계로 이동합니다.
2. [](id:step2)데이터 마이그레이션 작업의 [마이그레이션 단계]가 [증분 데이터 동기화]가 되고, 원본/대상 데이터베이스 데이터 간격이 0MB가 되고, 원본/대상 데이터베이스 시간 지연이 0초가 될 때까지 기다립니다.
![](https://qcloudimg.tencent-cloud.cn/raw/c32cafc476ba23e39456ea7cd2219170.png)
3. 원본 데이터베이스에서 비즈니스를 일시 중지하고 새 데이터 쓰기를 중지합니다.
4. 원본 데이터베이스 유형에 따라 아래에서 적절한 코드를 선택하여 새 세션 정보가 있는지 여부를 확인합니다. 결과가 1 - 5분 내에 DTS 마이그레이션 인스턴스의 연결을 제외하고 실행 중인 새 세션이 없는 것으로 표시되면 비즈니스가 완전히 중지된 것으로 간주할 수 있습니다.
 - MySQL 
```
show processlist  
```
 - SQL Server
```
select * from sys.dm_exec_connections;
```
 - PostgreSQL
```
select * from pg_stat_activity;
```
 - MongoDB
```
use admin
db.runCommand({currentOp: 1, $all:[{"active" : true}]})
```
5. 증분 마이그레이션 작업을 중지합니다.
마이그레이션 작업을 다시 보고 원본/대상 데이터베이스 데이터 간격이 0MB이고 원본/대상 데이터베이스 시간 지연이 0초가 된 후 최소 1분 동안 기다린 다음 [완료]를 클릭하여 증분 마이그레이션 작업을 중지합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/1ffcd386bc18f2f7296ff172ded02faa.png)
6. [](id:step6)원본 및 대상 데이터베이스의 데이터가 일치하는지 확인한 후 전환 시간을 결정하고 비즈니스 시스템을 대상 데이터베이스로 라우팅하고 비즈니스를 재개합니다.

