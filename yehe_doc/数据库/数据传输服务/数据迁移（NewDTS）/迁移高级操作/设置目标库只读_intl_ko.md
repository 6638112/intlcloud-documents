
## 작업 시나리오
DTS가 데이터를 마이그레이션할 때 대상 데이터베이스에 데이터를 입력하면 원본 데이터베이스와 대상 데이터베이스 간에 데이터 불일치가 발생할 수 있습니다. 읽기 전용 대상 데이터베이스 기능이 활성화되면 DTS는 대상 데이터베이스에 대한 쓰기를 제한하기 위해 마이그레이션 계정을 제외한 대상 데이터베이스의 모든 쓰기 권한을 취소하고 데이터 마이그레이션 중에 권한 부여를 금지합니다. 마이그레이션이 완료된 후 쓰기 권한이 개방됩니다. 이는 이중 쓰기로 인한 데이터 불일치를 방지하는 데 도움이 됩니다.
>?이 기능을 사용해 보려면 [Submit Ticket](https://console.cloud.tencent.com/workorder/category)을 통해 신청할 수 있습니다.

## 주의 사항
읽기 전용 대상 데이터베이스 기능이 활성화된 후 DTS는 대상 데이터베이스의 쓰기 권한을 취소하므로 대상 데이터베이스의 계정 수가 많을수록 작업이 **준비 중** 및 **완료됨** 상태로 유지되는 시간이 길어집니다.

## 작업 단계

**현재 읽기 전용 대상 데이터베이스 기능은 계정 마이그레이션 기능과 충돌합니다. 따라서 대상 데이터베이스를 읽기 전용으로 만들고 계정을 마이그레이션하려면 아래 설명된 두 가지 마이그레이션 작업을 수행해야 합니다**.

- 계정 마이그레이션 없이 읽기 전용 대상 데이터베이스를 활성화하려면 작업2를 직접 수행하십시오.
- 읽기 전용 대상 데이터베이스를 활성화하고 계정을 마이그레이션하려면 작업1과 2를 수행하십시오.

#### 작업1: 계정 마이그레이션
>?이 섹션에서는 읽기 전용 대상 데이터베이스 기능 설정 단계만 안내합니다. 마이그레이션된 계정 권한 부여, 작업 제한 및 참고 사항을 포함한 구성에 대한 자세한 내용은 [MySQL에서 MySQL로 마이그레이션](https://www.tencentcloud.com/document/product/571/42645)을 참고하십시오.

원본 데이터베이스에 빈 test 데이터베이스를 생성합니다. 그 다음 전체 마이그레이션 작업을 생성하고 마이그레이션 객체를 객체 지정으로 설정하고 계정 마이그레이션을 선택한 다음 test 데이터베이스를 선택합니다. 원본 데이터베이스의 계정을 대상 데이터베이스로 마이그레이션한 후 작업을 완료합니다.

1. 원본 데이터베이스에 빈 test 데이터베이스를 생성합니다.
2. [DTS 콘솔](https://console.cloud.tencent.com/dts/migration)에 로그인하고 왼쪽 사이드바에서 **데이터 마이그레이션**을 선택한 다음 **마이그레이션 작업 생성**을 클릭하여 마이그레이션 작업 생성 페이지로 이동합니다.
3. 마이그레이션 작업 생성 페이지에서 원본 및 대상 데이터베이스의 유형, 리전 및 사양을 선택하고 **구매하기**를 클릭합니다.
4. 마이그레이션 작업을 구성합니다.
    **원본 및 대상 데이터베이스 설정** 페이지에서 작업 설정, 원본 데이터베이스 설정 및 대상 데이터베이스 설정을 구성하고, 원본 데이터베이스와 대상 데이터베이스의 연결성 테스트 통과 후 **생성**을 클릭합니다.
   ![](https://qcloudimg.tencent-cloud.cn/raw/dac2f8c6ba3cd96dd46fc5b7e99a1762.png)
5. **마이그레이션 옵션 설정 및 마이그레이션 객체 선택** 페이지에서 마이그레이션 유형 및 객체를 구성하고 **저장**을 클릭합니다.
 - 마이그레이션 유형: **전체 마이그레이션**을 선택합니다.
 - 데이터 일관성 검증: **검증 안 함**을 선택합니다.
 - 마이그레이션 객체: **객체 지정**을 선택한 다음 test 데이터베이스를 선택합니다.
 - 계정 마이그레이션: 이 옵션을 활성화합니다.
 - 고급 마이그레이션 객체:
   ![](https://qcloudimg.tencent-cloud.cn/raw/bae750e6e1a4d363328f8db540301bbe.png)     
6. **작업 검증** 페이지에서 DTS는 원본 데이터베이스의 계정 정보를 확인하고 적합한 계정을 마이그레이션합니다.
>?계정 마이그레이션에 대한 자세한 요구 사항은 [계정 마이그레이션](https://www.tencentcloud.com/document/product/571/48483)을 참고하십시오.
>
7. 작업 상태가 **완료됨**이 되면 다음 마이그레이션 작업을 생성합니다.

#### 작업2: 읽기 전용 대상 데이터베이스 구성

계정을 제외한 객체를 마이그레이션하고 읽기 전용 대상 데이터베이스를 활성화합니다.

1. 마이그레이션 작업을 구매합니다. 마이그레이션 작업 생성 페이지에서 원본 및 대상 데이터베이스의 유형, 리전 및 사양을 선택하고 **구매하기**를 클릭합니다.
2. 마이그레이션 작업을 구성합니다.
   **원본 및 대상 데이터베이스 설정** 페이지에서 작업, 원본 데이터베이스 및 대상 데이터베이스 설정을 구성합니다. 원본 및 대상 데이터베이스가 연결 테스트를 통과한 후 **생성**을 클릭합니다. 여기서 액세스 유형은 작업1에서 선택한 것과 동일해야 합니다.
3. **마이그레이션 옵션 설정 및 마이그레이션 객체 선택** 페이지에서 마이그레이션 유형 및 객체를 구성하고 **저장**을 클릭합니다.
 - 마이그레이션 유형: 필요에 따라 선택합니다.
 - 데이터 일관성 검증: 필요에 따라 선택합니다.
 - 마이그레이션 객체: **전체 인스턴스**를 선택합니다.
 - 고급 마이그레이션 객체: 필요에 따라 선택합니다.
 - 읽기 전용 대상 데이터베이스: 이 옵션을 활성화합니다.
 - 계정 마이그레이션: 이 옵션을 비활성화합니다.
    
4. 작업을 검증합니다.
5. 데이터 마이그레이션 작업 목록으로 돌아가면 작업이 준비 중 상태로 변경된 것을 확인할 수 있습니다. 1 - 2분 후 데이터 마이그레이션 작업이 시작됩니다.
대상 데이터베이스의 계정 수가 많을수록 작업이 **준비 중** 및 **완료됨** 상태로 유지되는 시간이 길어집니다.

