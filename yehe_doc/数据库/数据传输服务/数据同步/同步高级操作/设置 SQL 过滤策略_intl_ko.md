## 작업 시나리오
동기화 작업을 구성할 때 SQL 동기화 정책을 설정하여 설정된 조건에 맞는 SQL 데이터만 대상 데이터베이스에 동기화하도록 할 수 있습니다. 이러한 방식으로 여러 데이터베이스 간의 동기화 체계를 유연하게 구성하거나 필요에 따라 데이터 테이블을 분할할 수 있습니다.

DTS는 다음 SQL 필터를 지원합니다.
- DML 필터: Insert, Update 및 Delete 유형을 지원합니다.

- DDL 필터: CREATE TABLE, CREATE VIEW, DROP INDEX와 같은 특정 DDL 작업을 선택할 수 있습니다.

- Where 조건부 필터: 단일 테이블에 대한 필터를 사용자 정의할 수 있습니다.
  
> ?현재 다음 데이터 동기화 연결에 대해 DDL 및 Where 조건으로 필터링할 수 있습니다.
>
> - MySQL > MySQL/MariaDB/TDSQL-C MySQL
> - MariaDB > MySQL/MariaDB
> - Percona > MySQL/MariaDB
> - TDSQL-C MySQL > MySQL/TDSQL-C MySQL

## 제한
단일 테이블에 대해 Where 조건부 필터를 설정할 수 있습니다. 여러 테이블을 필터링하려면 각각에 대한 필터를 설정하십시오.

## 작업 단계
1. [동기화 작업](https://console.cloud.tencent.com/dts/replication)의 **동기화 옵션 및 객체 설정** 페이지에서 다른 SQL 정책을 선택합니다.
   - DML: Insert, Update 및 Delete 유형을 지원합니다.
   - DDL:
     - **DDL**을 선택하고 **사용자 정의 DDL**을 선택하지 않으면 원본 데이터베이스의 모든 DDL 작업이 타깃 데이터베이스와 동기화됩니다.
     - **DDL**과 **사용자 정의 DDL**을 모두 선택하면 특정 DDL 정책을 선택할 수 있으며 선택된 정책만 타깃 데이터베이스에 동기화됩니다.
     - **DDL**을 선택하지 않으면 모든 DDL 작업이 타깃 데이터베이스에 동기화되지 않습니다.
<img src="https://qcloudimg.tencent-cloud.cn/raw/6f6e5623c461cd7f810bd281eb87c43d.png" style="zoom:70%;" /> 
2. 객체 옵션 동기화 오른쪽의 객체 선택에서 타깃 테이블을 선택하고 오른쪽의 편집 버튼을 클릭하여 Where 조건 필터를 설정합니다.

>?Where 조건부 필터 설정 규칙:
>- INSERT 작업의 경우 삽입할 데이터가 필터 규칙이 적용되는 조건을 충족해야 합니다. DELETE 작업의 경우 삭제할 데이터가 필터 규칙이 적용되는 조건을 충족해야 합니다. UPDATE 작업의 경우 업데이트 전후의 데이터 모두 필터 규칙이 적용되는 조건을 충족해야 합니다.
>- 입력한 규칙은 MySQL보다 더 엄격한 유효한 BOOL 표현식이어야 합니다. MySQL에서 지원되지만 경고를 유발할 수 있는 일부 구문(예: 문자열을 숫자와 비교, c1 + c2 < "abc")은 여기에서 지원되지 않습니다. 로직, 산술 및 비교 작업의 규칙 및 우선 순위 수준은 MySQL과 동일합니다. 연산의 우선 순위 수준은 괄호를 통해 변경할 수 있습니다. NULL이 있더라도 연산 규칙은 여전히 MySQL과 동일합니다. DTS 시스템은 입력된 조건부 필터 규칙을 확인하고 규칙이 유효하지 않은 경우 경고를 발행합니다.
>- 기본 작동 규칙은 다음과 같습니다:
>  - 열 이름을 변수로 가져올 수 있습니다.
>  - 로직 연산(NOT, AND, OR, XOR, && 및 ||)이 지원됩니다.
>  - 숫자 유형(부호 있는/부호 없는 정수 유형 TINYINT, SMALLINT, MEDIUMINT, INT 및 BIGINT, 부동 소수점 유형 FLOAT 및 DOUBLE, 정확한 유형  DECIMAL) 및 해당 산술 연산(+, -, \*, /, %, DIV, MOD) 및 비교 연산(=, !=, >, <, >=, <=, <> 및 <=>)이 지원됩니다.  
>  - 문자열 유형(CHAR 및 VARCHAR) 및 해당 비교 작업(이진법 비교)이 지원됩니다.  
>  - 데이터 유형(DATE, DATETIME 및 TIMESTAMP) 및 해당 비교 작업이 지원됩니다. 
>  - 시간 유형(TIME) 및 해당 비교 연산을 지원합니다. 날짜/시간 유형의 변수는 문자열과 비교할 수 있습니다. 이 경우 문자열은 날짜/시간 비교 규칙에 따라 비교를 위해 날짜/시간형 상수로 변환됩니다.  
>  - 입력된 TIMESTAMP의 기본 시간대는 UTC+0이며, 비교를 위해 UTC+0의 시간으로 변환됩니다. 
>    예시: 입력한 필터 규칙이 'c1 > "2016-10-01 09:00:00"'인 경우, 여기서 c1이 TIMESTAMP 유형의 열이면 "2016-10-01 09:00:00"은 UTC+0 시간대의 시간으로 구문 분석됩니다. 즉, 비교를 위해 "2016-10-01 09:00:00 +00:00"과 c1도 UTC+0의 시간으로 변환됩니다.
>   
3. **확인**을 클릭합니다.
4. **저장 및 다음 단계**을 클릭하여 후속 동기화 작업 프로세스를 진행합니다.

