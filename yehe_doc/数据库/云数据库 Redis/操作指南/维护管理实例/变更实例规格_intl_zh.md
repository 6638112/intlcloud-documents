
## 操作场景
云数据库 Redis 支持变更实例的规格，提供灵活的扩缩容操作。您可根据业务所处的实际情况灵活调整 Redis 实例的规格，从而更好满足资源充分利用和成本实时优化等需求。本文为您介绍在云数据库 Redis 控制台变更实例规格的过程。

变更实例规格支持在控制台一键式操作，扩容或缩容过程中无需停止服务，无需做任何处理。 

- 扩容或缩容节点：指调整实例节点的内存容量，以适应不断变化的内存需求，避免出现因为内存不够用而卡机的状况。
- 增加或删除副本：指调整实例的副本数量。副本是指非主节点的节点，所有的副本都会参与系统高可用支持，因此副本数越多可用性越高。当副本数大于等于1时，可以开启读写分离，通过副本节点扩展读性能。
- 增加或删除分片：针对集群架构实例的分片模式，将不同的 Key 分配到多个分片节点，调整分片节点的数量，  达到水平扩充系统性能的目的 。

## 版本说明

- 当前 Redis 4.0 、5.0 标准版实例均支持扩容或缩容节点容量、增加或减少副本数量。
- 当前 Redis 4.0 、5.0 集群版实例均支持扩容或缩容节点容量、增加或减少副本数量、增加或减少分片数量。
- 当前 Redis 2.8 标准版仅支持扩容或缩容节点容量。
- 多可用区部署实例不支持减少副本数量。增加副本的具体信息，请参见 [多可用区实例增加副本](https://intl.cloud.tencent.com/document/product/239/46556)。

## 计费说明
### 按量计费

实例的计费周期为小时，系统按照第一阶梯在下一个整点按照实例新的配置规格进行计费， 每个整点进行一次结算。 按量计费根据使用时长不同，共分为三个阶梯，具体信息，请参见 [计费概述](https://intl.cloud.tencent.com/document/product/239/31954)。每个阶梯的计费详情，请参见 [产品定价](https://intl.cloud.tencent.com/document/product/239/9894)。

## 前提条件

- 已 [创建云数据库 Redis 实例](https://intl.cloud.tencent.com/document/product/239/37712)。
- 实例及其所关联的实例处于正常状态下（运行中），并且当前没有任何任务执行。
- 已计算变配后的规格需求，并了解相应费用，请确保您的腾讯云账号余额充足。

## 内存版（标准架构）扩缩容

>!
>- 配置变更后，实例将按照新的规格计费。
>- 内存版（标准架构）扩容时，本机剩余容量不足以满足扩容需求，则会发生迁移，迁移过程中不影响业务访问，迁移完成后仅2.8版本会发生闪断，建议该版本业务侧有重连机制。
>- 因内存版（标准架构）最大容量为64GB，所以当内存版（标准架构）容量达到64GB时，无法再进行扩容。
>- 为避免缩容失败，缩容后的实例容量要求大于或等于现有数据量的1.3倍，缩容后系统会自动进行退费。

1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)。
2. 在右侧实例列表页面上方，选择地域。
3. 在实例列表中，找到需变更配置的实例。
4. 在其**操作**列，进行扩容或缩容、增加或减少副本的操作。
  - 选择**配置变更** > **扩容节点**，在**云数据库 Redis 配置变更**页面，扩容节点的容量大小。
  - 选择**配置变更** > **缩容节点**，在**云数据库 Redis 配置变更**页面，缩容节点的容量大小。缩容节点的配置参数与扩容节点类似，其中**扩容后容量**指缩容之后每个分片的容量规格，缩容后的实例容量要求大于或等于已使用容量的1.3倍，请您对比缩容前后的容量规格，确认是否满足要求。
![](https://qcloudimg.tencent-cloud.cn/raw/4cd856bdb7e45e565d143edaa5ea05bc.png)
<table>
<thead><tr><th>参数名称</th><th>参数解释</th></tr></thead>
<tbody><tr>
<td>已使用容量</td><td>当前实例已经使用的容量。</td></tr>
<tr>
<td>最小内存规格</td><td>当前实例最小的内存规格要求，防止磁盘被写满。</td></tr>
<tr>
<td>扩容后容量</td><td>扩容或缩容之后的每个分片的容量规格。</td></tr>
<tr>
<td>对比</td>
<td>对比当前配置与之后的配置：包括分片数、分片规格、副本数、总容量、连接总数、最大流量。</td></tr>
<tr>
<td>配置变更费用</td>
<td><ul> <li> <strong>按量计费</strong>：实例调整配置后每小时的计费单价。单击<strong>计费详情</strong>，可查看计费项目、计费公式，确认费用。</li></ul></td></tr>
</tbody></table>

  - 选择**配置变更** > **增加副本**，在**云数据库 Redis 配置变更**页面，在**副本数量**后面的下拉列表选择调整后的副本数量。其余参数与扩容节点的参数类似。多可用区实例增加副本的具体操作，请参见[ 多可用区实例增加副本](https://intl.cloud.tencent.com/document/product/239/46556)。
  - 选择**配置变更** > **删除副本**，在**云数据库 Redis 配置变更**页面，在**副本数量**后面的下拉列表选择调整后的副本数量。其余参数与扩容节点的参数类似。
![](https://qcloudimg.tencent-cloud.cn/raw/b5976cb9fdb873c586af9a0b41eeee32.png)
5. 确认调整配置，单击**确定**。
6. 返回实例列表，待实例状态变更为**运行中**，即可正常使用。

## 内存版（集群架构）扩缩容
>!
>- 配置变更后，实例将按照新的规格计费。
>- 为避免缩容失败，缩容后的实例容量要求大于或等于现有数据量的1.3倍，缩容后系统会自动进行退费。
>- 分片的新增和删除操作，系统将自动均衡 Slot 配置，并且迁移数据，迁移操作可能会失败，建议在业务低峰期进行操作， 避免迁移操作对业务访问造成影响。

1. 登录 [Redis 控制台](https://console.cloud.tencent.com/redis)。
2. 在右侧实例列表页面上方，选择地域。
3. 在实例列表中，找到需变更配置的实例。
4. 在其**操作**列，进行扩容或缩容、增加或减少副本、增加或减少分片的操作。
   - 选择**配置变更** > **扩容节点**，在**云数据库 Redis 配置变更**页面，扩容实例每个分片节点的容量大小。
   - 选择**配置变更** > **缩容节点**，在**云数据库 Redis 配置变更**页面，缩容每个分片节点的容量大小。缩容节点的配置参数与扩容节点类似，其中**分片大小**指缩容之后每个分片的容量规格，缩容后的实例容量要求大于或等于已使用容量的1.3倍，请您对比缩容前后的容量规格，确认是否满足要求。
![](https://qcloudimg.tencent-cloud.cn/raw/5c40a66daab927dc2695b09c8ba36ab4.png)
<table>
<thead><tr><th>参数名称</th><th>参数解释</th></tr></thead>
<tbody><tr>
<td>已使用容量</td><td>当前集群实例已经使用的容量。</td></tr>
<tr>
<td>最小内存规格</td><td>当前集群实例每个分片最小的内存规格要求，防止磁盘被写满。</td></tr>
<tr>
<td>分片大小</td><td>扩缩容之后的每个分片的容量规格。</td></tr>
<tr>
<td>对比</td>
<td>对比当前配置与扩容之后的配置：包括分片数、分片规格、副本数、总容量、连接总数、最大流量。</td></tr>
<tr>
<td>配置变更费用</td>
<td><ul> <li> <strong>按量计费</strong>：实例调整配置后每小时的计费单价。单击<strong>计费详情</strong>，可查看计费项目、计费公式，确认费用。</li></ul></td></tr>
</tbody></table>

   - 选择**配置变更** > **增加副本**，在**云数据库 Redis配置变更**页面，在**副本数量**后面的下拉列表选择调整后的副本数量。其余参数与扩容节点的参数类似。多可用区实例增加副本的具体操作，请参见 [多可用区实例增加副本](https://intl.cloud.tencent.com/document/product/239/46556)。
   - 选择**配置变更** > **删除副本**，在**云数据库 Redis配置变更**页面，在**副本数量**后面的下拉列表选择调整后的副本数量。其余参数与扩容节点的参数类似。
![](https://qcloudimg.tencent-cloud.cn/raw/801aabcb920a549776c8addeb10981b1.png)
   - 选择**配置变更** > **增加分片**，在**云数据库 Redis 配置变更**页面，在**分片数量**后面的下拉列表选择调整后的分片数量。其余参数与扩容节点的参数类似。
   - 选择**配置变更** > **删除分片**，在**云数据库 Redis 配置变更**页面，在**分片数量**后面的下拉列表选择调整后的分片数量。其余参数与扩容节点的参数类似。
![](https://qcloudimg.tencent-cloud.cn/raw/dd96b99885d4faba2d2346fb7bd139af.png)
5. 确认调整配置，单击**确定**。
6. 返回实例列表，待实例状态变更为**运行中**，即可正常使用。

## 相关 API

| 接口名称                                                     | 接口功能       |
| :----------------------------------------------------------- | :------------- |
| [UpgradeInstance](https://intl.cloud.tencent.com/document/product/239/32052) | 升级实例的配置 |
