The replica set architecture of TencentDB for MongoDB achieves high availability and read/write separation by deploying multiple types of nodes. Each replica set instance consists of one primary node, one or multiple secondary nodes, and one hidden node.

The sharded cluster architecture implements the horizontal capacity expansion of data based on the replica set architecture by combining multiple replica sets, each of which is a shard.

Each node is as described below:

| Node | Feature | Description |
| :----------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| Primary node | It is responsible for executing and responding to data read/write requests. | There can be only one primary node in each replica set instance. |
| Secondary node | A secondary node replicates the data of the primary node by periodically polling its oplogs to ensure the data consistency. When the primary node fails, the system will elect a secondary node the new primary node in order to ensure the high availability. | <li>When the client connects to a secondary node, it can only read but not write data. </li><li>On v4.2 and later, when a secondary node fails, the system will automatically replace it with the default hidden node to ensure the high availability of the secondary node. </li><li>A secondary node can be expanded as described in [Adding Replica Node](https://www.tencentcloud.com/document/product/240/49132). </li><li>A secondary node can be promoted to primary node as described in [Promoting Replica Node to Primary Node](https://www.tencentcloud.com/document/product/240/49125). </li> |
| Hidden node | A secondary node will be designated as the hidden node by default for each newly purchased instance. When the primary node fails, the hidden node does not participate in the election of the new primary node. It only serves as an invisible replica node to back up data. When a secondary or read-only node fails, the system will automatically replace it with the hidden node as a new secondary or read-only node to achieve a high availability. | <li>There can be only one hidden node in each replica set instance. </li><li>A secondary node set as the hidden node cannot be deleted. </li> |
| Read-only node | If the read-only replica feature is enabled, the system will set one or more secondary nodes as read-only nodes. They are mainly suitable for read request scenarios with an ultra high data volume. They sync data from the primary or secondary node through oplogs, and the system automatically routes read requests to them to reduce the access pressure on the primary node. | <li>Read-only nodes do not participate in the election of the primary node. </li><li>There can be multiple read-only nodes in each replica set instance. For more information, see [Adding Read-Only Node](https://www.tencentcloud.com/document/product/240/49130). </li> |

