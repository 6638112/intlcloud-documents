## 功能简介
### 概述
基于请求和会话特征、客户端画像情报和智能行为分析，识别并管控机器人客户端（包括代理、爬虫、扫描器、搜索引擎机器人、API客户端等非浏览器客户端）访问，识别处置恶意高危请求（如恶意扫描、僵尸网络设备、ATO攻击源、高危代理、暴力破解客户端等），同时避免合法爬虫和API客户端误报。

>?目前边缘安全加速平台控制台仅对部分用户开放，如需访问控制台，请 [联系我们](https://intl.cloud.tencent.com/contact-us) 开通权限。


**调优Bot管理规则**
调试优化规则配置时，建议按如下步骤部署策略：
- 将规则或规则分类调整至观察，此时Bot管理功能对匹配规则的请求将放行，但是会记录规则匹配日志。
- 发起已知为正常（或明确需要拦截）的请求
- 查看Bot管理匹配规则日志，对于明确为正常的请求匹配的规则，配置为观察或忽略。对于明确需要拦截的请求，配置人机挑战或者拦截。

## Bot基础防护设置

基于请求特征，如UA、搜索引擎特征、IDC等分类，对匹配具体特征规则或匹配特征分类的请求进行处置。
**配置建议**
该功能基于静态客户端请求特征识别BOT请求，建议根据业务场景配置规则。

- UA特征规则：覆盖场景较多，识别特定类型客户端，针对性强。建议业务按实际情况启用特定规则，并结合观察模式调试优化。
- 搜索引擎规则：针对搜索引擎使用的Bot客户端识别。对于网站等搜索引擎可达的业务场景建议关闭，对于非页面类型站点（如API服务等）建议开启。
- IDC规则：针对数据中心或特定运营商客户端识别。建议结合业务需要配置指定运营商或IDC规则，并结合观察模式调试优化。


1. 登录 [边缘安全加速平台控制台](https://console.cloud.tencent.com/edgeone)，在左侧菜单栏中，单击**安全防护** > **Bot管理**。
2. 在 Bot管理 页面，选择所需站点和子域名，在 Bot基础防护设置 模块中，单击**设置**，调整规则配置。
3. 在 Bot基础防护设置 页面上，所需要配置的规则分类卡片上，单击**详细规则**，对该类别规则进行配置。

**批量设置多个分类卡片**
在 Bot基础防护设置 页面上，单击**批量设置**，然后可选择多个分类卡片进行批量设置处置方式。具体操作步骤如下：
1. 在批量设置模式下，逐个单击需要包含的分类卡片，直至所有需要配置的分类卡片都已勾选。
2. 单击**处置方式**下拉框，选择需要配置的处置方式。
3. 单击**应用**，配置生效。

>! 在批量设置模式下，可以单击**全选**快速选择全部分类卡片，或者单击**取消全选**快速取消选择全部分类卡片。

4. 在 Bot基础防护设置 分类卡片的 详细规则 配置页面，在需要调整配置的规则项上，点击**处置方式**栏的下拉框，选择需要配置的处置方式。

**批量设置多个规则**
在 Bot基础防护设置 模块，详细规则配置页面上，单击**批量设置**，然后可选择多个规则进行批量设置处置方式。具体操作步骤如下：

1. 单击规则左侧多选框，直至所有需要配置的分类卡片都已勾选。
2. 单击**处置方式**下拉框，选择需要配置的处置方式。
3. 单击**应用**，配置生效。
>?
>- 在批量设置模式下，可以单击**全选**或者规则栏最上方的多选框，快速选择全部规则。
>- 在批量设置模式下，可以单击**取消全选**快速取消选择全部规则。

4. 完成全部配置调整后，单击页面底部**确定**，配置生效。


## 自定义规则
参考 Web防护 自定义规则 配置方式。

## 客户端画像
基于近期采集的大量恶意访问数据和情报数据，对客户端IP信誉画像分析。可根据恶意客户端置信度配置相应处置方式。
**客户端画像置信度**
对于各个类别的客户端画像规则，每个置信度对应了一个客户端地址列表，置信度反应了该列表内的客户端地址近期进行该类别恶意行为的频率和一致性：
- 较高置信度：该客户端地址近期稳定、高频率进行该类别的恶意行为。来自该类地址的请求几乎确定为恶意行为，建议拦截。
- 中等置信度：该客户端地址近期有过显著频率进行该类别的恶意行为。来自该类地址的请求较大概率为恶意行为，偶尔会有误报，建议配置为 JavaScript挑战 或 托管挑战。
- 一般置信度：该客户端地址近期有过稳定进行该类别的恶意行为记录。来自该地址的客户端相比其他地址有更大可能性发起恶意行为，但有一定误报可能，建议配置为观察，并通过调优步骤，按需要调整为 JavaScript挑战 或 托管挑战。

1. 登录 [边缘安全加速平台控制台](https://console.cloud.tencent.com/edgeone)，在左侧菜单栏中，单击**安全防护** > **Bot管理**。
2. 在 Bot管理 页面，选择所需站点和子域名，单击 客户端画像分析 模块中的![](https://qcloudimg.tencent-cloud.cn/raw/7d363152eb0ea6c823ae278c4d118dc6.png)开关，可以快速开启或关闭该模块功能。

>? 
>- 关闭 客户端画像分析 模块后，模块内规则不生效，将默认放行请求，也不会记录相关日志。
>- 首次开启 客户端画像分析 功能时，建议先配置详细规则，再开启规则。以避免未配置的规则影响正常业务访问。

3. 在 Bot管理 页面，选择所需站点和子域名，单击 客户端画像分析 模块上**设置**，对模块内规则进行配置。
4. 在 客户端画像分析 配置页面，在需要调整配置的恶意行为分类 框内，单击不同置信度对应的**处置方式**下拉框，选择需要配置的处置方式
5. 完成全部配置后，单击页面底部**确定**，配置生效。
