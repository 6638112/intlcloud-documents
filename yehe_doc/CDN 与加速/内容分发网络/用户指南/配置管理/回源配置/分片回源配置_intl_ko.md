## 설정 시나리오

Tencent Cloud CDN은 리소스를 캐시할 때 저장 효율을 높이기 위해 파일을 분할하여 저장하고, Range 요청을 지원합니다. 요청할 때 HTTP 헤더 `Range: bytes = 0-999`를 휴대한다면 파일의 상위 1000 바이트를 사용자에게 리턴합니다.

Range 원본 요청 설정을 활성화한 후 사용자가 요청한 일부 파일이 이미 만료된 경우, CDN은 사용자의 요청에 따라 분할하여 필요한 일부 파일만 가져와 캐시함과 동시에 사용자에게 리턴합니다. Range 원본 요청 설정을 비활성화한 후 사용자가 일부 파일만 요청하더라도 CDN은 전체 파일을 요청 및 가져온 다음 캐시하며, 사용자가 요청한 일부 파일을 응답합니다.

Range 원본 요청 설정을 활성화하면 대용량 파일의 배포 효율을 높여, 응답 속도를 향상하고 원본 서버의 부하를 줄일 수 있습니다.

> 설명:
>
> Range 원본 요청 설정이 활성화된 후에는 리소스가 노드에 분할 캐시되지만, 모든 분할된 캐시의 만료 시간은 사용자가 지정한 캐시 만료 규칙과 동일하게 유지됩니다.

## 설정 가이드

### 설정 조회

[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하여 메뉴에서 [Domain Management]를 선택하고 도메인 오른쪽 [Manage]를 클릭하면 도메인 설정 페이지로 이동할 수 있습니다. 그중 네 번째 탭인 [Origin Configuration]에서 Range 원본 요청 설정을 확인할 수 있으며 비활성화 상태로 기본 설정되어 있습니다. COS 원본 서버 도메인의 경우에는 활성화 상태로 기본 설정되어 있습니다.
![img](https://main.qcloudimg.com/raw/432dd0c9c4e89a1a7ebcd0fe51cbf704.png)

### 설정 수정

on-off 스위치를 클릭하여 Range 원본 요청 설정을 활성화 또는 비활성화할 수 있습니다. Range 원본 요청 설정을 활성화할 때, 원본 서버가 Range 요청을 지원하는지 확인해야 합니다. 그렇지 않으면 원본 요청에 실패할 수 있습니다.
![img](https://main.qcloudimg.com/raw/725ae7fabccfb1a3de205968c56a2951.png)

> 참고:
>
> 사용자의 가속 도메인 서비스 지역이 글로벌 가속이면 설정한 Range 원본 요청 설정이 글로벌 범위에 적용되며 중국 내, 중국 외를 다르게 설정할 수 없습니다.

## 설정 예시

도메인 `cloud.tencent.com`의 Range 원본 요청 설정이 아래와 같을 경우
![img](https://main.qcloudimg.com/raw/432dd0c9c4e89a1a7ebcd0fe51cbf704.png)
사용자 A가 `http://cloud.tencent.com/test.apk` 리소스를 요청한 경우, 노드가 요청을 받은 후, 캐시한 `test.apk` 파일이 만료되었음을 발견했을 때 원본 요청을 보냅니다. 노드의 원본 요청은 Range 요청을 사용하고, 리소스를 분할하여 획득 및 캐시합니다. 이때 사용자 B도 Range 요청을 보냈고, 노드에 저장된 멀티파트가 Range에 지정한 바이트 범위에 해당한다면, 모든 멀티파트를 얻을 때까지 기다릴 필요 없이 사용자에게 바로 리턴합니다.