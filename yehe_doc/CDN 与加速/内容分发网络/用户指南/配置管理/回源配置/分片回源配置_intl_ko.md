## 설정 시나리오
Tencent Cloud의 CDN은 리소스 캐싱 효율을 높이기 위해 파일을 분할하여 저장하며, Range 요청을 지원합니다. 요청 시 HTTP 헤더 `Range: bytes = 0-999` 가 포함되었을 경우 파일의 상위 1,000개 바이트를 사용자에게 리턴합니다.

Range 원본 설정을 활성화하면, 사용자가 요청한 일부 파일이 만료되었을 경우 CDN이 사용자의 요청에 따라 멀티 파트 원본 요청을 진행하여, 사용자가 필요한 일부 파일만 가져와 캐싱하고 사용자에게 리턴합니다. Range 원본 설정을 비활성화하면, 사용자가 일부 파일만 요청하였어도 CDN이 전체 파일을 가져와 캐싱하고 사용자가 요청한 일부 파일을 리턴합니다.

Range 원본 설정을 활성화하면 파일의 배포 효율을 극대화하고 응답 속도를 향상하여, 원본 서버의 부하를 해소할 수 있습니다.
<div class="doc-video-mod"><iframe src="https://cloud.tencent.com/edu/learning/quick-play/2209-31085?source=gw.doc.media&withPoster=1&notip=1"></iframe></div>


>Range 원본 설정을 활성화하면, 리소스가 노드에 분할 캐싱됩니다. 단, 사용자가 지정한 캐시 만료 규칙에 따라 모든 멀티 파트의 캐시 만료 시간이 통일됩니다.

## 설정 가이드
### 설정 조회
[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하여 메뉴에서 [도메인 관리]를 선택한 뒤, 도메인 오른쪽의 [관리]를 클릭하면 도메인 설정 페이지에 접속할 수 있습니다. 그중 네 번째 메뉴인 [원본 설정]에서 Range 원본 설정을 확인할 수 있으며, 비활성화 상태로 기본 설정되어 있습니다. COS가 원본 서버인 도메인은 활성화 상태로 기본 설정되어 있습니다.
![](https://main.qcloudimg.com/raw/04b9ec63d365b60ba2c3a8c16bc61c36.png)

### 설정 변경
스위치를 클릭하여 Range 원본 설정을 활성화하거나 비활성화할 수 있습니다. Range 원본 설정을 활성화하려면 원본 서버가 Range 요청을 지원하는지 확인해야 합니다. 지원하지 않을 경우, 원본 요청에 실패할 수 있습니다.
![](https://main.qcloudimg.com/raw/0c7d65308c5ae22693bb29b51345ce83.png)

>귀하의 가속 도메인 서비스 지역이 글로벌 가속일 경우 설정한 Range 원본 설정이 중국 내, 외에 모두 적용되며, 중국 내와 중국 외를 다르게 설정할 수 없습니다

## 설정 예시
도메인이 `cloud.tencent.com`인 Range 원본 설정은 다음과 같습니다.
![](https://main.qcloudimg.com/raw/04b9ec63d365b60ba2c3a8c16bc61c36.png)
사용자 A가 보낸 'http://www.test.com/test.apk' 리소스에 대한 요청을 노드에서 수신한 뒤, 캐싱된 'test.apk' 파일이 만료된 경우 원본 요청을 보냅니다. 노드에서 원본 요청 시 Range 요청을 사용하여 리소스 및 캐시를 나누어 획득합니다. 이때 사용자 B도 Range 요청을 보냈고, 노드에 저장된 멀티 파트가 Range의 지정 바이트에 부합하면, 모든 멀티 파트를 획득할 때까지 기다리지 않고 사용자에게 바로 리턴합니다.

