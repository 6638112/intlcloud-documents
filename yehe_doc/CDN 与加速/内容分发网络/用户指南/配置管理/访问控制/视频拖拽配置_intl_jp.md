## 設定シナリオ

- ビデオドラッグは主にVODシナリオで発生します。ユーザーが再生の進捗状況をドラッグすると、サーバーへ以下のようなリクエストが送信されます。
`http://www.test.com/test.flv?start=10`
  この場合、10バイト目以降のデータが返されます。VODシナリオのビデオファイルはいずれも各CDNノードにキャッシュされているため、この設定を有効にすることで、各ノードがこのようなリクエストに直接応答することができます。
- ビデオドラッグをオンにする場合、同時にフィルタパラメータ構成をオンにする、つまり[キャッシュキールール](https://intl.cloud.tencent.com/document/product/228/35316)中のすべてのルールのフィルタパラメータ構成を「すべてフィルタリング」とし、かつオリジンサーバーがrangeリクエストをサポートする必要があります。サポートするファイル形式はmp4、flv、tsです。

| ファイルタイプ | meta情報                                                    | startパラメータ説明                                               | リクエスト例                                                     |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| MP4      | オリジンサーバーのビデオのmeta情報がファイルのヘッダーにある必要があり、meta情報が最後にあるビデオはサポートしていません | startパラメータは時刻を示し、単位は秒で、ミリ秒を示す小数点以下までの表示をサポートします（例えば start = 1.01は開始時刻が1.01sであることを示す）。CDNはstartが表示する時刻の一つ前のキーフレームに位置づけされます（現在のstartがキーフレームでない場合） | `http://www.test.com/demo.mp4?start=10`  10秒目から再生を開始することを示しています |
| FLV      | オリジンサーバーのビデオにはmeta情報が必須です                                   | startパラメータはバイトを示し、CDN はstartパラメータが表示するバイトの一つ前のキーフレームに自動的に位置づけされます（現在のstartがキーフレームでない場合） | `http://www.test.com/demo.flv?start=10` 10バイト目から再生を開始することを示しています |
| TS       | 特別な要件なし                                                   | startパラメータは時刻を示し、単位は秒で、ミリ秒を示す小数点以下までの表示をサポートします（例えば start = 1.01は開始時刻が1.01sであることを示す）。CDNはstartが表示する時刻の一つ前のキーフレームに位置づけされます（現在のstartがキーフレームでない場合） | `http://www.test.com/demo.ts?start=10` 10秒目から再生を開始することを示しています  |


## 設定の確認
[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のメニューバーから【ドメイン名管理】を選択し、業務タイプがストリーミングメディアVODアクセラレーションであるドメイン名を選択して、ドメイン名の設定画面に入ると、Tabの【アクセス制御】画面に【ビデオドラッグ】が表示されます。デフォルトではオフ状態になっています。
![img](https://main.qcloudimg.com/raw/515a46c56b93b9932f5bbcab39a8293e.png)
