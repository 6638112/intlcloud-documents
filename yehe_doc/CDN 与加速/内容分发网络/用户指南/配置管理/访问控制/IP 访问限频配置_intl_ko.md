## 설정 시나리오
서비스 리소스의 액세스 출처를 제어할 수 있도록 Tencent Cloud CDN은 IP 액세스 빈도 제한 설정 기능을 제공합니다. 클라이언트 IP가 노드별로 1초당 액세스하는 횟수를 제한하여 고빈도 CC 공격을 방어하고 악성 사용자의 도용 등을 방지합니다.

## 설정 가이드
### 설정 조회
[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인하여 메뉴바에서 [도메인 관리]를 선택하고 도메인 오른쪽의 [관리]를 클릭하면 도메인 설정 페이지로 이동할 수 있습니다. 그중 두 번째 탭인 [액세스 제어]에서 IP 액세스 빈도 제한 설정을 확인할 수 있습니다. 설정은 기본적으로 비활성화 상태이며, 임계 값은 비어 있습니다.
![](https://main.qcloudimg.com/raw/647b73c63e867b31dfc1116fec3225b0.png)

### 설정 활성
on-off 스위치를 클릭하여 빈도 제어 임계 값을 입력하고 [확인]을 클릭하면 IP 액세스 빈도 제한 제어를 활성화할 수 있습니다.
![](https://main.qcloudimg.com/raw/31592b3562913dd366d8c3fc88c8a6d4.png)
**설정 설명**

+ 설정이 활성화되면 QPS 제한을 초과하는 요청은 직접 514로 반환됩니다. 빈도 제한을 낮게 설정하면 고빈도 사용자의 정상적인 사용에 영향을 미칠 수 있습니다. 서비스 상황, 사용 시나리오에 따라 임계 값을 적절히 설정하시기 바랍니다.
+ 빈도 제한은 단일 IP로 단일 노드를 액세스한 횟수만 제한합니다. 악성 사용자가 대량의 IP로 전체 네트워크 노드를 겨냥해 공격할 경우, 이 기능으로는 효과적인 제어가 불가능합니다.

### 설정 비활성화
on-off 스위치를 통해 클릭 한 번으로 설정을 비활성화할 수 있습니다. 비활성화 상태일 경우 아래에 기존 설정이 존재하더라도 현재 네트워크에 적용되지 않습니다. 다음 번에 활성화 시 설정이 전체 네트워크에 배포 및 적용됩니다.
![](https://main.qcloudimg.com/raw/66d7637604b7527fd0150d0cef15d051.png)

>!사용자의 가속 도메인 서비스 지역이 글로벌 가속이면 설정한 IP 액세스 빈도 제한이 글로벌 범위에 적용되며, 중국 내/중국 외를 다르게 설정할 수 없습니다.

## 설정 예시
가속 도메인 `www.test.com`의 IP 액세스 빈도 제한 설정이 다음과 같은 경우
![](https://main.qcloudimg.com/raw/30d356e02a66a4d70f321715cf4ae659.png)
실제 액세스 상황은 다음과 같습니다.

1. 클라이언트 IP가 `1.1.1.1`인 사용자는 1초에 10개의 리소스`http://www.test.com/1.jpg`를 요청하고, CDN 캐시 노드 A 중 1개 서버에 액세스합니다. 이때 해당 서버에 10개의 액세스 로그가 생성되며, 그중 9는 QPS 제한을 초과하며 상태 코드는 514입니다.
2. 클라이언트 IP가 `2.2.2.2`인 사용자는 1초에 2개의 리소스`http:// www.test.com/1.jpg`를 요청하고, 네트워크의 영향을 받습니다. 2개의 CDN 캐시 노드에 액세스가 분배되며, 이때 모든 캐시노드는 정상적으로 콘텐츠를 반환합니다.

