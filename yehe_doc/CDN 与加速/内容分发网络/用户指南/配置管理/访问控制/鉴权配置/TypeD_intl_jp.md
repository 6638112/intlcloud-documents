## アルゴリズムの説明
**アクセスURLの形式**
`http://DomainName/FileName?sign=md5hash&t=timestamp`

**アルゴリズムの説明**
- timestamp：10進数/16進数（UNIXタイムスタンプ）はオプションです。
- md5hash：MD5（カスタムキー + ファイルパス +タイムスタンプ）です。

**リクエスト例**
`http://cloud.tenloud.tencent.com/test.jpg?sign=0f8201d814dfaf64cf54e74c5f7dbcb0&t=1582791032`

>MD5値を計算する際に、リクエストパスが`http://cloud.tencent.com/test.jpg`の場合、MD5を計算する際に使用されるパスは`/test.jpg`となります。

## 設定ガイド
### パラメータの説明
TypeDには次の設定が必要です。
![](https://main.qcloudimg.com/raw/9e1cc04c9e732ad40d4de67b5b318e52.png)
**認証キーのカスタマイズ：** キーは6～40文字の大文字と小文字および数字で構成されています。キーを大切に保管してください。ユーザー側とサーバー側のみ知っている必要があります。
**認証パラメータ名とタイムスタンプパラメータ名のカスタマイズ：**上記例のsignを、1〜100文字の大文字、小文字、数字、およびアンダースコアで構成されるパラメータ名に置き換えます。CDNはリクエストを受信した後、指定された署名パラメータにより対応する値を取り出し、MD5値を計算します。結果が渡されたmd5hash値と一致する場合、署名の検証は成功し、検証が失敗した場合は、403エラーが直接返されます。
**有効時間のカスタマイズ：**タイムスタンプパラメータのタイムスタンプ値と設定された有効期間が現在の時刻と比較され、リクエストが期限切れかどうかを判定します。期限切れの場合、403エラーが直接返されます。 

### オブジェクト
キー、パラメータ名、および有効期限を設定した後、必要に応じて認証オブジェクトを指定できます。以下の3つのモードをサポートします。
![](https://main.qcloudimg.com/raw/1952a0ac13633a87d4b676e52bf2eb10.png)
+ 指定されたドメイン名配下のすべてのファイルは認証される必要があります。
+ 指定されたタイプのファイルを認証不要に、他のすべてのファイルは認証される必要があります。
+ 指定されたタイプのファイルを認証させることができます。

## 注意事項
**キャッシュヒット率**
TypeD認証モードが有効になっているドメイン名は、アクセスURLには認証パラメーターが含まれます。CDNノードがリソースをキャッシュするとき、認証パラメーターは自動的に無視されるため、キャッシュヒット率には影響しません。
**back-to-originポリシー**
TypeD認証モードが有効になっているドメイン名は、アクセス形式は次のとおりです。
`http://DomainName/FileName?sign=md5hash&t=timestamp`

認証が成功した後、CDNノードがヒットしない場合、ノードはback-to-originリクエストを送信します。**形式はアクセスリクエストと一致しており、sign/tパラメータが保持されます**。オリジンサーバーはそれを無視するか、必要に応じて認証を再実行できます。
