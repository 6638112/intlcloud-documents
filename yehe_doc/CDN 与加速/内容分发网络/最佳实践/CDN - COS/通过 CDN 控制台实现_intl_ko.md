본 문서는 CDN을 통해 COS를 가속하는 전체적인 작업 절차 및 구체적인 방법을 설명합니다

## 전제 조건

1. Tencent Cloud 계정 가입 및 실명 인증을 완료하십시오.
2. COS 버킷을 생성합니다. 자세한 내용은 [버킷 생성](https://intl.cloud.tencent.com/document/product/436/13309) 문서를 참고하십시오.

## 운영 가이드

### 도메인 추가

[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인한 후, 왼쪽 메뉴에서 [도메인 이름 관리]를 클릭하여 도메인 관리 페이지로 이동한 뒤 [도메인 이름 추가]를 클릭합니다. ![img](https://main.qcloudimg.com/raw/d301ff1eea5fe534ce09ec5964e8c82b.png)

### COS를 원본 서버로 선택

#### 1. 도메인 설정

도메인에 가속 대상 지역을 입력하고, 서비스 도메인에 프로젝트, 가속 유형, IPv6 액세스 및 태그 활성화 여부를 선택합니다.
![](https://main.qcloudimg.com/raw/ec7ea324171295b8fd0321e226d0e0a3.png)

**설정 항목 상세 설명:**

| 설정 페이지   | 설정 설명                                                     |
| :------- | :----------------------------------------------------------- |
| 가속 지역 | 중국 내: 글로벌 사용자 액세스가 모두 중국 내 가속 노드로 스케쥴링되어 서비스됩니다.<br/>중국 외: 글로벌 사용자 액세스가 모두 중국 외 가속 노드로 스케쥴링되어 서비스됩니다.<br/>글로벌: 글로벌 사용자 액세스가 가장 근접한 노드로 최적화 스케쥴링되어 서비스됩니다.<br/><br/>**주의사항: **중국 내와 중국 외 가속 서비스는 개별 과금되며, 과금 정책은 [과금 설명](https://intl.cloud.tencent.com/document/product/228/2949)을 클릭하여 확인하십시오. |
| 도메인     | 1. 도메인명 길이는 50자를 초과할 수 없습니다.<br/>2. 도메인이 공업정보부의 ICP비안을 받은 상태여야 합니다.<br/>3.도메인이 ‘a.test.com’, ‘a.b.test.com’ 등과 같이 서브도메인 형태이거나 ‘*.test.com’, ‘*.a.test.com’ 형식의 와일드카드 서브도메인이어야 합니다.<br/>4. 도메인이 와일드카드 서브도메인이거나 이미 다른 사용자가 연결한 경우 [소유권 인증](https://intl.cloud.tencent.com/document/product/228/32984) 후 연결 또는 회수할 수 있습니다.<br/><br/>**주의사항:<br/>** 1. 와일드카드 서브도메인 연결 후에는 다른 계정에서 서브도메인 또는 2레벨 와일드카드 서브도메인 연결이 불가합니다.<br/>2. 현재 '*.test.com'과 '*.a.test.com'의 동시 연결을 지원하지 않습니다. |
| 서브 프로젝트 | 프로젝트는 Tencent Cloud의 모든 클라우드 서비스가 공유하는 리소스 그룹의 개념으로, [Project Management](https://console.cloud.tencent.com/project)에서 프로젝트 관련 작업을 할 수 있습니다.(선택 사항)|
| 가속 유형 | Tencent Cloud CDN은 각 서비스 유형별로 타겟팅 가속 성능 최적화를 제공하며, 비즈니스에 더 적합한 서비스 유형을 선택하여 더 우수한 품질의 가속 효과를 누릴 수 있습니다.  <br/>정적 가속: 이커머스, 웹 사이트, 게임 이미지 유형의 소형 리소스 가속 시나리오에 적합합니다.<br/>다운로드 가속: 게임 설치 패키지, 멀티미디어 리소스 파일 다운로드, 모바일 펌웨어 배포 등 다운로드 시나리오에 적합합니다.<br/>스트림 미디어 VOD 가속: 온라인 교육, 온라인 비디오 VOD 등의 시나리오에 적합합니다. |
| IPv6 액세스 | IPv6 액세스: 노드는 기본적으로 IPv4 액세스를 지원하며 활성화 후 IPv6 액세스를 지원합니다. <br /><br/>**주의사항:** IPv6은 중국에서만 지원됩니다. (선택 사항) |
| 태그 | 태그는 다양한 각도에서 리소스를 분류하여 관리하는 데 사용됩니다. 기존의 태그가 사용자의 요구에 부합하지 않는 경우, 콘솔로 이동하여 [태그 관리](https://console.cloud.tencent.com/tag/taglist)를 진행하십시오. (선택 사항) |

#### 2. 원본 서버 설정

비즈니스 원본 서버 관련 정보를 설정하며, 캐시에 리소스가 없을 때 CDN 노드가 원본 서버에서 풀링하여 캐싱합니다.
![](https://main.qcloudimg.com/raw/309d46ecdd8a162aba824ead6d6e61ac.png)

1.. **도메인 구성**의 **오리진 서버 유형**에서 COS 원본(Cloud Object Storage)을 선택하십시오.
2. 원본 서버 지원 상황에 따라 원본 요청 프로토콜을 선택하십시오.
3. 원본 서버 주소에서 상응하는 **버킷**을 선택합니다.
4. **개인 버킷 접근**을 활성화하려면 먼저 COS-bucket 권한 관리로 이동하여 CDN 서비스에 권한을 부여해야 합니다. 권한 부여 후 수동으로 활성화할 수 있습니다.
5. 호스트 헤더가 기본 설정되어있으며, 수정할 필요가 없습니다.

#### 3. 서비스 설정

노드의 가속 서비스 관련 구성을 설정합니다.
![img](https://main.qcloudimg.com/raw/6264633c18801547e4aece61a94009cb.png)

**설정 항목 상세 설명:**

| 설정 항목   | 설정 설명                                                     |
| :------- | :----------------------------------------------------------- |
| 기본 설정 | 노드 캐시 리소스는 Key-Value 매핑을 따르며, 그 중 Key가 리소스 URL입니다. <br/>매개변수 무시를 활성화하면 Key는 URL 중 ‘?’ 이후의 매개변수를 무시한 채로 매핑합니다. <br/>매개변수 무시를 비활성화하는 경우 Key는 전체 리소스 URL이 됩니다. 정적 가속 유형은 기본적으로 비활성화되어 있으며 다운로드, 스트림 미디어 VOD 가속 유형은 기본적으로 활성화되어 있습니다. |
| 샤드 Origin-pull | Origin-pull 시 샤드 진행 여부를 설정하며, 원본 서버에서 샤드를 지원해야만 활성화할 수 있습니다. COS 원본 서버는 샤드 Origin-pull 활성화가 기본 설정되어있습니다. |
| 캐시 규정 | 노드 캐시 만료 시간을 설정합니다. 기본적인 파일 캐시 만료 기간은 30일입니다. 노드 캐시 만료 기간을 최대로 설정하는 경우 노드 보관 리소스에 영향을 주며 실제 캐시 기간은 상황에 따라 다릅니다. <br />고객은 리소스 유형에 따라 캐시 만료 기간을 설정할 수 있습니다. |

**도메인 이름 추가** 페이지에서 모든 구성을 입력한 후, [제출 확인]을 클릭하여 도메인 추가 작업을 완료합니다. 도메인 설정이 전체 네트워크 노드에 전달될 때까지 잠시 기다려 주십시오. 전달 시간은 약 5 - 10분 소요됩니다.

### 마지막 단계: CNAME 설정

도메인 추가 완료 후 **도메인 이름 관리**페이지에서 CDN에 의해 배정된 가속 CNAME를 볼 수 있습니다. 
![](https://main.qcloudimg.com/raw/073b948565743f7947aae8503eef995d.png)

도메인에 연결된 DNS 서비스 제공 업체(예: Dnspod)로 이동하여, 해당 도메인에 CNAME 기록을 추가해야 합니다. **DNS 설정이 적용** 즉시 가속 서비스 진행할 수 있습니다. 자세한 내용은 [CNAME 설정](https://intl.cloud.tencent.com/doc/product/228/3121)을 참고하십시오.

## 권장 설정

1. 설정 완료 후, COS의 리소스 파일을 프리패치합니다. 정적 리소스를 CDN 가속 노드에 미리 프리패치하여 원본 서버의 부하를 줄이고 응답 및 다운로드 속도를 향상시킵니다. 자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/228/39000"> 캐시 프리패치</a>를 참고하십시오.
2. 크로스 도메인 헤더 매개변수를 설정합니다. 리소스의 크로스 도메인 권한 문제를 해결하려면 <a href="https://intl.cloud.tencent.com/document/product/228/35320">HTTP 응답 헤더 설정</a>에서 자세한 내용을 참고하십시오.
. 고객의 원본 서버 리소스가 수정된 경우 캐시를 퍼지한 후 프리패치하는 것을 권장합니다. 자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/228/6299">캐시 퍼지</a>를 참고하십시오.
