## 操作シナリオ
TencentDB for MySQLは、インスタンス仕様の迅速な調整をサポートし、柔軟なスケーリング操作を提供します。ビジネスが置かれている実際の状況（ビジネス初期、ビジネス急成長期、ビジネスピーク時、ビジネス低迷期など）に応じて、MySQLインスタンスの仕様を柔軟に調整することができ、リソースの活用やリアルタイムでのコスト最適化などのニーズを更に適切に満たします。調整料金の変更については、[インスタンス調整料金の説明](https://intl.cloud.tencent.com/document/product/236/32345)をご参照ください。

#### インスタンスハードディスクの限度超過に関する説明
- お客様のビジネスが正常に行われるように、ディスクキャパシティがほぼ満杯になった時は、データベースインスタンスの仕様をアップグレードするか、ディスクキャパシティの購入を適時行ってください。
>?ディスクキャパシティは[MySQLコンソール](https://console.cloud.tencent.com/cdb)のインスタンス詳細画面で確認できます。また、[設定アラーム](https://intl.cloud.tencent.com/document/product/236/8457)でも、ハードディスクアラーム情報を適時受信することができます。
- インスタンスのストレージデータ量がインスタンスを超えると、インスタンスはロックされ、データの読み取りのみ可能で、書き込みはできなくなります。容量を拡張するか、コンソールで一部のデータベーステーブルを削除し、読み取り専用を解除する必要があります。
- データベースが繰り返しロック状態になることを避けるため、インスタンスの残容量が20%超または50GB超になった時のみ、インスタンスのロック状態が解除され、正常な読み取り/書き込み機能が回復します。

<span id="guize"></span>
## 設定変更ルール
- TencentDB for MySQLインスタンスと、その関連する読み取り専用インスタンスが正常な状態（稼働中）で、現在実行中のタスクがない場合に、設定の変更操作を始めることができます。
- 設定の変更中は、この設定の変更操作をキャンセルすることはできません。
- 設定の変更前後で、インスタンスの名前、アクセスIP、アクセスポートはいずれも変更されません。
- 設定の変更中は、MySQLのグローバルパラメータやユーザーパスワードの変更などの操作をできる限り避けてください。
- 設定の変更中は、データの移行が発生することもありますが、その間もMySQLインスタンスは正常にアクセスでき、業務に影響はありません。
- 設定の変更完了時に、インスタンスの切り替え（MySQLデータベースの接続が数秒間切断される）が発生することがあります。プログラムの自動再接続機能を有効にし、インスタンスのメンテナンス可能時間内に切り替え実行を選択することをお勧めします。[インスタンスのメンテナンス時間設定](https://intl.cloud.tencent.com/document/product/236/10929)をご参照ください。
- MySQL単一ノード - 基本型は、設定の変更中に、約15分間のインスタンス利用不可の状態があります。業務の低ピーク期に操作することをお勧めします。

## 操作手順
### コンソールでインスタンスの設定を調整
1. [MySQLコンソール](https://console.cloud.tencent.com/cdb)にログインし、インスタンスリストで、調整が必要なインスタンスを選択し、「操作」列の【その他】>【設定の変更】を選択します。
2. ポップアップされたダイアログボックスで、調整後の設定を選択し、【サブミット】をクリックします。
![](https://main.qcloudimg.com/raw/fd7b5ead8e0aaeaa89248dcf12f58c02.png)

### APIでインスタンスの設定を調整
ユーザーはUpgradeDBInstanceポートを使用してインスタンスの設定を調整できます。[クラウドデータベースインスタンスの設定を調整](https://intl.cloud.tencent.com/document/product/236/15876)をご参照ください。

## よくあるご質問
#### データベースインスタンス仕様を調整すると、インスタンスに対してどのような影響がありますか。
- MySQLは、設定の変更中にデータの移行が行われますが、実行中にインスタンスのアクセスが影響を受けることはありません。移行完了後に切り替えが行われ、秒レベルの瞬断が起きます。業務に再接続機能が備わっていることを確認してください。
- MySQL単一ノード - 基本型は、設定の変更中に、約15分間のインスタンス利用不可の状態があります。業務の低ピーク期に操作することをお勧めします。

#### データベースのダウングレードができないのはなぜですか。
ストレージがハードディスクの最大容量を超過している可能性があります。まずデータをクリーンアップし、残りの空き容量を20%超または50G超にしてから、ダウングレード操作を行う必要があります。

#### コンソールの設定変更後、「アップグレード切り替え待ち」状態が表示されたままなのはなぜですか。
[コンソール](https://console.cloud.tencent.com/cdb)の設定変更時に選択した「切り替え時間」が、「メンテナンス時間帯に切り替え」のため、すぐに切り替えを行えない可能性があります。
直ちに切り替えたい場合は、インスタンスリストの「操作」列で【今すぐ切り替え】をクリックします。切り替えには秒単位の瞬断がありますので、業務に再接続機能が備わっていることを確認してください。

#### インスタンス仕様を調整する際、アップグレードにはどのくらいの時間がかかりますか。
データベースのアップグレードの時間は、現在のデータベースのデータ量の大きさやデータレプリケーション、読み取りリクエストと関係します。具体的な時間を予測することはできません。
アップグレード中も現在のインスタンスの正常な使用に影響を与えることはありません。アップグレード完了後にVIPに切り替えた際、秒単位の短い切断が生じます。

#### インスタンス調整の進捗状況は、どこで確認できますか。
コンソールの[タスクリスト](https://console.cloud.tencent.com/mysql/task)でタスクの進捗状況を確認できます。

#### ディスクキャパシティを使い切りそうな場合はどうすればいいですか？
ディスクキャパシティの使用が85%以上に達する場合は、不要なデータを削除するか、またはディスクキャパシティを拡張することをお勧めします。[コンソール](https://console.cloud.tencent.com/cdb)でディスクキャパシティの拡張を行うことができます。
