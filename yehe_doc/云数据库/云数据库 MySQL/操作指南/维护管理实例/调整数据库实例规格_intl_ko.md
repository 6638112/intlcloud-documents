## 작업 시나리오
TencentDB for MySQL은 빠른 인스턴스 사양 변경 지원으로 효율적인 용량 확장 및 축소가 가능합니다. 실제 비즈니스 상황(비즈니스 초기, 확장기, 전성기, 침체기 등)에 따라 MySQL 인스턴스 사양을 효율적으로 변경함으로써 충분한 리소스 이용 및 실시간 비용 최적화 등의 수요를 충족할 수 있습니다. 요금 변경에 대한 내용은 [인스턴스 요금 변경 설명](https://intl.cloud.tencent.com/document/product/236/32345)을 참조하십시오.

#### 인스턴스 디스크 제한 초과 설명
- 원활한 비즈니스 진행을 위해 디스크 용량이 다 차기 전 미리 데이터베이스 인스턴스 사양을 업그레이드하거나 디스크 용량을 구매하시기 바랍니다.
>?디스크 용량에 대한 내용은 [MySQL 콘솔](https://console.cloud.tencent.com/cdb) 인스턴스 상세 페이지에서 확인할 수 있으며, [알람 설정](https://intl.cloud.tencent.com/document/product/236/8457)을 통해 디스크에 대한 알람 메시지를 즉시 받을 수 있습니다.
- 인스턴스 스토리지의 데이터 양이 인스턴스를 초과할 경우 인스턴스가 잠겨 데이터 읽기만 가능하고 입력은 불가능해집니다. 용량을 확장하거나 콘솔에서 일부 DB 테이블을 삭제하여 읽기 전용 모드를 해제할 수 있습니다.
- 데이터베이스가 반복적으로 잠기는 현상을 방지하려면 인스턴스의 남은 용량이 20% 이상 또는 50GB 이상으로 유지되어야 합니다. 해당 상태가 되면 인스턴스의 잠금 상태가 해제되고, 정상적으로 읽고 쓸 수 있습니다.

<span id="guize"></span>
## 설정 변경 규칙
- TencentDB for MySQL 인스턴스 및 이에 연결된 읽기 전용 인스턴스가 정상 상태(실행 중)이고, 현재 진행 중인 작업이 없을 때만 설정 변경 작업을 요청할 수 있습니다.
- 설정 변경 중에는 해당 변경 작업을 취소할 수 없습니다.
- 설정 변경 전후의 인스턴스 이름, 액세스 IP, 액세스 포트 모두 변경되지 않습니다.
- 설정 변경 중에는 MySQL의 전역 매개변수, 사용자 비밀번호 등을 가급적 변경하지 마십시오.
- 설정 변경 중에는 데이터 이동이 발생할 수 있으나, MySQL 인스턴스에 정상적으로 액세스할 수 있으며 비즈니스에도 영향을 미치지 않습니다.
- 설정 변경을 완료하면 인스턴스 전환(몇 초간 MySQL 데이터베이스 연결 끊김)이 일어날 수 있으므로, 프로그램 자동 재연결 기능 및 점검 시간 내 전환 완료 선택을 권장합니다. 자세한 내용은 [인스턴스 점검 시간 설정](https://intl.cloud.tencent.com/document/product/236/10929)을 참조하십시오.
- MySQL 단일 노드 - 기본형은 설정 변경 중 약 15분간 인스턴스를 사용할 수 없는 경우가 발생할 수 있으므로 피크 시간대를 피해 작업하시기를 권장합니다.

## 작업 순서
### 콘솔에서 인스턴스 설정 변경
1. [MySQL 콘솔](https://console.cloud.tencent.com/cdb)에 로그인한 후 인스턴스 리스트에서 변경할 인스턴스를 선택한 다음 '작업' 열에서 [더보기]>[설정 변경]을 선택합니다.
2. 팝업 대화 상자에서 변경된 설정을 선택한 후 [제출]을 클릭합니다.
![](https://main.qcloudimg.com/raw/fd7b5ead8e0aaeaa89248dcf12f58c02.png)

### API로 인스턴스 설정 변경
UpgradeDBInstance 인터페이스를 사용해 인스턴스 설정을 변경할 수 있습니다. 자세한 내용은 [CDB 인스턴스 설정 변경](https://intl.cloud.tencent.com/document/product/236/15876)을 참조하십시오.

## 이슈 질문
#### 데이터베이스 인스턴스 사양을 변경하면 인스턴스에 어떤 영향이 있나요?
- MySQL 설정 변경 중 데이터 마이그레이션이 일어날 수 있으나, 인스턴스 액세스에는 영향을 미치지 않습니다. 마이그레이션 완료 후 전환이 진행되며, 몇 초간 끊길 수 있으니 서비스의 재연결 메커니즘을 확보하시기 바랍니다.
- MySQL 단일 노드 - 기본형은 설정 변경 중 약 15분간 인스턴스를 사용할 수 없는 경우가 발생할 수 있으므로 피크 시간대를 피해 작업하시기를 권장합니다.

### 데이터베이스를 다운그레이드할 수 없는 이유는 무엇인가요?
사용자의 스토리지가 디스크 최대 용량을 초과했을 수 있으므로, 먼저 데이터를 정리해야 합니다. 남은 용량이 20% 또는 50G 이상이어야 다운그레이드 작업을 진행할 수 있습니다.

#### 콘솔 설정 변경 후 왜 계속 '업그레이드 전환 대기 중 상태'가 뜨나요?
[콘솔](https://console.cloud.tencent.com/cdb)에서 설정 변경 시 '전환 시간'을 '점검 시간 내 전환'으로 선택하여 즉시 전환하지 못한 경우일 수 있습니다.
즉시 전환하려면 인스턴스 리스트의 '작업' 열에서 [즉시 전환]을 클릭하십시오. 연결이 몇 초간 끊길 수 있으니 서비스의 재연결 메커니즘을 확보하시기 바랍니다.

#### 인스턴스 사양 변경과 업그레이드에 시간이 얼마나 소요되나요?
데이터베이스의 업그레이드 소요 시간은 사용자의 데이터베이스에 저장된 데이터 양 및 데이터 복사 읽기 등과 관련되므로 구체적인 시간은 예측할 수 없습니다.
업그레이드 중에도 인스턴스 사용에는 영향을 미치지 않습니다. 업그레이드 완료 후 VIP 전환 시 몇 초간 끊김이 발생할 수 있습니다.

#### 인스턴스 변경 진행률은 어디에서 조회할 수 있나요?
콘솔의 [작업 리스트](https://console.cloud.tencent.com/mysql/task)에서 작업 진행률을 조회할 수 있습니다.

#### 디스크 용량이 거의 다 찼습니다. 어떻게 해야 하나요?
디스크 용량이 85% 이상 사용되면 사용하지 않는 데이터 삭제 또는 디스크 용량 확장을 권장합니다. [콘솔](https://console.cloud.tencent.com/cdb)에서 디스크 용량을 확장할 수 있습니다.
