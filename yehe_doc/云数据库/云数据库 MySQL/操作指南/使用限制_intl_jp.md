## データ量の制限について
リソースの有限性のため、MySQLはユーザー間の性能影響を隔離するために、さまざまなMySQLインスタンスタイプに対して、データ量の制限を設定しています。以下では、大量のデータにおける単一インスタンスおよび単一テーブルの使用へのMySQLの影響を技術の観点から説明します。　　

**大量のデータを含むインスタンス**：TencentDB for MySQLのデフォルトのストレージエンジンはInnoDBです。インスタンスにおけるデータとインデックスページがInnoDBのcache、bufferにキャッシュされている場合、MySQLインスタンスでは、大量の同時アクセスがサポートされています。インスタンスに含まれるデータが多すぎる場合、cache、bufferが頻繁にデータを交換し、MySQLのボトルネックが速やかにIOに移行し、アクセスのスループットが大幅に低下します（例えば、あるTencentDBインスタンスは本来、1秒あたり8,000のアクセスリクエストが可能であるが、データ量がcache、bufferサイズの2倍になった場合、インスタンスは1秒あたり700のアクセスリクエストしか処理できません。）。


**大量のデータを含むテーブル**：単一テーブルに含まれるデータ量が指定数量以上となった場合、単一テーブルのリソースに対するMySQLの管理コスト（データ、インデックスなど）が変更されるため、テーブルの処理効率に直接影響を与えます。例えば、1つのトランザクションテーブル（InnoDB）のデータ量が5GBに達した場合、更新操作の遅延が著しく大きくなり、トランザクションの応答時間に直接影響を与えます。この場合は、ユーザーはデータをパーティション分割されたテーブルに移行することにより、この問題を解決する必要があります。


>?単一インスタンスのテーブル数が100万を超えた場合は、バックアップ、監視、アップグレードに失敗する恐れがあり、データベースへの監視にも影響を与えます。そのために、単一インスタンスのテーブル数が100万を超えないようにテーブルの数を適切に管理してください。

##　接続数の制限
TencentDB for MySQLインスタンスへの最大接続数は、MySQLのシステム変数max_connectionsで指定されます。MySQLインスタンスへの接続数がmax_connectionsを超えると、それ以上接続を確立できなくなります。
TencentDB for MySQLインスタンスへのデフォルトの接続数は、[MySQLコンソール](https://console.cloud.tencent.com/cdb)のパラメータ設定ページで確認できます。ユーザーが必要に応じてmax_connections値を調整することができます。ただし、接続数が多ければ多いほど、消費されるシステムリソースが増えることになります。接続数が実際のシステムの負荷許容範囲を超えると、システムのサービス品質に影響を与えます。
max_connectionsの詳細については、[MySQLの公式ドキュメント](https://dev.mysql.com/doc/)をご参照ください。

## TencentDBに接続するMySQLクライアントの制限
TencentDB for MySQLインスタンスに接続する際に、CVMシステムに組み込まれているMySQLクライアントとlibライブラリーを使用することをお勧めします。

### スロークエリについて
- LinuxベースのCVMインスタンスの場合、TencentDBのエクスポートツールを使用して、スロークエリログを取得することができます。詳細については、[バックアップファイルとログのダウンロード](https://intl.cloud.tencent.com/document/product/236/31910)をご参照ください。
- WindowsベースのCVMインスタンスの場合、現在スロークエリログを直接取得することができません。必要な場合、[チケットを提出](https://console.cloud.tencent.com/workorder/category)して、こちらにスロークエリログファイルの取得を依頼してください。

### TencentDBでのbinlogの保存期間について
TencentDB for MySQLのbinlogは、7～732日間保存できます。デフォルト値は7日です（自動バックアップ設定では日数を設定可能です）。ただし、ログバックアップ保持日数の値はデータバックアップ保持日数の値以下である必要があります。 
binlogが長期保存されるか、或いは急増している場合、バックアップ領域が大きくなります。バックアップ領域がシステムが割り当てた領域を一旦超えてしまうと、追加のバックアップ領域費用が生じることがあります。

### 文字セットについて
TencentDB for MySQLのデフォルトの文字セットはUTF8です。
TencentDBはデフォルトの文字セットの変更をサポートしていますが、テーブルを作成するとき、テーブルのエンコーディングを明示的に指定し、接続の確立時に接続エンコーディングを指定することをお勧めします。そうすることで、アプリケーションの移植性が向上します。
MySQL文字セットの詳細については、[MySQLの公式ドキュメント](https://dev.mysql.com/doc/)をご参照ください。

[MySQLコンソール](https://console.cloud.tencent.com/cdb)で、または以下の手順に従って文字セットを変更できます。
1. 次のステートメントを実行して、TencentDB for MySQLインスタンスのデフォルトの文字セットを変更することができます。
```
SET @@global.character_set_client = utf8;
SET @@global.character_set_results = utf8;
SET @@global.character_set_connection = utf8;
SET @@global.character_set_server = utf8;
```
ステートメントの実行後、このうちの@@global.character_set_server は、約10分で永続化のためにローカルファイルに自動的に同期されますが、他の3つの変数は同期されません。設定された値は、移行または再起動後も変更されません。
2. 次のステートメントを実行することで現在接続している文字セットエンコーディングを変更できます。
```
SET @@session.character_set_client = utf8;
SET @@session.character_set_results = utf8;
SET @@session.character_set_connection = utf8;
```
或いは
```
SET names utf8;
```
3. PHPプログラムに対して、下記の関数を使って、現在接続されている文字セットエンコーディングを設定することができます。
```
bool mysqli::set_charset(string charset);
```
或いは
```
bool mysqli_set_charset(mysqli link, string charset);
```
4. Javaプログラムに対して、下記の方法を使って現在接続されている文字セットエンコーディングを設定することができます。
```
jdbc:mysql://localhost:3306/dbname?useUnicode=true&characterEncoding=UTF-8
```

### 操作の制限について
1. MySQLインスタンスの既存アカウントの情報と権限を変更しないでください。変更すると、一部のクラスターサービスが無効になる場合があります。
2. アクセス数が多い場合にインスタンスのパフォーマンスを向上させるために、データベースとテーブルを作成するときはInnoDBエンジンを使用することをお勧めします。
3. ホットバックアップの失敗を回避するために、master-slave関係を変更または停止しないでください。

### テーブル名の制限について
中国語のテーブル名がサポートされていないため、テーブルを作成する際にご注意ください。中国語のテーブル名を作成すると、ロールバック、アップグレードなどの処理に失敗する可能性があります。

## データベースのアカウント権限
TencentDB for MySQLは、スーパーユーザー権限を提供しなくなりました。この権限を必要とするパラメーターを変更するには、[コンソール](https://console.cloud.tencent.com/cdb)のパラメータ設定機能と[チケットを提出](https://console.cloud.tencent.com/workorder/category)の2つの方法で変更できます。

## ネットワークの選択
Virtual Private Cloudを使用することをお勧めします。VPCでは、ユーザーがIPレンジ、IPアドレスおよびルーティングポリシーを自由に定義できます。クラシックネットワークと比較して、VPCはカスタムネットワーク構成が必要なシナリオに適しています。VPCとクラシックネットワークの比較については、[ネットワーク管理](https://intl.cloud.tencent.com/document/product/215/31807)をご参照ください。　　

