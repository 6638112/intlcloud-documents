보안 그룹의 설정은 CVM이 액세스될 수 있는지를 관리하는 데 사용되며 사용자는 보안 그룹의 인 바운드 및 아웃바운드 규칙 설정에서 사용자의 서버가 액세스될 수 있는지, 기타 네트워크 리소스에 액세스할 수 있는지 설정할 수 있습니다.
기본 상황에서 보안 그룹의 인바운드 규칙과 아웃바운드 규칙은 다음과 같습니다.
- **데이터 보안을 위해 보안 그룹의 인바운드 규칙은 거부 정책이며 외부 네트워크의 원격 액세스를 금지합니다. **사용자가 사용자의 CVM이 외부에 의해 액세스되는 것이 필요할 경우, 상응하는 포트의 인바운드 규칙을 인터넷에 개방해야 합니다.
- 보안 그룹의 아웃바운드 규칙은 사용자의 CVM이 외부 네트워크 리소스에 액세스할 수 있는지를 설정하는 데 사용됩니다. 사용자가 “전체 포트 인터넷 개방” 또는 “22, 80, 443, 3389 포트 및 ICMP 프로토콜 인터넷 개방”을 선택할 경우, 보안 그룹 아웃바운드 규칙은 전부 인터넷 개방입니다. 사용자가 사용자 정의 보안 그룹 규칙을 선택할 경우, 아웃바운드 규칙은 기본으로 전부 거부로 설정되며 사용자는 상응하는 포트의 아웃바운드 규칙을 인터넷에 개방해야만 외부 네트워크 리소스에 액세스할 수 있습니다.

## 흔히 보는 응용 시나리오
본 문은 흔히 보는 몇 개의 보안 그룹 응용 시나리오를 소개하였습니다. 다음 시나리오로 사용자의 수요를 충족시킬 경우, 바로 시나리오에서 권장하는 설정에 따라 보안 그룹을 설정할 수 있습니다.

### 시나리오 1: SSH를 통한 Linux CVM 원격 연결 허용
**사례**: 사용자는 Linux CVM을 1대 생성하였고 SSH를 통해 CVM에 원격 연결할 수 있길 원합니다.
**솔루션**: 보안 그룹 규칙을 추가할 때, “유형”에서 “Linux 로그인”을 선택하여 22번 프로토콜 포트를 활성화하고 Linux SSH 로그인을 인터넷에 개방합니다.
사용자는 또 실제 수요에 따라 전체 IP 또는 지정 IP(IP 필드)를 인터넷에 개방하고 SSH를 통해 CVM에 원격 연결할 수 있는 IP 소스를 설정할 수 있습니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>Linux 로그인</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 필드를 입력하십시오</li></ul></td><td>TCP:22</td><td>허용</td></tr>
</table>

### 시나리오 2: RDP를 통한 Windows CVM 원격 연결 허용
**사례**: 사용자는 Windows CVM을 1대 생성하였고 RDP를 통해 CVM에 원격 연결할 수 있길 원합니다.
**솔루션**: 보안 그룹 규칙을 추가할 때, “유형”에서 “Windows 로그인”을 선택하여 3389번 프로토콜 포트를 활성화하고 Windows 원격 로그인을 인터넷에 개방합니다.
사용자는 또 실제 수요에 따라 전체 IP 또는 지정 IP(IP 필드)를 인터넷에 개방하고 RDP를 통해 CVM에 원격 연결할 수 있는 IP 소스를 설정할 수 있습니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>Windows 로그인</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 필드를 입력하십시오</li></ul></td><td>TCP:3389</td><td>허용</td></tr>
</table>

### 시나리오 3: 공용 네트워크 Ping 서버 허용
**사례**: 사용자는 CVM을 1대 생성하였고 이 CVM과 기타 CVM 간의 통신 상태가 정상 인지를 테스트하길 원합니다.
**솔루션**: ping 프로그램을 사용해 테스트를 진행합니다. 즉 보안 그룹 규칙을 추가할 때, “유형”을 “Ping”으로 선택하고 ICMP 프로토콜 포트를 활성화하여 기타 CVM이 ICMP 프로토콜을 통해 해당 CVM에 액세스하도록 허용합니다.
사용자는 또 실제 수요에 따라 전체 IP 또는 지정 IP(IP 필드)를 인터넷에 개방하고 ICMP 프로토콜을 통해 해당 CVM에 액세스하도록 허용된 IP 소스를 설정할 수 있습니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>Ping</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 주소 필드를 입력하십시오</li></ul></td><td>ICMP</td><td>허용</td></tr>
</table>

### 시나리오 4: Telnet 원격 로그인
**사례**: 사용자는 Telnet를 통해 CVM에 원격 로그인할 수 있길 원합니다.
**솔루션**: Telnet를 통해 CVM에 원격 로그인해야 할 경우, 보안 그룹 규칙을 추가할 때, 다음의 보안 그룹 규칙을 설정해야 합니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>사용자 정의</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 주소 필드를 입력하십시오</li></ul></td><td>TCP:23</td><td>허용</td></tr>
</table>

### 시나리오 5: Web 서비스 HTTP 또는 HTTPS 액세스 인터넷 개방
**사례**: 사용자는 웹사이트를 1개 구축하였고 다른 사용자가 HTTP 또는 HTTPS의 방식을 통해 해당 사용자가 구축한 웹사이트에 액세스할 수 있길 원합니다.
**솔루션**: HTTP 또는 HTTPS의 방식을 통해 웹사이트에 액세스해야 할 경우, 보안 그룹 규칙을 추가할 때, 실제 수요에 따라 다음의 보안 그룹 규칙을 설정해야 합니다.
- 공용 네트워크 상의 모든 IP가 해당 웹 사이트에 액세스하는 것을 허용합니다
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>HTTP（80）</td><td>0.0.0.0/0</td><td>TCP:80</td><td>허용</td></tr>
<tr><td>인바운드</td><td>HTTPS（443）</td><td>0.0.0.0/0</td><td>TCP:443</td><td>허용</td></tr>
</table>
- 공용 네트워크 상의 일부 IP가 해당 웹 사이트에 액세스하는 것을 허용합니다
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>HTTP（80）</td><td>사용자 웹사이트의 IP 또는 IP 주소 필드에 액세스하는 것을 허용합니다</td><td>TCP:80</td><td>허용</td></tr>
<tr><td>인바운드</td><td>HTTPS（443）</td><td>사용자 웹사이트의 IP 또는 IP 주소 필드에 액세스하는 것을 허용합니다</td><td>TCP:443</td><td>허용</td></tr>
</table>

### 시나리오 6: 외부 IP의 지정 포트 액세스 허용
**사례**: 사용자는 서비스를 배포한 후 지정한 서비스 포트(예시: 1101)가 외부에 의해 액세스되길 원합니다.
**솔루션**: 보안 그룹 규칙을 추가할 때, “유형”에서 “사용자 정의”를 선택하고 1101번 프로토콜 포트를 활성화하여 외부에서 지정한 서비스 포트에 액세스하는 것을 허용합니다.
사용자는 또 실제 수요에 따라 전체 IP 또는 지정 IP(IP 필드)를 인터넷에 개방하고 지정한 서비스 포트에 액세스하는 IP 소스를 허용할 수 있습니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>사용자 정의</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 주소 필드를 입력하십시오</li></ul></td><td>TCP:1101</td><td>허용</td></tr>
</table>

### 시나리오 7: 외부 IP의 지정 포트 액세스 거부
**사례**: 사용자는 서비스를 배포한 후 지정한 포트(예시: 1102)가 외부에 의해 액세스되지 않길 원합니다.
**솔루션**: 보안 그룹 규칙을 추가할 때, “유형”에서 “사용자 정의”를 선택하고 1102번 프로토콜 포트를 설정하며 “정책”을 “거부”로 설정하여 외부에서 지정한 서비스 포트에 액세스하는 것을 거부합니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>사용자 정의</td><td><ul style="margin: 0;"><li>전체 IP: 0.0.0.0/0</li><li>지정 IP: 사용자가 지정한 IP 또는 IP 주소 필드를 입력하십시오</li></ul></td><td>TCP:1102</td><td>거부</td></tr>
</table>

### 시나리오 8: CVM의 특정 외부 IP 액세스만 허용
**사례**: 사용자는 사용자의 CVM이 외부 특정 IP 주소에만 액세스할 수 있길 원합니다.
**솔루션**: 아래의 설정을 참조하여 아래 두 줄 아웃바운드의 보안 그룹 규칙을 추가합니다.
- 인스턴스가 특정 공인 IP 주소에 액세스하는 것을 허용합니다
- 인스턴스가 어떤 프로토콜로든 모든 공인 IP 주소에 액세스하는 것을 금지합니다

>! 액세스를 허용하는 규칙 우선순위가 액세스를 거부하는 규칙 우선순위보다 높아야 합니다.
>
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>아웃바운드</td><td>사용자 정의</td><td>CVM의 액세스를 허용하는 특정 공인 IP 주소</td><td>사용해야 하는 프로토콜 유형 및 포트</td><td>허용</td></tr>
<tr><td>아웃바운드</td><td>사용자 정의</td><td>0.0.0.0/0</td><td>ALL</td><td>거부</td></tr>
</table>

### 시나리오 9: CVM의 특정 외부 IP 액세스 거부
**사례**: 사용자는 사용자의 CVM이 외부 특정 IP 주소에 액세스할 수 있길 원하지 않습니다.
**솔루션**: 아래의 설정을 참조하여 보안 그룹 규칙을 추가합니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>아웃바운드</td><td>사용자 정의</td><td>인스턴스의 액세스를 거부하는 특정 공인 IP 주소</td><td>ALL</td><td>거부</td></tr>
</table>

### 시나리오 10: FTP를 사용해 파일 업로드 또는 다운로드
**사례**: 사용자는 FTP 프로그램을 사용하여 CVM에 파일을 업로드 또는 다운로드해야 합니다
**솔루션**: 아래의 설정을 참조하여 보안 그룹 규칙을 추가합니다.
<table>
<tr><th>바운드</th><th>유형</th><th>소스</th><th>프로토콜 포트</th><th>정책</th></tr>
<tr><td>인바운드</td><td>사용자 정의</td><td>0.0.0.0/0</td><td>TCP:20-21</td><td>허용</td></tr>
</table>

## 여러 시나리오 조합
실제 시나리오에서 비즈니스 수요에 따라 여러 개의 보안 그룹 규칙을 설정해야 할 수 있습니다. 예하면 인바운드 또는 아웃바운드 규칙을 동시에 설정합니다. CVM 1대는 한 개 또는 여러 개의 보안 그룹과 바인딩할 수 있으며 CVM이 여러 개의 보안 그룹과 바인딩할 때 여러 개의 보안 그룹은 위에서 아래로 차례대로 매칭되어 실행합니다. 사용자는 보안 그룹의 우선 순위를 수시로 조정할 수 있으며 보안 그룹 규칙의 우선 순위에 대한 설명은 [규칙 우선 순위 설명](https://cloud.tencent.com/document/product/213/12452#.E8.A7.84.E5.88.99.E4.BC.98.E5.85.88.E7.BA.A7)을 참조하시길 바랍니다.

