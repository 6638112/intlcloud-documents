
## 보안 그룹 개요
보안 그룹은 스테이트풀 패킷 필터링 가상 방화벽의 일종으로, 단일 또는 다중 CVM의 네트워크 액세스 제어 설정에 사용되며 Tencent Cloud에서 제공하는 중요한 네트워크 보안 격리 방법입니다.

- 보안 그룹은 논리적 패킷으로, 한 리전에 같은 네트워크 보안 격리 조건을 가진 기본 네트워크 CVM 또는 ENI 인스턴스를 동일한 보안 그룹에 추가할 수 있습니다.
- 사용자는 보안 그룹 정책을 통해 인스턴스의 입출력 트래픽에 대해 보안 필터링을 진행할 수 있습니다. 인스턴스는 기본 네트워크 CVM 또는 ENI 인스턴스일 수 있습니다.
- 사용자는 언제든지 보안 그룹의 규칙을 수정할 수 있으며, 새로운 규칙은 즉시 적용됩니다.

## 보안 그룹 템플릿
보안 그룹은 사용자 정의 생성과 템플릿 생성을 지원하며, 현재로써 3개의 템플릿을 제공합니다.

- Linux 22 포트 개방: SSH로 로그인한 TCP 22 포트만 공용 네트워크로 노출하고, 모든 내부 네트워크 포트를 개방합니다. 
- Windows 3389 포트 개방: MSTSC로 로그인한 TCP 3389 포트만 공용 네트워크로 노출하고, 모든 내부 네트워크 포트를 개방합니다.
- 모든 포트 개방: 모든 포트를 공용 네트워크와 내부 네트워크로 노출하며, 일정 수준의 보안 리스크가 있습니다.

## 보안 그룹 규칙
보안 그룹 규칙은 보안 그룹에 연결된 인스턴스에 도달하도록 허용하는 인바운드 트래픽과 인스턴스에서 벗어나도록 허용하는 아웃바운드 트래픽(위에서 아래로 순차적인 필터링 규칙)을 제어할 수 있습니다. 기본 값인 상황에서 신규 보안 그룹은 모든 트래픽을 All Drop(거부)하며, CVM은 무규칙 보안 그룹 하나를 바인딩하여 모든 트래픽을 거부합니다.

보안 그룹의 각 규칙에 대해 사용자는 다음 몇 가지 콘텐츠를 지정할 수 있습니다.

 - 프로토콜 유형: TCP, UDP 또는 ICMP 등.
 - 포트: 소스 또는 타깃의 포트 범위.
 - 라이센싱 유형: 주소 필드(CIDR/IP)액세스, 또는 보안 그룹 액세스(보안 그룹 ID).
 - 소스 또는 타깃: 트래픽 소스(인바운드 규칙) 또는 타깃(아웃바운드 규칙)에서 다음 옵션 중 하나를 지정할 수 있습니다.
  - CIDR 표시법으로 지정한 단일 IP 주소.
  - CIDR 표시법으로 지정한 IP 주소 범위(예: 203.0.113.0/24).
  - 보안 그룹 ID를 참조하면 사용자는 다음 보안 그룹 ID 중 하나를 참조할 수 있습니다.
  	- 현재 보안 그룹. (보안 그룹과 연결된 CVM 상호 액세스 가능/불가능 표시)
  	- 그 외 보안 그룹. 동일한 리전의 다른 보안 그룹 ID를 지칭합니다.
 - 정책: 허용 또는 거부
  > **참고:**
  >  - 보안 그룹 ID 참조는 고급 기능으로, 사용자가 사용 여부를 선택할 수 있습니다. 보안 그룹을 참조하면 현재 보안 그룹에 규칙을 추가하지 않습니다.
  >  - 보안 그룹 ID를 참조하고 정책 허용으로 설정 시, 소스 보안 그룹 ID에 연결한 CVM 과 기존 보안 그룹에 연결한 CVM 이 서로 액세스할 수 있다고 표시됩니다.

## 보안 그룹 우선 순위
보안 그룹 우선 순위: **숫자가 작을 수록 우선 순위가 높습니다.**
인스턴스에 여러 개의 보안 그룹이 바인딩 되었을 때, 우선 순위를 평가 근거로써 해당 인스턴스의 전체적인 보안 규칙을 판단합니다.
그 외 인스턴스에 바인딩된 여러 보안 그룹의 마지막 정책이 [ALL Traffic 거부]이면 우선 순위가 가장 낮은 보안 그룹의 마지막 정책 [ALL Traffic 거부]만 유효합니다.

## 보안 그룹의 제한

- 보안 그룹은 [네트워크 환경](/doc/product/213/5227) 에 있는 모든 CVM 인스턴스에 적용됩니다.
- 사용자는 각 리전의 항목별로 최대 50개의 보안 그룹을 설정할 수 있습니다.
- 하나의 보안 그룹의 인바운드 또는 아웃바운드 액세스 정책은 각각 최대 100건까지 설정할 수 있습니다.
- 하나의 CVM에는 여러 개의 보안 그룹을 추가할 수 있고, 하나의 보안 그룹에는 동시에 여러 개의 CVM을 연결할 수 있으며 수량은 무제한입니다.
- **기본 네트워크**의 CVM에 바인딩된 보안 그룹은 Tencent Cloud의 인/아웃 CDB, 탄력적 캐시(Redis와 Memcached)의 데이터 패키지를 **필터링 할 수 없습니다**. 이러한 인스턴스의 트래픽을 필터링 해야 할 경우 iptables 를 사용하여 구현할 수 있습니다.

| 기능 설명 | 수량 | 
|---------|---------|
| 보안 그룹 | 50 개/리전 |
| 액세스 정책 | 100개/인바운드, 100개/아웃바운드 |
| 인스턴스 연결 보안 그룹 개수 | 무제한 |
| 보안 그룹 내 인스턴스의 개수 | 무제한 |

> **참고:**
> 대량 인스턴스의 상호 액세스가 필요한 경우, 이들을 여러 개의 보안 그룹에 할당하고 보안 그룹 ID의 규칙 설정을 통해 서로에게 권한을 부여하여 상호 액세스를 허용합니다.

## 운영 가이드
사용자는 CVM 콘솔을 사용해 생성, 조회, 업데이트 및 삭제 등 작업을 진행함으로써 보안 그룹 및 보안 그룹 규칙을 관리할 수 있습니다.

### 시작하기
[보안 그룹](/doc/product/213/500)은 Tencent Cloud가 제공하는 인스턴스 레벨 방화벽으로, 모든 CVM에 대해 인/아웃 트래픽을 제어할 수 있습니다.

 1. [클라우드 서버 콘솔](https://console.cloud.tencent.com/cvm/index)에 로그인하고 좌측 메뉴에서 [Security Group]을 클릭합니다.

 2. [New] 버튼을 클릭하여 보안 그룹의 이름(예: my-security-group)을 입력하고, **템플릿**으로 생성하거나 **사용자 정의**로 생성한 후 아웃/인바운드 규칙을 확인한 다음 [OK]을 클릭합니다.

 3. 보안 그룹 목록 우측의 [인스턴스 추가] 버튼을 클릭하여 연결이 필요한 클라우드 서버를 선택 체크하면 보안 그룹을 클라우드 서버에 연결하는 작업을 완료할 수 있습니다. 

**또는**

&nbsp;&nbsp;&nbsp;&nbsp;4\. 사용자는 클라우드 서버 목록 페이지에 들어가, 어느 한 클라우드 서버에 바인딩된 보안 그룹을 조회 또는 수정할 수 있습니다. [클라우드 서버] 목록 페이지에서 보안 그룹 조정이 필요한 CVM을 선택하여 우측의 [더 보기]-[보안 그룹 설정]을 클릭한 후 보안 그룹 바인딩을 선택합니다.
(예: 사용자 로컬 컴퓨터(IP：186.23.55.90)가 HTTP를 통해 CVM에 요청하도록 허용하면, 다음 그림과 유사한 규칙 1건을 생성할 수 있습니다.)


### 보안 그룹 생성

 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. [New] 버튼을 클릭합니다.

 4. 보안 그룹의 이름(예시: my-security-group)을 입력하고 설명합니다.
 
 5. [OK]를 클릭하고 생성을 완료합니다.

### 보안 그룹에 규칙 추가

 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. 업데이트가 필요한 보안 그룹을 선택하고 [Security Group ID]를 클릭합니다. 상세 정보 창에 해당 보안 그룹의 상세 정보와 사용 가능한 인바운드 및 아웃바운드 규칙 탭이 표시됩니다.

 4. Inbound rule/Outbound rule 탭에서 [Edit]을 클릭합니다. 탭에서 인바운드/아웃바운드 규칙에 사용되는 옵션을 선택하고, 필요한 정보를 작성한 다음 [Save]를 클릭합니다.

### CVM 인스턴스 연결 보안 그룹 설정

 1.  [클라우드 서버 콘솔](https://console.cloud.tencent.com/cvm/)을 엽니다.

 2. 좌측 메뉴에서 [클라우드 서버]를 클릭합니다.

 3. 보안 그룹 생성이 필요한 인스턴스의 우측 작업 표시줄에서 [더 보기]를 클릭하고, [보안 그룹 생성]을 클릭합니다.

 4. 보안 그룹 생성 대화창에서 목록 중 한 개 또는 여러 개 보안 그룹을 선택하고 [확인]을 클릭합니다.

**또는**

 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. 연결이 필요한 보안 그룹을 선택하여 작업 표시줄의 [Add Instances] 또는 [Remove Selected] 버튼을 클릭합니다.

 4. 클라우드 서버 추가/삭제 팝업창에서 본 보안 그룹에 연결해야 하는 클라우드 서버를 추가 또는 삭제하고 [OK]를 클릭합니다.


### 보안 그룹 규칙 가져오기/내보내기
 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. 업데이트가 필요한 보안 그룹을 선택해 [Security Group ID]를 클릭합니다. 상세 정보 창에 해당 보안 그룹의 상세 정보와 사용 가능한 인바운드 및 아웃바운드 규칙 탭이 표시됩니다.

 4. 탭에서 인바운드/아웃바운드 규칙에 사용되는 옵션을 선택한 후 [Import rule] 버튼을 클릭합니다. 새로운 규칙을 가져오면 기존 규칙을 커버하기 때문에, 사용자에게 기존 규칙이 있을 경우, 기존 규칙을 먼저 내보내길 권장합니다. 규칙이 비어있을 경우 먼저 템플릿을 내보내고, 템플릿 파일을 편집한 다음 다시 파일을 가져올 수 있습니다.

### 보안 그룹 복제

 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. 목록 중 보안 그룹에 대응하는 [Clone] 버튼을 클릭합니다.

 4. 보안 그룹 복제 대화창에서 타깃 리전, 타깃 항목을 선택한 후 [OK]를 클릭합니다. 신규 보안 그룹에 CVM을 연결해야 하는 경우, 보안 그룹을 다시 설정하세요.

### 보안 그룹 삭제

 1. [Security Group 콘솔](https://console.cloud.tencent.com/cvm/securitygroup)을 엽니다.

 2. 좌측 메뉴에서 [Security Group]을 클릭합니다.

 3. 목록 중 보안 그룹에 대응하는 [Delete] 버튼을 클릭합니다.

 4. 보안 그룹 삭제 대화창에서 [OK]를 클릭합니다. 현재 보안 그룹에 연결된 CVM이 있을 경우 먼저 보안 그룹을 해제해야만 삭제할 수 있습니다.

## 보안 그룹과 네트워크 ACL의 차이점

| 보안 그룹 | 네트워크 ACL | 
|---------|---------|
| 인스턴스 레벨에서의 작업(첫 번째 방어 레이어) | 서브넷 레벨에서의 작업(두 번째 방어 레이어) |
| 허용 규칙과 거부 규칙 지원 | 허용 규칙과 거부 규칙 지원 |
| 스테이트풀: 리턴 데이터 플로가 자동 허용되고 어떠한 규칙의 영향도 받지 않음 | 스테이트리스: 리턴 데이터 플로가 반드시 규칙에 의해 명확히 허용됨 |
| 인스턴스를 시작함과 동시에 보안 그룹을 지정하거나, 잠시 후 보안 그룹을 인스턴스와 연결시키는 상황에서만 작업이 인스턴스에 적용됨 | 서브넷에 연결된 모든 CVM 인스턴스에 자동 적용됨 |

## 보안 그룹 클라우드 API
보안 그룹의 개발자 툴. 사용자는 클라우드 API 를 통해 보안 그룹 작업, 보안 그룹 및 CVM 인스턴스의 설정 관리 등을 완료할 수 있습니다. 자세한 내용은 [보안 그룹 관련 인터페이스](/doc/api/229/API%E6%A6%82%E8%A7%88#6.-보안 그룹 관련 인터페이스)를 참조 바랍니다.




