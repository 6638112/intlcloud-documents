Based on Tencent Cloud's industry-leading deep learning technology, Tencent Cloud OCR is capable of intelligently recognizing words on images and converting them into editable text. It can recognize printed text and handwriting, meeting the text recognition needs in different scenarios.
By using Serverless Framework Component and OCR SDK, you can quickly deploy a general OCR application based on COS + API + SCF, which contains the following key components:

- **Serverless RESTful API:** you can use the Express framework constructed by SCF and API Gateway to implement RESTful API.
- **Serverless static website:** the frontend hosts React static pages in COS.
- **COS:** you can create a bucket to store target images.

## Prerequisites

- You have installed [Node.js](https://nodejs.org/en/) (v8.6 or above; v10.0 or above is recommended).
- You have activated OCR.

## Directions

### Installation

Use npm to install [Serverless Framework](https://github.com/serverless/serverless) globally:

```shell
$ npm install -g serverless
```

If you have already installed Serverless Framework, you can run the following command to upgrade it to the latest version:

```shell
$ npm update -g serverless
```

After the installation is completed, run the `serverless -v` command to view the version information of Serverless Framework and make sure that the version information is as follows or displays higher versions:

```shell
$ serverless –v
Framework Core: 1.67.3
Plugin: 3.6.6
SDK: 2.3.0
Components: 2.30.1
```

### Bucket creation

1. Log in to the [COS Console](https://console.cloud.tencent.com/cos5) and create a **public bucket** (for detailed directions, please see [Creating Bucket](https://intl.cloud.tencent.com/document/product/436/13309)) to store the uploaded images. Select the region based on your actual needs.
2. In **Basic Configuration** in the bucket list, [configure CORS](https://intl.cloud.tencent.com/document/product/436/13318) for the bucket as follows:
![](https://main.qcloudimg.com/raw/780bf83cad9d11449c958e53b0d11e89.png)

### Configuration

1. Create a local folder and run the `create --template-url` command to download the relevant template.

```console
$ serverless create --template-url https://github.com/serverless-tencent/serverless-demos/serverless-ocr
```

2. Find the `.env.example` file in the template, rename it to `.env`, and enter your account, key information, and specified bucket (used to store uploaded images) in it.

```
# .env
TENCENT_APP_ID=xxx
TENCENT_SECRET_ID=xxx
TENCENT_SECRET_KEY=xxx

# region of bucket
REGION=ap-guangzhou
# bucket name, using to store upload pictures
BUCKET=ocr-images
```
>You need to create a public bucket first to store uploaded images.

3. Download all npm dependencies.

```console
$ npm run bootstrap
```
### Local debugging

1. Run the following command to start the server:
```
$ cd server && npm run start
```
2. Run the following command to start the frontend:
```
$ cd frontend && npm run start
```
3. Log in to the frontend page at http://localhost:3000 for local debugging.

### Deployment

1. Run the following command for deployment:

```bash
$ sls deploy --all

serverless ⚡ framework

backend: 
  region: ap-guangzhou
  apigw: 
    serviceId:   service-4i62q1pg
    subDomain:   service-4i62q1pg-1258834142.gz.apigw.tencentcs.com
    environment: release
    url:         https://service-4i62q1pg-1258834142.gz.apigw.tencentcs.com/release/
  scf: 
    functionName: serverless-ocr
    runtime:      Nodejs10.15
    namespace:    default

frontend: 
  region:  ap-guangzhou
  website: https://serverless-ocr-1258834142.cos-website.ap-guangzhou.myqcloud.com

38s › serverless-ocr › Success

```

After the deployment succeeds, you can use a browser to access the website link generated by the project to view the generated website. Click **Upload Image**, and the project can implement OCR with the OCR SDK.


2. You can run `sls remove --all` to remove the project.

```bash
$  sls remove --all

serverless ⚡ framework

38s › tencent-fullstack › Success
```
