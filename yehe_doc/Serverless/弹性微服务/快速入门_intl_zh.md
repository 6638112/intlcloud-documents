本文档为您介绍在弹性微服务控制台上部署一个应用并对其进行访问的步骤。

## 前提条件

申请 [弹性微服务内测](https://intl.cloud.tencent.com/apply/p/wqinnd8p97) 资格。获取内测资格后，您可访问控制台。如果没有账号，请参考 [账号注册教程](https://intl.cloud.tencent.com/document/product/378/17985)。

## 操作步骤

### 步骤1：新建环境

1. 登录 [弹性微服务控制台](https://console.cloud.tencent.com/tem)。
2. 在【环境】页面，选择部署地域后，单击【新建】。
3. 配置环境相关信息。
   ![](https://main.qcloudimg.com/raw/454560d35dec94352c9a7dc8885e1f35.png)
   - 名称：不超过40个字符
   - VPC：选择已有的 VPC。如果您现有网络不合适或还未创建网络，可单击 [新建私有网络](https://console.cloud.tencent.com/vpc/vpc?rid=4) 跳转进行配置（**地域选择需与环境一致**），完成后回到本页面刷新后进行选择。
   - 子网：选择已有的子网，建议选择多可用区部署，以提升容灾能力。如果您现有的子网不合适或还未创建子网，可以单击 [新建子网](https://console.cloud.tencent.com/vpc/subnet?rid=4&unVpcId=) 跳转进行配置，完成后回到本页面刷新后进行选择。
   - 自动为您部署 CoreDNS 支持环境内服务发现。自动在 kubernetes 集群命名空间 kube-ststem 中部署2副本的 Deployment:coredns，该服务默认不收取费用，同时不建议进行修改。
4. 单击【确定】，环境进入初始化状态，等待几分钟后，环境创建完成。

### 步骤2：新建应用

1. 在左侧导航栏，单击【应用列表】进入应用列表页面，选择您的应用部署地域。

2. 单击【新建】，进入新建应用页面，填写服务信息。
   ![](https://main.qcloudimg.com/raw/b6c1223c58aed0e9a55de58907be4d33.png)

   - 名称：填写应用名称。
   - 开发语言：选择您的开发语言。
   - 程序包上传方式：选择程序包上传方式。Java 语言支持上传镜像、JAR 包和 WAR 包，其他语言只支持镜像上传。如果选择 JAR 包或者 WAR 包的方式，TEM 将自动为您构建容器镜像，并推送至 TEM 为您创建的个人版容器镜像仓库中。

3. 单击【提交】，在弹窗中选择【确认】，进入部署应用页面。如果选择【取消】，您后续可以在应用列表中，点击【部署至新环境】完成应用部署。

   ![](https://main.qcloudimg.com/raw/e6a50706b5bfbb740efcb764aea8819c.png)

### 步骤3：部署应用

1. 在应用部署页面，根据您的应用具体情况配置相关参数。
   ![](https://main.qcloudimg.com/raw/ef719950af4ec344445967fe0c28522d.png)

   参数说明如下：

   | 参数            | 说明                                                         |
   | :-------------- | :----------------------------------------------------------- |
   | 发布环境        | 选择刚刚创建的环境。                                         |
   | JDK 版本        | 选择 JDK 版本，支持 OpenJDK 8和 KonaJDK 8。                  |
   | 上传程序包/镜像 | 上传您的程序包或者镜像，或者下载控制台上的体验 Demo 进行部署体验 TEM 完整功能。 |
   | 版本号          | 设置应用版本号，您可以选择输入版本号或者单击**使用时间戳为版本号**将时间戳作为应用版本号。 |
   | 版本描述        | 填写版本描述。                                               |
   | 启动参数        | 设置启动参数。                                               |

2. 单击【提交】，完成应用部署。

### 步骤4：访问应用

弹性微服务提供环境内访问和外网访问两种方式：

- 环境内访问：同一环境中的微服务，可通过注册服务名互相调用。支持基于 consul、eureka 等注册中心的服务注册与发现，也支持基于 kubernetes 的服务发现。
- 外网访问：单击环境卡片，在【访问配置】页面可创建公网 LB 和 HTTP/HTTPS 协议的转发规则，对其进行访问。

以外网访问为例，操作步骤如下：

1. 单击刚刚创建的环境卡片，在【访问配置】页面单击【新建】，建立一条公网访问路由。

   ![](https://main.qcloudimg.com/raw/952032dd3b7ccb822dfc75a539db2bbf.png)
   
2. 在浏览器地址栏中输入以下 URL。

   ```xml
   <外网访问地址/域名>+<路径>
   ```

   例如：输入 `http://xx.xx.xx.xx/ping-provider`，如果返回以下结果，则说明服务部署成功。

   ```
   Hello World!
   ```
