## Email Template
#### How do I send highly customized template emails?
The template feature of DMS is based on the Handlebars template system. In addition to simple expressions, you can also use Handlebars to create templates containing advanced features (such as nested attributes, array iteration, basic conditional statements, and inline elements). This section provides some samples of such features.

In addition to those described below, Handlebars also provides many other features. For more information, please visit [handlebarsjs.com](http://handlebarsjs.com/).

1. **Nest an input object**
	An input object can contain other objects or arrays; for example:

		{
			person: {
				firstname: "Yehuda",
			    lastname: "Katz",
				},
		}

	In an email template, you can import nested attributes as follows: enter the parent attribute name, add a period (.) after it, and enter the name of the attribute whose value is to be nested. For example, for the data structure in the above example, you can enter the full name of the recipient in the email template as follows:
	
		{{person.firstname}} {{person.lastname}}
	
	During emailing, the output result will be like:
	Yehuda Katz

	Handlebars can parse multi-layer nested paths, enabling you to flexibly organize the template data structures.

2. **Traverse a list**
	The `each` helper function can traverse entries in an array. For example, a user has many hobbies:

		{
			interests: [
				"football",
				"swimming",
				"reading",
			],
		}

	The `each` helper code will iterate the array, so you can use Handlebars to simply access the attribute expression of each object.

		{{#each interests}}
			{{this}}
		{{/each}} 

	During emailing, the output result will be like:
	- football
	- swimming
	- reading

3. **Use a basic conditional statement**
	You can use the `if` helper code to render a code block based on a condition. If the parameter returns `false`, `undefined`, `null`, `""`, `0`, or `[]`, Handlebars will not render this block.

	For example, there is a parameter for determining whether the recipient is the author in the input object:

		{
			author: true,
			firstName: "Yehuda",
			lastName: "Katz",
		}

	It will be judged by the `if` helper code, and the recipient's full name will be displayed only if the recipient is the author.

		{{#if author}}
			{{firstName}} {{lastName}}
		{{/if}}

	During emailing, the output result will be like:
		Yehuda Katz
		
#### What are the requirements for custom template variable values?
When sending a template email, you need to upload a file in JSON format to specify the values for replacing the custom variables in the template. This section describes the JSON file.

The JSON file format is as follows:

	{
		"Destinations":[
			{
				"Destination":{
					ToAddresses":[
					"address1@example.com"
					]	
				},
				"ReplacementTemplateData": "{ Handlebars input 1 }"
			},
			{
				"Destination":{
					ToAddresses":[
					"address2@example.com",
					"address3@example.com"
					]	
				},
				"ReplacementTemplateData": "{ Handlebars input 2 }"
			}
		],
		"DefaultTemplateData": "{ Handlebars input 3 }"
	}

The code contains the following attributes:
-   Destinations: array containing one or multiple objects.
        -   Destination: recipient address. You can enter multiple "recipient", "CC", and "BCC" addresses.
        -   ReplacementTemplateData: JSON object containing key-value pairs. A key corresponds to a variable in the template (such as `{{name}}`), and a value represents the content to replace the variable in the email.
            
 -   DefaultTemplateData: JSON object containing key-value pairs. A key corresponds to a variable in the template (such as `{{name}}`), and a value represents the content to replace the variable in the email. This object will replace the content of the email received by recipient addresses not specified in `Destinations`.

If you use the above JSON file to send an email, `address1@example.com`, `address2@example.com` and `address3@example.com`, and other recipient addresses will receive emails generated by the email template replaced with `Handlebars input 1`, `Handlebars input 2`, and `Handlebars input 3`, respectively.

For example, for the following edited email template:
~~~
Hi {{prefix}} {{lname}} {{fname}},

Thank you for choosing Tencent Cloud DMS.

Best regards,
Tencent Cloud Team
~~~
You can use the following JSON file to replace the custom template variable values:

	{
	  "Destinations": [
	    {
	      "Destination": {
	        "ToAddresses": [
	          "tomlee@example.com"
	        ]
	      },
	      "ReplacementTemplateData": "{ \"fname\":\"Tom\", \"lname\":\"Lee\", \"prefix\":\"Mr.\" }"
	    },
	    {
	      "Destination": {
	        "ToAddresses": [
	          "micheal@example.com"
	        ]
	      },
	      "ReplacementTemplateData": "{ \"fname\":\"Micheal\", \"prefix\":\"Mr.\" }"
	    },
	    {
	      "Destination": {
	        "ToAddresses": [
	          "tina@example.com"
	        ]
	      },
	      "ReplacementTemplateData": "{ \"fname\":\"Tina\", \"lname\":\"chan\", \"prefix\":\"Ms.\" }"
	    },
	    {
	      "Destination": {
	        "ToAddresses": [
	          "richard.roe@example.com",
	          "richard.work@example.com"
	        ]
	      },
	      "ReplacementTemplateData": "{ \"fname\":\"Richard\""
	    }
	  ],
	  "DefaultTemplateData": "{ \"fname\":\"Friend\", \"lname\":\"Sweety\", \"prefix\":\"\"}"
	}


#### Can I restore a deleted email template?
Once deleted, an email template cannot be restored.

If an email template is deleted, you cannot use it to send template emails any more. We recommend you back up all email templates on your server.

In addition, if an email template is renamed, you may need to select the **email template** again when **resending** a template email.