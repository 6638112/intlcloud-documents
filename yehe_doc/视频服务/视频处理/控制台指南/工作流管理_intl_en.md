## Use Cases
After you set up a workflow, videos uploaded to the specified bucket and directory will be processed automatically, and the results will be uploaded to the specified bucket and directory. Workflows can include tasks such as transcoding, screenshot taking, animated image generating, and watermarking.



## Creating a Workflow
1. Log in to the [MPS console](https://console.cloud.tencent.com/mps) and click **Workflow Management** on the left sidebar.
2. Click **Create Workflow** to enter the workflow creation page and set the workflow name, trigger bucket, trigger directory, output bucket, output directory, event notifications and configuration items.
![](https://main.qcloudimg.com/raw/314b57f24a325fc3f4a3f4da16594006.png))
	- **Workflow Name**
	This field is required and must be unique. It can contain up to 128 Chinese characters, letters, digits, underscores (_), and hyphens (-).
	- **Trigger Bucket**
		- This field is required. You can select a bucket created under the current `APPID`.
		- After a workflow is enabled, it will be executed automatically for video files uploaded to this bucket.
	- **Trigger Directory**
	This field is optional and must end with a slash (/). If it is left blank, the workflow will apply to all directories in the trigger bucket.
	- **Output Bucket**
		- This field is required and is the same as the trigger bucket by default. You can also select a bucket under the current `APPID` in the same region.
		- After a workflow is completed, the video files generated will be stored in this bucket.
	- **Output Directory**
	This field is optional and must end with a slash (/). If it is left blank, the output directory will be the same as the triggered directory.
	- **Configuration Items**
	Select a task for configuration, which may be transcoding, animated image generation, moderation, content recognition, or content analysis. For more information, please see [Task Configuration](#p1).

## Event Notifications
### 1. Receiving event notifications via CMQ
- Event notifications are disabled by default. When they are enabled, select queue or topic model and set the model name and region, and MPS event notifications will be sent to the specified CMQ queue or topic.

- You can receive event notifications via CMQ only after you activate the CMQ service and create a queue or topic model. For more information, please see [CMQ > Getting Started](https://intl.cloud.tencent.com/document/product/406/8435).

### 2. Receiving event notifications via SCF
SCF allows quick handling of the event notifications generated by MPS. The figure below shows the data flow.
![](https://main.qcloudimg.com/raw/af522de2310535d55ea2d76dc4239696.png)
Events are pushed to SCF by the MPS trigger and are handled by serverless functions.

#### Use cases for function-based handling
CLS can deliver the data in log topics to SCF via the MPS log trigger for event notification handling, status monitoring, and alarm handling.

| Use Case | Description |
|---------|---------|
| Video task backup to COS | Backing up the callback tasks of MPS to COS via SCF in a timely manner |
| Video task callback notifications | Receiving MPS data messages in real time and sending the messages to users via WeCom or email. |

>! You will incur a cost for delivering data to SCF. For details, please see [SCF > Billing Overview](https://intl.cloud.tencent.com/document/product/583/17299).


[](id:p1)**Task Configuration**

Task Type | Preset/Custom Template | Supported Templates
-|-|-
 Transcoding|Both supported|<li>Transcoding template: select one or more templates from the drop-down list. If existing templates do not meet your needs, you can create your own in [Template Settings > Transcoding Template](https://console.cloud.tencent.com/mps/templates?tab=video). <br><li>Watermark template: you can add up to 4 watermarks to each transcoding template. If existing watermark templates do not meet your needs, you can create your own in [Template Settings > Watermark Templates](https://console.cloud.tencent.com/mps/templates?tab=watermark).
 Screenshot task | Both supported |<li>Screenshot template: there are three types of screenshots, namely, time point screenshot, sampled screenshot, and image sprite screenshot, each with its own preset templates. For time point screenshots, you must specify the time points. If existing templates do not meet your needs, you can create your own in [Template Settings > Screenshot Template](https://console.cloud.tencent.com/mps/templates?tab=snapshot). <br><li>Watermark template: you can add up to 4 watermarks to a screenshot template. If existing watermark templates do not meet your needs, you can create your own in [Template Settings > Watermark Template](https://console.cloud.tencent.com/mps/templates?tab=watermark).
Animated image generating task |Both supported| Animated image generating template: you can add multiple animated image generating templates and can change the duration of the animated images. If existing templates do not meet your needs, your can create your own in [Template Settings > Animated Image Generating Template](https://console.cloud.tencent.com/mps/templates?tab=gif).
Moderation task|Both supported|Moderation template: you can add only 1 moderation template. If existing templates do not meet your needs, you can create your own in [Template Settings > Moderation Template](https://console.cloud.tencent.com/mps/templates?tab=audit).
Content recognition task|Both supported|Content recognition template: you can add only 1 content recognition template. If existing templates do not meet your needs, you can create your own in [Template Settings > Content Recognition Template](https://console.cloud.tencent.com/mps/templates?tab=recognization).
Content analysis task|Both supported|Content analysis template: you can add only 1 content analysis template. If existing templates do not meet your requirements, you can create your own in [Template Settings > Content Analysis Template](https://console.cloud.tencent.com/mps/templates?tab=analysis).



## Managing Workflows

1. Log in to the [MPS console](https://console.cloud.tencent.com/mps) and click **Workflow Management** on the left sidebar.
2. The workflow list displays information including workflow name, trigger bucket, region, trigger directory, creation time, and status. You can sort workflows by creation time, search for a workflow by name, and view, edit, or delete a workflow.
	-  **Enable a workflow**
		- Workflows are disabled by default. To enable a workflow, click the status button.
		- After a workflow is enabled, it will be automatically executed for videos uploaded to the trigger bucket.
	- **Disable a workflow**
		- To disable a workflow, click the status button.
		- After a workflow is disabled, the video processing tasks of the workflow will no longer be automatically executed for videos uploaded to the trigger bucket.
	- **Edit a workflow**
		- Click **Edit** in the "Operation" column of the target workflow to edit its name, trigger bucket, trigger directory, output bucket, output directory, event notifications, and configuration items.
		- You cannot edit or delete an enabled workflow.
	- **Delete a workflow**
		- Click **Delete** in the "Operation" column of the target workflow to delete it.
		- After a workflow is deleted, the video processing tasks of the workflow will no longer be automatically executed for videos uploaded to the trigger bucket.
		- You cannot edit or delete an enabled workflow.

