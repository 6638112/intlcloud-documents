## Overview
You can configure a **scheme** to automatically process videos uploaded to a specified COS bucket and save the results to a specified bucket. You can include in a scheme audio/video transcoding tasks, audio/video enhancement tasks, watermark tasks, static/animated screenshot tasks, moderation tasks, content recognition tasks, as well as content analysis tasks.

## Creating a scheme
### Creating a scheme[](id:create)
1. Log in to the [MPS console](https://console.cloud.tencent.com/mps), select **Workflow > Schemes** on the left sidebar and click **Create scheme** to enter the [scheme creation page](https://console.cloud.tencent.com/mps/workflows/pipeline/add).
2. Complete the settings according to your actual needs.
<table>
    <tr>
        <th width=15%>Configuration Item<a id="workflow"></a></th>
        <th>Required</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>Scheme name</td>
        <td>Yes</td>
        <td>Max 128 characters; supports Chinese characters, letters, digits, underscores, and hyphens. Example: "MPS"</td>
    </tr>
    <tr>
        <td>Trigger bucket</td>
        <td>Yes</td>
        <td>Select a bucket created under the current `APPID`. After the scheme is enabled, videos uploaded to this bucket will be processed automatically.</td>
    </tr>
    <tr>
        <td>Trigger directory</td>
        <td>No</td>
        <td>A string that ends with <code>(/)</code>. If it is left empty, the scheme will be applied to all directories under the selected trigger bucket.</td>
    </tr>
    <tr>
        <td>Output bucket</td>
        <td>Yes</td>
        <td>By default, the output bucket is the same as the trigger bucket. You can also select a bucket in the same region under the current `APPID`. After a scheme is completed, the processed video will be stored in this bucket.</td>
    </tr>
    <tr>
        <td>Output directory</td>
        <td>No</td>
        <td>A string that ends with <code>(/)</code>. If it is left empty, the output directory will be the same as the trigger directory.</td>
    </tr>
</table>

3. Click **Create**.
![](https://qcloudimg.tencent-cloud.cn/raw/f10a7ed82865537c7d024e6537f1b083.png)

### Configuring event notifications
Event notifications keep you updated on the progress and status of a scheme. MPS supports three types of notifications: TDMQ-CMQ callbacks, HTTP callbacks, and SCF callbacks.
<table>
<tr>
<th>Callback Type<a id="recall"></a></th>
<th>Configuration</th>
</tr>
<tr>
<td>TDMQ-CMQ callbacks</td>
<td><ol style="margin:0">
<li>To enable TDMQ-CMQ callbacks, you need to activate <a href="https://console.cloud.tencent.com/tdmq/cmq-queue?rid=1">Tencent Distributed Message Queue</a> and create a model. The event notifications of MPS will be sent to the message queue you specify.</br>
<li>Complete callback settings on the scheme creation page as follows:<ul style="margin:0">
			<li>TDMQ-CMQ model: Select “Queue model”.</li>
			<li>TDMQ-CMQ region: Select Guangzhou, Shanghai, Beijing, Shanghai Finance, Shenzhen Finance, Hong Kong (China), Chengdu, North America, or west US.</li>
			<li>Queue name: Enter a custom name.</li>
</ul></ul></td>
</tr>
<tr>
<td>HTTP callbacks
</td>
<td>When calling the notification configuration API <a href="https://intl.cloud.tencent.com/document/product/1041/33690#TaskNotifyConfig">TaskNotifyConfig</a>, set `NotifyType` to `URL` and `NotifyUrl` to the HTTP callback address.</td>
</tr>
<tr>
<td>SCF callbacks</td>
<td><ol style="margin:0">
	<li>SCF allows quick handling of the event notifications generated by MPS. The figure below shows the data flow:</br>
	<img src="https://main.qcloudimg.com/raw/02656fefa8e2f61f71252727747b7a02.png" /></li>
	<li>Event notifications are pushed to SCF by the MPS trigger and are handled by serverless functions.</li>
	<li>You can click “Go to SCF console” to configure a function in the SCF console. For detailed directions, see <a href="https://intl.cloud.tencent.com/document/product/1041/40337">MPS Task Callback Notification</a>. Notes:<ul style="margin:0">
	<li>SCF callback configuration applies to all schemes and is not saved specifically for the current scheme.</li>
	<li>Sending data to SCF will incur fees. For details, see <a href="https://intl.cloud.tencent.com/document/product/583/17299">Billing Overview</a>.</li>
</ul></ul></td>
</tr>
</table>


### Configuring actions
MPS offers a visual way for you to configure actions for a scheme.
1. Click **+** and select the type of action you want to add.
![](https://qcloudimg.tencent-cloud.cn/raw/ddf9374ff8d1acf88c100830b7401e8b.png)
2. An action of the selected type will be added to the workflow.
![](https://qcloudimg.tencent-cloud.cn/raw/8b65909d7defe9860bea78b84d97ec2d.png)
3. Click the edit icon. In the pop-up window, specify the details of the action and the output information. If you do not specify output information here, the output information specified for the scheme will be used.
>! The action configuration page differs depending on the action type. The figure below shows the configuration page for an audio/video transcoding action.

![](https://qcloudimg.tencent-cloud.cn/raw/f36828df241814cd2a529991325c7b8a.png)

## Managing Schemes
1. Log in to the [MPS console](https://console.cloud.tencent.com/mps) and select [Workflow > Schemes](https://console.cloud.tencent.com/mps/workflows/pipeline) on the left sidebar. On the **Schemes** page, you can **enable**, **disable**, **edit**, **delete**, as well as **view the details** of a scheme.
2. The scheme list displays information including scheme name, trigger bucket, region, trigger directory, creation time, and scheme status. You can sort schemes by creation time, search for a scheme by name, as well as edit, delete, or view the details of a scheme.
   - **Enabling a scheme**
      - Schemes are disabled by default. You can toggle on the switch in the **Enable** column to enable a scheme.
      - After a scheme is enabled, it will be automatically executed for videos uploaded to the trigger bucket.
   - **Disabling a scheme**
      - You can toggle off the switch in the **Enable** column to disable a scheme.
      - After a scheme is disabled, it will no longer be automatically executed on videos uploaded to the trigger bucket.
   - **Editing a scheme**
      - Click **Edit** in the **Operation** column to modify the name of a scheme, its trigger bucket, trigger directory, output bucket, output directory, event notification settings, or actions.
      - You cannot edit or delete an enabled scheme.
   - **Deleting a scheme**
      - Click **Delete** in the operation column to delete a scheme.
      - After a scheme is deleted, it will no longer be automatically executed on videos uploaded to the trigger bucket.
      - You cannot edit or delete an enabled scheme.
