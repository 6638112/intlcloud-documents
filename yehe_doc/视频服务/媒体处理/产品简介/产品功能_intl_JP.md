Media Processing Serviceはオーディオビデオファイルを様々なビットレートと解像度のフォーマットに変換し、様々なネットワーク帯域幅と端末デバイスのユーザーのニーズを満たします。以下の機能をサポートしています。

## オーディオビデオトランスコーディング[](id:video_trans)
トランスコードは、元のオーディオビデオストリームを別のオーディオビデオストリームに変換するオフラインタスクです。トランスコードによって、コーデック、解像度、ビットレートなどの元のビットストリームのパラメータを変更して、様々なデバイスやネットワーク環境での再生に適合させます。トランスコードによって以下の機能を実現できます。

| 実現可能な機能   | 説明                                                         |
| ----------- | ----------------------------------------------------------- |
| 多様な端末に適応 | 元のビデオを端末適応性の高い形式（例：MP4）にトランスコードして、ビデオリソースをより多くのデバイスで再生できるようにします |
| さまざまな帯域幅に適応 | ビデオをLD、SD、HD、FHDなどに変換して出力します。ユーザーは、現在のネットワーク環境に応じて、ビデオ再生に適したビットレートを選択できます |
| 再生効率を改善 | トランスコードにより、MP4の末尾にあるソース情報MOOVをあらかじめ先頭にもってくることができるので、プレーヤーはビデオ全体をダウンロードせずに、すぐに再生することができます |
| 帯域幅の削減     | より高度なコーデック（例：H.265）を使用してトランスコードすることで、元の画質を失うことなく、ビットレートを大幅に削減し、再生帯域幅を削減できます |

トランスコードの目標仕様には、コーデック、解像度、ビットレートなどのパラメータが含まれます。以下のトランスコード関連パラメータがカスタマイズ可能です。
<table>
<thead>
   <tr>
      <th width="15%" style="text-align:center">パラメータ</td>
      <th width="17%" style="text-align:center">タイプ</td>
      <th  style="text-align:center">詳細説明</td>
   </tr>
</thead>
   <tr>
      <td rowspan='3' style="text-align:center">入力形式</td>
      <td style="text-align:center">コンテナ形式</td>
      <td>3GP,AVI,FLV,MP4,M3U8,MPG,ASF,WMV,MKV,MOV,TS,WebM,MXF</td>
   </tr>
   <tr>
      <td style="text-align:center">ビデオコーデック形式</td>
      <td>AV1,AVS2,H.264/AVC,H.263, H.263+,H.265,MPEG-1,MPEG-2,MPEG-4,MJPEG,VP8,VP9,RealVideo,Windows Media Video,Quicktime</td>
   </tr><tr>
      <td style="text-align:center">オーディオコーデック形式</td>
      <td>AAC,ADPCM,AMR,DSD,MP1,MP2,MP3,PCM,RealAudio,Windows Media Audio,VORBIS,AC-3</td>
   </tr>
   <tr>
      <td rowspan='5' style="text-align:center">出力形式</td>
      <td rowspan='3' style="text-align:center">コンテナ形式</td>
      <td>ビデオ：FLV、MP4、HLS（m3u8+ts）、MXF</td>
   </tr><tr>
      <td>オーディオ：MP3、MP4、OGG、FLAC、m4a</td>
   </tr><tr>
      <td>画像：GIF、WEBP</td>
   </tr>
   <tr>
      <td style="text-align:center">ビデオコーデック形式</td>
      <td>H.264/AVC, H.265/HEVC,AV1</td>
   </tr><tr>
      <td style="text-align:center">オーディオコーデック形式</td>
      <td>MP3,AAC,FLAC,MP2,VORBIS</td>
   </tr><tr>
			 <td rowspan='2' style="text-align:center">コンテナ</td>
      <td style="text-align:center">ビデオストリームの削除</td>
      <td>「ビデオストリームの削除」を有効にすると、トランスコードしたビデオにはビデオストリームが含まれません（オーディオストリームのみ残ります）</td>
   </tr>
	 	 	   <tr>
      <td style="text-align:center">オーディオストリームの削除</td>
      <td>「オーディオストリームの削除」を有効にすると、トランスコードしたビデオにはオーディオストリームが含まれません（ビデオストリームのみ残ります）</td>
</table>


## オーディオビデオエンハンスメント[](id:video_enhance)

画質修正および画質エンハンスメントという2つのモジュールにAIアルゴリズムを組み合わせることで、解像度を向上させると同時に、ビデオノイズ除去、輪郭修正、超解像度再構成などの機能をご提供できます。UGC/PGCビデオ品質向上、古い映像の修復、4K制作などの業務シーンに適しています。

| 機能           | 説明                                                         |
| :------------- | :----------------------------------------------------------- |
| ビデオノイズ除去       | 映像の撮影中にカメラと環境に由来するランダムノイズが発生する場合があります。ここでご提供するノイズ除去サービスは、ディテールが失われないよう維持しながら画面内のランダムノイズを除去するものです。 |
| アーティファクト（グリッチ）除去 | 映像のトランスコード中または複数回のトランスコードを行う過程でビデオの圧縮を複数回行うことで、ブロックノイズ、リンギング効果、色にじみ、モスキートノイズなどが発生し、視覚効果に影響するひずみがビデオ画面にあらわれます。圧縮アーティファクト除去によって、エンコードに起因するひずみを効果的に修復できます。 |
| スクラッチ除去         | 映像の撮影、保存および別のメディアへの再保存の過程で、何らかの要因でフィルムに傷や白点などの破損が生じることがあります。スクラッチ除去はビデオの中の傷や白点などの破損した内容を修復することができる機能です。 |
| ディテールエンハンスメント       | カメラの品質、その後の保存およびトランスコードの過程でビデオのディテールが不鮮明になることがあります。ディテールエンハンスメントはビデオの中で際立たせたいディテールを強調し、画面の内容をより鮮明に、より豊富にします。 |
| 総合エンハンスメント       | AIの総合分析機能により、画面のテクスチャ内容を自動的にバランシングし、圧縮アーティファクトおよびグリッチを除去すると同時に重要なディテールを強調し、それにより画面全体の主観的な感じ方を向上させます。 |
| 超解像度           | 解像度が低く、最近の高解像度の要件に適さない映像に対し、超解像度機能によってディテールの強調と修復を行います。AIモデルを利用して高解像度出力を実現すると同時に、ディテールをより鮮明にします。 |
| フェイスエンハンスメント       | 顔検出により、ビデオの中で視覚的に特に注目される顔の部分を強調し、そのエリアのディテールをより鮮明にすることで、主観的な感じ方を向上させます。 |
| カラーエンハンスメント       | 撮影機材の色の問題または映像の保存の問題で、映像の色彩がある程度実際と異なることや、強調が必要となることがあります。カラーエンハンスメントは画面をよりリアルな色彩に近づけるとともに、目に心地よく感じられるように一定程度の強調を行います。 |
| 低照度エンハンスメント     | 環境および撮影カメラのハード面の問題により、シーンによっては撮影画面の明るさとコントラストが失われ、画面全体が暗くなったり、画面の暗い部分のディテールが見えなくなったりすることがあります。このため、低照度エンハンスメントではシーンを自動認識して画面に対し適応型のエンハンスメントを行うことで、特に暗所のシーンで暗い部分のディテールおよびコントラストを大幅に引き上げ、肉眼での主観的品質を向上させることができます。 |
| HDR            | SDRのHDRへの変換機能によって通常のSDRビデオをHDRビデオに変換し、色深度を10bitに向上させることで、より広い色域を実現します。より多くのカラーディテールを表現できるため、より高品質のビデオコンテンツを提供できます。 |
| フレーム補間           | オリジナルビデオのフレームの間に新しいビデオフレームを追加することで、よりスムーズで滑らかな視覚効果が得られます。また、低フレームレートの古いビデオにみられるラグ、ジッターなどの画質の問題の解決にも役立ちます。 |


## ウォーターマーク[](id:watermark)
ウォーターマークの追加は、ビデオのトランスコーディングまたはスクリーンキャプチャ時に、特定の画像を画面の指定位置に追加するプロセスであり、オフラインタスクです。MPSでは以下のタイプのウォーターマークをサポートしています。
- **静的画像ウォーターマーク**：PNG形式の画像ウォーターマーク。版権元のLOGO、放送局ロゴなど、通常、ビデオの版権の帰属の表示に利用されます。
- **動的画像ウォーターマーク**：APNG形式の動的画像ウォーターマーク。ウォーターマーク画像のダイナミックな変化による效果を実現できます。

MPSではビデオまたはスクリーンキャプチャに対する複数のウォーターマークの追加をサポートし、各ウォーターマークの画面の中でのサイズと位置を指定できます。
ウォーターマークの目標仕様には、ウォーターマークのタイプ、幅と高さ、位置などのパラメータが含まれます。以下のウォーターマーク関連パラメータがカスタマイズ可能です。

| パラメータ                     | 説明                           |
| ------------------------ | ------------------------------ |
| ウォーターマークのタイプ（Type）         | 静的画像ウォーターマークと動的画像ウォーターマークをサポート |
| ウォーターマーク位置（Position）     | ウォーターマークのビデオ画面上の対応する位置     |
| 画像サイズ（ImageSize）    | 画像ウォーターマークがビデオ画面に占める大きさ       |
| 画像コンテンツ（ImageContent） | 画像ウォーターマークの中の画像のバイナリーコンテンツ     |


## ビデオスクリーンキャプチャ[](id:screenshot)
スクリーンキャプチャはビデオの特定の位置の映像を切り取り、画像を生成するプロセスであり、オフラインタスクです。MPSでは次のタイプのスクリーンキャプチャを提供しています。
- **指定タイムポイントのスクリーンキャプチャ**：1組のタイムポイントを指定し、これらのタイムポイントのビデオの画像を切り取ります。
- **サンプリングスクリーンキャプチャ**：同じ時間間隔でビデオから複数枚の画像を切り取ります。
- **スプライトイメージ**：同じ時間間隔でビデオから複数枚の小さな画像を切り取り、組み合わせてやや大きめの画像（ [スプライトイメージ](https://intl.cloud.tencent.com/document/product/1041/33504#1666)）を作成します。

スクリーンキャプチャの目標仕様には、スクリーンキャプチャのファイルフォーマット、スクリーンキャプチャの幅と高さなどのパラメータが含まれます。以下のスクリーンキャプチャ関連パラメータがカスタマイズ可能です。

### タイムポイントスクリーンキャプチャ[](id:time)

| パラメータ                 | 説明                                                         |
| -------------------- | ------------------------------------------------------------ |
| 形式（Format）       | スクリーンキャプチャのファイル出力形式。現在はJPGのみをサポートしています                           |
| 幅（Width）        | スクリーンキャプチャの幅。範囲は128px～4096px                               |
| 高さ（Height）       | スクリーンキャプチャの高さ。範囲は128px～4096px                               |
| 塗りつぶしタイプ（FillType） | スクリーンキャプチャの幅と高さの比率とオリジナルビデオの幅と高さの比率が異なるときに、スクリーンキャプチャの処理方式が、「塗りつぶし」になります。一般的な塗りつぶしタイプには次のようなものがあります。<li>引き伸ばし：画像を引き伸ばして、フレーム全体に広げます。画像は「圧縮されたり」、「長く延びたり」します</li><li>黒で補填：画像の幅と高さの比率は変えず、縁の余った部分は黒で補填します</li><li>白で補填：画像の幅と高さの比率は変えず、縁の余った部分は白で補填します</li><li>ガウシアンぼかし：画像の幅と高さの比率は変えず、縁の余った部分はガウシアンぼかしを入れて画面を埋めます</li> |


### サンプリングスクリーンキャプチャ[](id:sampling)

| パラメータ                   | 説明                                                         |
| ---------------------- | ------------------------------------------------------------ |
| 形式（Format）         | スクリーンキャプチャのファイル出力形式。現在はJPGのみをサポートしています                           |
| 幅（Width）          | スクリーンキャプチャの幅。範囲は128px～4096px                               |
| 高さ（Height）         | スクリーンキャプチャの高さ。範囲は128px～4096px                               |
| サンプリング方式（SampleType） | サンプリング方式は2種類に分かれます。<li>パーセンテージによるサンプリング：例えば、5%の間隔でサンプリングした場合、生成されるスクリーンキャプチャの枚数は20枚になります</li><li>時間間隔によるサンプリング：例えば、10sの間隔でサンプリングした場合、スクリーンキャプチャの枚数はビデオの長さによって決まります</li> |
| サンプリング間隔（Interval）   | サンプリング間隔の長さ：<li>パーセンテージによるサンプリングの場合、間隔はパーセンテージになります</li><li>時間間隔によるサンプリングの場合、間隔は秒になります</li> |
| 塗りつぶしタイプ（FillType）   | スクリーンキャプチャの幅と高さの比率とオリジナルビデオの幅と高さの比率が異なるときに、スクリーンキャプチャの処理方式が、「塗りつぶし」になります。一般的な塗りつぶしタイプには次のようなものがあります。<li>引き伸ばし：画像を引き伸ばして、フレーム全体に広げます。画像は「圧縮されたり」、「長く延びたり」します</li><li>黒で補填：画像の幅と高さの比率は変えず、縁の余った部分は黒で補填します</li><li>白で補填：画像の幅と高さの比率は変えず、縁の余った部分は白で補填します</li><li>ガウシアンぼかし：画像の幅と高さの比率は変えず、縁の余った部分はガウシアンぼかしを入れて画面を埋めます</li> |


### スプライトイメージ[](id:sprite)

| パラメータ                   | 説明                                     |
| ---------------------- | ---------------------------------------- |
| 形式（Format）         | スプライトイメージのファイル出力形式。現在はJPGのみをサポートしています     |
| 小さい画像の幅（Width）      | スプライトイメージの中の小さい画像の幅                       |
| 小さい画像の高さ（Height）     | スプライトイメージの中の小さい画像の高さ                       |
| 小さい画像の行数（Rows）       | 1枚の大きな画像の中にある小さい画像の行数                   |
| 小さい画像の列数（Columns）    | 1枚の大きな画像の中にある小さい画像の列数                   |
| サンプリング方式（SampleType） | 小さい画像のサンプリング方式。現在は時間間隔によるサンプリングのみをサポートしています |
| サンプリング間隔（Interval）   | どの位の間隔で1枚の小さい画像をサンプリングするかのサンプリング間隔     |

>!
>- Width × Columnsは128px～4096pxの間にする必要があります（大きい図の幅が128px～4096pxの間）。
>- Height × Rowsは128px～4096pxの間にする必要があります（大きい図の高さが128px～4096pxの間）。

### ビデオアニメーション画像生成[](id:gif)
アニメーション画像生成とは、ビデオフィルムを切り取り、動画（GIF、WEBPなど）を生成するプロセスを指し、オフラインタスクとなります。動画は1組の連続したフレームをシームレスに循環させ、これにより小さい容量でアニメーション効果を実現します。
アニメーション画像生成の目標仕様には、動画のフォーマット、幅と高さ、フレームレートなどのパラメータが含まれます。以下の動画関連パラメータがカスタマイズ可能です。

| パラメータ           | 説明                                       |
| -------------- | ------------------------------------------ |
| 形式（Format） | 動画ファイルの出力形式。現在はGIFとWEBPのみをサポートしています |
| 幅（Width）  | 動画の幅。範囲は128px～4096px             |
| 高さ（Height） | 動画の高さ。範囲は128px～4096px             |
| フレームレート（FPS）    | サポートするフレームレート範囲：1fps～60fps               |


## コンテンツ理解
### コンテンツ認識[](id:identification)
コンテンツ認識はTencentラボの最新の研究成果に基づいてご提供する、ビデオコンテンツの全方位的認識であり、ビデオ内の人物、音声、文字、フレームタグを認識して、ビデオに対し多次元構造化分析を行うことができます。
<table>
<thead>
<tr>
<th width=15%>認識タイプ</th>
<th>機能説明</th>
</tr>
</thead>
<tbody><tr>
<td>顔認識</td>
<td>ディープラーニングソリューションをベースにしており、お客様がビデオ内の顔情報を速やかに認識して、ビデオ内の人物のいるフレーム画面ならびに顔のあるエリアを速やかに特定する上で役立ちます。お客様は人物データベースをカスタマイズするか、またはビデオAIパブリック人物データベースを呼び出して顔認識を行うことができます。</td>
</tr>
<tr>
<td>音声認識</td>
<td>ディープラーニングソリューションをベースにしており、お客様はビデオ内の音声を速やかに認識して文字に変換することができます。お客様がキーワードをカスタマイズし、キーワードが存在するビデオの時間位置を特定することをサポートします。</td>
</tr>
<tr>
<td>文字認識</td>
<td>お客様がビデオ内の文字情報を認識する上で役立ちます。ビデオ内のカスタムキーワードの抽出に用いることができ、縦書き文字の認識もサポートします。</td>
</tr>
<tr>
<td>フレームタグ認識</td>
<td>ディープラーニングソリューションをベースにしており、お客様がカスタマイズしたビデオのフレームキャプチャインターバルに基づき、フレームキャプチャ画面内のタグを自動認識し、タグの存在するビデオの位置を特定することができます。フレームタグは人物、風景、人工物、建物、動植物、食べ物などの9つの分類をカバーし、日常生活のそれぞれの情報面が含まれるほか、タグシステムをベースにしたカスタムタグを使用することもできます。転移学習機能を備え、オリジナルユーザーデータを提供するだけでカテゴライザーをカスタマイズでき、様々なタイプのユーザーニーズを満たすとともに、タグのカテゴリーをより柔軟なものにすることができます。</td>
</tr>
<tr>
<td>先頭末尾認識</td>
<td>ビデオ画面の特徴、文字、音声などの情報の自動認識に基づき、映画/ドラマの先頭と末尾の時点を特定します。</td>
</tr>
</tbody></table>

### コンテンツ分析[](id:analyze)
<table>
<thead>
<tr>
<th width=14%>分析タイプ</th>
<th>機能説明</th>
</tr>
</thead>
<tbody><tr>
<td>カテゴリー認識</td>
<td>ビデオコンテンツの分析によって、ビデオに推奨カテゴリーを提示します。現在はグルメ、旅行、アニメ・漫画、ミュージックなどの19カテゴリーをサポートしています（有料でのオーダーメイドにも対応します）。</td>
</tr>
<tr>
<td>ビデオタグ認識</td>
<td>Tencentのディープラーニングソリューションをベースに、ビデオコンテンツに最も合った上位5項目のタグ概要をインテリジェント認識し、ビデオのおすすめ、検索などのシーンに用いることができます。ユーザーはインターフェース上で、返されるタグの個数をご自身で選択することができます。</td>
</tr>
<tr>
<td>インテリジェントカバー</td>
<td>ビデオ画面のテクスチャ、シーン認識などの特徴的な情報を組み合わせてファイルカバーを自動生成します。静的カバー出力をサポートし、ビデオカバー体験とクリックコンバージョン率を向上させます。</td>
</tr>
</tbody></table>

## インテリジェント審査[](id:audit)
インテリジェント審査には大きく分けてセキュリティ審査と品質審査があります。
**セキュリティ審査**はAIのサポートにより、ビデオコンテンツ（画面、音声、文字の3つの面）に対し、ポルノ、違法・不正検出を行います。
**品質審査**はライブストリーミング、オンデマンドビデオの画面フレームおよび音声品質の検査をサポートします。画面のちらつき、黒枠、モザイク、ノイズなどの全方位的な13項目の検査タイプのほか、キャスターのビデオ全体品質の検査とスコア評価も行うことができます。

<table>
    <thead><tr>
        <th>審査タイプ</th>
        <th>検査タイプ</th>
        <th>検査項目の説明</th>
    </tr>
		 </thead> <tbody>
    <tr>
        <td rowspan="3">セキュリティ審査</td>
        <td>ビデオ画面審査</td>
        <td>
            ビデオ画面のポルノ、不正検出を行います。具体的な検査項目は次のとおりです。<ul style="margin:0">
                            <li><strong>ポルノ検出</strong><ul>
                                <li>porn：ポルノ</li>
                                <li>vulgar：低俗</li>
                                <li>intimacy：親密な行為</li>
                                <li>sexy：セクシー</li>
                            </ul>
                            </li>
                            <li><strong>違法・不正検出</strong><ul>
                                <li>guns：武器・銃</li>
                                <li>bloody：血生臭い画面</li>
                                <li>explosion：爆発</li>
                                <li>violation_photo：違法な画像</li>
                            </ul>
                            </li>
                            </ul>
        </td>
    </tr>
    <tr>
        <td>音声審査</td>
        <td>
            音声の中の文字に対して検査を行います。具体的な検査項目は次のとおりです。
                    <ul style="margin:0">
                        <li><strong>ポルノ検出</strong>：音声の中の文字に対してポルノ関係の検査を行い、疑わしいキーワードを認識します</li>
                        <li><strong>違法・不正検出</strong>：音声の中の文字に対して違法・不正の検査を行い、疑わしいキーワードを認識します</li>
                    </ul>
        </td>
    </tr>
    <tr>
        <td>文字審査</td>
        </td>
        <td>
            画面の中の文字に対して検査を行います。具体的な検査項目は次のとおりです。
<ul style="margin:0">
<li><strong>ポルノ検出</strong>：画面の中の文字に対してポルノ関係の検査を行い、疑わしいキーワードを認識します</li>
<li><strong>違法・不正検出</strong>：画面の中の文字に対して違法・不正の検査を行い、疑わしいキーワードを認識します</li>
</ul>
        </td>
    </tr>
    <tr>
        <td rowspan="2">品質審査</td>
        <td>画面品質</td>
        <td>ビデオの画面品質に対する検査をサポートします。具体的な検査項目は次のとおりです。
            <li>JitterResults：画面ジッター
            <li>JitterResults：画面のぼやけ
            </li><li>AbnormalLightingResults：低照度、白飛び
            </li><li>CrashScreenResults：画面のちらつき
            </li><li>BlackWhiteEdgeResults：画面の黒枠、白枠、ブラックスクリーン、ホワイトスクリーン、画面が一定時間一色になる
            </li><li>NoiseResults：画面のノイズ
            </li><li>MosaicResults：画面のモザイク
            </li><li>QRCodeResults：画面に2次元コードが表示される
        </li></td>
    </tr>
    <tr>
        <td>音声品質</td>
        <td>
            ビデオの音声品質に対する検査をサポートします。具体的な検査項目は次のとおりです。
            <li>VoiceResults：ミュート、低音、音割れなどの音声異常
        </li></td>
    </tr>
</tbody></table>


## インテリジェント編集[](id:edit)
インテリジェント編集はAIおよびTencentの長年のオーディオビデオ技術をベースにしたもので、多次元かつ全方位的なビデオコンテンツ理解、インテリジェントコレクションおよびインテリジェントセグメンテーション機能をサポートし、ビデオコンテンツの制作を支援します。

| 機能タイプ | 機能説明                                                     |
| :------- | :----------------------------------------------------------- |
| セグメンテーション     | ビデオコンテンツに対する構造化分析を行い、ビデオのシーン情報、音声情報および文字情報に基づいて、ビデオのインテリジェントセグメンテーションを生成します。ニューストピックセグメンテーション、広告セグメンテーションをサポートしています。 |
| インテリジェントコレクション | ビデオの時間領域/空間領域特徴マッチング、シーン認識、ターゲット検出などの技術をベースに、ビデオのハイライトを自動生成します。サッカー、バスケットボール、PUBG: BATTLEGROUNDS、王者栄耀などのビデオシーンをサポートしています（有料でのオーダーメイドにも対応します）。 |
| トリミング制作 | ビデオのトリミング、スプライシング、画像のビデオへの変換、ロール画像、ロール文字、ピクチャーインピクチャー、オーディオ編集などの操作をサポートします |

