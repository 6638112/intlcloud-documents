Tencent CloudはWebプッシュ機能を提供します。カメラキャプチャ、画面共有キャプチャ、ローカルファイルキャプチャの3種類のキャプチャ方式によるライブストリーミングをサポートしています。プッシュアドレスを迅速に発行し、ライブストリーミング機能のオンラインプッシュテストを行うことができます。

##  前提条件
-  [CSSコンソール](https://console.cloud.tencent.com/live)にログイン済みであること。
-  [プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)を追加済みであること。
- デバイスにカメラがインストール済みであり、かつブラウザがカメラ許可を呼び出すためのFlashプラグインをサポートしていること。

## 操作手順
1. CSSコンソールにログインし、[**Webプッシュ**](https://console.cloud.tencent.com/live/tools/webpush)を選択します。

2. **キャプチャ方式を選択します**。カメラキャプチャ、画面共有キャプチャおよびローカルファイルキャプチャの3種類のキャプチャ方式から選択してライブストリーミングを行うことができます。
    <dx-tabs>
    ::: カメラキャプチャ
    カメラキャプチャとは、カメラ/マイク（外部接続をサポート）でビデオ/音声を取得することを言います。**カメラをオンにする**/ **マイクをオンにする**をクリックします。最初に有効にする際、ブラウザにカメラおよびマイクの権限を付与する必要があります。
    ![](https://qcloudimg.tencent-cloud.cn/raw/c5585e8a4ce99d65ace7af7c63e39487.png)
    :::
    ::: 画面共有キャプチャ
   画面共有キャプチャとはブラウザが対応するウィンドウ/インターフェースをキャプチャすることで、共有取得を行うことを言います。**画面共有を選択**をクリックして共有する内容を選択します。画面全体/特定のウィンドウ/ブラウザのタブを選択することができます。
    ![](https://qcloudimg.tencent-cloud.cn/raw/75d18898089e060dc118656c539d05a3.png)
    :::
    ::: ローカルファイルキャプチャ
    ローカルファイルキャプチャとは、指定したローカルファイルを介して画面取得を行い、WebプッシュツールでCSSへプッシュすることを言います。**ローカルファイルを選択**をクリックしてプッシュしたい内容を選択します。現時点ではMP4形式のみサポートしています。
    ![](https://qcloudimg.tencent-cloud.cn/raw/f1ae8270626dfe6cf0cbc822a907698e.png)
    :::
    </dx-tabs>


>! プレビューを開いている場合や、共有画面の内容を選択した後はキャプチャ方式を切り替えることができません。プレビューを閉じるか、または画面共有をキャンセルしてからキャプチャ方式を切り替えることができます。
3. **キャプチャ設定を行います**。キャプチャ設定は、デフォルトでは推奨設定（解像度ごとに推奨設定が異なります）となっており、右上隅の**編集**をクリックするとカスタム編集設定に進むことができます 。（**カメラキャプチャと画面共有キャプチャには音声サンプルレートの設定オプションが追加されています。ローカルファイルキャプチャは解像度とビデオフレームレートの設定オプションのみとなっています。**）
![](https://qcloudimg.tencent-cloud.cn/raw/f126b1bf7035562517d8b6cf62c71cb0.png)
4. **プッシュ設定を行います**。プッシュ設定は、デフォルトでは推奨設定（解像度ごとにビデオビットレートの推奨設定が異なります。オーディオビットレートの変更はサポートしていません）となっています。右上隅の**編集**をクリックするとカスタム編集設定に進み、ビデオビットレートとオーディオビットレートをカスタム変更することができます。
>? webプッシュのオーディオコーデックはopusエンコードです。再生にはライブイベントストリーミングのWebRTCアドレスの使用をお勧めします。標準ライブストリーミングの再生アドレス（RTMP/FLV/HLS）を使用して再生した場合、正常に再生するためにシステムが自動的にaacエンコードに変換し、それによってオーディオトランスコード料金が発生します。詳細については、[課金ドキュメント](https://intl.cloud.tencent.com/document/product/267/39604)をご参照ください。

![](https://qcloudimg.tencent-cloud.cn/raw/bb10b3c8d970e26d45d55eec229b5fb0.png)
5. **プッシュをプレビューします**。キャプチャ方式および設定、およびプッシュ設定を決定した後、プレビューを開くと、右側にプッシュのプレビューが表示されます。
![](https://qcloudimg.tencent-cloud.cn/raw/efaa6ffdf3d1dac7ac6d23beac569671.png)
6. WebRTCプッシュアドレスを入力するか、または**クイック発行**をクリックし、次の設定を行います。
	- プッシュドメイン名を選択します。
	- 同一ドメイン名の複数Appを区別するために使用されるアドレスパスであるAppNameを編集します。デフォルト値はliveです。
	- カスタムされたストリーム名StreamNameを記入します（例:`test`）。
	- 期限切れ時間を選択します（例：`2021-08-28 16:16:52`）。
	- **OK**をクリックすると、WebRTCプッシュアドレスが自動的にクイック発行されてアドレス欄に入力されます。
![](https://qcloudimg.tencent-cloud.cn/raw/3437d3d4e57ae021aa3e0bea3e6fc4e6.png)
7. **プッシュ開始**をクリックすると、プッシュを開始できます。![](https://main.qcloudimg.com/raw/da098f4e5ab01021e3c4704b0de41240.png)および![](https://main.qcloudimg.com/raw/aa8d8d4c9c32359a249de37ed0d723be.png)ボタンをクリックすることで画面と音声をオン/オフできます。クリックして画面または音声をオフにしても、システムによって正常にキャプチャが行われますが、プレビューはできません。プッシュは正常に開始されますが、画面と音声は出なくなります。
>? プッシュに成功すると、キャプチャプレビューのステータスは変更できなくなります。また、プッシュによって対応する帯域幅/トラフィック、またはその他の付加価値サービス料金が発生する可能性があります。

![](https://qcloudimg.tencent-cloud.cn/raw/f8e3e7571205090d9ad14a4faa280125.png)
8. プッシュに成功すると、下の**今すぐ確認**をクリックし、ジャンプ先でCSSストリームプッシュの関連データを確認できるようになります。現在のアカウントプッシュアドレスでなければ、プッシュデータと再生アドレスを取得できません。現在のアカウントのプッシュドメイン名によってプッシュアドレスを発行するか、プルリツイート機能を使用し、CSSストリームを現在のアカウントに同時に転送することができます。
![](https://qcloudimg.tencent-cloud.cn/raw/5ef686d9d9cb0355a8e4a5686cbcaee3.png)
9. **ドメイン名管理**で再生ドメイン名を追加済みである場合は、下の**再生ドメイン名**でクイック発行された再生アドレスを選択することができます。トランスコード設定のある再生アドレスを発行したい場合は、先に再生ドメイン名をトランスコードテンプレートにバインドしてから、トランスコーディングストリーム再生を作成することができます。
![](https://qcloudimg.tencent-cloud.cn/raw/94d9969c54c3c0524e1c69f9dbf56d8d.png)
このうち、再生アドレスは次の4つの部分で構成されます。
![](https://main.qcloudimg.com/raw/9094e537a4ae7cecc7feb9c88fb83a55.png)RTMP、FLV 、 HLSおよびUDPプロトコルをサポートしています。再生アドレスの後の2次元コードをクリックすると、[TCToolkit App](https://intl.cloud.tencent.com/document/product/1071/38147)でコードをスキャンして再生アドレスを確認することができます。
![](https://qcloudimg.tencent-cloud.cn/raw/9aa53207e02123a5fa7a4afae1d07724.png)

>! 選択した再生ドメイン名がHTTPS設定を有効にしている場合、発行されたFLVおよびHLSアドレスにはデフォルトでHTTPSが付きます。

