ライブブロードキャストトランスコーディング機能（ビデオトランスコーディングとオーディオトランスコーディングを含みます）とは、ライブストリーミングからリアルタイムでプッシュされたオリジナルストリームを視聴者にプッシュする前に、クラウドでさまざまなコーデック、解像度、ビットレートのトランスコーディングストリームに変換する機能です。各種インターネット環境、各種端末デバイスなど、各種シナリオでの再生ニーズを満たします。ここでは、コンソールによってトランスコーディングテンプレートを作成、関連付け、関連付け解除、変更、削除する方法をご紹介します。

**トランスコーディングテンプレートの作成には次の2つの方法があります。**

- CSSコンソールによってトランスコーディングテンプレートを作成します。操作手順の詳細は[標準トランスコーディングテンプレートの作成](#C_trans)、[高速高画質トランスコーディングテンプレートの作成](#C_topspeed)、[オーディオのみのトランスコーディングテンプレートの作成](#C_audio)をご参照ください。
- APIはライブブロードキャストチャネルのトランスコーディングテンプレートを作成します。具体的なパラメータおよびサンプルの説明は、[トランスコーディングテンプレートの作成](https://www.tencentcloud.com/document/product/267/30790)をご参照ください。


## 注意事項
- CSSは標準トランスコーディング、高速高画質トランスコーディング、オーディオのみのトランスコーディングをサポートします。以下の機能を使用する場合は、関連の課金説明について理解しておいてください。
   - 標準トランスコーディング：[標準トランスコーディングリソースパック](https://www.tencentcloud.com/document/product/267/52220#standard_pag)、[標準トランスコーディングの後払い](https://intl.cloud.tencent.com/document/product/267/39604)。
   - 高速高画質トランスコーディング：[高速高画質トランスコーディングリソースパック](https://www.tencentcloud.com/document/product/267/52220#topspeed_pag)、[高速高画質トランスコーディングの後払い](https://intl.cloud.tencent.com/document/product/267/39604)。
- **高速高画質トランスコーディング**は**標準トランスコーディング**と比較して画質がより優れ、ビットレートがさらに低くなっています。スマートなケースの識別、動的コーデックによって、CTU/ライン/フレームの3つのレベルのビットレートは精確にモデルを制御して、より低いビットレート（平均50%以上を節約）でさらに高解像度のストリームメディアサービスを提供します。ライブゲームブロードキャスト、ライブショーブロードキャスト、イベント活動ライブストリーミングなどのシーンに広く活用できます。
- テンプレートを作成すると、再生ドメイン名に関連付けできます。関連付け完了してから約5分～10分後に有効になります。
- トランスコーディングテンプレートを関連付けてから、対応するライブストリーミングStreamNameの後に`_トランスコーディングテンプレート名`を追加して、トランスコーディングストリームアドレスを生成できます。**トランスコーディングテンプレート名**と**StreamName**に同じ接尾辞を付けることはできません。たとえば、トランスコーディングテンプレート名を`hd`にして、StreamNameを`test_a1_hd`にすることはできません。そうでない場合、再生時に、プログラムは`test_a1`をStreamNameとして識別し、トランスコーディングテンプレート`hd`を使用してストリームをプルするため、ストリームのプルが異常になります。
- 幅と高さ、または長辺と短辺を同時に設定する場合、プッシュの元の解像度は、画像の伸びや変形を避けるために、設定値の比率にできるだけ近くする必要があります。
- トランスコーディングテンプレートを関連付けてから、対応するテンプレートで関連付けルールを表示します。またAPIによってより詳細なルールを作成している場合は、それに基づき確認および[関連付け解除](#untie)をすることもできます。
- 単一の再生ドメイン名に**複数のトランスコーディングテンプレート**を関連付けることができます。単一のトランスコーディングテンプレートに**複数の再生ドメイン名**を関連付けることができます。
- トランスコーディングテンプレートの設定数量の上限は**50個**です。

[](id:create)
## トランスコーディングテンプレートの作成
[](id:C_trans)
### 標準トランスコーディングテンプレートの作成

1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. **トランスコーディングテンプレートの作成**をクリックして、トランスコーディングタイプに『**標準トランスコーディング**』を選択し、以下のとおりに設定します。
  - 基本設定項目：テンプレート名、ビデオビットレート、画面解像度などの設定項目があります。詳細は[標準トランスコーディングの基本設定の説明](#C_trans_normal)をご参照ください。
  - 高度な設定項目（任意入力）：**高度な設定**をクリックしてコンテンツを開くと、設定を選択できます。詳細は[標準トランスコーディングの高度な設定の説明](#C_trans_high)をご参照ください。
3. 入力が完了したら、**保存**をクリックして終了します。

![](https://qcloudimg.tencent-cloud.cn/raw/d67e6aa3cc7d5bc0ddfe6f47342b6a24.png)

<table id="C_trans_normal">
<tr><th width="20%">標準トランスコーディングの基本設定項目</th><th>必須入力かどうか</th><th>説明</th></tr>
<tr>
<td>トランスコーディングタイプ</td>
<td>はい</td>
<td>選択可能なトランスコーディングタイプとして、<b>標準トランスコーディング</b>、高速高画質トランスコーディング、オーディオのみのトランスコーディングがあります。</td>
</tr><tr>
<td>テンプレート名</td>
<td>はい</td>
<td>ライブブロードキャストトランスコーディングテンプレート名は、アルファベット、アルファベットと数字の組み合わせのみをサポートし、数字のみの場合はサポートしません。入力できる文字数は1～10文字です。</td>
</tr><tr>
<td>テンプレートの説明</td>
<td>いいえ</td>
<td>ライブブロードキャストトランスコーディングテンプレートの概要説明では、中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみサポートします。</td>
</tr><tr>
<td>推奨パラメータ</td>
<td>いいえ</td>
<td>これは<b>LD、SD、HD</b>の3種類のタイプをサポートします。選択後、システムは対応するビデオビットレート、ビデオ解像度の推奨値を自動で設定し、自動的に修正します。</td>
</tr><tr>
<td>ビデオビットレート <br>（単位：kbps）</td>
<td>はい</td>
<td>平均出力ビットレート。値の範囲：101Kbps～8000Kbps。<ul style="margin:0">
  <li>1000Kbps以下では100の入力のみサポートします。</li>
  <li>1000Kbps以上では500の入力のみサポートします。</li></ul>
</td>
</tr><tr>
<td>画面解像度</td>
<td>はい</td>
<td>デフォルトは<b>幅と高さにより設定</b>です。<li>入力値が高い値なら、 <b>辺の長短に従って設定</b>に切り換えることができます。入力値は短辺値です。<li>入力値の範囲が0px～3000pxならば、入力する数値は2の倍数となり、別の辺はデフォルトで解像度などの比率に応じてズームします。</td>
</tr><tr>
<td>DRM暗号化</td>
<td>いいえ</td>
<td>この機能を有効にするには、DRM管理に移動してDRMキーを設定してください。HLS再生プロトコルの下で、Widevine、Fairplay、およびNormalAESのDRRM暗号化をサポートします。Fairplayは、プレーヤー側でAppleによって申請された証明書をアップロードする必要があります。</td>
</tr></table>


<table id="C_trans_high">
<tr><th width="20%">標準トランスコーディングの高度な設定項目 </th><th>必須入力かどうか</th><th>説明</th></tr>
<tr>
<td>コーデック</td>
<td>いいえ</td>
<td>デフォルトは元のエンコーディングです。H.264、H.265およびAV1の符号化方式を選択できます。</td>
</tr><tr>
<td>ビデオフレームレート</td>
<td>いいえ</td>
<td>値の範囲は0fps～60fps。入力がない場合のシステムのデフォルト値は0fps（入力元のフレームレートを表す）です。</td>
</tr><tr>
<td>キーフレームの間隔GOP<br>（単位：s/秒）</td>
<td>いいえ</td>
<td>GOPの設定範囲は2秒～6秒。GOPが大きくなるほど、レイテンシーは増加します。設定しない場合は、システムのデフォルト値になります。</td>
</tr><tr>
<td>パラメータ制限</td>
<td>いいえ</td>
<td>デフォルトでは無効になっており、手動で有効にできます。<br>パラメータ制限を有効にすると、入力ライブストリーミングのオリジナルパラメータが、設定した出力パラメータよりも小さいときは、ライブストリーミングはオリジナルパラメータに従って出力され、低クオリティのライブストリーミングが強制的にパラメータ値を引き上げられて実際の画質への影響を防止します。</td>
</tr></table>

[](id:C_topspeed)

### 高速高画質トランスコーディングテンプレートの作成
1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. **トランスコーディングテンプレートの作成**をクリックして、トランスコーディングタイプに『**高速高画質トランスコーディング**』を選択し、以下のとおりに設定します。
  - 基本設定項目：テンプレート名、ビデオビットレート、画面解像度などの設定項目があります。詳細は[高速高画質トランスコーディングの基本設定の説明](#C_topspeed_normal)をご参照ください。
  - 高度な設定項目（任意入力）：**高度な設定**をクリックしてコンテンツを開くと、設定を選択できます。詳細は[高速高画質トランスコーディングの高度な設定の説明](#C_topspeed_high)をご参照ください。
3. **保存**をクリックすれば完了です。

![](https://qcloudimg.tencent-cloud.cn/raw/54965fbb96dc3a1ac6c51793b579954a.png)

<table  id="C_topspeed_normal">
<tr><th width="20%">高速高画質トランスコーディングの基本設定項目</th><th>必須入力かどうか</th><th>説明</th>
</tr><tr>
<td>トランスコーディングタイプ</td>
<td>はい</td>
<td>選択可能なトランスコーディングタイプとして、標準トランスコーディング、<b>高速高画質トランスコーディング</b>、オーディオのみのトランスコーディングがあります。</td>
</tr><tr>
<td>テンプレート名</td>
<td>はい</td>
<td>ライブブロードキャストトランスコーディングテンプレート名は、アルファベット、アルファベットと数字の組み合わせのみをサポートし、数字のみの場合はサポートしません。入力できる文字数は2～10文字です。</td>
</tr><tr>
<td>テンプレートの説明</td>
<td>いいえ</td>
<td>ライブブロードキャストトランスコーディングテンプレートの概要説明では、中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみサポートします。</td>
</tr><tr>
<td>推奨パラメータ</td>
<td>いいえ</td>
<td>これは<b>LD、SD、HD</b>の3種類のタイプをサポートします。選択後、システムは対応するビデオビットレート、ビデオ解像度の推奨値を自動で設定し、自動的に修正します。</td>
</tr><tr>
<td>ビデオビットレート <br>（単位：kbps）</td>
<td>はい</td>
<td>平均出力ビットレート。値の範囲：101Kbps～8000Kbps。<li>1000Kbps以下では100の入力のみサポートし、</li><li>1000Kbps以上では500の入力のみサポートします。</li></td>
</tr><tr>
<td>画面解像度</td>
<td>はい</td>
<td>デフォルトは<b>幅と高さにより設定</b>です。<li>入力値が高い値なら、<b>辺の長短に従って設定</b>に切り換えることができます。入力値は短辺値です。</li><li>入力値の範囲が0px～3000pxならば、入力する数値は2の倍数となり、別の辺はデフォルトで解像度などの比率に応じてズームします。</li></td>
</tr>
</table>

<table  id="C_topspeed_high">
<tr><th width="20%">高速高画質トランスコーディングの高度な設定項目</th><th>必須入力かどうか</th><th>説明</th>
</tr><tr>
<td>コーデック</td>
<td>いいえ</td>
<td>デフォルトはオリジナルコーデックです。H.264とH.265の2種類のコーデックを選択できます。</td>
</tr><tr>
<td>ビデオフレームレート</td>
<td>いいえ</td>
<td>値の範囲は0fps～60fps。入力がない場合のシステムのデフォルト値は0fpsです。</td>
</tr><tr>
<td>キーフレームの間隔GOP<br>（単位：s/秒）</td>
<td>いいえ</td>
<td>GOPの設定範囲は2秒～6秒。GOPが大きくなるほど、レイテンシーは増加します。設定しない場合は、システムのデフォルト値になります。</td>
</tr><tr>
<td>パラメータ制限</td>
<td>いいえ</td>
<td><li/>デフォルトでは無効になっており、手動で有効にできます。<li/>パラメータ制限を有効にすると、入力ライブストリーミングのオリジナルパラメータが、設定した出力パラメータよりも小さいときは、ライブストリーミングはオリジナルパラメータに従って出力され、低クオリティのライブストリーミングが強制的にパラメータ値を引き上げて実際の画質への影響を防止します。</td>
</tr></table>

[](id:C_audio)
### オーディオのみのトランスコーディングテンプレートの作成

1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. **トランスコーディングテンプレートの作成**をクリックして、トランスコーディングタイプに『**オーディオのみのトランスコーディング**』を選択し、[設定項目](#C_audio_normal)を入力して、**保存**をクリックします。

![](https://qcloudimg.tencent-cloud.cn/raw/6e51f4ba0d495176203d2a65a4a4dc57.png)

<table id="C_audio_normal">
<tr><th width="20%">オーディオのみのトランスコーディングの基本設定項目</th><th>必須入力かどうか</th><th>説明</th>
</tr><tr>
<td>トランスコーディングタイプ</td>
<td>はい</td>
<td>選択可能なトランスコーディングタイプとして、標準トランスコーディング、高速高画質トランスコーディング、<strong>オーディオのみのトランスコーディング</strong>があります。</td>
</tr>
<tr>
<td>テンプレート名</td>
<td>はい</td>
<td>ライブブロードキャストトランスコーディングテンプレート名は、アルファベット、アルファベットと数字の組み合わせのみをサポートし、数字のみの場合はサポートしません。入力できる文字数は1～10文字です。</td>
</tr>
<tr>
<td>テンプレートの説明</td>
<td>いいえ</td>
<td>ライブブロードキャストトランスコーディングテンプレートの概要説明では、中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみサポートします。</td>
</tr>
<tr>
<td>オーディオビットレート</td>
<td>はい</td>
<td><b>元のオーディオビットレート</b>を保持と<b>オーディオビットレートの設定</b>が選択可能です。オーディオビットレート設定の取得値範囲：101kbps - 500kbps。</td>
</tr>
</tr><tr><td>DRM暗号化</td><td>いいえ</td><td>この機能を有効にするには、DRM管理に移動してDRMキーを設定してください。HLS再生プロトコルの下で、Widevine、Fairplay、およびNormalAESのDRRM暗号化をサポートします。Fairplayは、プレーヤー側でAppleによって申請された証明書をアップロードする必要があります。</td>
</tbody></table>

[](id:related)
## ドメイン名の関連付け
1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. 以下の方法でドメイン名を関連付けるウィンドウに入ります。
  - **ドメイン名の直接的関連付け：**左上にある**ドメイン名の関連付け**をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/6e7b5d21d7211b08993ccd648c08ea39.png)
  - **新規トランスコーディングテンプレート作成完了後のドメイン名の関連付け**：[トランスコーディングテンプレートの作成](#create)の完了後、プロンプトボックスの中の**ドメイン名の関連付けに進む**をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/e46853c98ef7a78b4758b5d516d2db22.png)
3. ドメイン名関連付けのウィンドウの中で、関連付けたい**トランスコーディングテンプレート**および**再生ドメイン名**を選択し、**OK**をクリックすれば関連付けが完了します。
![](https://qcloudimg.tencent-cloud.cn/raw/19098af218a1e131310677e3fa4b6cd7.png)
>? **追加**をクリックして現在のテンプレートに複数の再生ドメイン名を関連付ける機能をサポートしています。

[](id:untie)
## 関連付け解除
1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. ドメイン名を関連付けたトランスコーディングテンプレートを選択し、**関連付け解除**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/06d982f8c5ce34375945196485dfee59.png)
3. 現在関連付けられているドメイン名の関連付けを解除するかどうかを確認して、**OK**をクリックすれば関連付けが解除されます。
![](https://qcloudimg.tencent-cloud.cn/raw/fcb7537e8ab238617920fd54347da6da.png)

[](id:modify)
## テンプレートの修正
1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. 作成済みのトランスコーディングテンプレートを選択し、右側の**編集**をクリックすれば、テンプレートの情報を変更できます。
3. **保存**をクリックすれば完了です。

![](https://qcloudimg.tencent-cloud.cn/raw/995e1529ba890505c2db7ecc0788fac4.png)

[](id:delect)
## テンプレートの削除
>!  テンプレートがすでに関連付けられている場合は、先に[関連付け解除](#untie)を行ってから、削除操作を行うことができます。 

1. CSSコンソールにログインし、**機能設定** > [**ライブブロードキャストトランスコーディング**](https://console.cloud.tencent.com/live/config/transcode)と進みます。
2. 再生ドメイン名を関連付けていないトランスコーディングテンプレートを選択して、**削除**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/201fbd96756e417eb01bc4c4162c3a3e.png)
3. 現在のトランスコーディングテンプレートを削除するかどうかを確認し、**OK**をクリックすれば削除が完了します。
![](https://qcloudimg.tencent-cloud.cn/raw/e9062327d9cae6164254af7454c878de.png)


## 関連する操作
ドメイン次元によるトランスコーディングテンプレートの**関連付け**と**関連付け解除**についての具体的な操作および関連説明は、[トランスコーディング設定](https://intl.cloud.tencent.com/document/product/267/31062)をご参照ください。
