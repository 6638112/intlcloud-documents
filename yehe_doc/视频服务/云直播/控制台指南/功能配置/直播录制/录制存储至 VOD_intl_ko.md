CSS는 다운로드 및 미리보기를 위해 라이브 스트림 녹화 및 VOD에 녹화 파일 저장을 지원합니다. 이 문서는 녹화 템플릿을 생성, 바인딩, 바인딩 해제, 수정 및 삭제하는 방법을 설명합니다.
녹화 템플릿을 생성하는 방법으로는 다음 두 가지 방식이 있습니다.

- CSS 콘솔을 통한 녹화 템플릿 생성에 대한 자세한 방법은 [녹화 템플릿 생성](#C_record)을 참고하십시오.
- API를 통한 녹화 템플릿 생성에 대한 자세한 방법 및 사례는 [CreateLiveRecordTemplate](https://intl.cloud.tencent.com/document/product/267/30845)을 참고하십시오.

## 참고 사항

- 녹화 파일은 기본적으로 [VOD](https://console.cloud.tencent.com/vod/overview) 콘솔에 저장됩니다. 먼저 VOD를 활성화하십시오. 자세한 내용은 [VOD 시작하기](https://intl.cloud.tencent.com/document/product/266/8757)를 참고하십시오.
- 녹화 기능을 활성화한 후 VOD 서비스가 정상 상태인지 확인하십시오. 연체된 결제로 인해 활성화되지 않거나 정지된 경우 라이브 녹화가 실패합니다. 녹화 파일이 생성되지 않습니다. 요금도 발생하지 않습니다.
- 방송 중 녹화 종료 후 대략 5분이 지나면 해당 녹화 파일을 획득할 수 있습니다. 예를 들어, 12:00에 라이브 방송 녹화를 시작하고 12:30에 녹화를 종료했다면, 12:35 경에 12:00 - 12:30에 해당하는 영상 클립을 획득할 수 있습니다.
- FLV, .MP4 및 HLS 형식만 지원하므로 H.264 비디오 코덱과 AAC 오디오 코덱만 사용할 수 있습니다.
- 녹화 템플릿 생성 완료 후 푸시 도메인과 연결할 수 있으며, 관련 문서는 [녹화 설정](https://intl.cloud.tencent.com/document/product/267/34224)을 참고하십시오. 연결 완료 후 약 5 - 10분 뒤에 적용됩니다.
- 생성된 녹화 파일의 이름 규칙은 [RecordParam-VodFileName](https://intl.cloud.tencent.com/document/product/267/30767)을 참고하십시오.
- 템플릿 바인딩 및 수정, 바인딩 해제는 진행 중인 라이브 스트림이 아닌 새로운 라이브 스트림에만 영향을 미칩니다. 진행 중인 라이브 스트림에 변경 사항을 적용하려면 스트림을 중지하고 다시 푸시해야 합니다.
- 혼합 스트림 녹화는 중국대륙(중국 내)의 스트림과 글로벌/중국홍콩/중국마카오/중국대만 스트림의 혼합을 지원하지 않습니다. 녹화 파일에 오류가 발생하거나 정상적인 시청 및 리플레이에 영향을 줄 수 있습니다.

## 전제 조건

-  CSS를 활성화하고 [푸시 도메인](https://intl.cloud.tencent.com/document/product/267/35970)을 추가했습니다.
- [VOD 서비스](https://intl.cloud.tencent.com/document/product/266/8757#.E6.AD.A5.E9.AA.A41.EF.BC.9A.E5.BC.80.E9.80.9A.E4.BA.91.E7.82.B9.E6.92.AD)를 활성화한 상태여야 합니다.

[](id:C_record)

## 녹화 템플릿 생성

1. CSS 콘솔에 로그인하여 **기능 설정** > [**라이브 방송 녹화**](https://console.cloud.tencent.com/live/config/record) 페이지로 이동합니다.
2. **녹화 템플릿 생성**을 클릭하여 다음과 같이 템플릿 정보를 설정합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/ca30bd94a2f81ecead5c1684b8007744.png)
<table>
   <thead><tr><th width="20%" colspan=2>구성 항목</th><th>설명</th></tr></thead>
   <tbody><tr>
   <tr>
   <td colspan=2>템플릿 이름</td>
   <td>라이브 방송 녹화 템플릿 이름을 자체 정의할 수 있습니다(중국어, 영어, 숫자, _, -만 지원).</td>
   </tr><tr>
   <td colspan=2>템플릿 설명</td>
   <td>라이브 방송 녹화 템플릿 소개 설명을 자체 정의할 수 있습니다(중국어, 영어, 숫자, _, -만 지원).</td>
   </tr><tr>   
   <td rowspan=3 width="10%">콘텐츠 녹화</td>
   <td width="30%">원본 스트림 녹화</td> 
   <td>녹화된 영상은 라이브 방송의 원본 비트 레이트로 녹화되며, 기본적으로 원본 스트림이 녹화됩니다. 녹화된 영상에는 트랜스 코딩, 워터마크, 혼합 스트림 효과가 없습니다.</ul></td>
   </tr><tr>
   <td>워터마크를 포함한 녹화</td>
   <td>이 설정을 선택하면 워터마크 템플릿에 구성된 워터마크가 추가된 후 라이브 스트림이 녹화됩니다.</td>
   </tr><tr>
   <td>지정 트랜스코딩 스트림 녹화</td>
   <td>지정된 트랜스 코딩 스트림 녹화를 클릭하여 구성된 트랜스코딩 템플릿을 선택하거나 템플릿 이름을 클릭하여 트랜스 코딩 템플릿 설정을 수정합니다. 이 설정을 선택하면 스트리밍 후 녹화할 트랜스 코딩 템플릿의 id를 기반으로 트랜스 코딩이 자동으로 시작되고 녹화된 비디오에는 워터마크 템플릿에 의해 구성된 워터마크 효과가 포함됩니다. 트랜스코딩 템플릿이 실수로 삭제되면 워터마크와 함께 기록됩니다.</td>
   </tr><tr>
   <td colspan=2>녹화 형식</td>
   <td>녹화된 비디오 출력 형식은 HLS, MP4, FLV 및 AAC이며, 그 중 AAC는 퓨어 오디오 녹화입니다.</td>
   </tr>
   </tbody></table>

>! 
>- WebRTC 푸시 스트림 녹화 원본 스트림은 오디오가 손실되므로 다른 녹화 콘텐츠를 선택하는 것이 좋습니다.
>- 녹화 및 트랜스 코딩 스트림 기능은 현재 타임 시프트 시나리오의 사용을 지원하지 않습니다. 녹화 템플릿이 타임 시프트 설정과 연결된 경우 원래 스트림에 따라 녹화가 수행됩니다.
>- 지정된 트랜스 코딩 스트림 녹화에서 오디오 전용 트랜스코딩 템플릿을 선택하면 녹화 형식에서 오디오 형식만 선택할 수 있습니다.
>- 트랜스코딩 스트림을 녹화하려면 먼저 트랜스코딩 작업을 시작해야 하며, 별도의 트랜스코딩 비용이 발생합니다. 동일한 트랜스코딩 템플릿으로 재생하는 경우, 중복 과금되지 않습니다.

3. 녹화 내용을 선택하고 원하는 녹화 형식을 확인하면 관련 형식 설정 인터페이스가 나타납니다. 하나 이상의 녹화 형식을 선택하고 동시에 설정할 수 있습니다. 다음 설정을 수행하십시오.
![](https://qcloudimg.tencent-cloud.cn/raw/0a835b00a6864bc29411da9d8088a626.png)
<table>
   <thead><tr><th width="27%" colspan=2>구성 항목</th><th>설명</th></tr></thead>
   <tbody><tr>
      <tr>
      <td colspan=2>파일당 최대 녹화 시간(분)</td>
      <td><ul style="margin-bottom:0px">
						<li>HLS 형식의 녹화 파일 길이에는 제한이 없습니다. 라이브 스트림이 중단되고 재개 제한 시간이 경과하면 녹화를 계속할 수 있도록 새로운 녹화 파일이 생성됩니다.</li>
						<li>FLV 형식의 녹화 파일 최대 길이 값 범위는 1 - 720분입니다.</li>
						<li>MP4 또는 AAC 형식의 최대 녹화 파일 길이 값 범위는 1 - 120분입니다.</li>
          </ul></td>
      </tr><tr>
      <td colspan=2>녹화 재개 시간 초과(초)</td>
      <td>HLS 형식만 푸시 중단 후 녹화 재개를 지원하며 재개를 위한 제한 시간 값 범위는 1s - 1800s입니다.</td>
      </tr><tr>
      <td colspan=2>저장 기간(일)</td>
      <td>단일 녹화 파일의 최대 저장 기간은 1,500일이며, 0은 영구 저장입니다. <b>영구 저장</b> 또는 <b>시간 지정</b>을 선택할 수 있습니다.</td>
      </tr><tr>
      <td colspan=2>VOD 애플리케이션/카테고리 지정</td>
      <td>VOD의 지정 <a href="https://console.cloud.tencent.com/vod/app-manage">서브 애플리케이션</a>의 VOD 카테고리에 대한 녹화가 지원되며, 기본적으로는 계정의 메인 애플리케이션에 녹화됩니다. 쓰기 상태가 활성화된 서브 애플리케이션에만 녹화할 수 있습니다.</td>
      </tr><tr>
      <td rowspan=2 width="12%">고급 설정</td>
      <td>VOD 태스크 플로우 처리</td>
      <td><b>바인딩할 태스크 플로우 선택</b>을 클릭하여 VOD 서브 애플리케이션에서 설정된 태스크 플로우를 바인딩하도록 선택하거나 현재 VOD 태스크 플로우 선택 인터페이스에서 태스크 플로우 이름을 클릭하여 VOD 콘솔로 이동하여 태스크 플로우 구성을 추가/수정합니다. 바인딩이 성공하면 녹화 파일이 생성된 후 VOD 태스크 플로우 템플릿이 실행되고 해당 <a href="https://intl.cloud.tencent.com/document/product/266/2838">VOD 요금</a>이 생성됩니다.</td>
       </tr><tr>
       <td>실시간 업로드</td> 
      <td>현재 FLV 형식만 지원하며 실시간 업로드를 활성화하면 녹화 종료 즉시 파일이 업로드 됩니다. 단일 녹화 파일은 최대 12시간까지 지원되며, FLV 녹화 재해 복구 기능이 향상됩니다. 파일 온라인 드래그 재생 시 랙이 발생할 수 있지만 로컬 재생에는 영향을 미치지 않습니다.</td>
      </tr>
      </tbody></table>

4. **저장**을 클릭합니다.

[](id:conect)

## 도메인 이름 바인딩

1. CSS 콘솔에 로그인하여 **기능 설정** > [**라이브 방송 녹화**](https://console.cloud.tencent.com/live/config/record) 페이지로 이동합니다.
   - **기존 템플릿에 도메인 바인딩:** 왼쪽 상단에서 **도메인 이름 바인딩**을 클릭합니다.
    ![](https://main.qcloudimg.com/raw/bcb6c5da46a3455f94d441134e49825a.png)
   - **신규 녹화 템플릿 생성 완료 후 도메인 연결:** [녹화 템플릿 생성](#C_record) 완료 후 안내 창의 **도메인 바인딩**을 클릭합니다.
    ![](https://qcloudimg.tencent-cloud.cn/raw/b45ec9863fe4c6f16fe5551605ce46d9.png)
2. 도메인 바인딩 창에서 바인딩할 **녹화 템플릿**과 **푸시 도메인**을 선택하고 **확인**을 클릭하면 바인딩이 완료됩니다.
![](https://qcloudimg.tencent-cloud.cn/raw/9abc1af79841e877d4e194d0d5741efc.png)

>? **추가**를 클릭하여 여러 푸시 도메인을 템플릿에 바인딩할 수 있습니다.

[](id:unite)

## 도메인 이름 바인딩 해제

1. CSS 콘솔에 로그인하여 **기능 설정** > [**라이브 방송 녹화**](https://console.cloud.tencent.com/live/config/record) 페이지로 이동합니다.
2. 도메인 이름으로 바인딩된 녹화 템플릿을 선택하고 대상 도메인 이름을 찾은 다음 **바인딩 해제**를 클릭합니다.
   ![](https://main.qcloudimg.com/raw/f7071a4b4f9297124b460ffebcba64d3.png)
3. 팝업 창에서 **확인**을 클릭합니다.
    ![](https://main.qcloudimg.com/raw/a666387f882584860eaf2c229c2b4769.png)

>? 
>- 녹화 템플릿 바인딩을 해제해도 현재 라이브 방송 중인 스트리밍에는 영향을 주지 않습니다.
>- 바인딩 해제 적용이 필요한 경우, 해제 후 스트리밍을 중단하고 다시 푸시 스트리밍 라이브 방송을 시작하면 새로운 라이브 방송부터는 녹화 파일이 생성되지 않습니다.

[](id:change)

## 템플릿 수정

1. **기능 설정** > [**라이브 방송 녹화**](https://console.cloud.tencent.com/live/config/record) 페이지로 이동합니다.
2. 성공적으로 생성된 녹화 템플릿을 선택하고 오른쪽 **편집**을 클릭하여 수정 템플릿 정보를 입력한 후 **저장**을 클릭합니다.
![](![img](https://main.qcloudimg.com/raw/68f4dd1a6452a3e97e7ff4dea6493d7b.png)

[](id:delete)
## 템플릿 삭제

1. CSS 콘솔에 로그인하여 **기능 설정** > [**라이브 방송 녹화**](https://console.cloud.tencent.com/live/config/record) 페이지로 이동합니다.
2. 생성된 녹화 템플릿을 선택하고 오른쪽 상단의 **삭제** 버튼을 클릭합니다.
3. 현재 녹화 템플릿의 삭제 여부를 확인하고 **확인**을 클릭하면 삭제가 완료됩니다.
![](https://main.qcloudimg.com/raw/c7c3e300488ba332b84bfd61da0fb999.png)

>! 
>- 도메인 이름이 템플릿에 바인딩되어 있는 경우 [바인딩 해제](#unite)해야 템플릿을 삭제할 수 있습니다.
>- 콘솔의 템플릿 관리에서는 현재 도메인 차원에서 연결 인터페이스 생성 규칙을 취소할 수 없습니다. 녹화 관리 인터페이스를 통해 지정한 스트림과 연결하고 있는 경우, [DeleteLiveRecordRule](https://intl.cloud.tencent.com/document/product/267/30843)을 참고하여 연결을 해제해야 합니다. 

## 관련 작업

녹화 템플릿에 대한 **도메인 차원의 바인딩** 및 **바인딩 해제**의 자세한 작업 방법 및 관련 설명은 [녹화 설정](https://intl.cloud.tencent.com/document/product/267/34224)을 참고하십시오.

## FAQ

[](id:que1)

#### 라이브 방송 녹화 후 생성되는 비디오 이름은 어떤 규칙으로 생성되나요?

콘솔에서 생성한 녹화 템플릿의 콜백 후 생성되는 녹화 파일은 기본 조합 방식으로 이름이 생성되며 형식은 다음과 같습니다.
`{StreamID}*{StartYear}-{StartMonth}-{StartDay}-{StartHour}-{StartMinute}-{StartSecond}*{EndYear}-{EndMonth}-{EndDay}-{EndHour}-{EndMinute}-{EndSecond} `

**다음을 참고하십시오.**

| 플레이스 홀더        | 설명          |
| ------------- | ------------- |
| {StreamID}    | 스트림 ID         |
| {StartYear}   | 시작 시간-년   |
| {StartMonth}  | 시작 시간-월   |
| {StartDay}    | 시작 시간-일   |
| {StartHour}   | 시작 시간-시 |
| {StartMinute} | 시작 시간-분 |
| {StartSecond} | 시작 시간-초   |
| {EndYear}     | 종료 시간-년   |
| {EndMonth}    | 종료 시간-월   |
| {EndDay}      |  종료 시간-일   |
| {EndHour}     | 종료 시간-시 |
| {EndMinute}   | 종료 시간-분 |
| {EndSecond}   | 종료 시간-초   |