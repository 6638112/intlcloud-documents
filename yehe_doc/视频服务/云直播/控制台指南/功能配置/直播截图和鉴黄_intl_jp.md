CSSはスクリーンキャプチャ・ポルノ検出機能を提供します。コンソールで設定したスクリーンキャプチャ・ポルノ検出テンプレートによって、プッシュドメイン名をテンプレートに関連付けてからプッシュ中にCSS画面をスクリーンキャプチャし、CSSスクリーンキャプチャまたはポルノ検出データをTencent CloudのCloud Object Storageに保存することをサポートします。このプッシュドメイン名がコールバック設定に関連付けられている場合は、ライブストリーミング中にコールバックイベントをトリガーしてから、Tencent Cloudはクライアントサーバーに自動でリクエストを発出します。クライアントサーバーはリクエストへのリプライを担当します。チェックが終わると、ポルノ検出コールバックメッセージを含んだJSONデータパックを取得できます。
ここでは、コンソールによってスクリーンキャプチャ・ポルノ検出テンプレートを作成、バインド、バインド解除、変更、削除する方法をご紹介します。

このうち、スクリーンキャプチャ・ポルノ検出テンプレートの作成には以下の2種類の方式があります：

- CSSコンソールによりテンプレートを作成します。操作手順の詳細は[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)をご参照ください。
- APIによるテンプレート作成。具体的なパラメータおよびサンプルの説明は、[スクリーンキャプチャテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/30834)をご参照ください。


## 注意事項

- スクリーンキャプチャ機能は単独で有効にして使用できますが、ポルノ検出機能はスクリーンキャプチャを有効にすることで起動でき、単独では使用できません。
- スクリーンキャプチャとポルノ検出は課金対象機能です。有効化した後、スクリーンキャプチャ機能は1000枚ごとに0.0176米ドルが課金され、ポルノ検出機能は1000枚ごとに0.2294米ドルが課金されます。詳細は[ポルノ検出](https://intl.cloud.tencent.com/document/product/267/39607)をご参照ください。  
- スクリーンキャプチとポルノ検出の画像はお客様のCloud Object Storage (COS)の中に保存され、COS保存料金が発生します。詳細については、[COS製品の料金設定](https://intl.cloud.tencent.com/pricing/cos)をご参照ください。
- スクリーンキャプチャ機能を**他のアカウント**のCOS bucketに保存する場合は、最初にCOS bucketでCSSサービスにデータの書き込み権限を付与する必要があります。詳細については、[スクリーンキャプチャを保存するためにCSSへのCOS Bucket承認](https://intl.cloud.tencent.com/document/product/267/33384)をご参照ください。
- テンプレートの作成完了後、プッシュドメイン名と関連付けを行います。関連ドキュメントについては、 [スクリーンキャプチャ・ポルノ検出テンプレート設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。テンプレート関連付け完了の約5分～10分後に有効となります。 
- コンソールのスクリーンキャプチャ・ポルノ検出テンプレートはドメイン次元となっており、現在はインターフェース関連付けの作成ルールを取り消すことができません。スクリーンキャプチャ・ポルノ検出関連インターフェースの関連付けによってストリームを指定している場合は、 [スクリーンキャプチャルールの削除](https://intl.cloud.tencent.com/document/product/267/30833)を呼び出して、関連付けを解除する必要があります。
- テンプレートのバインド、変更、バインド解除はいずれも更新後のライブストリーミングにのみ影響し、すでにライブストリーミング中にあるストリームは影響を受けません。ライブストリーミング中のストリームが新しいルールを使用するには、一度切断して再度プッシュする必要があります。

## 使用前提
- Tencent CSSサービスを有効にし、[プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)を追加済みであること。
- COS Bucketを作成済みであること。詳細については、[バケットの作成](https://intl.cloud.tencent.com/document/product/436/13309)をご参照ください。

[](id:Screenshot)
## スクリーンキャプチャ・ポルノ検出テンプレートの作成
1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. **スクリーンキャプチャ・ポルノ検出テンプレートの作成**クリックしてください。CSSスクリーンキャプチャ・ポルノ検出サービスでは、スクリーンショットをCOSのバケットに保存する必要があるため、**初めて**スクリーンショット・ポルノ検出テンプレートを作成するには、サービスのロールを作成し、CSSにCOSの読み取り/書き込み権限を付与する必要があります。クリックして権限付与に進み、ACUMで権限を付与します。
![](https://qcloudimg.tencent-cloud.cn/raw/f27be286a9f3c68d96a55544a6c25b57.png)
3. 権限付与が完了したら、設定項目を入力し、**保存**をクリックすれば完了です。
    <img src="https://main.qcloudimg.com/raw/544c2127f7870add334eaf760f1da089.png" style="zoom:67%;" />
<table>
<thead><tr><th width="15%">設定項目</th><th>説明</th></tr></thead>
<tbody><tr>
<td>テンプレート名</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレート名。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。30文字を超えないこと。</td>
</tr><tr>
<td>テンプレートの説明</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレートの説明。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。100文字を超えないこと。</td>
</tr><tr>
<td>スクリーンキャプチャ間隔</td>
<td>プッシュ中の自動スクリーンキャプチャの時間間隔は、デフォルトでは2秒です。値の範囲は2秒～300秒です。</td>
</tr><tr>
<td>ポルノ検出の有効化</td>
<td>ポルノ検出機能を有効にするか選択できます。ポルノ検出を有効にした後は、コールバックを設定するとポルノ検出結果が得られます。</td>
</tr><tr>
<td>アカウントの保存</td>
<td><b>現在のアカウント</b>または<b>他のアカウント</b>を選択できます。</td>
</tr><tr>
<td>AppId</td>
<td>保存するアカウントタイプを<b>他のアカウント</b>に選択した場合のみ入力します。APPID情報は他のアカウントの<a href="https://console.cloud.tencent.com/developer">アカウント情報</a>から取得します。他のアカウントのCOS bucketに保存する場合は、最初にCOS bucketでCSSサービスにデータの書き込み権限を付与する必要があります。詳細については、<a href=" https://intl.cloud.tencent.com/document/product/267/33384">スクリーンキャプチャを保存するためにCSSへのCOS Bucket承認</a>をご参照ください。
    </td>
</tr><tr>
<td>Bucket</td>
    <td><b>COS</b>で作成して権限承認を終えたCOS bucketを選択します。</td>
</tr><tr>
<td>Region</td>
<td>前述のBucketが所在するリージョン情報は変更できません。</td>
</tr><tr>
<td>フォルダ</td>
<td>選択ボックスをクリックして、COSフォルダに進んで選択します。デフォルト：<code>{Year}-{Month}-{Day}/</code>。<br>説明：COSフォルダ名には[a-z、A-Z、0-9]および記号<code>-，!，_，.，*</code>およびプレースホルダーのみ使用できます。</td>
</tr><tr>
<td>ファイル名</td>
<td><ul style="margin:0"><li>スクリーンショットファイル名の形式はパラメータをカスタマイズし、組み合わせて作成します。デフォルトは<code>{StreamID}-screenshot-{Hour}-{Minute}-{Second}-{Width}x{Height}{Ext}</code>であり、このうち：
			<ul style="margin:0">
					<li>{AppName｝：プッシュストリームAppName</li>
					<li>{PushDomain｝：プッシュドメイン名</li>
					<li>{StreamID} ：ストリームID</li>
					<li>{Year}：スクリーンキャプチャ時間（年）</li>
					<li>{Month}：スクリーンキャプチャ時間（月）</li>
					<li>{Day}：スクリーンキャプチャ時間（日）</li>
					<li>{Hour}：スクリーンキャプチャ時間（時）</li>
					<li>{Minute}：スクリーンキャプチャ時間（分）</li>
					<li>{Second}：スクリーンキャプチャ時間（秒）</li>
					<li>{Width}：画像幅</li>
					<li>{Height}：画像高さ</li><li>{Ext}：拡張名（.jpg）</li>
			</ul>
		<li><b>説明：</b>[a-z、A-Z、0-9]および記号(-、!、_、.、*)およびプレースホルダーのみが使用できます。</li>
    <li><b>例：</b>ファイル名の形式は<code>{Year}-{Month}-{Day}- {Hour}-{Ext}</code>である場合、2020年01月01日14:00:00にCSS画面を自動的にスクリーンキャプチャして、COSに保存した時のファイル名は<code>2020010114.jpg</code>となります。</li></ul></td>
</tr>
</tbody></table>

[](id:conect)
## ドメイン名のバインド

1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 以下の方法でドメイン名をバインドするウィンドウに入ります。
    - **ドメイン名の直接的関連付け：**左上にある**ドメイン名のバインド**をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/92b7542783d6d5ac59ef5faedbf53746.png)
    - **新規スクリーンキャプチャ・ポルノ検出テンプレート作成完了後のドメイン名関連付け：**[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)の完了後、プロンプトボックスの中の**ドメイン名のバインドに進む】をクリックします。
    ![](https://qcloudimg.tencent-cloud.cn/raw/61c40816a357ce0f79677e238a1a31ba.png)
1. ドメイン名バインドのウィンドウの中で、バインドしたい**スクリーンキャプチャ・ポルノ検出テンプレート**および**プッシュドメイン名**を選択し、**OK**をクリックすればバインドが完了します。
![](https://qcloudimg.tencent-cloud.cn/raw/5e632f4a7712256fdd3f3a282e09a9c7.png)
> ? **追加**をクリックして現在のテンプレートに複数のプッシュドメイン名をバインドする機能をサポートしています。

[](id:unite)
## バインドの解除

1. CSSコンソールにログインして、**機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. ドメイン名をすでに関連付けているCSSスクリーンキャプチャ・ポルノ検出テンプレートを選択し、**バインド解除**をクリックします。
   ![](https://qcloudimg.tencent-cloud.cn/raw/e8a52af13916db8d50bc4395cfc5cc8d.png)
3. 現在関連付けられているドメイン名のバインドを解除するかどうかを確認して、**OK**をクリックすればバインドが解除されます。
   ![](https://main.qcloudimg.com/raw/9182f6589885ecba5fafcea075c9184e.png)

[](id:change)
## テンプレートの修正

1. **機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択し、右側の**編集**をクリックすれば、テンプレートの情報を変更できます。
3. **保存**をクリックすれば完了です。

![](https://qcloudimg.tencent-cloud.cn/raw/786b4fd9630a178a0aebb65cda16a49c.png)

[](id:delete)
## テンプレートの削除
>! テンプレートがすでにバインドされている場合は、先に[バインドの解除](#unite)を行ってから、削除操作を行うことができます。

1. **機能設定**>[**CSSスクリーンキャプチャ・ポルノ検出**](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択して、上にある削除ボタンをクリックします。
3. 現在のスクリーンキャプチャ・ポルノ検出設定テンプレートの削除の是非を確認し、**OK**をクリックすれば削除できます。

![](https://main.qcloudimg.com/raw/6ae7a299517803a92776d8077ccda1d3.png)

## 関連する操作
**ドメイン次元によるスクリーンキャプチャ・ポルノ検出テンプレートのバインド**と**バインドの解除**についての具体的な操作および関連説明は、[スクリーンキャプチャ・ポルノ検出テンプレート設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。