CSSはスクリーンキャプチャ・ポルノ検出機能を提供します。コンソールで設定したスクリーンキャプチャ・ポルノ検出テンプレートによって、プッシュドメイン名をテンプレートに関連付けてからプッシュ中にCSS画面をスクリーンキャプチャし、CSSスクリーンキャプチャまたはポルノ検出データをTencent CloudのCloud Object Storageに保存することをサポートします。このプッシュドメイン名がコールバック設定に関連付けられている場合は、ライブストリーミング中にコールバックイベントをトリガーしてから、Tencent Cloudはクライアントサーバーに自動でリクエストを発出します。クライアントサーバーはリクエストへのリプライを担当します。チェックが終わると、ポルノ検出コールバックメッセージを含んだJSONデータパックを取得できます。
ここでは、コンソールによってスクリーンキャプチャ・ポルノ検出テンプレートを作成、バインド、バインド解除、変更、削除する方法をご紹介します。

このうち、スクリーンキャプチャ・ポルノ検出テンプレートの作成には以下の2種類の方式があります。

- CSSコンソールによりテンプレートを作成します。操作手順の詳細は[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)をご参照ください。
- APIによりテンプレートを作成します。パラメータおよびサンプルの詳細は[スクリーンキャプチャテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/30834)をご参照ください。



## 注意事項

- スクリーンキャプチャ機能は単独で有効にして使用できますが、ポルノ検出機能はスクリーンキャプチャを有効にすることで起動でき、単独では使用できません。
- スクリーンキャプチャとポルノ検出は課金対象機能です。有効にした後、スクリーンキャプチャ機能は1000枚ごとに0.0176USD徴収され、ポルノ検出機能は1000枚ごとに0.2294USD徴収されます。詳細は[ポルノ検出](https://intl.cloud.tencent.com/document/product/267/39607)をご参照ください。  
- スクリーンキャプチャとポルノ検出を COSに保存すると、COSストレージ費用が発生します。詳細は[COS製品の料金設定](https://intl.cloud.tencent.com/pricing/cos)をご参照ください。
- スクリーンキャプチャを有効にするには、まずCOS bucketでCSSサービスのデータ書き込み権限を付与する必要があります。詳細は[COS Bucketにスクリーンキャプチャ保存するためのCSS承認](https://intl.cloud.tencent.com/document/product/267/33384)をご参照ください。
- テンプレートの作成が終わると、プッシュドメイン名と関連付けることができます。関連ドキュメントは[スクリーンキャプチャ・ポルノ検出テンプレート設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。テンプレートの関連付けができてから約5分～10分後に有効になります。 
- コンソールのスクリーンキャプチャ・ポルノ検出テンプレート管理はドメイン名のディメンションで、関連付けインターフェースが作成したルールの取り消しが一時的にできません。スクリーンキャプチャ・ポルノ検出関連インターフェースで指定したストリームの場合は、[スクリーンキャプチャルールの削除](https://intl.cloud.tencent.com/document/product/267/30833)を呼び出して関連付けを解除する必要があります。
- テンプレートのバインド、修正、バインド解除はいずれも更新後のライブストリーミングにのみ影響し、すでにライブストリーミング中にあるストリームは影響を受けません。ライブストリーミング中のストリームが新しいルールを使用するには、切断して再度プッシュする必要があります。



## 使用前提

- Tencent Cloud CSSサービスがすでにアクティブになっていて、[プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)を追加していること。
- COS Bucketを作成済みで、COS BucketによってCSSに権限を付与していること。関連ドキュメントについては[COS Bucketにスクリーンキャプチャ保存するためのCSS承認](https://intl.cloud.tencent.com/document/product/267/33384)をご参照ください。



<span id="Screenshot)"></span>
## スクリーンキャプチャ・ポルノ検出テンプレートの作成

1. CSSコンソールにログインして、【機能設定】>[【CSSスクリーンキャプチャ・ポルノ検出】](https://console.cloud.tencent.com/live/config/jtjh)と進みます。
2. 【+】をクリックして設定項目を入力し、【保存】をクリックすればOKです。
![](https://main.qcloudimg.com/raw/e17b92da94af4b583dab0273adb89447.jpg)
<table>
<thead><tr><th width="15%">設定項目</th><th>説明</th></tr></thead>
<tbody><tr>
<td>テンプレート名</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレート名に使用できるのは、中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。30文字を超えないこと。</td>
</tr><tr>
<td>テンプレート説明</td>
<td>スクリーンキャプチャ・ポルノ検出テンプレートの説明に使用できるのは、中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。100文字を超えないこと。</td>
</tr><tr>
<td>スクリーンキャプチャ間隔</td>
<td>プッシュストリーム中の自動スクリーンキャプチャ間隔時間はデフォルトでは10秒で、値の範囲は5秒～300秒です。<br>説明：5の倍数であること</li></td>
</tr><tr>
<td>インテリジェントなポルノ検出の使用</td>
<td>ポルノ検出機能を有効にするか選択できます。インテリジェントなポルノ検出を有効にした後は、コールバックを設定するとポルノ検出結果が得られます。</td>
</tr><tr>
<td>ストレージアカウント</td>
<td>『現在のアカウント』または『その他のアカウント』を選択できます。</td>
</tr><tr>
<td>AppId</td>
<td>ストレージアカウントのタイプを『その他のアカウント』と選択した場合にのみ入力する必要があります。APPIDの情報はその他のアカウントの<a href="https://console.cloud.tencent.com/developer">【アカウント情報】</a>で取得できます。</td>
</tr><tr>
<td>Bucket</td>
<td>【オブジェクトストレージ】で作成して権限承認を終えたCOS bucketを選択します。</td>
</tr><tr>
<td>Region</td>
<td>前述のBucketが所在するリージョン情報は変更できません。</td>
</tr><tr>
<td>フォルダ</td>
<td>選択ボックスをクリックして、COSフォルダに進んで選択します。デフォルト：<code>{Year}-{Month}-{Day}/</code>。<br>説明：COSフォルダ名には[a-z、A-Z、0-9]および記号<code>-、!、_、.、*</code>およびプレースホルダーのみ使用できます。</td>
</tr><tr>
<td>ファイル名</td>
<td>スクリーンキャプチャファイル名の形式はパラメータをカスタマイズし、組み合わせて作成します。デフォルトは次のとおりです：<code>{StreamID}-screenshot-{Hour}-{Minute}-{Second}-{Width}x{Height}{Ext}</code>、このうち：
    <ul style="margin:0">
        <li>{AppName｝：プッシュストリームAppName</li>
        <li>{PushDomain｝：プッシュドメイン名</li>
        <li>{StreamID}：ストリームID</li>
        <li>{Year}：スクリーンキャプチャ時間（年）</li>
        <li>{Month}：スクリーンキャプチャ時間（月）</li>
        <li>{Day}：スクリーンキャプチャ時間（日）</li>
        <li>{Hour}：スクリーンキャプチャ時間（時）</li>
        <li>{Minute}：スクリーンキャプチャ時間（分）</li>
        <li>{Second}：スクリーンキャプチャ時間（秒）</li>
        <li>{Width}：画像幅</li>
        <li>{Height}：画像高さ</li><li>{Ext}：拡張名（.jpg）</li>
    </ul>説明：[a-z、A-Z、0-9]および記号(-、!、_、.、*)およびプレースホルダーのみ入力できます。
    <br>例：ファイル名の形式は次のとおりです：<code>{Year}-{Month}-{Day}- {Hour}-{Ext}</code>、2020年01月01日14:00:00にCSS画面を自動的にスクリーンキャプチャして、COSに保存した時のファイル名は次のようになります：2020010114.jpg</td>
</tr>
</tbody></table>


[](id:conect)
## ドメイン名の関連付け

1. CSSコンソールにログインして、【機能設定】>[【CSSスクリーンキャプチャ・ポルノ検出】](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 以下の方法でドメイン名のバインディングウィンドウに進みます。
    - **ドメイン名の直接的関連付け：**左上にある【ドメイン名のバインド】をクリックします。
    - **新規スクリーンキャプチャ・ポルノ検出テンプレート作成完了後の関連ドメイン名：**[スクリーンキャプチャ・ポルノ検出テンプレートの作成](#Screenshot)の完了後、プロンプトボックスの中の【ドメイン名のバインドに進む】をクリックします。
3. ドメイン名バインドのウィンドウの中で、バインドしたい**スクリーンキャプチャ・ポルノ検出テンプレート**および**プッシュドメイン名**を選択し、【OK】をクリックすればバインドが完了します。
> ? 【追加】をクリックして現在のテンプレートに複数のプッシュドメイン名をバインドする機能をサポートしています。


[](id:unite)
## バインドの解除

1. CSSコンソールにログインして、【機能設定】>[【CSSスクリーンキャプチャ・ポルノ検出】](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. ドメイン名をすでに関連付けているCSSスクリーンキャプチャ・ポルノ検出テンプレートを選択し、【バインド解除】をクリックします。
3. 現在関連付けているドメイン名のバインド解除が行われるかを確認して、【OK】をクリックすればバインドが解除されます。


[](id:change)
## テンプレートの修正

1. 【機能設定】>[【CSSスクリーンキャプチャ・ポルノ検出】](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択し、右側の【編集】をクリックすれば、テンプレート情報の修正に入れます。
3. 【保存】をクリックすれば完了です。

![](https://main.qcloudimg.com/raw/976ee78aedebea43c6b3fe2e4e0ef41c.jpg)


[](id:delete)
## テンプレートの削除

>! テンプレートがすでに関連付けされている場合は、先に[バインドの解除](#バインドの解除)を行ってから、削除操作を行うことができます。

1. 【機能設定】>[【CSSスクリーンキャプチャ・ポルノ検出】](https://console.cloud.tencent.com/live/config/jtjh)に進みます。
2. 作成済みのスクリーンキャプチャ・ポルノ検出テンプレートを選択して、上にある削除ボタンをクリックします。
3. 現在のスクリーンキャプチャ・ポルノ検出設定テンプレートを削除するかどうか確認し、【OK】をクリックすれば削除できます。

![](https://main.qcloudimg.com/raw/d4b62f44f9ecafdee20be7758f2042e1.jpg)



## 関連操作
**ドメイン名のディメンションでのバインド**および**バインド解除**のスクリーンキャプチャ・ポルノ検出テンプレートについて、その操作と関連説明の詳細は、[スクリーンキャプチャ・ポルノ検出テンプレート設定](https://intl.cloud.tencent.com/document/product/267/31063)をご参照ください。
