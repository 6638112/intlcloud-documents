원격 인증을 사용하면 푸시 스트림/재생 링크 도용 방지 요청을 인증한 후, CSS가 API를 호출하여 요청이 합법적인지 확인할 수 있도록 요청을 서버로 보냅니다. 서버가 반환한 결과에 따라 CSS는 액세스 요청 승인 여부를 결정합니다. 자체 인증 서버를 개발해야 하며, 이는 정확한 인증을 보장하고 보안성을 향상시킵니다.

## 워크플로
원격 인증을 사용하는 과정은 다음과 같습니다.
![](https://qcloudimg.tencent-cloud.cn/raw/e0b53fa1bccc5cf193df5312a3b1fa3a.png)

| No. | 설명                                                         |
| ---- | ------------------------------------------------------------ |
| 1    | 단말 사용자는 CSS 서비스에 대한 요청을 시작합니다.                               |
| 2    | CSS 판단 요청에 해당하는 도메인 이름이 원격 인증으로 구성된 경우 원격 인증 구성에 따라 요청을 처리하고 고객의 원격 인증 서버로 포워딩합니다. |
| 3    | 인증 서버가 결과를 반환합니다. HTTP 상태 코드 200은 통과 허가, 403은 차단을 나타냅니다. |
| 4    | CSS는 인증 결과에 따라 사용자의 요청에 계속 응답할지 여부를 결정합니다.           |

## 전제 조건
- CSS 서비스가 활성화되어 있고 [CSS 콘솔](https://console.cloud.tencent.com/live/livestat)에 로그인되어 있어야 합니다.
- [재생 도메인 이름](https://intl.cloud.tencent.com/document/product/267/35970)을 추가했습니다.

## 원격 인증 구성
1. CSS 콘솔에 로그인하여 [도메인 관리](https://console.cloud.tencent.com/live/domainmanage)를 선택하고 원격 인증을 구성할 **재생 도메인**을 클릭하거나 우측의 **관리**를 클릭하여 도메인 관리 페이지로 이동합니다.
2. **액세스 제어** > **원격 인증**에서 원격 인증 설정을 활성화 또는 비활성화할 수 있습니다.
<img src="https://qcloudimg.tencent-cloud.cn/raw/73648ec779caa4cc2be1be8a7c88931b.png" width=800>
3. ![](https://qcloudimg.tencent-cloud.cn/raw/b64d8a4343b3a1e340db3adb9002db60.png) 버튼을 클릭하여 원격 인증 활성화를 선택하고 다음과 같이 구성합니다.<br>
<img src="https://qcloudimg.tencent-cloud.cn/raw/86867489b1dc604cdd7c4bd5bc4ed3e1.png" width=800>
<table>
<thead><tr><th width="20%">설정 항목</th><th>설명</th></tr></thead>
<tbody><tr>
<td>원격 인증 주소</td>
<td>원격 인증 주소는 클라이언트측 원격 인증 서버의 주소로 필수이며 규칙은 <code>http(s)://+도메인 또는 IP+포트+경로</code>입니다.</td>
</tr><tr>
<td>요청 방법</td>
<td>POST는 기본적으로 선택되며 HEAD 또는 GET을 선택할 수 있습니다.</td>
</tr><tr>
<td>URL 인증 매개변수: 매개변수 설정 유지</td>
<td>기본적으로 모든 매개변수 유지가 선택되어 있으며 지정된 매개변수를 유지하고 모든 매개변수를 삭제하도록 선택할 수 있습니다.<ul style="margin:0">
<li>지정 매개변수를 유지하기로 선택한 경우 입력 상자에 유지할 매개변수를 입력해야 합니다. 현재 중국어는 지원되지 않으며, 여러 매개변수는 |로 구분합니다. 예시: <code>value1|value2</code>.</li>
<li>인증 매개변수는 대소문자를 구분하며 key와 KEY는 서로 다른 두 매개변수입니다.</li>
</ul></td>
</tr><tr>
<td>URL 인증 매개변수: 사용자 지정 매개변수 추가</td>
<td>추가를 클릭하여 매개변수를 선택하거나 매개변수를 사용자 지정합니다.(최대 50개의 매개변수 추가 가능)<ul style="margin:0">
<li>선택 매개변수는 host, uri, client_ip, cdn_ip 매개변수 선택을 지원합니다. 각각의 매개변수는 다음과 같습니다: 재생 도메인, 요청 원본 URL, 요청 클라이언트 IP, 요청 CDN 측 IP.</li>
<li>사용자 지정을 선택한 경우 매개변수 및 값 입력 상자는 필수로 입력해야 합니다. 중국어는 현재 지원되지 않으며, URL 인증 매개변수는 대소문자를 구분하고 key와 KEY는 두 개의 다른 매개변수입니다.</li>
</ul></td>
</tr><tr>
<td>요청 헤더 인증 매개변수: 매개변수 설정 유지</td>
<td>기본적으로 모든 매개변수 유지가 선택되어 있으며 지정된 매개변수를 유지하고 모든 매개변수를 삭제하도록 선택할 수 있습니다.<ul style="margin:0">
<li>지정 매개변수를 유지하기로 선택한 경우 입력 상자에 유지할 매개변수를 입력해야 합니다. 현재 중국어는 지원되지 않으며, 여러 매개변수는 |로 구분합니다. 예시: <code>value1|value2</code>.</li>
<li>요청 헤더 매개 변수에서 ‘모든 매개변수 유지’를 선택하면 CDN 노드에서 기본적으로 HOST 헤더가 삭제됩니다. HOST 헤더를 유지하려면 ‘지정된 매개변수 유지’ 또는 ‘사용자 지정 매개변수 추가’ 를 통해 유지할 수 있습니다.</li>
<li>인증 매개변수는 대소문자를 구분하지 않습니다.</li>
</ul></td>
</tr><tr>
<td>요청 헤더 인증 매개변수: 사용자 지정 매개변수 추가</td>
<td>추가를 클릭하여 매개변수를 선택하거나 매개변수를 사용자 지정합니다.(최대 50개의 매개변수 추가 가능)<ul style="margin:0">
<li>선택 매개변수는 User-Agent, Referer, content_type, X-Forwarded-For 매개변수를 지원합니다. 각각의 매개변수는 다음과 같습니다: 사용자의 시스템 및 브라우저 정보, 지정된 웹 페이지의 리디렉션 출처, 위장된 액세스 링크.</li>
<li>사용자 지정을 선택한 경우 매개변수 및 값 입력 상자는 필수로 입력해야 합니다. 중국어는 현재 지원되지 않으며 요청 헤더 인증 매개변수는 대소문자를 구분하지 않습니다.</li>
</ul></td>
</tr><tr>
<td>단일 인증 요청 초과 시간(ms)</td>
<td>필수이며 기본값은 3000ms이며 500-3000이 지원됩니다.</td>
</tr><tr>
<td>시간 초과 재시도 횟수</td>
<td>기본적으로 1회이며, 0-3회를 지원합니다.</td>
</tr><tr>
<td>시간 초과 실행 작업</td>
<td>기본적으로 통과 허가되며, 차단 선택을 지원합니다. 인증 요청 1회당 타임 아웃 시간 × (재시도 횟수+1) 후, 명확한 응답 결과 (HTTP 상태 코드 <code>200</code> 또는 <code>403</code>)를 받지 못하면 시스템은 설정된 타임 아웃 실행 동작을 실행합니다.</td>
</tr></tbody></table>

4. **저장**을 클릭하면 구성이 저장됩니다.

## 원격 인증 수정
1. CSS 콘솔에 로그인하여 [도메인 관리](https://console.cloud.tencent.com/live/domainmanage)를 선택하고 원격 인증을 구성할 **재생 도메인**을 클릭하거나 우측의 **관리**를 클릭하여 도메인 관리 페이지로 이동합니다.
2. **액세스 제어** > **원격 인증**에서 편집을 클릭하여 원격 인증 설정 페이지로 이동합니다.
3. 구성을 수정하고 저장을 클릭합니다.

<img src="https://qcloudimg.tencent-cloud.cn/raw/30044c0f1f3cb90cd5f8024e01a5efc8.png" width=800>


## 원격 인증 비활성화
1. CSS 콘솔에 로그인하여 [도메인 관리](https://console.cloud.tencent.com/live/domainmanage)를 선택하고 원격 인증을 비활성화할 **재생 도메인**을 클릭하거나 오른쪽의 **관리**를 클릭하여 도메인 관리 페이지로 이동합니다.
2. **액세스 제어** > **원격 인증**에서 ![img](https://main.qcloudimg.com/raw/e72f89a0deb6858428dc3e93ce7e7088.png) 버튼을 클릭하고 원격 인증 비활성화를 선택합니다.
