CSSプッシュ機能は、デフォルトでは無効になっています。このドキュメントでは、指定したプッシュドメイン名にバインドされたレコーディングテンプレートのレコーディング機能を有効にする方法と、バインド後にテンプレートのバインドを解除してテンプレートのドメイン名レコーディング機能を無効にする方法についてご説明します。

[](id:limit)
## 使用制限
- レコーディングしたビデオファイルは、デフォルトで [VOD](https://console.cloud.tencent.com/vod/overview) コンソールに保存されます。事前にVODのサービスをアクティブ化し、またVOD関連のリソースパックを購入して、VODのサービスの支払い延滞による使用停止を回避することをお勧めします。詳細については、[VODクイックスタート](https://intl.cloud.tencent.com/document/product/266/8757)をご参照ください。
- レコーディング機能を有効にした後、VODサービスが正常な使用状態にあることを確認してください。VODサービスが非アクティブ状態またはアカウントの支払い延滞によりサービス停止になるなどの状況が起きた場合は、ライブストリーミングに影響して、レコーディングができなくなります。この期間はレコーディングファイルとレコーディングの費用は発生しません。
- テンプレート設定の完了後、約5分 - 10分経ってから有効になります。 
-  テンプレートのバインドに成功すると、指定されたプッシュドメイン名の下のプッシュアドレスのレコーディング機能が有効になります。
- 1つのドメイン名は、1つのレコーディングテンプレートにのみバインドすることができます。バインドした後、そのドメイン名の下のすべてのストリームは、このテンプレートに従ってレコーディングされます。
-  ミクスストリーミングのレコーディングは、レコーディングファイルエラーが発生し、通常の視聴と再生に影響を与えるため、中国大陸とグローバル/中国香港・マカオ・台湾のライブミクスストリーミングをサポートしていません。

## 前提条件
-  [CSSコンソール](https://console.cloud.tencent.com/live)にログインし、 [プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)の追加が完了していること。
-  [レコーディングテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/34223)が済んでいること。


[](id:conect)
## レコーディングテンプレートのバインド
1. [【Domain Management】](https://console.cloud.tencent.com/live/domainmanage)に入り、設定したい**プッシュドメイン名**または【管理】をクリックしてドメイン名詳細画面に入ります。
2. 【テンプレート設定】のタブを選択し、【レコーディング設定】のタブ右上角の【編集】をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/a56ed2f940b60babab0e2bbbe4eebaab.png)
3. レコーディング設定テンプレートを選択し、【OK】をクリックすれば完了です。
![](https://qcloudimg.tencent-cloud.cn/raw/c94bd3bedcd4fc4be97b48302a55163b.png)


[](id:unite)
## レコーディングテンプレートのバインド解除
1. [【Domain Management】](https://console.cloud.tencent.com/live/domainmanage)に入り、設定したい**プッシュドメイン名**または【管理】をクリックしてドメイン名詳細画面に入ります。
2. 【テンプレート設定】のタブを選択し、【レコーディング設定】のタブ右上角の【編集】をクリックします。
3. 対応するテンプレートのチェックをクリックして外し、【OK】をクリックすれば完了です。
![](https://main.qcloudimg.com/raw/f2c5f091437cd8b873ed6447562fb697.png)

>? 
>- レコーディングテンプレートのバインド解除後、ライブストリーミング中のストリームには影響しません。
>- バインド解除を有効にしたい場合は、バインド解除後にストリームを停止して再度ライブストリーミングをプッシュしてください。新規ライブストリーミングにレコーディングファイルが生成されなくなります。


[](id:get_record)
## レコーディングファイルの取得
レコーディングファイルが生成されると、自動的にVODシステムに保存されます。レコーディングファイルを取得するには、次のような方法があります。

### VODコンソール
VODコンソールにログインし、サブアプリケーションを選択して入り、左側の[【メディアリソース管理】](https://console.cloud.tencent.com/vod/media)をクリックすると、レコーディングされたすべてのファイルを参照することができます。
![](https://main.qcloudimg.com/raw/b41dc459807ac1986d1db04032ea7942.png)
 
### イベント通知のレコーディング
コンソールまたはAPI呼び出しによって、レコーディングコールバックアドレスを設定します。レコーディングファイルが生成されると、このコールバックアドレスにメッセージで通知されます。メッセージを受信した後、レコーディングされた [コールバックプロトコルコンテンツ](https://intl.cloud.tencent.com/document/product/267/31566)に基づいて業務を処理することができます。
>?イベント通知メカニズムは、効率的かつ信頼性が高く、並行性もあります。コールバックメソッドを使用してレコーディングファイルを取得することをお勧めします。

### VOD APIクエリー
具体的な使用法については、VOD API[SearchMedia](https://intl.cloud.tencent.com/document/product/266/34179)インターフェースを参照して、レコーディングファイルをフィルタリングおよびクエリーしてください。
