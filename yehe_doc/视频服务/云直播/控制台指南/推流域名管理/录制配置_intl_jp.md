CSSプッシュ機能は、デフォルトでは無効になっています。このドキュメントでは、指定したプッシュドメイン名に関連付けられたレコーディングテンプレートのレコーディング機能を有効にする方法と、関連付け後にテンプレートのバインドを解除してテンプレートのドメイン名レコーディング機能を無効にする方法についてご説明します。

[](id:limit)
## 使用制限
- レコーディング機能を有効にした後、VODまたはCOSサービスが正常な使用状態にあることを確認してください。VODまたはCOSサービスの非アクティブ状態またはアカウントの支払い延滞によりサービス停止になるなどが起きた場合、ライブブロードキャストに影響を与え、レコーディングができなくなります。この間はレコーディングファイルとレコーディング料金は発生しません。
- テンプレート設定の完了後、約5分 - 10分経ってから有効になります。 
-  テンプレートの関連付けに成功すると、指定されたプッシュドメイン名の下のプッシュアドレスのレコーディング機能が有効になります。
- 1つのドメイン名あたり、1つのレコーディングテンプレートにのみバインドすることが可能です。バインドした後、そのドメイン名の下のすべてのストリームは、このテンプレートに従ってレコーディングされます。
-  ミクスストリーミングのレコーディングは、レコーディングファイルエラーが発生し、通常の視聴と再生に影響を与えるため、中国大陸とグローバル/中国香港・マカオ・台湾のライブミクスストリーミングをサポートしていません。

##  前提条件
-  [CSSコンソール](https://console.cloud.tencent.com/live)にログインし、 [プッシュドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)の追加が完了していること。
-  [レコーディングテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/34223)が済んでいること。


[](id:conect)
## レコーディングテンプレートの関連付け
1. [**ドメイン名管理**](https://console.cloud.tencent.com/live/domainmanage)に進み、設定する**プッシュドメイン名**または**管理**をクリックしてドメイン名詳細ページに進みます。
2. **テンプレート設定**タグを選択し、**レコーディング設定**タグの右上側の**編集**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/a56ed2f940b60babab0e2bbbe4eebaab.png)
3. レコーディング設定テンプレートを選択し、**OK**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/b4e5b04ee6e79636e52ae907556cd5d1.png)


[](id:unite)
## レコーディングテンプレートのバインド解除
1. [**ドメイン名管理**](https://console.cloud.tencent.com/live/domainmanage)に進み、設定する**プッシュドメイン名**または**管理**をクリックしてドメイン名詳細ページに進みます。
2. **テンプレート設定**タグを選択し、**レコーディング設定**タグの右上側の**編集**をクリックします。
3. 対応するテンプレートのチェックを外して、**OK**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/ae44efc51b581100735c7faafe2414e8.png)

>? 
>- レコーディングテンプレートのバインド解除後、ライブストリーミング中のストリームには影響しません。
>- バインド解除を有効にしたい場合は、バインド解除後にストリームを停止して再度ライブストリーミングをプッシュしてください。新規ライブストリーミングにレコーディングファイルが生成されなくなります。


[](id:get_record)
## レコーディングファイルの取得
レコーディングファイルが生成されると、自動的にVODシステムに保存されます。レコーディングファイルを取得するには、次のような方法があります。
### VODへの保存
#### VODコンソール
VODコンソールにログインし、サブアプリケーションを選択して入り、左側の[**メディアリソース管理**](https://console.cloud.tencent.com/vod/media)をクリックすると、レコーディングされたすべてのファイルを参照することができます。
![](https://main.qcloudimg.com/raw/b41dc459807ac1986d1db04032ea7942.png)

#### レコーディングイベント通知
コンソールまたはAPI呼び出しによって、レコーディングコールバックアドレスを設定します。レコーディングファイルが生成されると、このコールバックアドレスにメッセージで通知されます。メッセージを受信した後、レコーディングされた [コールバックプロトコルコンテンツ](https://intl.cloud.tencent.com/document/product/267/38080)に基づいて業務を処理することができます。
>?イベント通知メカニズムは、効率的かつ信頼性が高く、即時性もあります。コールバックメソッドを使用してレコーディングファイルを取得することをお勧めします。

#### VOD APIクエリー
具体的な使用法については、VOD API[SearchMedia](https://intl.cloud.tencent.com/document/product/266/34179)インターフェースを参照して、レコーディングファイルをフィルタリングおよびクエリーしてください。

### COSへの保存
#### COSコンソール
COSコンソールにログインし、左側の[バケットリスト](https://console.cloud.tencent.com/cos/bucket)をクリックして対応するバケットを選択し、ファイルリストから対応するレコーディングフォルダを見つけることができます。
