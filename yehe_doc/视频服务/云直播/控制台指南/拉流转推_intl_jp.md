Tencent Cloud CSSコンソールは、プルリツイートツールを提供します。ライブストリーミングソースにプッシュ機能がない場合やオンデマンドのビデオコンテンツをライブストリーミングの形式で配信する必要がある場合に、プルリツイートサービスはコンテンツをプルしプッシュする機能を提供します。CSSプッシュを必要とせず、既存のビデオ/ライブストリーミングを素早くプルし、ターゲットアドレスにプッシュすることができます。
![](https://main.qcloudimg.com/raw/8f0b044ce2104efdc1ed835287b9b683.png)

##  前提条件
1. [Tencent CSSサービス](https://intl.cloud.tencent.com/product/css)をアクティブ化しており、CSSコンソールにログインしていること。
- [プッシュプルドメイン名](https://intl.cloud.tencent.com/document/product/267/35970)を追加済みであること。

## 注意事項
- 最大**20**のプルリツイートタスクの作成をサポートします。
- プルリツイートサービスを使用すると、**プルリツイートタスク時間請求書**が作成されます。料金の詳細については、 [プルリツイート課金説明](https://intl.cloud.tencent.com/document/product/267/41059)をご参照ください。
- プルリツイート機能はコンテンツのプルおよびプッシュサービスのみを提供します。**コンテンツに権限が付与され、かつコンテンツの配信に関する法律、規制に準拠していることを確認してください。版権問題やコンテンツの規則違反がある場合、CSSは関連の機能サービスを停止し、法的責任を追及する権利を留保します**。

[](id:create)
## タスクの作成
1. **CSSツールボックス** > **[プルリツイート](https://console.cloud.tencent.com/live/tools/relay)**を選択します。**タスク作成**をクリックして、プルリツイートタスクの作成ページに入ります。
![](https://qcloudimg.tencent-cloud.cn/raw/f41c7a329a9fed7a901bca252a973f35.png)
2. 設定するタスクの基本情報を入力します。設定は以下のとおり行います：
![](https://qcloudimg.tencent-cloud.cn/raw/d10fb06aba921e27791441a112039586.png)
<table>
<tr><th width=15%>設定項目</th><th>設定説明</th></tr>
<tr>
<td>タスクノート</td>
<td>カスタムタスクの備考情報です。</td>
</tr><tr>
<td>タスク時間</td>
<td>デフォルトでは、<code>現在の時刻</code>から<code>現在の時刻 + 24時間</code>までとします。選択可能なタスク時間は、現在の時刻を起点として1年以内の任意の時刻からタイムスパンが7日以内の範囲です。<br>現在の時刻を2021年03月24日11:50:01とすれば、：<ul style="margin:0"><li/>選択可能な時間は2022年03月24日11:50:01から2022年03月30日11:50:01までとなり、<li/>終了時刻が2022年03月30日11:50:01を超えることはできません。</ul></td>
</tr><tr>
<td>イベントコールバック通知</td>
<td>プルリツイートタスクイベントの受信に使用するコールバックアドレスを入力します。</td>
</tr></table>
3. コンテンツソースを入力します。リージョン地域を選択できます。
      - タスクの実行対象となる地域は以下を選択できます。中国国内のランダム地域、華北地区（北京）、華東地区（上海）、華南地区（広州）、アジア太平洋地区東南部（シンガポール）、アジア太平洋地区東南部（バンコク）、アジア太平洋地区東北部（ソウル）、アジア太平洋地区南部（ムンバイ）、香港・マカオ・台湾地区（中国香港）。
      - ランダム地域を選択すると、システムは自動的に最も近い地域を割り当てます。
4. コンテンツソースのタイプを選択します。**ライブストリーミング**または**ビデオアドレスパス**を選択できます。具体的な設定は次のとおりです：
   - コンテンツのタイプが**ライブストリーミング**の場合：
     - ライブストリーミングのソースアドレスを入力します（コンテンツソースのアドレスを**1つ**のみ入力できます）。
   ![](https://qcloudimg.tencent-cloud.cn/raw/6795d964f41e63fa90f0c09e3ddcf060.png)
     - 「バックアップを有効にする」を選択できます。バックアップを有効にした場合、プライマリがコンテンツをプルできなければ、自動的にバックアップに切替てコンテンツをプルします。プライマリがリカバリーした後、手動でバックアップからプライマリに切り替えてください。バックアップソースは、単一ビデオのループ再生のみをサポートします。
   - コンテンツのタイプが**ビデオアドレスパス**の場合：
      - **複数の**コンテンツソースアドレスを入力することができ、その上限は30です。
      - ループ再生回数を設定することができ、**無限ループ**または**ループ回数の指定**を選択できます。 1回以上、100回以下で指定回数を選択します。
      ![](https://qcloudimg.tencent-cloud.cn/raw/154e880ea3f2a60eef9031c7cba11510.png)
>? 
>- タスクが設定したループ再生回数またはタスクの終了時間のいずれかの条件に達すると、システムがプルリツイートタスクを停止します。
>- タスク情報を修正したい場合：
         - ループ回数を変更した場合、更新後は新たなループ回数に従って再生され、現在の再生タスクは1回として記録されます。
		 - ビデオアドレスパスとループ回数を変更する場合、直ちに更新するか再生後に更新するかを問わず、現在の再生タスクはループ回数としてカウントされず、新たなループ回数に従って再生されます。
		 - ターゲットアドレスを変更する場合は、ループ回数がリセットされます。
5. 受信するコンテンツのターゲットアドレスを入力します。
   1. ターゲットアドレス入力欄下の**アドレスジェネレーター**をクリックし、アドレスジェネレーター設定ページに移動します。
   ![](https://qcloudimg.tencent-cloud.cn/raw/59b8cf4d58770d201190db7404f6b5ad.png)
   2. 既存のプッシュドメイン名を選択し、 Appname、StreamName および有効期限を入力します。**OK**をクリックし、プッシュアドレスを生成します。このアドレスはターゲットアドレス欄に自動的に入力されます。
   ![](https://qcloudimg.tencent-cloud.cn/raw/b01df24dffa14c35350048ae7fd3cfef.png)
> !アドレスの有効期限はタスクの終了時間よりも長くする必要があります。タスクの開始後にターゲットプッシュアドレスが更新されると、タスクは中断され、再度プッシュされます。
5. 入力が完了したら、**保存**をクリックして作成を完了します。


## タスクの管理
[](id:view)
### タスク詳細の確認
[タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、確認したいプルリツイートタスクを選択し、対応する`タスク備考/ ID`をクリックすると、右側のポップアップウィンドウにタスクの詳細情報が表示されます。
![](https://qcloudimg.tencent-cloud.cn/raw/c2bad33a6a735a218fa79b98f3738275.png)

>?タスクの詳細情報の下で編集、入力ソースの切替、再開、無効ボタンをクリックできます。

### タスク状態の確認
[タスクリスト](https://console.cloud.tencent.com/live/tools/relay)でタスクの状態を確認できます。確認したいプルリツイートタスクを選択し、対応する`タスクノート/ ID`をクリックすると、右側のポップアップウィンドウにこのタスクの実行状態が表示されます。

![](https://qcloudimg.tencent-cloud.cn/raw/cd498cb1fd678e39b0942383c278e82b.png)

<table>
<thead><tr><th>タスク状態</th><th>実行状態</th><th>意味</th></tr></thead>
<tbody><tr>
<td>未開始</td>
<td>インアクティブ</td>
<td>このタスクはまだタスク時間になっていません</td>
</tr><tr>
<td rowspan=2>有效</td>
<td>アクティブ</td>
<td>このタスクはタスク時間になり正常に動作しています</td>
</tr><tr>
<td>インアクティブ</td>
<td>このタスクはタスク時間になったが正常に動作していません</td>
</tr><tr>
<td>無効</td>
<td>インアクティブ</td>
<td>このタスクは無効になっています</td>
</tr><tr>
<td>期間切れ</td>
<td>インアクティブ</td>
<td>このタスクは終了時間を過ぎました</td>
</tr>
</tbody></table>



[](id:change)
### タスクの変更
1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay) で、作成したプルリツイートタスクを選択し、右側の操作欄で**編集**をクリックして、プルリツイートタスクの編集ページに遷移します。
![](https://qcloudimg.tencent-cloud.cn/raw/97b07fc0d224a06fe268cdc1177102e3.png)
2. 実際のニーズに応じてタスク情報を変更し、**保存**をクリックします。
 > - リージョンおよびコンテンツタイプは変更できません。
 > - タスク終了時間を変更する場合は、タスクが終了するまで、ターゲットアドレスが有効であることを確認してください。ターゲットアドレスを変更すると、タスクが中断し、その後再開されます。
![](https://qcloudimg.tencent-cloud.cn/raw/d950a8029e1944e9029445dd8e428933.png)
3.  ポップアップした変更タスクの確認ページで、変更前後の比較情報を表示します。
   - 変更した内容に**タスクノート、開始時間、終了時間、バックアップアドレス**が含まれた場合、比較情報に以下の例が表示されます：
![](https://qcloudimg.tencent-cloud.cn/raw/4cadcabeef99828ab4be144040cbfd19.png)
   - 変更したコンテンツに**ビデオアドレスパス**が含まれた場合は、変更前のソースがカスタムビデオパスのコンテンツであることが表示され、更新方法として**現在再生中のビデオが終了した後に更新**/**直ちに更新**を選択することができます。選択しない場合、デフォルトでは**現在再生中のビデオが終了した後に更新**とします。更新後、新しい順番で最初からプルリツイートを行います。
![](https://qcloudimg.tencent-cloud.cn/raw/9591b91b7e5e307860c9ea2244b4e14e.png)
    - 変更したコンテンツに**ターゲットアドレス**が含まれた場合、変更したターゲットアドレスが表示され、変更後の現在のプルリツイートタスクが**中断後に再開**されることを確認します。
![](https://qcloudimg.tencent-cloud.cn/raw/0a7e04f65ae8bbdd9cb7ef3bc0ece656.png)
4. 情報が正しいことを確認し、**OK**をクリックすれば、タスクの内容が正常に変更されます。

[](id:copy)

### タスクのコピー
1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay) で、コピーするプルリツイートタスクを選択し、右側の操作欄で**コピー**をクリックして、プルリツイートタスクの作成ページに遷移します。
![](https://qcloudimg.tencent-cloud.cn/raw/28a0a3542ab9ab838d26dfc565f321d1.png)
2. 現在選択中のタスク情報が新たに作成されたタスクページに入力され、コピーした元のタスク情報で [修正](#create)を実行することができます。
3. **保存**をクリックすれば、新たなプルリツイートタスクが作成されます。



[](id:reboot)
### タスクの再開
タスクを再開した後、タスクの**ステータスは変更されません**。実行中のタスクは**最初から実行を開始します**。タスクを再開したい場合の具体的な操作は次のとおりです：

1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、再開するプルリツイートタスクを選択し、右側の操作欄で**再開**をクリックします。
2. 現在のプルリツイートタスクを再開するかを確認し、**再開**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/d1b03e226297e44cbb7504d57c54af4f.png)

[](id:disable)
### タスクの無効化
タスクを無効にすると、**タスクは直接停止します**。タスクの実施を再開するには、[有効](＃enable)にしてください。 タスクを無効にしたい場合の具体的な操作は次のとおりです：

1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、無効にするプルリツイートタスクを選択し、右側の操作欄で**無効**をクリックします。
2. 現在のプルリツイートタスクを無効にするかを確認し、**無効**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/c3acfb89f425b50ba53a8d63075091d8.png)


[](id:enable)
### タスクの有効化
タスクを有効にすると、**タスクは新たに最初から開始されます**。 タスクを有効にしたい場合の具体的な操作は次のとおりです：

1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、有効にする、無効になっているプルリツイートタスクを選択し、右側の操作欄で**有効**をクリックします。
2. 現在のプルリツイートタスクを有効にするかを確認し、**OK**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/77417a9c8406fe9d763c4d3960d98b21.png)

[](id:delete)
### タスクの削除
タスクの削除は**リカバリをサポートしていません**。タスクを削除する必要がある場合の具体的な操作は次のとおりです：

1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、削除するプルリツイートタスクを選択し、右側の操作欄で**削除**をクリックします。
2. 現在のプルリツイートタスクを削除するかを確認し、**削除**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/44a15ad52bfc81f62c0aa907cdc7eb5c.png)

[](id:batch)
### バッチ操作
プルリツイートはタスクの一括削除、無効化および有効化をサポートしており、バッチ処理は**最大10個のタスク**をサポートします。
1.  [タスクリスト](https://console.cloud.tencent.com/live/tools/relay)で、一括処理するプルリツイートタスクを選択します。
2. 一括処理するプルリツイートタスクを選択して、**一括削除**、**一括無効**または**一括再開**をクリックします。
![](https://qcloudimg.tencent-cloud.cn/raw/7401eade6f5e04b9eadf71e04211f6e0.png)
3. 現在のプルリツイートタスクを削除/無効化/再開するかを確認し、ポップアップウィンドウで**削除**/**無効化**/**再開**をクリックして、一括処理を行います。
![](https://qcloudimg.tencent-cloud.cn/raw/5874636c548a4733281cd33eaca35abe.png)

   
## 期間が切れたタスクのクリアの設定

プルリツイートは定時的にタスクをクリアする設定をサポートします。作成上限に達してタスクの作成に失敗することを防ぐために、タスクが終了時間になると期間切れの状態になります。削除したタスクは復元できません。

1. **CSSツールボックス** > **[プルリツイート](https://console.cloud.tencent.com/live/tools/relay)**を選択します。**設定**をクリックします。
2.![](https://qcloudimg.tencent-cloud.cn/raw/7ed257d05a4283dc233ef406520187b4.png)ボタンをクリックして、定時クリアを有効にします。
3.実際のニーズに応じて、クリア間隔時間を変更します。選択できるクリア間隔時間は1～24時間です。
![](https://qcloudimg.tencent-cloud.cn/raw/4d579b1d0776ea22b5d994e3b7357ea3.png)



