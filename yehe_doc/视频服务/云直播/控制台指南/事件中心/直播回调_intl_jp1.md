CSSではCSSコールバック機能を提供し、コンソールでのコールバックテンプレートの設定をサポートしています。トリガーされる各イベントに対して関連コールバック情報を受信するパスを設定でき、さらにプッシュドメイン名でテンプレートとのバインドを行います。バインドに成功すると、ライブストリーミング中に、設定したテンプレートにしたがってイベントのコールバック機能がトリガーされ、Tencent Cloudが自発的にリクエストを顧客サーバーに送信し、顧客サーバによってリクエストの応答が実行されます。認証に通過すると、イベントに対応するパスによってコールバック情報のJSONデータパケットを取得することができます。
以下では、コンソールを介してコールバック設定テンプレートの作成、修正、削除を行う方法を紹介します。 

**コールバック設定テンプレートの作成には以下の2種類の方式があります。**
- CSSコンソールによるテンプレートの作成。具体的な操作手順は、[コールバックテンプレートの作成](#Callback)をご参照ください。
- APIによるテンプレート作成。具体的なパラメータおよびサンプルの説明は、[コールバックテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/30815)をご参照ください。


## 注意事項

- 作成完了後に、対応するプッシュドメイン名で[コールバック設定](https://intl.cloud.tencent.com/document/product/267/31065)とのバインドを行う必要があります。バインドの完了後約5分～10分で設定が有効になります。
- コールバック設定の中で、コールバックイベントの受信に使用するコールバックアドレスの`http`または`https`サーバーが正常にレスポンスを受信する必要があります。
- コンソールのコールバックテンプレート管理はドメイン名の次元となっており、現在はバインドインターフェース作成のルールを取り消すことができません。CSSコールバック関連インターフェースを介して指定ストリームをバインドした場合は、[コールバックルールの削除](https://intl.cloud.tencent.com/document/product/267/30814)を呼び出して、バインドを解除する必要があります。
- CSSコールバック関連プロトコルについては、[イベントメッセージ通知のプロトコル](https://intl.cloud.tencent.com/document/product/267/38080)をご参照ください。
- CSSコールバックメッセージ通知のパラメータについての説明は以下をご参照ください。
 - [プッシュイベント通知](https://intl.cloud.tencent.com/document/product/267/38081)
 - [ストリーム切断イベント通知](https://intl.cloud.tencent.com/document/product/267/38081)
 - [レコーディングイベント通知](https://intl.cloud.tencent.com/document/product/267/38082)
 - [スクリーンキャプチャイベント通知](https://intl.cloud.tencent.com/document/product/267/38083)
 - [ポルノ検出イベント通知](https://intl.cloud.tencent.com/document/product/267/38084)




<span id="Callback"></span>
## コールバックテンプレートの作成

1. [CSSコンソール](https://console.cloud.tencent.com/live)にログインします。
2. 左側メニューバーから【イベントセンター】>[【CSSコールバック】](https://console.cloud.tencent.com/live/config/callback)を選択します。
3. 【コールバックテンプレートの作成】をクリックして、コールバック設定のポップアップボックスの中にコールバック情報を入力し、【保存】をクリックすれば完了です。
![](https://main.qcloudimg.com/raw/e79b06c3fecbfaa34d124f820e10ff2c.png)
<table>
<thead><tr><th width="17%">設定項目</th><th>説明</th></tr></thead><tbody><tr>
<td>テンプレート名</td>
<td>コールバックテンプレート名。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。30文字を超えないこと。</td>
</tr><tr>
<td>テンプレートの説明</td>
<td>コールバックテンプレートの説明情報。入力できるのは中国語、英語、数字、「_（アンダーバー）」、「-（ハイフン）」のみです。100文字を超えないこと</td>
</tr><tr>
<td>コールバックキー</td>
<td>カスタムコールバックキー。<br>アルファベットの大文字・小文字と数字の組み合わせとなり、最大32文字。使い方に関しては、<a href="https://intl.cloud.tencent.com/document/product/267/38081#.E5.9B.9E.E8.B0.83.E5.85.AC.E5.85.B1.E5.8F.82.E6.95.B0">イベントメッセージ通知共通パラメータ</a>をご参照ください。</td>
</tr><tr>
<td>プッシュコールバック</td>
<td>プッシュコールバックイベント受信のためのパスを入力します。サポート可能なプロトコルヘッダーは、http、httpsなどです。</td>
</tr><tr>
<td>プッシュ切断コールバック</td>
<td>プッシュ切断コールバックイベントを受信するためのパスを入力します。サポート可能なプロトコルヘッダーは、http、httpsなどです。</td>
</tr><tr>
<td>レコーディングコールバック</td>
<td>レコーディングコールバックイベントを受信するためのパスを入力します。サポート可能なプロトコルヘッダーは、http、httpsなどです。</td>
</tr><tr>
<td>スクリーンキャプチャコールバック</td>
<td>スクリーンキャプチャコールバックイベントを受信するためのパスを入力します。サポート可能なプロトコルヘッダーは、http、httpsなどです。</td>
</tr><tr>
<td>スクリーンキャプチャ・ポルノ検出コールバック</td>
<td>スクリーンキャプチャ・ポルノ検出コールバックイベントを受信するためのパスを入力します。サポート可能なプロトコルヘッダーは、http、httpsなどです。</td>
</tr>
</tbody></table>


<span id="change"></span>
## テンプレートの修正

1. 【イベントセンター】>[【CSSコールバック】](https://console.cloud.tencent.com/live/config/callback)に入ります。
2. 作成済みのコールバック設定テンプレートを選択し、右側の【編集】をクリックすれば、テンプレート情報の修正ページに入れます。
3. 【保存】をクリックすれば完了です。

![](https://main.qcloudimg.com/raw/885d9f6ec5ee5b921865cba965068de0.jpg)

<span id="delete"></span>
## テンプレートの削除

テンプレートがすでにバインドされている場合は、先にテンプレートのバインドを解除する必要があり、その後削除操作を行うことができます。具体的なバインド解除の操作は、[コールバック設定のバインド解除](https://intl.cloud.tencent.com/document/product/267/31065#untie)をご参照ください。

1. 【イベントセンター】>[【CSSコールバック】](https://console.cloud.tencent.com/live/config/callback)に入ります。
2. 作成済みのコールバック設定テンプレートを選択し、右側の【削除】をクリックします。
3. 現在のスクリーンキャプチャ・ポルノ検出設定テンプレートを削除するか確認し、【OK】をクリックすれば削除が完了します。

![](https://main.qcloudimg.com/raw/1bf90e6b3197dd2e18aff8c52cbe331c.jpg)

