정상적인 상황에서 RTMP 푸시 스트리밍+FLV 재생의 딜레이는 2~3초 정도로, 너무 길어지는 것은 문제가 있는 것입니다. 라이브 방송 딜레이 시간이 너무 길 경우 다음 순서에 따라 진단하십시오.
## 진단 순서
### 1단계. 재생 프로토콜 확인
많은 클라이언트가 재생 프로토콜에 HLS(m3u8)를 사용하고, 딜레이 시간이 너무 길다고 생각하지만 이는 정상입니다. Apple에서 출시한 HLS는 노이즈가 큰 TS 멀티 파트의 스트림 미디어 프로토콜을 기본으로 합니다. 모든 멀티 파트는 5s 이상의 지속 시간이 있으며 멀티 파트의 수는 일반적으로 3~4개이므로 20s~30s 딜레이는 정상입니다.
FLV를 재생 프로토콜로 사용하면 이 문제를 해결할 수 있습니다. 하지만 휴대폰 브라우저에서 라이브 방송을 보는 경우에는 HLS(m3u8) 재생 프로토콜만 선택할 수 있으며, 다른 재생 프로토콜은 Apple의 Safari 브라우저에서는 지원하지 않습니다.

### 2단계. 플레이어 설정 확인
Tencent Cloud RTMP SDK의 플레이어는 고속, 원활, 자동의 3가지 모드를 지원합니다. 구체적인 설정은 [딜레이 조절](https://cloud.tencent.com/document/product/454/7886#Delay)을 참조하십시오.
- **고속 모드**: 대다수 시나리오의 딜레이를 2~3초 이내로 합니다. 뷰티쇼가 이 모드에 적합합니다.
- **원활 모드**: 대다수 시나리오의 딜레이를 5초 이내로 합니다. 딜레이에 민감하지 않지만 원활도에 대한 수요가 높은 게임 라이브 방송과 같은 시나리오에 적합합니다.

### 3단계. 백그라운드에 워터마크 만들지 않기
Tencent Cloud는 Tencent Cloud RTMP SDK의 푸시 스트리밍 플레이어(라이브 방송에 워터마크 추가 지원)를 사용할 수 없지만 워터마크가 필요한 클라이언트 요구를 충족하기 위해 백그라운드 워터마크를 지원합니다. 하지만 이 방식은 추가로 3초간 딜레이가 있을 수 있으므로 Tencent Cloud RTMP SDK로 푸시 스트리밍을 할 경우에는 백그라운드 워터마크를 끄고 호스트 App에서 워터마크를 추가하십시오.

### 4단계. 3rd party 푸시 스트리밍 플레이어 확인
Tencent Cloud 통합 솔루션을 사용할 경우에만 이상적인 효과를 얻을 수 있습니다. 3rd party 푸시 스트리밍 소프트웨어를 사용하는 경우 Tencent Cloud RTMP SDK의 푸시 스트리밍 Demo로 바꾸어 대조해 보시고, 3rd party 푸시 스트리밍 플레이어의 인코딩 캐시가 딜레이를 유발할 가능성을 배제하십시오. 수많은 3rd party의 푸시 스트리밍 플레이어가 업스트림 대역폭 부족 문제를 해결하기 위해 무제한 버퍼링 방식을 채택하기도 합니다.

### 5단계. OBS 설정 확인
 많은 클라이언트 피드백은 OBS 푸시 스트리밍을 사용하는데, 재생 시 딜레이가 깁니다. [PC 푸시 스트리밍](https://cloud.tencent.com/document/product/267/32732#pc-.E7.AB.AF.E6.8E.A8.E6.B5.81) 문서에서 해당 매개변수를 설정하고, 키 프레임 간격을 1 혹은 2로 설정하십시오.

