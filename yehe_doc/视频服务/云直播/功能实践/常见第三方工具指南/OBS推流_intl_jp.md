## ソリューションの背景
Open Broadcaster Software（略称 OBS）は、オープンソースプログラムのサードパーティ製ライブストリーミングメディアコンテンツ制作ソフトウェアで、使いやすく、ユーザーに無償で提供されています。OS X、Windows、LinuxなどのOSをサポートし、多様なライブストリーミングのシナリオに適応でき、ライブストリーミング行為のほとんどのオペレーションニーズに応えることが可能です。最新版のソフトウェアは、[OBS公式サイトでダウンロード](https://obsproject.com/download?spm=a2c4g.11186623.2.15.6aac1445JPlKR8) できます。
本ページでは、OBSツールをインストールした後、PC端末でどのようにプッシュ設定を操作するのかをお伝えします。

### 準備作業
-  [CSSコンソール](https://console.cloud.tencent.com/live)にログインし、プッシュアドレスを生成します。詳細については、[プッシュ設定](https://intl.cloud.tencent.com/document/product/267/31059)をご参照ください。
-  [OBS](https://obsproject.com/download?spm=a2c4g.11186623.2.15.6aac1445JPlKR8) ツールをインストールします。

## 操作手順

### OBSプッシュの使い方
 1. **<span id="step1">プッシュアドレスの設定</span>**
OBSを開いて、1番下のツールバーの【コントロール】>【設定】ボタンから設定画面に入ることができます。
![](https://main.qcloudimg.com/raw/493a19e0f2bbea80983c341dd742a044.png)
【プッシュ】を選択してストリームの設定タブに進み、ストリームのタイプにカスタマイズしたストリーミングメディアサーバーを選択します。下図のプッシュアドレスを例にします。
![](https://main.qcloudimg.com/raw/55512ddf58bf32014424fa33b6f3d31f.png)
プッシュアドレスの2つの部分にそれぞれURLとストリーム名を入力し、URLの部分にはPathの前のアドレス情報を含め、ストリーム名にはStreamNameの後のアドレス情報を含めます。これによりパラメータ設定は次のようになります。
```
URL：rtmp://push.livetest.myqcloud.com/live/
ストリーム名：StreamName?txSecret=xxxxx&txTime=5C1E5F7F
```
プッシュアドレスの取得については、[プッシュアドレスをスピード取得](https://intl.cloud.tencent.com/document/product/267/31056#step-3.-view-and-configure-information)をご参照ください。

 2. **<span id="step2">プッシュガイドの設定</span>**
一番下のツールバーの【ソース元】のボックスで、【+】を選択して入力ソースを選択します。この時、ビットレート、録画などの他の設定を行う必要がなければ、直接ツールバーの【コントロール】>【プッシュ開始】を選択すれば、ビデオストリームを設定したプッシュアドレスに送り出せます。
![](https://main.qcloudimg.com/raw/f8136fdb794595c8c491c995a74cdfcc.png)
上記のようにいかない場合は、トップのツールバーを選択して、【ツール】>【自動設定ウィザード】を選択し、OBSのガイドにしたがってプッシュ設定を行ってから、ツールバーの【コントロール】>【プッシュ開始】を選択します。

 3. **その他のプッシュ関連の設定**
- ライブストリーミングのディレーに影響する関連設定
【コントロール】>【設定】>【出力】と進み、【出力モード】に【アドバンス】を選択すると、【キーフレームの間隔】などの設定を行うことができます。設定方法は下図のとおりです。キーフレームの間隔】
![](https://main.qcloudimg.com/raw/5f48205da162f1230723729c36369f65.png)
同時に左側ナビゲーションバーで、【アドバンス】を選択すると、【ストリームディレイ】を設定できます。
![](https://main.qcloudimg.com/raw/c3ec9a71a014548eb680009d9798b1ac.png)
- ローカルのライブストリーミングレコーディング関連の設定
 ライブストリーミングの際にローカルレコーディングのニーズがある場合は、この時にローカルにレコーディングのバックアップを行う方法を選択できます。設定方法は下図のとおりです。
![](https://main.qcloudimg.com/raw/a3c90994ef7447766914dc41605623c3.png)
【コントロール】>【設定】>【出力】を選択して出力設定のタブに進み、【レコーディング】設定バーの中で対応する設定を行えば、レコーディングファイルをローカルに保存できます。
解像度は視聴者が見る画面の精細度を決定し、解像度が高いほど画面は鮮明になります。FPSはビデオのフレームレートで、ビデオ視聴のなめらかさを制御します。スタンダードのビデオフレームレートとしては24フレーム - 30フレームがあり、16フレーム未満の画面は見るとラグ感があります。またゲームはフレームレートに求める基準が高いため、通常は30フレーム未満のゲームでは画面の連続性が失われます。解像度とフレームレート設定は下図のとおりです。
![](https://main.qcloudimg.com/raw/f736ef195b26a81f46d1e26d7935a763.png)


## 関連する操作
### 一般的な操作の説明
1. **よく使用するライブストリーミング入力ソースの説明**
 - **画像**：単一画像のライブストリーミングに適用します。
 - **画像スライド放映**：複数の画像をループまたは順番に再生できます。
 - **シーン**：各種の大きなライブストリーミング効果を実現します。この時、別のシーンをソース元として現在のシーンに追加すれば、シーン全体の挿入を実現できます。
 - **メディアソース**：ローカルのビデオをアップロードできます。またローカルのオンデマンドのビデオファイルに対し、ライブストリーミング化の処理を行うことができます。
 - **テキスト**：、ライブストリーミングのウィンドウの中にリアルタイムにテキストを追加します。
 - **ディスプレイキャプチャ**：デスクトップの操作をリアルタイムかつ動的にキャプチャし、PCデスクトップ上のすべての操作をライブストリーミングすることができます。
 - **ゲームキャプチャ**：指定ソース元のゲームをライブストリーミングすることを許可します。大/小規模ゲームの実況のライブストリーミングに適用します。
 - **ウィンドウキャプチャ**：選択したウィンドウに応じてリアルタイムにキャプチャを行うことができます。ライブストリーミングは現在のウィンドウのコンテンツのみを表示し、その他ウィンドウはライブストリーミングのキャプチャを行いません。
 - **カラーソース**：このソースを使用して1つのカラーブロックを自分のシーンの中に追加し、背景色とすることができます。このカラーブロックは透明度を調整でき、画面全体を透明の色彩にすることができます。
 - **ビデオキャプチャデバイス**：リアルタイムな動的キャプチャの撮影デバイス。撮影した画面をライブストリーミングすることができます。
 - **音声入力キャプチャ**：音声ライブストリーミングのアクティビティ（音声入力デバイス）に利用します。
 - **音声出力キャプチャ**：音声ライブストリーミングのアクティビティ（音声出力デバイス）に利用します。

2. **スタジオモードの紹介**
スタジオモードでは、現在のライブストリーミングコンテンツをリアルタイムに編集し、かつ編集プロセスの中でアニメーションによるシーン切り替えが可能です。これによりユーザーエクスペリエンスへの影響が極めて少ない状態で、ライブストリーミングコンテンツの編集を行うことができます。
【コントロール】>【スタジオモード】を選択して下図の画面に進み、【シナリオ】、【ソース】、【アニメーション】の設定を完了すれば、ライブストリーミング過程の中で、直接左側の素材編集ウィンドウでライブストリーミング画面の編集を行うことができ、さらに【アニメーション】ボタンによって、ライブストリーミングウィンドウの切り替え操作が可能です。
![](https://main.qcloudimg.com/raw/80e9e902e0e02902d78779ca5505b2f8.png)

### 純音声プッシュ
OBS公式フォーラムの回答によれば、現在OBS Studio 23.2.1およびそれ以前のバージョンでは純音声プッシュをサポートしていません。
近似する音声プッシュを実現するために、以下の手順を参考に設定を行うことができます。本方法は静的キャンバス（黒画面または画像）を使用して、ビデオを代替します。帯域幅を下げたい場合は、ビデオのフレームレートとビットレートを下げ、これにより純音声プッシュの状態に近づけることができます。ただし、ライブストリーミングの中には依然としてビデオデータがあります。
1. [OBS通常のプッシュ設定](#step2)を参考にして、【音声入力キャプチャ】の入力ソースを入力ソース元として追加します。ビデオ入力ソースまたは画像をビデオ入力ソース元として追加することはできません。
![](https://main.qcloudimg.com/raw/c74e3e5058c69356095c761e1e572da6.png)
2. 【コントロール】>【設定】>【ビデオ】画面と進み、【出力（スケーリング）解像度】に最小を選択し、同時に【よく使用するFPS値（フレームレート）】も最小を選択して、【保存】を選択し、設定を保存します。
![](https://main.qcloudimg.com/raw/cb77c3deb8d3e9831aaa1421b5b13412.png)
3. 【出力】を選択して入力設定画面に入り、下図のとおり設定します。ここでは【ビットレート】設定を最低にする必要があります。設定完了後、【保存】または【適用】を選択すれば設定を保存できます。
![](https://main.qcloudimg.com/raw/008e1ab02e2d08ee42f3a64e2e09d473.png)
4. [OBSプッシュ設定](#step1)【プッシュ】の中の手順を参考にしてプッシュを開始します。そうすると音声が聞こえ、ビデオのコンテンツはブラックスクリーンまたは1枚の画像となります。これと同時に、ビデオのビットレートは最低となり、使用帯域幅も低下します。

### ビデオの繰り返し再生
**単独のファイルのループ再生設定方法**
1. OBSの【ソース元】バーの中の【+】を選択して【メディアソース】を追加し、ポップアップボックスの中の【ローカルファイル】で繰り返し再生したいビデオファイルを選択し、【ループ】にチェックを入れます。その後【OK】を選択して完了です。
![](https://main.qcloudimg.com/raw/b41371c6674d4d8a2cd84fe37e3fbab4.png)
2. [OBSプッシュ設定](#step1) の手順にしたがい、【プッシュ】画面の中の【サーバー】と【ストリームキー】の項目を設定します。プッシュが開始されると単独のファイルの繰り返し再生が可能です。

**複数ファイルのループ再生方法**
OBSそのものは複数ファイルのループ再生をサポートしていませんが、サードパーティ製ビデオプレーヤーのループ再生機能を利用し、かつウィンドウキャプチャを利用して複数ファイルの繰り返し再生が可能です。
