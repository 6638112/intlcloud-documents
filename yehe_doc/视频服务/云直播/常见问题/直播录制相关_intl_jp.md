[](id:que1)

### LVBレコーディングの原理はどのようなものですか。
![img](https://main.qcloudimg.com/raw/9c9d31c6ffec97d2b8b4042b7a673cbc.jpg)

1つのLVBストリームで、レコーディングを有効にすると、オーディオ・ビデオデータはレコーディングシステムにRelayされます。キャスターの携帯電話からプッシュされた各フレームデータは、レコーディングシステムによってレコーディングファイルに書き込まれます。

LVBストリームが中断されると、アクセス層は、レコーディングサーバーに、書き込まれているファイルをレコーディングし、ファイルをVODシステムに保存して、インデックスを生成するようにすぐに通知します。その後、VODシステムで新しいレコーディングファイルを見ることができます。同時にサーバーでレコーディングイベント通知を設定している場合は、レコーディングシステムは**インデックスID **および**オンライン再生アドレス**の情報をサーバーに送信します。

ただし、クラウドでの転送中や大きなファイルの処理中にエラーが発生しやすくなります。そのため、成功率を確保するために、1個のレコーディングファイルの最大記録長は120分間とし、RecordIntervalパラメータを使用してより短いセグメントを指定できます。

[](id:que2)
###　LVBでビデオをレコーディングできないのはなぜですか。 
LVBレコーディング再生機能はTencent Cloudの**VODサービス**のサポートに依存しています。レコーティング機能を使用したい場合は、まずTencent Cloudの管理コンソールで[VODサービスをアクティブ](https://console.cloud.tencent.com/vod)にする必要があります。

[](id:que3)
###  ライブストリーミングが終了してから、どの位経てばレコーディングファイルを見ることができますか。 
LVB完了後5分前後でレコーディングファイルを取得できます。レコーディング完了後、コールバック受信時間に応じてイベントコールバックがあります。詳細は[コールバック設定](https://intl.cloud.tencent.com/document/product/267/31074)をご参照ください。

[](id:que4)
### LVBレコーディング終了後に、レコーディングファイルを取得するにはどうすればよいですか。
生成されたレコーディングファイルは、VODシステムに自動的に保存されます。クライアントが保存するには、VODサービスをアクティブにする必要があります。レコーディングファイルは、次の方法で取得できます。
- [VODコンソール](https://intl.cloud.tencent.com/document/product/267/31563)
- [レコーディングイベント通知](https://intl.cloud.tencent.com/document/product/267/31563)
- [VOD APIクエリー](https://intl.cloud.tencent.com/document/product/267/31563)

[](id:que5)
### LVBビデオをマイグレーションできますか。
ビデオのダウンロードアドレスを取得して、ご自分でマイグレーションする必要があります。 

[](id:que6)
###  ビデオの保存期間はどうやって設定するのでしょうか。
現在LVBのビデオ保存に時間制限はなく、コンソールとRSET APIインターフェースを使用してビデオファイルを管理することができます。 

[](id:que7)
### 1回のLVBでレコーディングファイルはいくつ生成されますか。

-** MP4、FLV、AAC形式のレコーディング**：1ファイルの長さは5分～120分間に制限されます。[レコーディングテンプレート作成](https://intl.cloud.tencent.com/document/product/267/30845)インターフェースのRecordIntervalパラメータによって、より短いセグメントを指定できます。
    - 1回のライブストリーミングのプロセスが非常に短く、レコーディングモジュールの開始前にプッシュが終了した場合、システムはレコーディングファイルを生成できません。
    - 1回のライブストリーミング時間がそれほど長くなく（RecordIntervalより短い）、途中プッシュが中断されない場合、1個のファイルのみ生成されます。
    - 1回のライブストリーミング継続時間がとても長い（RecordIntervalより長い）場合、RecordIntervalで指定された時間の長さに従ってセグメント化されますが、これは分散システムで継続時間が長いファイルのフロー時間が不確実になるのを回避するためです。
    - 1回のライブストリーミング中にプッシュが中断された場合（その後SDKは再プッシュを試行します）、中断が発生するたびに新しいセグメントが1個生成されます。

- **HLS形式のレコーディング**：1ファイルの最長時間に制限はありません。レコーディング再開タイムアウト期間を超えると、レコーディングを続行するための新しいファイルが作成されます。レコーディング続行タイムアウトは0s～1800sで設定できます。

[](id:que8)
### どのファイルが特定のライブストリーミングに属しているかを知る方法はありますか。

実際、PAASとしてのTencent Cloudでは、お客様の1回のライブストリーミングがどのように定義されているかわかりません。1回のライブストリーミングが20分間続いたが、その途中でネットワークスイッチングによるプッシュの中断が発生し、ストリーミングが1回停止した場合、および1回手動で停止して再起動した場合は、ライブストリーミングを1回と数えますか、それとも3回と数えますか。

通常のMLVBのシナリオでは、一般的に以下のとおり、インターフェース間のこの時間を1回のライブストリーミングと定義しています。

したがって、Appのクライアントから送信される時間情報はとても重要です。この時間内にレコーディングされたすべてのファイルがこのライブストリーミングに属することを定義する場合は、LVBコードおよび時間情報を使用して受信したレコーディング通知を取得する必要があります（各レコーディング通知イベントは、**ストリームID**、**開始時間**、**終了時間**などの情報を伴っています）。

[](id:que9)
### セグメントはどのように結合すればいいですか。
現在、Tencent Cloudは、クラウドAPIインターフェースを使用してビデオセグメントの結合をサポートします。 

[](id:que10)
###  レコーディングテンプレートを1個しか設定していないのに、2つのLVBレコーディングのパスがある場合、どのように解決すればいいですか。 
一般的に、現在のプッシュドメイン名で2つのレコーディングタスクがあることが原因である可能性があります。次のような考え方でトラブルシューティングすることをお勧めします。

1. コンソールのレコーディング設定情報を確認して、レコーディングファイルのタイプに1つの形式のみが選択されていることを確認します。
   - コンソールが**新バージョンのコンソール**の場合は、[【Domain Management】](https://console.cloud.tencent.com/live/domainmanage)に進んで，プッシュドメイン名右側の【管理】をクリックします。【テンプレート設定】の中の【レコーディング設定】に進んで関連テンプレートの「レコーディング形式」情報を確認します。
   - コンソールが**旧バージョンのコンソール**の場合は、[【LVBコードアクセス】](https://console.cloud.tencent.com/live/livecodemanage)>【アクセス設定】に進んでLVBレコーディング設定情報をチェックします。  
2. [レコーディングタスク作成](https://intl.cloud.tencent.com/document/product/267/30847)および[レコーディングテンプレート作成](https://intl.cloud.tencent.com/document/product/267/34223)は2種類のレコーティング起動方式です。実際の使用中にニーズに応じてどちらかを選択します。同一のLVBストリームにレコーディングテンプレートを設定すると同時にレコーディングタスクを作成すれば、レコーディングが重複することになります。コンソールでレコーディングタスクを作動させていないかチェックして、同時にAPI 3.0の[CreateRecordTask](https://intl.cloud.tencent.com/document/product/267/30847)インターフェースまたはAPI 2.0のLive_Tape_Startインターフェースを呼び出してレコーディングタスクを開始してください。

> ! 
> - LVBレコーディングを旧バージョンのコンソールで作動させていて、新バージョンのコンソールを停止させる必要がある場合は、[チケットを提出](https://console.cloud.tencent.com/workorder/category)していただくことで担当者が解決にご協力します。 
> - 上記の方法で問題を解決できない場合は、[チケットを提出](https://console.cloud.tencent.com/workorder/category)で解決をお求めになられれば、専門家が対応します。






