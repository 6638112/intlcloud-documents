[](id:que1)
### CSSレコーディングの原理はどのようなものですか。
![img](https://main.qcloudimg.com/raw/9c9d31c6ffec97d2b8b4042b7a673cbc.jpg)

1つのCSSストリームで、レコーディングを有効にすると、オーディオビデオデータはレコーディングシステムにRelayされます。キャスターの携帯電話からプッシュされた各フレームデータは、レコーディングシステムによってレコーディングファイルに書き込まれます。

CSSストリームが中断されると、アクセス層は、レコーディングサーバーに、書き込まれているファイルをレコーディングし、ファイルをVODシステムに保存して、インデックスを生成するようにすぐに通知します。その後、VODシステムで新しいレコーディングファイルを見ることができます。同時にサーバーでレコーディングイベント通知を設定している場合は、レコーディングシステムは**インデックスID **および**オンライン再生アドレス**の情報をサーバーに送信します。

ただし、クラウドでの転送中や大きなファイルの処理中にエラーが発生しやすくなります。そのため、成功率を確保するために、1個のレコーディングファイルの最大記録長は120分間とし、RecordIntervalパラメータを使用してより短いセグメントを指定できます。

[](id:que2)
###　ライブストリーミングでビデオをレコーディングできないのはなぜですか。 
CSSレコーディングの再生機能は、Tencent Cloudの**VODサービス**に依存しています。レコーディング機能を使用するには、まずTencent Cloudの管理コンソールで[VODサービスをアクティブ](https://console.cloud.tencent.com/vod)にする必要があります。CSSレコーディングの再生に関する操作の詳細な説明については、[レコーディングと再生](https://intl.cloud.tencent.com/document/product/1071/41868)をご参照ください。

[](id:que3)
###  ライブストリーミングが終了してから、どの位経てばレコーディングファイルを見ることができますか。 
レコーディングファイルは、ライブストリーミングが終了してから約5分後に取得できます。 レコーディングが終了するとイベントコールバックがトリガーされ、正確なレコーディング終了時間が提供されます。詳細については、[コールバック設定](https://intl.cloud.tencent.com/document/product/267/31074)をご参照ください。

[](id:que4)
### CSSレコーディング終了後に、レコーディングファイルを取得するにはどうすればよいですか。
生成されたレコーディングファイルは、VODシステムに自動的に保存されます。クライアントが保存するには、VODサービスをアクティブにする必要があります。レコーディングファイルは、次の方法で取得できます。
- [VODコンソール](https://intl.cloud.tencent.com/document/product/267/31563)
- [レコーディングイベント通知](https://intl.cloud.tencent.com/document/product/267/31563)
- [VOD API照会](https://intl.cloud.tencent.com/document/product/267/31563)

[](id:que5)

### ライブストリーミングビデオを移行できますか。
ビデオのダウンロードアドレスを取得して、ご自分で移行する必要があります。 

[](id:que6)
###  ビデオの保存期間はどうやって設定するのでしょうか。
現在CSSのビデオ保存に時間制限はなく、コンソールとRSET APIインターフェースを使用してビデオファイルを管理することができます。 

[](id:que7)
### 1回のライブストリーミングレコーディングでファイルはいくつ生成されますか。
-**MP4、FLV、AAC形式のレコーディング**：1ファイルの長さは1分～120分間に制限されます。[レコーディングテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/30845)インターフェースのRecordIntervalパラメータによって、より短いセグメントを指定できます。

  - 1回のライブストリーミングのプロセスが非常に短く、レコーディングモジュールの開始前にプッシュが終了した場合、システムはレコーディングファイルを生成できません。
  - 1回のライブストリーミング時間がそれほど長くなく（RecordIntervalより短い）、途中プッシュが中断されない場合、1個のファイルのみ生成されます。
  - 1回のライブストリーミング継続時間がとても長い（RecordIntervalより長い）場合、RecordIntervalで指定された時間の長さに従ってセグメント化されますが、これは分散システムで継続時間が長いファイルのフロー時間が不確実になるのを回避するためです。
  - 1回のライブストリーミング中にプッシュが中断された場合（その後SDKは再プッシュを試行します）、中断が発生するたびに新しいセグメントが1個生成されます。
- **HLS形式のレコーディング**：1ファイルの最長時間に制限はありません。レコーディング再開タイムアウト期間を超えると、レコーディングを続行するための新しいファイルが作成されます。レコーディング続行タイムアウトは0s～1800sで設定できます。

[](id:que8)
### どのファイルが特定のライブストリーミングに属しているかを知る方法はありますか。

実際、PAASとしてのTencent Cloudでは、お客様の1回のライブストリーミングがどのように定義されているかわかりません。1回のライブストリーミングが20分間続いたが、その途中でネットワークスイッチングによるプッシュの中断が発生し、ストリーミングが1回停止した場合、および1回手動で停止して再起動した場合は、ライブストリーミングを1回と数えますか、それとも3回と数えますか。

通常のモバイルライブストリーミングのシナリオでは、一般的に以下のとおり、インターフェース間のこの時間を1回のライブストリーミングと定義しています。

したがって、Appのクライアントから送信される時間情報はとても重要です。この時間内にレコーディングされたすべてのファイルがこのライブストリーミングに属することを定義する場合は、ライブストリーミングコードおよび時間情報を使用して受信したレコーディング通知を取得する必要があります（各レコーディング通知イベントは、**ストリームID**、**開始時間**、**終了時間**などの情報を伴っています）。

[](id:que9)
### セグメントはどのように結合すればいいですか。
現在、Tencent Cloudは、クラウドAPIインターフェースを使用してビデオセグメントの結合をサポートします。 

[](id:que10)
###  レコーディングテンプレートを1個しか設定していないのに、2つのCSSレコーディングのパスがある場合、どのように解決すればいいですか。 
一般的に、現在のプッシュドメイン名で2つのレコーディングタスクがあることが原因である可能性があります。次のような考え方でトラブルシューティングすることをお勧めします。

1. コンソールのレコーディング設定情報を確認して、レコーディングファイルのタイプに1つの形式のみが選択されていることを確認します。
   - コンソールが**新バージョンのコンソール**の場合は、[**ドメイン名管理**](https://console.cloud.tencent.com/live/domainmanage)に進み、プッシュドメイン名の右側にある**管理**をクリックして**テンプレート設定**の**レコーディング設定**に進み、関連テンプレートの「レコーディング形式」情報を確認します。
   - コンソールが**旧バージョンのコンソール**の場合は、 [**CSSコードアクセス**](https://console.cloud.tencent.com/live/livecodemanage)>**アクセス設定**に進み、CSSレコーディング設定情報をチェックします。  
2. レコーディングタスク作成および [レコーディングテンプレートの作成](https://intl.cloud.tencent.com/document/product/267/34223)の2種類の方法を使用できます。実際のご使用にあたっては必要に応じてどちらか1種類をお選びください。同じライブストリーミングに対してレコーディングテンプレートとレコーディングタスクの両方を作成すると、レコーディングが繰り返されます。コンソールでレコーディングタスクが有効になっているかチェックするとともに、API 3.0の[CreateRecordTask](https://intl.cloud.tencent.com/document/product/267/37309)インターフェースまたはAPI 2.0のLive_Tape_Startインターフェースを呼び出して、レコーディングタスクが有効になっているかチェックしてください。

> ! 
> - CSSレコーディングを旧バージョンのコンソールで有効にして、新バージョンのコンソールを無効にする必要がある場合、 [チケットを提出](https://console.cloud.tencent.com/workorder/category) して、お問い合わせください。 
> - 上記の方法で問題が解決しない場合は、[チケットを提出](https://console.cloud.tencent.com/workorder/category) してください。専任の担当者が対応します。

[](id:que11)
### CSSでオーディオのみのビデオをレコーディングするにはどうすればよいですか。	
ルーム指定レコーディングでは、プッシュアドレスの後にプッシュパラメータを追加します。
- **オーディオのみ**：record_type=audio。
- **ビデオ**：record_type=video。

ビデオとオーディオのみのどちらも必要な場合は、先にビデオをレコーディングし、その後VOD内でオーディオのみにトランスコードすることができます。

[](id:que12)
### CSSビデオに永続的な有効期間を設定するにはどうすればよいですか。
CSSレコーディングテンプレートで保存期間を0に設定すると、永続的な保存を意味します。詳細については、[CSSレコーディング](https://intl.cloud.tencent.com/document/product/267/34223)をご参照ください。

[](id:que13)
### CSSはレコーディング終了後の先頭および末尾への自動リダイレクトをサポートしていますか。
プレーヤーは先頭と末尾を識別できないため、この機能は実現できません。次の方法を参照して実現することができます。
- レコーディング後のビデオをトリミングします。詳細については、[ビデオ編集](https://intl.cloud.tencent.com/document/product/266/34126)をご参照ください。
- プレーヤーの進捗を調整します。

[](id:que14)
### CSSでレコーディングを忘れた場合、ライブストリーミングの内容を復元するにはどうすればよいですか。
Tencent Cloud側がユーザーのライブストリーミング内容を自主的にレコーディングすることはありませんので、復元にご協力することはできません。サードパーティのサービスプロバイダも同様です。



