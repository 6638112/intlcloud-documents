## 1. 혼합 스트림 트랜스코딩 문제
[](id:m1)
### TRTC에서 사용하고 있는 것이 신규 mcu 혼합 스트림인지 아니면 기존 클라우드 혼합 스트림인지 어떻게 알 수 있습니까?
다음 조건을 충족하고, 클라이언트 로그에 mcumix = 1이라고 출력되면 신규 mcu 혼합 스트림입니다.
- 2020년 01월 09일 및 이후 생성된 애플리케이션.
- TRTC SDK 6.9 이후 버전.

[](id:m2)
### TRTC에서 혼합 스트림 인터페이스 호출에 실패할 경우 어떻게 해결합니까?
1. [TRTC 콘솔](https://console.cloud.tencent.com/trtc)에서 **자동 릴레이 푸시 스트림**이 활성화 상태인지 확인합니다.
2. onSetMixTranscodingConfig() 인터페이스를 수신하고 반환된 오류 정보에 따라 수정합니다.
3. SDK 인터페이스를 통해 릴레이 스트림 ID를 사용자 정의하면 기존 클라우드 혼합 스트림 방식은 혼합 스트림에 실패합니다.
4. onSetMixTranscodingConfig() 반환 성공에도 불구하고 릴레이 CDN 풀 스트림이 되지 않는다면 가능한 원인은 재생 도메인 미설정입니다. 재생 도메인 관련 설정을 확인하시기 바랍니다.

## 2. 클라우드 녹화 문제

[](id:r1)
### 단일 스트림을 녹화하는 방법은 무엇입니까?
- 콘솔에서 **전역 자동 녹화**로 설정하면, 방의 각 단일 스트림은 푸시 스트림할 때 자동으로 녹화됩니다. 자세한 내용은 [전역 자동 녹화](https://intl.cloud.tencent.com/document/product/647/35426)를 참고하십시오.
- 콘솔에서 **특정 사용자 녹화**로 설정하면, 방 입장 시 TRTCParams의 userDefineRecordId 매개변수에서 녹화할 스트림을 설정할 수 있으며, 자세한 내용은 [특정 사용자 녹화(SDK API)](https://intl.cloud.tencent.com/document/product/647/35426)를 참고하십시오.
- 전역 자동 녹화를 원하지 않고 플랫폼에서 SDK API를 지원하지 않는 경우 [Cloud Streaming Services](https://intl.cloud.tencent.com/products/css)의 [라이브 방송 녹화](https://intl.cloud.tencent.com/document/product/267/31563)를 통해 단독 녹화할 수 있습니다.

[](id:r2)
### 혼합 스트림을 녹화하는 방법은 무엇입니까?
- **전역 자동 녹화**를 설정하면 혼합 스트림도 자동으로 녹화됩니다.
- **특정 사용자 녹화**를 설정하고 서버 REST API를 사용하여 혼합 스트림을 트리거하는 경우, 혼합 스트림 인터페이스에서 매개변수 OutputParams.RecordId를 지정하여 혼합 스트림 녹화를 활성화합니다. 자세한 내용은 [혼합 스트림 매개변수-OutputParams](https://intl.cloud.tencent.com/document/product/647/36760)를 참고하십시오.
- **특정 사용자 녹화**을 설정하고 클라이언트 SDK API로 혼합 스트림을 트리거한 후, 호스트가 방에 입장할 때 TRTCParams의 userDefineRecordId 매개변수를 설정하면 혼합 스트림이 녹화됩니다. 자세한 내용은 [특정 사용자 녹화(SDK API)](https://intl.cloud.tencent.com/document/product/647/35426)를 참고하십시오.

[](id:r3)
### 녹화는 언제 시작됩니까?
- 단일 스트림: 몇 초간의 푸시 스트림(네트워크 지연 및 키 프레임 대기) 후 녹화를 시작합니다.
- 혼합 스트림: 몇 초간의 혼합 스트림(네트워크 지연 및 키 프레임 대기) 후 녹화를 시작합니다.

[](id:r4)
### 녹화는 언제 종료됩니까?
- 단일 스트림 녹화는 스트림이 중단된 후 종료되며, 재개 시간이 설정되어 있으면 녹화 재개 시간 초과 후 녹화가 종료됩니다.
- SDK setMixTranscodingConfig()를 호출하여 트리거된 혼합 스트림은 호스트 스트림 종료되거나 setMixTranscodingConfig()를 재호출하여 매개변수가 null로 설정되면 종료됩니다.
- REST API StartMCUMixTranscode 서버 호출로 트리거된 혼합 스트림은 모든 사용자가 퇴장한 후 자동으로 중지되거나, 중간에 StopMCUMixTranscode를 호출하면 수동으로 중지됩니다.

[](id:r5)
### 녹화 파일과 콜백은 언제 생성됩니까?
- 녹화 완료 후 5분이 지나면 [Video on Demand](https://www.tencentcloud.com/products/vod) 플랫폼으로 녹화 파일이 전송되고 콜백이 트리거됩니다.
- 녹화 재개 시간을 설정한 경우, 상기 대기 시간에 녹화 재개 타임 아웃 시간이 합쳐집니다. 녹화 재개 시간이 설정되어 있으면 중단된 녹화가 끝나지 않고 녹화 파일 및 콜백이 발생하지 않습니다.
- MP4, FLV 및 AAC 유형은 단일 파일 최대 길이(콘솔에서 설정 가능) 제한이 있습니다. 최대 길이를 초과하면 녹화 파일 및 콜백이 생성되며, 그 후 새로운 녹화 파일이 계속 생성됩니다.

[](id:r6)
### 녹화 파일은 어떻게 받나요?
- VOD 콘솔과 VOD REST API를 통해 수동으로 조회할 수 있으며, 자세한 내용은 [녹화 파일 검색](https://intl.cloud.tencent.com/document/product/647/35426)을 참고하십시오.
- 녹화 파일의 다운로드 주소는 콜백 방식을 통해 얻을 수 있으며, 자세한 내용은 [녹화 파일 수신](https://intl.cloud.tencent.com/document/product/647/35426)을 참고하십시오.

[](id:r6)
### 녹화 파일은 어떤 경우에 생성되지 않습니까?
- 통화가 정상적으로 이루어지지 않거나 업스트림 푸시 스트림 시간이 너무 짧은 경우(30초 이상 권장) 녹화 파일이 생성되지 않을 수 있으며, 업스트림 데이터 정상 여부는 대시보드를 통해 확인할 수 있습니다.
- **특정 사용자 녹화**를 설정한 경우, 방 입장 시 TRTCParams의 userDefineRecordId가 미설정 상태이면 단일 스트림이 녹화되지 않습니다.
- **특정 사용자 녹화**를 설정하고 서버 REST API를 사용하여 혼합 스트림을 트리거한 경우, 혼합 스트림 인터페이스에 매개변수 OutputParams.RecordId 미지정 시 혼합 스트림이 녹화되지 않습니다.
- **특정 사용자 녹화**를 설정하고 클라이언트 SDK API를 사용하여 혼합 스트림을 트리거한 경우, 호스트가 userDefineRecordId를 설정하지 않은 상태이면 혼합 스트림이 녹화되지 않습니다.

[](id:r7)
### 녹화 콜백은 어떤 경우에 수신되지 않습니까?
- 먼저 콘솔을 통해 녹화 파일이 생성되었는지 확인하고, 생성되지 않은 경우 이전 방법에 따라 진단할 수 있습니다. 파일 검색은 [녹화 파일 검색](https://intl.cloud.tencent.com/document/product/647/35426)을 참고하십시오.
- 녹화 파일이 생성되었지만 콜백이 수신되지 않은 경우 먼저 콜백이 올바르게 설정되었는지 확인하십시오. 콜백 설정은 [녹화 파일 수신](https://intl.cloud.tencent.com/document/product/647/35426)을 참고하십시오.
- 콜백이 올바르게 설정되었다면, 서버가 콜백을 정상적으로 처리할 수 있는지 여부를 확인하십시오. 예를 들어, CURL 시뮬레이션을 통해 콜백 요청이 정상적으로 처리될 수 있는지 테스트할 수 있습니다.

[](id:r8)
### 왜 이렇게 많은 녹화 파일이 생성되나요?
- **전역 자동 녹화**를 설정하면 방의 모든 스트림이 자동으로 녹화됩니다.
- 녹화 재개 시간을 설정하지 않으면 푸시 스트림이 중단 후 재개될 때마다 새로운 녹화 파일이 생성됩니다.
- MP4, FLV, AAC 유형은 단일 파일의 최대 재생 시간 제한이 있으며 최대 재생 시간을 초과하면 녹화 파일 및 콜백이 생성된 후 계속해서 새로운 녹화 파일이 생성됩니다.
- 방에서 혼합 스트림을 여러 번 트리거하면 여러 혼합 스트림 녹화 파일이 생성될 수 있습니다.

