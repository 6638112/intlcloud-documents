SDKの3Dエフェクト機能はバージョン0.3.0からサポートしています。ご利用前にバージョン情報をご確認ください。

3Dエフェクトとは、ユーザーが標準のヘッドモデルをベースにして、関連の3Dソフトウェア（Blender、3DSMaxなど）で関連の3Dモデルを制作し、コンソールにアップロードする際、よりリアルな効果を実現できる機能を指します。

## 素材ルール

モデルによりぴったりと合わせ、よりリアルな効果を得られるようにするため、Tencentの提供する[標準ヘッドモデル](https://webar-static.tencent-cloud.com/assets/model/3D-temp.glb)をダウンロードし、標準ヘッドモデルをベースにして3D素材を制作してください。

| タイプ | ルール |
|---------|---------|
| モデル形式 | GLBファイルまたはGLTFフォルダ |
| モデルサイズ | ロード時間を考慮し、1つのモデルのサイズは5M以内としてください |
| モデル面数 | パッケージボリュームを考慮し、1つのモデルの面数は10万面以内としてください |
| テクスチャマップ | 正方形のPNG形式で、1枚のマップは1024\*1024以内とします。一般的には256、512、1024のサイズがよく用いられます<br>解像度を保証すると同時に、マップのサイズをできるだけ圧縮してください |
| マテリアル属性 | 表（曲）面にはプリンシプルBSDF（Principled BSDF）を使用します。これを使用しなければマテリアルマップのレンダリング異常が発生します |

## 制作手順

### ステップ1：素材の制作

1. 3D素材用標準ヘッドモデルをダウンロードし、3Dソフトウェアにインポートします（ここではBlenderを例にとります）。ヘッドモデルに合った3D素材を制作し、GLBまたはGLTFタイプとしてエクスポートします。


>!
>- 素材を撮影者のアングルによりぴったり合わせるため、デフォルトのヘッドモデルの位置、ズームなどの変換属性を任意に変更しないでください。
>- エフェクトパッケージのボリュームを抑え、リソースをより速くロードできるようにするため、エクスポート形式はGLBを第一選択とすることを推奨します。

### ステップ2：コンソールへのインポート

1. コンソールの素材制作ページを開くと、デフォルトでは2Dエフェクト用の内蔵モデルが表示されます。上部の**3Dエフェクト**をクリックすると、3D編集用モデルに切り替わり、上記の標準ヘッドモデルと同一のモデルになります。
2. 右側の**モデル選択**をクリックすると、モデルタイプ選択ウィンドウがポップアップし、データタイプに応じて異なるエントリーを選択できます。ここではGLBモデルを例に、インポートの流れをデモンストレーションします。


>!
>- 3Dエフェクトシナリオは1つのみ追加できます。複数の3Dモデルをインポートしたい場合は、左側リスト内の**+**をクリックして追加できます。
> -  左側ノードをクリックすると、現在編集中の3Dモデルに切り替わります。


### ステップ3：素材パラメータの調整
理論上は、モデルを上記のデフォルトのヘッドモデルをベースにして作成し、コンソールにインポートすれば直接使用できるため、二次調整の必要はありません。特別な状況下でモデルの関連パラメータを調整したい場合は、上部の**編集属性の切り替え**をクリックし、下の編集エリアでドラッグして位置決定を行うか、または右側の関連属性パラメータを直接変更することで調整できます。

>!デフォルトのヘッドモデルをベースにして作成するのではなく、既存の素材をインポートする場合、モデルのタイプに応じて対応する素材の追跡点情報を調整することで、より正確な位置決定効果を実現できます。例えば眼鏡タイプのモデルでは鼻梁を追跡点に、ひげタイプでは人中を追跡点に選択することなどが可能です。

### ステップ4：効果のプレビュー
右側のプレビューウィンドウで、素材を内蔵モデルの顔に配置した際の効果をプレビューできます。またコンピュータのカメラに切り替え、ご自身の顔での効果を確認することもできます。

### ステップ5：エクスポート
効果を確認した後、右上隅の**素材エクスポート**をクリックし、ポップアップボックスからカバー選択、エフェクト名などの情報入力を行うと**公開**が可能になります。公開済みの素材は**素材管理**リストで確認できます。
