스마트 콜드 스토리지는 VOD 미디어 자산 관리 기능을 기반으로 VOD 서비스를 사용하는 개발자의 스토리지 비용을 줄이기 위해 미디어 라이프사이클 관리 기능을 도입했습니다. 개발자는 자신의 비즈니스 특성에 따라 사용자 스토리지 비용을 효과적으로 줄이고 VOD 파일의 스토리지 유형을 일정 정책에 따라 표준 스토리지에서 표준IA 스토리지, 아카이브 및 딥 아카이브로 전환하여 자신의 미디어 파일을 더 유연하게 관리할 수 있습니다.

## 이용 사례
- **라이브 커머스**: 문화부 [<인터넷 거래 감독 관리 조치>](http://gkml.samr.gov.cn/nsjg/fgs/202103/t20210315_326936.html)에 따라, 네트워크 라이브 방송 서비스 제공자의 네트워크 거래 활동의 라이브 비디오 보관 기간은 라이브 방송 종료 후 3년 이상이어야 합니다. 일부 영상은 재생 횟수가 적거나 전무하고, 관련 부서 검토용으로만 사용되므로, VOD에 표준 스토리지 유형으로 저장합니다. 미디어 자산의 스마트 콜드 스토리지 기능은 고객이 스토리지 비용을 효과적으로 줄이는 데 도움이 될 수 있습니다.
-**저빈도 액세스 미디어 콜드 스토리지**: 비디오 포털, 스트림 미디어, UGC 콘텐츠 관리 플랫폼 및 사용자가 자주 액세스 및 시청하지 않는 미디어의 경우, 오프라인 전환 시 더 높은 스토리지 비용이 발생합니다. VOD 미디어 자산의 스마트 콜드 스토리지 기능은 액세스 횟수를 통해 미디어 파일을 콜드 스토리지하여 스토리지 비용을 효과적으로 절감하고 저빈도 시청 요구 사항을 충족할 수 있습니다.
- **미디어 아카이브**: 뉴스 미디어, 라디오 및 TV 산업의 경우 일부 미디어 파일은 적시성이 강합니다. 이러한 미디어는 일반적으로 추후 필요할 때 검색하여 시청할 수 있도록 오랜 기간 동안 과거 데이터로 저장하므로, 실시간성에 대한 요구 사항은 높지 않습니다. 이러한 경우 미디어를 아카이브 또는 딥 아카이브로 변환하여 스토리지 비용을 절감할 수 있습니다.

## 전제 조건
1. Tencent Cloud 계정 [가입](https://intl.cloud.tencent.com/register?&s_url=https%3A%2F%2Fcloud.tencent.com%2F) 및 [로그인](https://intl.cloud.tencent.com/login?s_url=https%3A%2F%2Fcloud.tencent.com%2F) 후, 계정 실명 인증을 완료합니다.
2. Tencent Cloud VOD 서비스를 활성화합니다. 활성화하지 않은 경우 [VOD 서비스](https://console.cloud.tencent.com/vod/overview)에서 활성화하십시오.
3. 정책 생성 관련 자세한 내용은 [미디어 자산 콜드 스토리지](https://intl.cloud.tencent.com/document/product/266/42092)를 참고하십시오.

## 사용 설명
사용자가 미디어 자산의 콜드 스토리지 기능을 편리하게 사용하려면, [스토리지 유형](#type), [데이터 검색 및 검색 모드](#retake) 및 [정책 관리](#strategy)의 개념을 이해해야 합니다.
### 스토리지 유형[](id:type)
사용자 미디어 파일이 VOD에 저장될 때의 스토리지 유형입니다. VOD에서는 표준 스토리지, 표준IA 스토리지, 아카이브 및 딥 아카이브의 스토리지 유형을 제공합니다. 그 특성은 다음 표와 같습니다.

| 스토리지 유형   | 표준 스토리지 | 표준IA 스토리지 | 아카이브  | 딥 아카이브   |
| ------ | ---- | ---- | ----- | -------- |
| VOD 기본값  | 예    | 아니오    | 아니오     | 아니오        |
| 스토리지 비용   | 높음    | 중간    | 낮음     | 매우 낮음       |
| 액세스 성능   | 높음    | 낮음    | 액세스 미지원 | 액세스 미지원    |
| 데이터 검색 요금 | 없음    | 없음    | 있음 | 있음    |
| 지원 단지   | 전체   | 전체   | 전체    | 베이징, 상하이, 충칭 |

표준 스토리지는 VOD의 기본 스토리지 유형입니다. 라이브 방송 녹화, 다양한 업로드 방법 또는 MPS 작업으로 생성된 파일은 모두 표준 스토리지입니다.

| 속성 | 내림차순으로 비교 |
|---------|---------|
| 스토리지 비용 | 표준 스토리지 > 표준IA 스토리지 > 아카이브 > 딥 아카이브 |
| 액세스 성능 | 표준 스토리지 > 표준IA 스토리지 |
>?
>- 아카이브 및 딥 아카이브는 직접 액세스를 지원하지 않으며 먼저 검색해야 합니다. VOD는 **표준 스토리지**로의 검색만 지원합니다.
>- 액세스 성능은 비디오 시청 시 **첫 화면 시간, 랙 발생률** 등 지표에 영향을 미치므로, **액세스 빈도가 높은 온라인 서비스의 경우 스토리지 유형을 변경하지 않는 것이 좋습니다**.

VOD는 변경될 다양한 스토리지 유형을 지원하며 허용되는 스토리지 유형 변경은 다음과 같습니다.

| 소스 스토리지 유형  | 타깃 스토리지 유형           |
| ------ | ---------------- |
| 표준 스토리지   | 표준IA 스토리지, 아카이브, 딥 아카이브 |
| 표준IA 스토리지   | 표준 스토리지, 아카이브, 딥 아카이브 |
| 아카이브   | 표준 스토리지             |
| 딥 아카이브 | 표준 스토리지             |
>?
>- 아카이브 및 딥 아카이브를 표준 스토리지 이외의 다른 스토리지 유형으로 변경하려면 먼저 표준 스토리지로 변경한 다음 표준 스토리지에서 최종 타깃 스토리지 유형으로 변경해야 합니다.
>- 스토리지 유형 변경은 FileId를 단위로 합니다. 즉, 원본 파일과 MPS 파일의 스토리지 유형이 동일하며, FileId 아래의 일부 파일에 대해 스토리지 유형 개별 지정은 지원하지 않습니다.

### 데이터 검색 및 검색 모드[](id:retake)
#### 데이터 검색
재생, MPS 시작 등을 포함하여 아카이브 또는 딥 아카이브로 변경된 미디어는 직접 액세스할 수 없습니다. 액세스가 필요한 경우 위에서 설명한 스토리지 유형 변경 작업을 사용할 수 있습니다. 그러나 때로는 개발자가 짧은 시간 동안만 액세스하면 되며 액세스가 끝난 후에도 미디어가 아카이브 또는 딥 아카이브를 계속 유지할 수 있기를 바라는 경우, 상기 방법은 적합하지 않습니다. 이러한 시나리오에 대해 VOD는 데이터 검색 기능을 제공합니다.

VOD는 아카이브 및 딥 아카이브에 대한 두 가지 검색 작업인 영구 검색과 지정 기간 검색을 지원합니다.

| 아카이브/딥 아카이브에 대한 작업 | 스토리지 유형 변경   | 검색       |
| ------------------- | -------- | -------- |
| 실시간성                 | 비동기화       | 비동기화       |
| 모드                  | 초고속/표준/배치 | 초고속/표준/배치 |
| 유효기간                 | 영구       | 지정 기간     |
| 복제본 생성                | 아니오        | 예        |

1. 검색 후 VOD는 스토리지 유형이 표준 스토리지인 미디어 사본을 생성합니다.
2. 사본 검색은 유효 기간(일)이 있습니다. 유효기간 내 미디어 액세스는 허용되며, 유효기간 종료 후 복사본은 자동으로 삭제되어 미디어 액세스가 불가합니다.
3. 사본의 유효 기간 내 표준 스토리지 요금이 추가로 발생합니다.
4. 사본의 유효 기간 내 검색 작업을 재시작할 수 없습니다.

#### 검색 모드
아카이브 및 딥 아카이브에 대한 스토리지 유형 및 검색 작업을 변경하기 위한 여러 모드가 있습니다. 각 모드의 최종 효과는 동일하며 차이점은 속도와 요금(즉, 검색 요금)에 있습니다.

| 검색 모드 | 아카이브 검색 소요 시간 | 딥 아카이브 검색 소요 시간 |
| ---- | -------- | ---------- |
| 초고속 모드 | 5분      | 미지원        |
| 표준 모드 | 5시간      | 24시간       |
| 배치 모드 | 12시간     | 48시간       |
>?
>- 미디어(하나의 FileId로 표시)는 원본 파일, 트랜스코딩된 파일, 화면 캡처 파일 등과 같이 스토리지에 있는 많은 파일을 포함할 수 있습니다. 각 파일의 실제 동결 해제 완료 시간은 순차적일 수 있습니다. VOD는 개별 파일의 동결 해제 완료 시간이 아닌 전체 미디어 최대 동결 해제 소요 시간을 기준으로 동결 해제 완료 시간을 계산합니다. 이 최종 동결 시간이 되기 전에 미디어 하위 파일이 모두 실제로 동결 해제되더라도 미디어는 여전히 미결 상태로 표시되어 액세스가 허용되지 않습니다.
>- 미디어가 동결 해제 완료로 표시되는 시간은 실제 동결 해제 완료 시점보다 늦기 때문에, 미디어의 동결 해제 사본의 사용 가능 시간은 예상 시간보다 짧습니다. 동결 해제 후 복사본의 사용 가능 시간을 충분히 확보하려면 딥 아카이브 동결 해제 시 1일의 유효 기간을 추가하는 것이 좋습니다.

### 정책 관리[](id:strategy)
개발자가 많은 미디어의 라이프사이클을 통합된 방식으로 관리할 수 있도록 하기 위해 VOD는 미디어 자산 정보와 미디어 파일 재생 통계 데이터를 결합하여 정책 기반 스마트 관리 시스템을 개발하였습니다.

VOD 백엔드는 매일 관리 작업을 실행하여 지정된 정책에 부합한 미디어에 대해 스토리지 유형을 변경 작업을 수행합니다.
#### 정책 기능
##### 복합 필터링
이 정책을 통해 개발자는 일련의 조건을 지정하고 **동시에** 모든 조건을 충족하는 미디어의 스토리지 유형을 변경할 수 있습니다. 구체적인 필터링 조건은 다음과 같습니다.
- 비디오 미디어, 오디오 미디어, 이미지 미디어를 포함한 미디어 유형 필터링 조건
- 다음 형식의 미디어 생성 날짜 필터링 조건
 - 지정된 날짜 이전에 생성된 파일.
 - 지정된 날짜 이후에 생성된 파일.
 - 지정된 두 날짜 사이에 생성된 파일.
 - 지정된 일수 이전에 생성된 파일(현재 날짜에 따라 자동으로 변경됨).
 - 생성 시간 제한 없음(즉, 모든 미디어가 이 조건을 충족함).
- 미디어의 카테고리 ID 필터링 조건. 여러 카테고리 ID를 동시 지정 또는 제한 없음 설정 가능(즉, 모든 미디어가 이 조건을 충족함).
- 라이브 방송 녹화, 업로드, 비디오 편집 등을 포함한 미디어 소스 유형 필터링 조건. 여러 소스 유형을 동시 지정 또는 제한 없음 설정 가능(즉, 모든 미디어가 이 조건을 충족함).
- 미디어의 최근 재생 시간 필터링 조건. 지난 며칠 내 재생 횟수가 지정 횟수 미만인 미디어 필터링. 제한 없음 설정 가능(즉, 모든 미디어가 이 조건을 충족함).

##### 비활성화 정책
정책이 생성되면 자동으로 활성화되며 개발자는 필요에 따라 정책을 비활성화할 수 있습니다. 비활성화된 정책은 익일부터 다시 활성화될 때까지 관리 작업에서 무시됩니다.
>?정책이 비활성화된 후 해당 정책은 당일 관리 작업에 적용되거나 적용되지 않을 수 있습니다.

#### 제한
최대 10개의 정책을 설정할 수 있습니다.
정책 우선 순위를 지정할 수 없습니다. 미디어가 동시에 여러 정책에 히트되면 타깃 스토리지 유형에 따라 우선 순위가 자동으로 결정됩니다. 우선 순위는 딥 아카이브 > 아카이브 > 표준IA 스토리지 순입니다.

## VOD 스마트 콜드 스토리지 정책 설정
### 1단계: 콜드 스토리지 정책 생성
[VOD 콘솔](https://console.cloud.tencent.com/vod/media) (비관리자) 왼쪽 메뉴에서 [미디어 자산 관리]>[미디어 자산 콜드 스토리지]를 선택하고 [스마트 콜드 스토리지 정책]을 클릭합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/8c2143b18f7b88b715b3881e25062e9b.png)

### 2단계: 콜드 스토리지 정책 설정
![](https://qcloudimg.tencent-cloud.cn/raw/d0c4864520a38107b5f4c43d3b6ac56c.png)
사용자의 필요에 따라 콜드 스토리지 정책을 설정합니다.
예: 다음 이미지와 같이 미디어 30일 이내 재생 횟수가 300회 미만인 경우, 표준IA 콜드 스토리지 정책이 트리거되고, VOD는 모든 규칙을 충족하는 미디어를 콜드 스토리지합니다.

### 3단계: 설정 적용 확인
![](https://qcloudimg.tencent-cloud.cn/raw/098381b8a25eb591445aefc642c5447e.png)
