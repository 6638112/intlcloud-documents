## 概述

腾讯云StreamLink提供稳定安全的实时传输能力，满足视频供应商快速、稳定、低时延地传输视频流媒体需求。StreamLink控制台基于流维度进行管理，每一个流对应一个流的传输链路。基于StreamLink控制台可快速稳定地传输视频流媒体，同时还可对传输过程中的视频流进行全方位的质量监控。

## 前提条件

- 用于推流的IP地址。
- 已登录[媒体传输控制台](https://console.cloud.tencent.com/mdc/flow)。

## 操作步骤

### 一、选择地区

在创建新流前，选择您需新建流传输链路的起始点。目前可选择华东、亚洲、香港/澳门/台湾（中国地区）、美国西部和欧洲区域下的多个节点。若需更多节点部署及支持欢迎[联系我们](https://intl.cloud.tencent.com/contact-sales)。

![img](https://main.qcloudimg.com/raw/40f51b438e95684be5aa3a85293a612a.png)

### 二、创建新流

点击【创建流】进入创建界面，进行以下设置。

1. 填写新流的基本信息。

- 自定义输入流的名称。
- 选择最大带宽，可选10Mbps或20Mbps。

2. 填写输入源的信息。

- 输入源名称。
- 选择输入源的协议类型为SRT、RTMP或RTP。


>!
>- 当您选择输入源的协议类型为SRT时，需要配置延迟设置。此参数影响Server的发送以及接收buffer的大小，当网络状况不好时建议调大此参数。您可根据业务实际需求填写时延设置，默认120ms。
>- 延迟设置可对创建后给出的IP地址进行ping测试，确定最佳设置再进行修改。另外也可以直接使用默认值，然后调整发送侧的延迟设置即可达到相同的目的。
>- StreamLink支持SRT协议的加解密传输，若您推送至StreamLink的流为加密后的传输流，您可打开【解密配置】开关填入解密密钥，并选择密钥长度以供StreamLink对您上行流进行解密。
![img](https://main.qcloudimg.com/raw/612a69af560cc583b9e2a420f83db35d.png)

- 填写输入源的IP白名单（CIDR格式），将只允许白名单中的IP向此流进行推流。
- 您也可对流的输入源配置描述信息，以便于您对不同的输入源进行区分。

![img](https://main.qcloudimg.com/raw/9996153b4d81bff835b8a163366a9916.png)

填写设置完毕后，单击【创建】完成新流创建。

### 三、查看流

在流管理界面点击流名称，进入流的详情界面。在此您可查看流的基本信息、输入源基本信息、创建并配置输出节点和查看输出详情、查看日志和健康数据。

#### 信息

可查看流的基本信息，包括流ID、流名称、输入区域、状态和最大带宽。同时可点击【编辑】，更改流名称。

![img](https://main.qcloudimg.com/raw/5ea936332f14daa6c2494a0e9077a825.png)

#### 输入源

可查看输入源的基本信息和协议类型。包括输入源ID、输入源名称、主备输入地址、CIDR IP白名单和输入源描述。同时可点击【编辑】，更改输入信息。

>! 若传输流已配置输出节点，暂不支持修改输入源类型。

![img](https://main.qcloudimg.com/raw/74538cf1cd523d1a98d71531305c61c2.png)

#### 输出

StreamLink支持一路多出的设置，针对一个流的输入源您可配置不同地区的输出节点。在此可查看您所有的输出节点信息，也可新建/删除/编辑输出节点。

>! 已启动运行中的流无法进行新建、编辑和删除输出节点的操作。

1. 创建输出节点需填入输出名称、输出区域、输出协议类型SRT/RTMP/RTP、主/备IP目的地址和端口、以及输出描述。

2. StreamLink支持传输协议的转封装，您可在创建输出时选择您输出的协议类型，支持SRT、RTMP、RTP。当选择SRT输出协议类型时，需填写主/备IP目的地址及其端口。同时您可根据业务实际需求填写时延设置，默认120ms。

3. 单击【确认】保存新建输出节点。

>?
>- 输入协议为SRT时，输出协议不支持RTP。
>- 输出节点的主流与备流通道各自独立，与输入源的主备通道一一对应。即您向流的主通道推的流经过StreamLink传输后会通过主目的地址进行输出，而朝着流的备通道推的流经过StreamLink传输后会通过备目的地地址进行输出，两者各自独立。
>- 其中主输出地址为必填项，备输出地址为选填项。
>- 如果您需要对SRT协议的输出流进行加密，您可在此【开启加密】设置，填写加密密钥并选择密钥长度。

![img](https://main.qcloudimg.com/raw/df0ba72d6c50b12fc37e2763513cf31f.png)

4. 查看此流下所有输出节点信息，包括名称、输出ID、输出区域、协议类型、出口IP地址和IP目的地址。

![img](https://main.qcloudimg.com/raw/812429b52baa93b9b330a8b3b1104f2f.png)

5. 支持对输出节点信息进行编辑和删除。可更改输出节点的名称、主/备IP目的地址和端口、以及输出描述，**不支持修改输出区域和输出协议类型**。

![img](https://main.qcloudimg.com/raw/9d41cc9228d856869827be032433e12d.png)

#### 日志

您可在日志模块查看上行和下行过程中的事件信息。单击【确定】生成日志事件信息。包括以下信息：

- 时间：事件产生的时间。
- 类型：事件类型，包括输入-主流、输入-备流、输出-主流和输出-备流。支持筛选。
- 输入/输出名称：产生事件的输入/输出名称。
- 信息：事件具体信息。

>?
>- 可选择调整时区，默认选择当地时区。
>- 日志数据当前只支持查询5天以内、时间跨度为24小时以内的数据。

![img](https://main.qcloudimg.com/raw/4418b689e88eb332b885677e43cbe5a6.png)

#### 健康

您可在健康模块监控源和输出两部分上行和下行过程中流的质量。选择【主】/【备】查看主/备源或输出数据。单击【确定】生成相关数据。包括以下数据：

| 监控来源 | 带宽            | 视频            | 音频            | SRT协议指标     |                 |                                          |        |
| -------- | --------------- | --------------- | --------------- | --------------- | --------------- | ---------------------------------------- | ------ |
| 码率     | 帧率            | 码率            | 帧率            | 丢包率          | 重传率          | RTT                                      | 弃包数 |
| 源       | 输入/输出总带宽 | 输入/出视频码率 | 输入/出视频帧率 | 输入/出音频码率 | 输入/出音频帧率 | SRT协议相关参数，仅当选择SRT协议时显示。 |        |
| 输出     |                 |                 |                 |                 |                 |                                          |        |

 

>?
>- 可选择调整时区，默认选择当地时区。
>- 健康数据当前只支持查询5天以内、时间跨度为24小时以内的数据。
>- 视频、音频的码率和帧率右侧可切换选择具体哪路视频和音频。
>- 当协议为SRT时，右侧可切换选择显示参数为丢包率/重传率/RTT/弃包数。

![img](https://main.qcloudimg.com/raw/107263b0b3b1a1321222f891e24e136a.png)

![img](https://main.qcloudimg.com/raw/bc8dd565e63e74eb15e1f3868cdf9083.png)

### 四、启动/停止流

完成流及输出节点的创建后，点击【启动】即可运行流。当使用完毕后，点击【停止】即可停止运行流。

>! 未创建输出节点的流无法启动使用。

![img](https://main.qcloudimg.com/raw/df397e7413a9d3bb91956de33f9c2130.png)

### 五、删除流

若需删除流配置，点击【删除】即可删除该流的配置信息。

![img](https://main.qcloudimg.com/raw/c5d2f2a49521be8d02f0a8cb2bb805b9.png)
