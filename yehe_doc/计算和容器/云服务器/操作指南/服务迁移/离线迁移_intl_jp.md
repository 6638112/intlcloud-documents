


## 概要

サービス移行はTencent Cloudが企業ユーザー向けに開発した移行プラットホームです。この移行プラットホームはソース側ホストのOS、アプリケーションやアプリケーションデータなどをTencent Cloud Cloud Virtual MachineまたはCloud Block Storageに移行させることにより、企業のクラウド化・クロスクラウドプラットホームの移行、クロスアカウント/リージョンの移行またはハイブリッドクラウドのデプロイなどのサービス需要に対応できます。

サービス移行は、現在、オフライン移行とオンライン移行があります。オフライン移行は下記の2種類があります。
- [オフラインインスタンスマイグレーション](#cvmStep)は、システムディスクイメージ（またはシステムディスクイメージとデータディスクイメージ）を指定のCVMにマイグレーションします。
- [オフラインのデータ移行](#csmStep)、即ち、データイメージを指定したCloud Block Storageに移行することです。

## 前提条件

オフライン移行はTencent Cloud Cloud Object Storage（COS）のサポートが必要です。お客様が所在するリージョンがCOSの対応する範囲にあることを確保してください。
現在、COSの対応しているリージョン範囲は [リージョンおよびアクセスドメイン名](https://intl.cloud.tencent.com/document/product/436/6224)をご参照ください。

## 準備事項


<dx-alert infotype="notice" title="">
- 現在、Tencent Cloudのサービスマイグレーションがサポートするイメージフォーマットは、qcow2、vhd、vmdk、rawです。伝送とマイグレーションの時間を短縮できるよう、圧縮されたイメージフォーマットを使用することをお勧めします。
- イメージをアップロードするCOSリージョンはマイグレーションするCVMリージョンと一致している必要があります。
- オフラインマイグレーションの場合は、マイグレーション先のディスク容量よりアップロードするイメージファイルのサイズを大きくすることはできません。イメージファイルが50Gの場合、容量が50G以上のシステムディスクにインスタンスをマイグレーションします。
- オフラインマイグレーションは、スナップショットファイル（ファイル名が \*-00000\*.vmdkなどのスナップショットファイル）のマイグレーションをサポートしていません。

</dx-alert>



- イメージ作成ドキュメントに基づいて、移行するサーバのイメージファイルを作成してください。
 - Windowsシステムは [Windowsイメージ作成ドキュメンテト](https://intl.cloud.tencent.com/document/product/213/17815)をご参照ください。
 - Linuxシステムは [Linuxイメージ作成ドキュメンテト](https://intl.cloud.tencent.com/document/product/213/17814)をご参照ください。
- 作成したイメージファイルをCOSにアップロードします。  
 - イメージファイルは通常サイズが大きく、ページでのアップロードが中断しやすいため、COSCMDを利用してイメージをアップロードすることをお勧めします。操作の詳細については、[COSCMDツールドキュメント](https://intl.cloud.tencent.com/document/product/436/10976)をご参照ください。  
 - ほかのクラウドプラットホームからエクスポートしたイメージが圧縮パッケージ形式（例えば.tar.gz）の場合は、解凍する必要がなく、直接にCOSにアップロードし移行すればよいです。
- イメージをアップロードするCOSアドレスを取得します。
[Cloud Object Storageコンソール](https://console.cloud.tencent.com/cos5/bucket) で、先ほどアップロードしたイメージファイルを見つけ、ファイル情報を確認し、ファイルリンクを取得します。
- 移行先のCVMまたはCBSを用意します。
[ここをクリックしてCVMを購入する >>](https://buy.intl.cloud.tencent.com/cvm?tab=custom&step=1&devPayMode=hourly&regionId=8)
[ここをクリックしてCBS購入ガイドへ >>](https://intl.cloud.tencent.com/document/product/362/32414)


## 操作手順
<dx-tabs>
::: オフラインインスタンスマイグレーション[](id:cvmStep)
1. CVMコンソールにログインし、左側ナビゲーションで **[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
2. **新規作成**をクリックし、**インスタンスのマイグレーション**を選択します。
3. マイグレーションの準備が整ったことを確認し、**次へ**をクリックします。
4. 配置されているリージョンを選択し、タスク名、COSリンクとマイグレーションしたいCVMなどのマイグレーション設定情報を入力し、**完了**をクリックすると、マイグレーションタスクが正常に確立されます。
マイグレーション中に 「[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)」 ページを退出するか、または閉じることで、いつでもこのページに戻り、マイグレーションタスクの進捗を確認することができます。 
<dx-alert infotype="notice" title="">
- COSファイルでは、まず[パブリック読み取り・プライベート書き込み権限](https://intl.cloud.tencent.com/document/product/436/13327)を設定する必要があります。
- マイグレーションするインスタンスのシステムディスク容量はアップロードするイメージファイルサイズより大きくなければならず、小さい場合、タスクは失敗します。
- システムディスクイメージとデータディスクイメージを同時にインポートしたい場合は、マイグレーションするインスタンスが対応する数量のデータディスクをマウントする必要があります。
- ターゲットディスクの容量はソースディスクの容量以上（容量を上回ることを推奨）である必要があります。
</dx-alert>


:::
::: オフラインデータマイグレーション[](id:csmStep)
1. CVMコンソールにログインし、左側ナビゲーションで **[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
3.**新規作成**をクリックし、**データマイグレーション**を選択します。
4. マイグレーションの準備が整ったことを確認し、**次へ**をクリックします。
5. 配置されているリージョンを選択し、タスク名、COSリンクとマイグレーションしたいCBSなどのマイグレーション設定情報を入力し、**完了**をクリックすると、マイグレーションが正常に確立されます。
マイグレーション中に 「[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)」 ページを退出するか、または閉じることで、いつでもこのページに戻り、マイグレーションタスクの進捗を確認することができます。 
<dx-alert infotype="notice" title="">
- マイグレーションするCBSの容量はアップロードするイメージファイルサイズより大きくなければならず、小さい場合、タスクは失敗します。
- ターゲットディスクの容量はソースディスクの容量以上（容量を上回ることを推奨）である必要があります。
</dx-alert>


:::
</dx-tabs>

## よくあるご質問
詳細については、[サービス移行について](https://intl.cloud.tencent.com/document/product/213/32395)をご参照ください。





