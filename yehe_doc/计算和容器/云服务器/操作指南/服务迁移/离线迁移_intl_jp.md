以下のドキュメントはオフラインマイグレーションの使用方法を説明しています。


## 操作シナリオ

サービスマイグレーションは、Tencent Cloudが企業ユーザーのために研究開発したクラウドへのアクセスを容易にするためのマイグレーションプラットフォームです。マイグレーションプラットフォームは、移行元サーバーのOS、アプリケーションプログラムおよびアプリケーションデータをTencent CloudのCVM（Cloud Virtual Machine）またはCloud Block Storage（CBS）にマイグレーションすることによって、エンタープライズクラウドおよびクロスクラウドプラットフォームのマイグレーション、アカウント/リージョン間のマイグレーション、またはハイブリッドクラウドのデプロイといった業務ニーズを実現することができます。

現在、サービスマイグレーションには、オフラインマイグレーションとオンラインマイグレーションがあり、オフラインマイグレーションには次の2つが含まれます。
- [オフラインインスタンスマイグレーション](#cvmStep)は、システムディスクイメージを（インスタンスにマウントするデータディスクを同時に移行する場合は、システムディスクイメージおよびデータディスクイメージを）指定のCVMに移行します。
- [オフラインデータマイグレーション](#csmStep)は、データディスクイメージを指定のCBSに移行します。

## 前提条件

オフラインマイグレーションには、Cloud Object Storage（COS）のサポートが必要です。所在リージョンがCOSのサポート範囲であることを確認してください。
現在のCOSがサポートしているリージョンの範囲は、[リージョンとアクセスドメイン名](https://intl.cloud.tencent.com/document/product/436/6224)をご参照ください。

## 準備事項


<dx-alert infotype="notice" title="">
- 現在、Tencent Cloudのサービスマイグレーションがサポートするイメージフォーマットは、qcow2、vhd、vmdk、rawです。伝送とマイグレーションの時間を短縮できるよう、圧縮されたイメージフォーマットを使用することをお勧めします。
- イメージをアップロードするCOSリージョンはマイグレーションするCVMリージョンと一致している必要があります。
- システムディスクイメージとデータディスクイメージを同時にインポートしたい場合は、マイグレーションするインスタンスが対応する数量のデータディスクをマウントする必要があります。
- ターゲットディスクの容量はソースディスクの容量以上（容量を上回ることを推奨）である必要があります。
- オフラインマイグレーションは、スナップショットファイル（ファイル名が \*-00000\*.vmdkなどのスナップショットファイル）のマイグレーションをサポートしていません。

</dx-alert>



- イメージ制作ドキュメントに従って、サーバーの移行が必要なイメージファイルを作成してください。
  - Windowsシステムについては、[Windowsイメージ制作ドキュメント](https://intl.cloud.tencent.com/document/product/213/17815)をご参照ください。
  - Linuxシステムについては、[Linuxイメージ制作ドキュメント](https://intl.cloud.tencent.com/document/product/213/17814)をご参照ください。
- 作成したイメージファイルをCOSにアップロードします。  
  - イメージファイルは一般的にサイズが大きいため、ウェブページでのアップロードは切断されやすいので、COSCMDを使用したイメージのアップロードをお勧めします。操作の詳細については、 [COSCMDツールドキュメント](https://intl.cloud.tencent.com/document/product/436/10976)をご参照ください。  
  - 他のプラットフォームからエクスポートしたイメージが圧縮パッケージ形式（例えば .tar.gz）である場合は、ご自身で解凍をする必要はありません。そのままCOSにアップロードし、移行します。
- イメージをアップロードしたCOSアドレスを取得します。
[COSコンソール](https://console.cloud.tencent.com/cos5/bucket) では、アップロードしたばかりのイメージファイルを探し、イメージファイルの詳細ページで一時リンクをコピーします。
- 移行するCVMまたはCBSを用意します。
  - [CVMの購入に進む](https://buy.intl.cloud.tencent.com/cvm?regionId=5&projectId=-1)
  - [CBS購入ガイドラインを確認](https://intl.cloud.tencent.com/document/product/362/32414)


## 操作手順
<dx-tabs>
::: オフラインインスタンスマイグレーション[](id:cvmStep)
1. CVMコンソールにログインし、左側ナビゲーションの**[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
2. 「オフラインマイグレーション」のページで、**インスタンスの移行の作成**をクリックします。
3. ポップアップした「オフラインインスタンスの移行の作成」のウィンドウで、移行の準備が整ったことを確認し、**次へ**をクリックします。
4. 配置されているリージョンを選択し、タスク名、COSリンクと移行したいCVMなどの移行設定情報を入力します。下図に示すとおりです。
![](https://qcloudimg.tencent-cloud.cn/raw/7f3beecb92122f70f42fa86e652d35d9.png)
5. **完成**をクリックすると、移行タスクが正常に確立されます。
移行中に 「[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)」 ページを退出するか、または閉じることで、いつでもこのページに戻り、移行タスクの進捗を確認することができます。 


:::
::: オフラインデータマイグレーション[](id:csmStep)
1. CVMコンソールにログインし、左側ナビゲーションの**[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
2. 「オフラインマイグレーション」のページで、**データの移行の作成**をクリックします。
3. ポップアップした「オフラインデータの移行の作成」のウィンドウで、移行の準備が整ったことを確認し、**次へ**をクリックします。
4. 配置されているリージョンを選択し、タスク名、COSリンクと移行したいCBSなどの設定移行情報を入力します。下図に示すとおりです。
![](https://qcloudimg.tencent-cloud.cn/raw/7bf477c4a8811b1fe1395fa018762c25.png)
5. **完成**をクリックすると、移行が正常に確立されます。
移行中に 「[サービスマイグレーション](https://console.cloud.tencent.com/cvm/csm/index?rid=4)」 ページを退出するか、または閉じることで、いつでもこのページに戻り、移行タスクの進捗を確認することができます。 



:::
</dx-tabs>

## よくあるご質問
詳細については、[サービスマイグレーションタイプ](https://intl.cloud.tencent.com/document/product/213/32395)をご参照ください。





