## 작업 시나리오
Tencent Cloud에서 제공하는 공용 이미지, 마켓 플레이스 이미지를 사용하는 것 외에 사용자 정의 이미지를 생성할 수도 있습니다. 사용자 정의 이미지 생성 후 Tencent Cloud의 콘솔에서 해당 이미지와 동일한 구성으로 Tencent Cloud CVM 인스턴스를 빠르게 생성할 수 있습니다.


<dx-alert infotype="explain" title="">
이미지는 데이터 저장을 위해 CBS 스냅샷 서비스를 사용합니다. 
 - 중국 국내 리전은 50GB의 무료 한도가 제공됩니다. 자세한 내용은 [무료 한도](https://intl.cloud.tencent.com/document/product/362/32415)를 참고하십시오.
 - 사용자 정의 이미지를 생성하면 해당 이미지와 연결된 스냅샷이 기본 생성됩니다. 사용자 정의 이미지 보관은 일정 스냅샷 요금이 발생합니다. 자세한 내용은 [스냅샷 과금 개요](https://intl.cloud.tencent.com/document/product/362/32415)를 참고하십시오.
</dx-alert>




## 주의 사항

- 각 리전마다 최대 10개의 사용자 정의 이미지를 지원합니다.
- 다음의 디렉터리/파일은 삭제됩니다:
 - `/var/log/`  
 - `/root/.bash_history、/home/ubuntu/.bash_history`（Ubuntu 시스템）
- Linux 인스턴스가 사용자 정의 이미지를 생성할 때, `/etc/fstab`에 데이터 디스크 구성이 포함되지 않으면 해당 이미지로 생성된 인스턴스가 정상적으로 실행되지 않습니다. 사용자 정의 이미지를 생성한 Linux 인스턴스에 마운트된 데이터 디스크가 있다면, `/etc/fstab`에서 자체 구성된 데이터 디스크 관련 구성을 주석 처리하거나 삭제해야 합니다.
- 제작 프로세스는 10분 또는 그 이상 시간이 소요되며 구체적인 시간은 인스턴스의 데이터 크기와 연관되므로 서비스에 영향을 주지 않도록 미리 준비하십시오.
- Cloud Physical Machine(CPM) 2.0은 현재 콘솔 및 API를 통한 사용자 정의 이미지 생성을 지원하지 않습니다. Cloud Virtual Machine(CVM)을 통해 생성할 수 있습니다.
- Windows 인스턴스가 도메인에 들어가야 하고 도메인 계정을 사용해야 하는 경우, 사용자 정의 이미지 생성 전에 Sysprep 작업을 실행하여 인스턴스가 도메인에 들어간 후 SID가 고유한지 확인하십시오. 자세한 내용은 [Sysprep을 사용하여 CVM의 고유 SID 확인](https://intl.cloud.tencent.com/document/product/213/35876)을 참고하십시오.

## 작업 순서
<dx-tabs>
::: 콘솔을 사용하여 인스턴스에서 생성

#### 인스턴스 종료(옵션)
1. [CVM 콘솔](https://console.cloud.tencent.com/cvm)에 로그인하여 해당 인스턴스를 종료해야 하는지 확인합니다.
<dx-alert infotype="notice" title="">
2018년 7월 이후 공용 이미지를 기반으로 생성된 인스턴스(클라우드 디스크를 시스템 디스크로 사용)는 온라인 이미지 생성이 지원됩니다(즉, 인스턴스가 종료되지 않은 상황에서 이미지 생성). 이러한 인스턴스 이외의 인스턴스는 이미지와 현재 인스턴스의 배포 환경의 완벽한 일치성을 위해 먼저 인스턴스를 종료한 뒤 이미지를 생성하시기 바랍니다.
</dx-alert>
  - 필요한 경우, 단계를 계속 진행합니다.
  - 필요하지 않은 경우, [사용자 정의 이미지 생성](#createOS) 단계를 진행합니다.
2. 인스턴스의 관리 페이지에서 실제 사용된 뷰 모드에 따라 작업합니다.
  - **리스트 뷰**: 인스턴스가 위치한 행의 오른쪽에서 **더보기** > **인스턴스 상태** > **종료**를 선택합니다. 아래 이미지와 같습니다.
![](https://qcloudimg.tencent-cloud.cn/raw/238862ade0b78fb22702311d0b5e2a71.png)
  - **탭 뷰**: 인스턴스가 위치한 행의 오른쪽에서 **더보기** > **인스턴스 상태** > **종료**를 선택합니다. 아래 이미지와 같습니다.
![](https://qcloudimg.tencent-cloud.cn/raw/faa7bfc8122037333ff5ebd7209550bc.png)


#### 사용자 정의 이미지 생성[](id:createOS)
1. 인스턴스의 관리 페이지에서 사용된 실제 뷰 모드에 따라 작동합니다.
   - **리스트 뷰**: **더보기** > **이미지 생성**을 선택합니다. 아래 이미지와 같습니다.
   ![](https://qcloudimg.tencent-cloud.cn/raw/37a94f32c4d32bb31f04767ccd070e4b.png)
   - **탭 뷰**: 오른쪽 상단에서 **더 많은 작업** > **이미지 생성**을 선택합니다. 아래 이미지와 같습니다.
   ![](https://qcloudimg.tencent-cloud.cn/raw/9327ceb162dc61f30be71f7d2f06137b.png)
2. ‘사용자 정의 이미지 생성’ 팝업 창에서 다음 정보를 참고하여 설정합니다.
  - **이미지 이름** 및 **이미지 설명**: 이름과 설명을 사용자 정의합니다.
  - **시스템 디스크 이미지만 생성**: 인스턴스에 시스템 디스크만 있는 경우 이 옵션이 나타나지 않습니다. 인스턴스에 데이터 디스크가 있는 경우 필요에 따라 선택합니다.
     - 선택 시, 인스턴스 시스템 디스크 이미지만 생성됩니다.
     - 미선택 시, 인스턴스에 데이터 디스크가 있는 경우 데이터 디스크의 스냅샷이 동시에 생성됩니다.
3. **이미지 생성**을 클릭합니다.
왼쪽 사이드바에서 **[이미지](https://console.cloud.tencent.com/cvm/image)**를 클릭하면 '이미지' 페이지에서 이미지 생성 진행 상황을 볼 수 있습니다.


#### 사용자 정의 이미지를 사용하여 인스턴스 생성(옵션)
이미지 생성 후 이미지 목록에서 생성한 이미지를 선택하고 해당 이미지가 위치한 행 오른쪽의 **인스턴스 생성**을 클릭하면 기존과 동일한 이미지의 서버를 구매할 수 있습니다. 아래 이미지와 같습니다.
![](https://main.qcloudimg.com/raw/2d64df77d16b3c26d275770e03a1caf1.png)

:::
::: \sAPI\s로 생성
CreateImage 인터페이스를 이용하여 사용자 정의 이미지를 생성할 수 있습니다. 자세한 내용은 [이미지 생성 API](https://intl.cloud.tencent.com/zh/document/product/213/33276)를 참고하십시오.
:::
</dx-tabs>

## 모범 사례

### 데이터 디스크의 데이터 마이그레이션

기존 인스턴스 데이터 디스크의 데이터를 유지하면서 신규 인스턴스를 실행하고 싶다면, 데이터 디스크의 [스냅샷](https://intl.cloud.tencent.com/document/product/362/31638)을 생성한 다음, 신규 인스턴스를 실행할 때 해당 데이터 디스크의 스냅샷을 이용하여 새로운 클라우드 데이터 디스크를 생성합니다.
보다 자세한 정보는 [스냅샷으로 클라우드 디스크 생성](https://intl.cloud.tencent.com/document/product/362/5757)을 참고하십시오.
