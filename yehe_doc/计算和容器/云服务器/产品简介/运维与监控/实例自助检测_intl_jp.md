## 概要
インスタンスセルフチェックはCVMインスタンスの性能、費用、ネットワーク、ディスクなどの状態を検査し、インスタンスの実行状況を把握するのに役立ちます。この機能によってインスタンスに関連する問題を速やかに発見し解決できます。

## シナリオ
次の2つのシナリオでインスタンスセルフチェックの使用が推奨されます。
- 障害処理：インスタンスの操作中に障害やトラブルが発生した場合、インスタンスセルフチェックを使用してトラブルシューティングと問題の特定を実行し、提案に従って異状を処理することができます。
- インスタンスの全面的な検査：日常的な運用と保守にインスタンスセルフチェックを使用してインスタンスの全体的な実行状况を把握し、問題を速やかに発見し解決することで、業務の正常な運用を保証します。

## 検査項目の説明
インスタンスセルフチェックプロジェクトの説明は次のとおりです。

<dx-accordion>
::: ローカルネットワーク検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td>ネットワークの遅延</td>
<td>HTTPリクエストを送信してインスタンスのネットワークレイテンシが高すぎるかどうかを検査します。基準は次のとおりです。
<ul style="margin-bottom:0px">
<li>600msを上回る場合はネットワークの状態があまり良くないと判断します</li>
<li>5sを超えても反応がない場合このリクエストがタイムアウトになったと判断します</li>
<li>リクエストすべてがタイムアウトになった場合は、ネットワークが未接続と判断します</li>
</ul>
</td>
<td>異常</td>
<td rowspan=4>ローカルネットワークの問題を検出し、具体的な問題に応じて修復を実行してください。</td>
</tr>
<tr>
<td>ネットワークジッター</td>
<td>隣接するリクエストの遅延値の差を取得し、その平均値がネットワークジッター値となります。ネットワークジッター値/ネットワーク遅延値が0.15以下であれば、ネットワークは安定していますが、0.15を上回る場合は、ネットワークに不安定であることを意味します。
</td>
<td>-</td>
</tr>
<tr>
<td>上り帯域幅</td>
<td>データパケットをインスタンスにアップロードし、インスタンスのアップストリーム帯域幅を計算します</td>
<td>-</td>
</tr>
<tr>
<td>下り帯域幅</td>
<td>インスタンスからデータパケットをダウンロードし、インスタンスのダウンストリーム帯域幅を計算します</td>
<td>-</td>
</tr>
</table>
:::
::: セキュリティグループルールの検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td>セキュリティグループルールによって一般のポートが開放されているか</td>
<td>セキュリティグループによってインバウンド方向のTCPプロトコルの22、3389などの一般のポートのリクエストが禁止されているか。</td>
<td>警告</td>
<td>インスタンスセキュリティグループの中のインバウンド（Ingress）ルールのTCPプロトコルの22ポートのリクエストが禁止されていると、SSHでのログインが正常にできない可能性があります。必要なポートを開放するための詳細については、<a href="https://intl.cloud.tencent.com/document/product/213/32369">セキュリティグループの応用例</a>をご参照ください。</td>
</tr>
</table>
:::
::: アカウント料金の検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td rowspan=4>
CBSの有効期限が切れていないか、インスタンスとCBSの有効期限が一致しているか
<td>インスタンスにバインドされたCBSの有効期限が切れていないか、CBSを使用して読み取り書き込みができないかどうか</td>
<td>異常</td>
<td>このインスタンスのCBSは有効期限が切れています。<a href="https://console.cloud.tencent.com/cvm/cbs">CBSコンソール</a> に移動し、直ちに継続支払い手続きを行ってください。</td>
</tr>
<tr>
<td>従量課金インスタンス、CBSの有効期限切れによってCBSが使用できないかどうか</td>
<td>警告</td>
<td rowspan=1>このインスタンスのCBSには自動支払い更新が設定されていません。CBSの有効期限切れによって使用できない可能性があります。<a href="https://console.cloud.tencent.com/cvm/cbs">CBSコンソール</a>に移動してCBSの自動支払い更新を設定してください。</td>
</tr>
</table>

:::
::: インスタンスストレージの検査

<table>
<tr>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
</tr>
<tr>
<td>CBSに高遅延が発生しているか</td>
<td>IO 性能svctm指標に異常がないか</td>
<td>警告</td>
<td>このインスタンスのCBSに高遅延の問題が発生しています。CBSの使用状況を確認することをお勧めします。</td>
</tr>
<tr>
<td>CBSにIO HANGが発生しているか</td>
<td>CBSにIO HANGが発生しているか</td>
<td>警告</td>
<td>このインスタンスのCBSにIO HANGの問題が発生しています。CBSの使用状況を確認することをお勧めします。</td>
</tr>
<tr>
<td>システムディスクのinode使用率</td>
<td>CBSのinode使用率が100%に達していないか</td>
<td>警告</td>
<td rowspan=4>CBSの使用状況をご確認ください。障害処理については<a href="https://intl.cloud.tencent.com/document/product/213/41974">カーネルおよびIOに関する問題</a>をご参照ください。
</td>
</tr>
<tr>
<td>システムディスクが読み取り専用か</td>
<td>現在CBSが読み取り専用ステータスになっていないか</td>
<td>異常</td>
</tr>
<tr>
<td>システムディスク容量使用率</td>
<td>CBSのディスク使用率が100%に達していないか</td>
<td>警告</td>
</tr>
<tr>
<td>ディスクパーテーションでのIO操作時間と総時間のパーセンテージ</td>
<td>CBSのio_utilが100%に達していないか</td>
<td>警告</td>
</tr>
</table>
:::
::: インスタンスステータスの検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td>インスタンスがシャットダウンされていないか</td>
<td>現在のインスタンスがシャットダウンされていないか</td>
<td>警告</td>
<td>インスタンスがシャットダウンされています。<a href="https://console.cloud.tencent.com/cvm/index">CVMコンソールに移動して</a> 起動できます。</td>
</tr>
<tr>
<td>インスタンスが再起動されたか</td>
<td>インスタンスが直近12時間以内に再起動されたか</td>
<td>警告</td>
<td>このインスタンスは直近12時間以内に再起動されました。インスタンスの実行状態をご確認ください。</td>
</tr>
<tr>
<td rowspan=3>インスタンスカーネルのクラッシュ</td>
<td>インスタンスに直近12時間以内にhungtaskが発生したか</td>
<td>異常</td>
<td rowspan=3>このインスタンスに直近12時間以内にhungTask/panic/ソフトのデッドロックが発生しました。インスタンスの実行状態をご確認ください。障害処理については、<a href="https://intl.cloud.tencent.com/document/product/213/41974">カーネルおよびIOに関する問題</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスに直近12時間以内にhungTaskが発生した</td>
<td>異常</td>
</tr>
<tr>
<td>インスタンスに直近12時間以内にソフトのデッドロックが発生したか</td>
<td>異常</td>
</tr>
</table>
:::
::: インスタンス性能検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td>CPU使用状況</td>
<td>インスタンスに直近12時間以内にCPUの過負荷が発生したか</td>
<td>警告</td>
<td rowspan=3>
業務のボトルネックにならないように、CPU使用状況を確認して、速やかに設定を調整することをお勧めします。障害処理については、インスタンスのOSに応じて、次のドキュメントをご参照ください。
<ul style="margin:0">
<li>Windowsインスタンス：<a href="https://intl.cloud.tencent.com/document/product/213/32405">CPUまたはメモリ占用率が高いためログインできません</a></li>
<li>Linux参照可能：<a href="https://intl.cloud.tencent.com/document/product/213/32387">CPUまたはメモリ占用率が高いためログインできません</a></li>
</ul>
</td>
</tr>
<tr>
<td>メモリ使用状況</td>
<td> インスタンスに直近12時間以内にメモリの高負荷が発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>基本CPU使用状況</td>
<td>インスタンスに直近12時間以内にCPU過負荷が発生したか</td>
<td>警告</td>
</tr>
</table>
:::
::: インスタンスネットワークの検査
<table>
<tr><th style="
    width: 18%;
">検査項目</th><th style="
    width: 35%;
">検査の説明</th><th style="
    width: 8%;
">リスク<br>等級</th><th style="
    width: 39%;
">解決策</th></tr>
<tr>
<td>パブリックIPが料金未払いによって接続できないのかどうか</td>
<td>パブリックIPが料金未払いによって切り離されていないかどうか</td>
<td>異常</td>
<td>パブリックIPは料金未払いによってパブリックネットワークと通信できない可能性があります。<a href="https://console.cloud.tencent.com/expense/recharge">料金センター</a>に移動し、アカウントに対する料金をリチャージし、支払い継続を行うことをお勧めします。</td>
</tr>
<tr>
<td>パブリックIPがあるか</td>
<td>インスタンスにパブリックIPがあるか</td>
<td>警告</td>
<td>このインスタンスにはパブリックIPがありません。パブリックネットワークにアクセスするためのパブリックIPが必要な場合は、<a href="https://console.cloud.tencent.com/cvm/eip">エラスティックパブリックIP コンソール</a> に移動し、EIPをバインドできます。</td>
</tr>
<tr>
<td>パブリックIPがDDOSのためにブロックされていないか</td>
<td>パブリックIPがDDOSのためにブロックされていないか</td>
<td>異常</td>
<td>このインスタンスのパブリックIPはDDOS攻撃のためにブロックされています。<a href="https://cloud.tencent.com/document/product/1020/31635">IPの保護を解除する</a>ドキュメントを参照して処理を実行してください。</td>
</tr>
<tr>
<td rowspan=2>パブリックネットワーク帯域幅の使用率</td>
<td>インスタンスに、直近12時間以内にパブリックネットワークインバウンド帯域幅の過負荷が発生したか</td>
<td>警告</td>
<td rowspan=4>業務のボトルネックとならないよう、ネットワークの使用状況を確認することをお勧めします。障害処理については、<a href="https://intl.cloud.tencent.com/document/product/213/32542">帯域幅占有率が高いためログインできません</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内にパブリックネットワークアウトバウンド帯域幅の過負荷が発生したか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=2>プライベートネットワーク帯域幅使用率</td>
<td>インスタンスに、直近12時間以内にプライベートネットワークインバウンド帯域幅の高負荷が発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内にプライベートネットワークアウトバウンド帯域幅の高負荷が発生したか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=3>パケットロス状況</td>
<td>インスタンスに、直近12時間以内に速度制限がトリガーとなって、TCPパケットロスが発生したか</td>
<td>警告</td>
<td rowspan=8>業務のボトルネックとならないよう、業務のヘルスチェックをすることをお勧めします。詳細については、<a href="https://intl.cloud.tencent.com/document/product/213/41952">CVMネットワークアクセスパケットロス</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内に速度制限がトリガーとなって、UDPパケットロスが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内にソフトウェア割り込みがトリガーとなって、パケットロスが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=4>カーネルネットワーク状況</td>
<td>インスタンスに、直近12時間以内にUDP送信バッファのフルが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内にUDP受信バッファのフルが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスに、直近12時間以内にTCP全接続キューのフルが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスに直近12時間以内にTCP リクエストのオーバーフローが発生したか</td>
<td>警告</td>
</tr>
<tr>
<td>接続数の使用状況</td>
<td>インスタンスに直近12時間以内に接続数が上限に達する状況が発生したか</td>
<td>警告</td>
</tr>
</table>
:::
</dx-accordion>




## 関連する操作
[インスタンスセルフチェックの使用](https://intl.cloud.tencent.com/document/product/213/45275)を参照してインスタンス検出結果レポートを発行するか、または過去の検出レポートを確認できます。

