## オフラインマイグレーション

### COSのアップロードとマイグレーションに時間がかかるのはなぜですか。

アップロードの所要時間は、ミラーファイルのサイズや帯域幅のサイズなどの要因に関連しています。送信とマイグレーションの時間を節約できるので、圧縮画像形式（qcow2またはvhd）​​を使用することをお勧めします。

### マイグレーションタスクが失敗するのはなぜですか。

 >? 現在、Tencent Cloudサービスマイグレーションでサポートされているミラーリング形式はqcow2、vhd、vmdk、rawです。ミラーリング形式が上記のいずれかを満たしていることを確認してください。
 - ミラーファイルがCOSに完全にアップロードされていることを確認し、ファイルが破損していないことを確認してください。
 - マイグレーションでは、ターゲットのCVM/CBSが正しく使用期間にあることを確認する必要があります。期限切れ状態のデバイスの場合、マイグレーションを完了できません。
 
### マイグレーションタスクで表示されたエラー原因はどのようにトラブルシューティングすればよいですか。
 
 - 「ミラーファイルの検証に失敗しました」というメッセージが表示された場合は、通常、現在のマイグレーションタスクのターゲットシステムディスクまたはデータディスクにソースディスクほどのストレージスペースがなく、ターゲットシステムディスクまたはデータディスクにミラーファイルほどのストレージスペースがないことなどが原因です。この場合、ターゲットシステムディスクまたはデータディスクのサイズを変更して、再試行してください。
 - 「ミラーファイルのメタデータの取得に失敗しました」というメッセージが表示された場合は、通常、ミラーファイルが破損しているか、ミラーファイル形式がサポートされていないことなどが原因です。ミラーイメージの作成/エクスポート、アップロードなどの段階でエラーが発生していないか確認してください。またはqcow2、vhd、vmdk、raw形式のミラーファイルを提供して、再試行してください。
 - 「タスクタイムアウト」、「システムエラー」、「その他の原因」などが表示されたり、再試行してもマイグレーションタスクが失敗したりする場合は、[お問い合わせ](https://intl.cloud.tencent.com/document/product/213/34837)から解決することができます。
 

## オンラインマイグレーション

### どのようなOSやディスクタイプがサポートされていますか。

- Linuxの主流のOS（Centos/Ubuntuなど）が利用可能です。
- ディスクのタイプや使用量とは関係ありません。

### オンラインマイグレーションとミラーイメージのインポートの違いは何ですか。

オンラインマイグレーションは、ミラーイメージのインポートと似ています。これにより、ソースシステムのTencent Cloudへのマイグレーションを実現できます。最も大きな違いとしては、オンラインマイグレーションではクラウドにアップロードするために手動でミラーイメージを作成したり、ミラーイメージをエクスポート/インポートしたりする必要がなく、ソースマシンにおいてシステムとデータを直接転送するだけでクラウドにアップロードできる点です。

### オンラインマイグレーションはソースパブリックIPをマイグレーションしますか。

マイグレーションしません。オンラインマイグレーションでは、ソースシステムとデータのみが同期され、パブリックIPはマイグレーションできません。

### ツールはどこでダウンロードできますか。

[ここをクリックしてダウンロード](https://go2tencentcloud-1251783334.cos.ap-guangzhou.myqcloud.com/latest/go2tencentcloud.zip)で、マイグレーションツール圧縮パッケージをダウンロードします。また、[オンラインマイグレーションツールユーザーガイド](https://intl.cloud.tencent.com/document/product/213/35640)を参照して操作を行います。

### どのようにツールを使えばよいでしょうか。

マイグレーションツールをソースサーバーにコピーする必要があります。マシンの状況に応じて構成ファイルを変更した後、マイグレーションツールを実行することができます。一括マイグレーションの場合、スクリプトを作成することによって一括処理が行えます。

### マイグレーションツールは中断からの再開をサポートしていますか。

サポートしています。データ送信フェーズが中断された後、ツールを再度実行することで送信を再開できます。

### マイグレーションが完了した後もツールを保持する必要がありますか。

必要ありません。マイグレーションが完了したら、ソースサーバーで直接削除できます。

### マイグレーションでエラーが報告された場合、またはマイグレーションに失敗した場合はどうすればよいですか。

マイグレーションエラーまたはマイグレーションの失敗原因は多数ありますが、通常は以下のような事項が原因となります。
1. ターゲットCVMのセキュリティグループで、ポート80と443を開放していない。
2. ソースのマイグレーション中にデータディスクがあるが、user.jsonの中のDataDisksフィールドがソースデータディスクをマイグレーションするように設定されていないので、すべてのデータがターゲットCVMシステムディスクに送信されるため、ディスク容量が不足する。
3. プライベートネットワークのマイグレーションモード1では、第3段階のマイグレーションが実行されないため、ターゲットCVMがマイグレーションモードを終了させる。

依然として問題が解決しない場合、または上記の原因に該当しない場合は、その時点のマイグレーションログファイル（デフォルトはマイグレーションツールディレクトリのlogファイル）を保持し、[お問い合わせ](https://intl.cloud.tencent.com/document/product/213/34837)をして解決することができます。

### マイグレーションの速度と料金はどのくらいかかりますか。

- 速度：主にターゲットのサブマシンの帯域幅に依存します。テストでは1コアの1Gメモリ、従量課金の帯域幅を備えた12MBのサブマシンにおいて、実際のマイグレーション速度は約9MBです。
- 料金：マイグレーションツールの使用は無料です。マイグレーション中、帯域幅などのリソースのためにわずかな料金が発生します。発生した料金は、トラフィックや時間の長さによる課金ルールに基づいて確認できます。詳細については、公式サイトの価格をご参照ください。
  
### 複数のサブマシンの同時マイグレーションをサポートしていますか。

はい。複数のCVMの同時マイグレーションがサポートされています。異なるターゲットCVMにマイグレーションするため、互いに干渉しません。
