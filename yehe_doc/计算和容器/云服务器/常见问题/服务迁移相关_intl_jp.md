## オフライン移行

### COSのアップロードと移行に時間がかかるのはなぜですか？
アップロードにかかる時間はイメージファイルのサイズと帯域幅などに関連しています。転送と移行の時間を短縮するために、圧縮されたイメージ形式（qcow2またはvhd）を使用することをお勧めします。

### 移行タスクに失敗したのはなぜですか？
 - 現在、Tencent Cloudサービス移行でサポートするイメージ形式はqcow2、vhd、vmdk、rawです。イメージ形式が上記のいずれかを満たしていることを確認してください。
 - イメージファイルがCOSに完全にアップロードされていることを確認し、COS権限をチェックし、一時的なリンクが有効であり、ファイルが破損していないことを確認してください。
 - 移行するには、ターゲットCloud Virtual Machine（CVM）/Cloud Block Storage（CBS）が通常使用されていることを確認してください。期限切れのデバイスは移行できません。

### 移行タスクで表示されたエラー原因について、どのようにトラブルシューティングすればよいですか？ 
- **「イメージファイルのメタデータの取得に失敗しました」**というメッセージが表示された場合は、通常、イメージファイルが破損しているか、イメージファイルの形式がサポートされていないことなどが原因です。イメージの作成/エクスポート、アップロードなどの段階でエラーが発生していないか確認してください。またはqcow2、vhd、vmdk、raw形式のイメージファイルを提供して、再試行してください。
- **「イメージの解凍に失敗しました」**というメッセージが表示された場合は、通常、イメージ作成のエラーが原因です。イメージ圧縮パッケージの正当性を確認するか、イメージを再度エクスポートして、ターゲットディスクの容量がソースディスクのサイズよりも大きいことを確認して、再試行してください。。
- **「ターゲットデバイスのストレージスペースが小さすぎます」**というメッセージが表示された場合は、通常、現在の移行タスクのターゲットシステムディスクまたはデータディスクのストレージスペースがソースディスクよりも小さいか、ターゲットシステムディスクまたはデータディスクのストレージスペースがイメージファイルのサイズよりも小さいなどが原因です。この場合、ターゲットシステムディスクまたはデータディスクのサイズを変更して、再試行してください。
- **「COSイメージファイルへのアクセスに失敗しました」**というメッセージが表示された場合は通常、COS権限の問題です。COSファイルが配置されている地域が現在の地域と同じであることを確認し、COS権限をチェックし、一時的なリンクの有効性を確認して、再試行してください。
- **「ターゲットディスクへの移行に失敗しました」**というメッセージが表示された場合は、考えられる理由は通常次のとおりです。
 - ターゲットディスクの容量が小さすぎます。
 - イメージの作成中にエラーが発生します。
 1つずつ確認して、再試行してください。
- **「タスクタイムアウト」**、**「システムエラー」**、**「その他の原因」**などのメッセージが表示された場合、移行タスクを再試行しても失敗する場合は、[お問い合わせ](https://intl.cloud.tencent.com/document/product/213/34837)から解決することができます。


## オンライン移行に関するよくあるご質問

### オンライン移行はどのようなOSやディスクタイプをサポートしていますか。
- Linuxの主流OS（CentosやUbuntuなど）はすべてサポートされています。
- ディスクのタイプや容量とは関係ありません。


### オンライン移行とイメージのインポートの違いは何ですか？
オンライン移行は、イメージのインポートと似ています。これにより、ソースシステムのTencent Cloudへの移行を実現できます。最も大きな違いとしては、オンライン移行ではクラウド移行のために手動でイメージを作成したり、イメージをエクスポート/インポートしたりする必要がなく、ソースマシンにおいてシステムとデータを直接転送するだけでクラウド移行できます。


### オンライン移行はソースパブリックIPを移行しますか？
移行しません。オンライン移行では、ソースシステムとデータのみが同期され、パブリックネットワークIPは移行できません。


### 移行ツールは中断からの再開をサポートしていますか？
サポートしています。データ送信フェーズが中断された後、ツールを再実行することで送信を再開できます。


### 移行が完了した後もツールを保持する必要がありますか？
ツールを保持する必要はありません。移行が完了したら、ソースサーバー上のツールを直接削除できます。


### 移行の速度と料金はどのくらいかかりますか？
- 速度：主にターゲットCVMの帯域幅に依存します。テストでは1コア1Gメモリを備えた従量課金帯域幅12MbpsのCVMを使用し、実際の移行速度はおよそ9Mbpsです。具体的なコンピューティング方法については、[移行時間予測チュートリアル](https://intl.cloud.tencent.com/document/product/213/44342)をご参照ください。
- 費用：移行ツール自体は無料です。移行中、帯域幅などのリソースのため、わずかな料金が発生します。発生した料金は、トラフィックや時間の長さによる課金ルールに基づいて計算できます。詳細については、公式サイトの価格をご参照ください。


### 複数のCVMの同時移行はサポートしますか？
サポートしています。それぞれ異なるターゲットCVMに移行し、互いに干渉しないため、複数のサーバーは同時に移行できます。


### Virtioの検査とインストール方法は？
Virtioの検査とインストールの詳細な操作については、[Linux OSでのVirtioドライバーの確認](https://intl.cloud.tencent.com/document/product/213/9929)をご参照ください。


### Rsyncのインストール方法は？[](id:installRsync)
ソースサーバーのOSに応じて、対応するコマンドを選択して、Rsyncをインストールできます。
- CentOS: `yum -y install rsync`
- Ubuntu,Debian: `apt-get -y install rsync`
- SUSE: `zypper install rsync`
 その他のLinuxリリース版については、対応するリリース版の公式インストールドキュメントをご参照ください。


### SELinuxのシャットダウン方法は？[](id:closeSELinux)
`/etc/selinux/config` ファイルをコンパイルし、`SELINUX=disabled`を設定します。


## コンソールオンライン移行に関するご質問

### ツールはどこからダウンロードしますか？
[ここをクリックしてダウンロード](https://go2tencentcloud-1251783334.cos.ap-guangzhou.myqcloud.com/latest/go2tencentcloud.zip)で、コンソールオンライン移行ツール圧縮パッケージをダウンロードします。また、[コンソールオンライン移行使用ガイドライン](https://intl.cloud.tencent.com/document/product/213/44338)を参照して操作を行います。


### 移行元のインポート方法は？
1. [コンソールオンライン移行ツール](https://go2tencentcloud-1251783334.cos.ap-guangzhou.myqcloud.com/latest/go2tencentcloud.zip)をダウンロードして解凍します。
2. 移行元サーバーが対応するアーキテクチャの実行可能ファイルを実行すれば、移行元をオンライン移行コンソールにインポートできます。
 - 32ビット移行元サーバーでは`go2tencentcloud_x32`を実行します
 - 64ビット移行元サーバーでは`go2tencentcloud_x64`を実行します


### 移行元の更新方法、または移行元の再インポート方法は？
移行元ディスクなどの情報に変更が生じた場合は、移行元の情報を更新するか、または移行元を再インポートしてください。まず移行元を削除してから、クライアントを実行して移行元を再インポートしてください。


### 移行元の削除方法は？
[オンライン移行コンソール](https://console.cloud.tencent.com/cvm/csm/online?rid=1)にログインし、移行元がある行の右側の**削除**をクリックした後、確認を実行すると削除できます。移行元に未完了の移行タスクがアソシエイトされている場合は、移行タスクを中止し削除してから、移行元を削除してください。


### 移行前に移行先CVMインスタンスを選択する方法は？
移行先CVMのOSはできる限り移行元サーバーのOSタイプと同じにすることをお勧めします。例えば、CentOS7システムの移行元サーバーを移行する場合は、CentOS7システムのCVMを移行先として選択してください。


### 移行タスクがどのような状態であるとき、完了を意味しますか？
移行タスクの状態が「成功」の場合のみ完了を意味し、その他の状態はすべて未完了を意味します。


### 移行タスクの削除方法は？
移行タスクの実際の状態に応じて次の操作を実行してください。
- 移行タスクが「未開始」または「成功」の場合、移行タスクがある行の右側の**削除**を直接クリックして、移行タスクを直接削除できます。
- 移行タスクが「失敗」のときに、移行タスクを削除したい場合は、移行元をオンラインに維持したまま、移行タスクがある行の右側の**削除**をクリックして移行タスクを削除する必要があります。このとき、タスクは「削除中」となり、移行ツールは移行タスクによって生成されたリソースを自動的にクリアし、移行タスクを削除します。


### 移行にかかる時間が長すぎて、移行をキャンセルしたい場合はどうすればよいですか？
この場合は、[オンライン移行コンソール](https://console.cloud.tencent.com/cvm/csm/online?rid=1)にログインして、移行タスクを中止し、移行タスクがある行の右側の**削除**をクリックして移行タスクを削除すれば、その移行をキャンセルできます。


### 中継インスタンスが破棄された場合はどうすればよいですか？
移行先のTencent Cloudイメージに移行するときに、作成された中継インスタンスが誤って破棄された場合は、現在の移行タスクを削除し、移行元に移行タスクを新規作成して開始することができます。


### コンソールを使用した移行がエラーまたは失敗した場合はどうすればよいですか？
移行エラーまたは失敗には多くの原因があります。通常、次のとおりです：


- 移行先CVMに移行するときに、移行先CVMのセキュリティグループが80、443ポートを開放していません。
**解決方法**：移行先CVMのセキュリティグループルールを変更し、80、443ポートを開放します。
- 移行先CVMに移行するときに、移行先CVMのディスク容量が不足しています。
**解決方法**：サーバーに充分な容量のディスクをマウントし、充分な容量のCVMを選択し直し、移行タスクを再作成して移行を開始します。
- 移行先のTencent Cloudイメージに移行するときに、中継インスタンス作成のエラーメッセージが発生します。例えば、「Failed create transit instance, maybe no available source in target region」ログエラーが発生します。
**解決方法**：移行タスクの移行先エリアに使用可能なリソースがない可能性があります。この場合は、その他エリアを選択して移行するか、または指定のCVMに移行することで解決できます。

依然として問題が解決されない場合、または上記の原因に該当しない場合は、その時点の移行ログファイル（デフォルトで、移行ツールディレクトリのlogファイル）を保持し、[お問い合わせ](https://intl.cloud.tencent.com/document/product/213/34837)して解決することができます。



### 移行完了後に何を得ることができますか？
移行タスクが完了すると、プラットフォームは移行タスクに設定した移行先タイプに応じて、対応する移行製品を生成します。
- 移行先タイプの選択**CVMイメージ**：移行完了後に移行元のために移行先のTencent Cloudイメージが生成されます。移行タスクがある行の**CVMイメージID**をクリックし、[CVMイメージページ](https://console.cloud.tencent.com/cvm/image/index)でイメージの詳細を確認でき、このイメージを使用してCVMをすばやく作成できます。CVMイメージが正常に作成された後、このイメージにアソシエイトされた**CVMスナップショット**が同期作成されます。
- 移行先タイプの選択**CVMインスタンス**：移行完了後に、移行元を移行先のTencent Cloud CVMインスタンスに移行します。


### Linuxサーバーの移行後のシステムの確認方法は？
移行先CVMが正常に起動できるか、移行先CVMのデータが移行元サーバーと一致しているか、ネットワークが正常か、他のシステムサービスが正常かなどを確認してください。


### 移行完了後、再度移行する必要がある場合の操作方法は？
[オンライン移行コンソール](https://console.cloud.tencent.com/cvm/csm/online?rid=1)にログインし、移行元を再度使用し、移行タスクを新規作成して開始します。


## オンライン移行ツールに関するご質問


### ツールはどこからダウンロードしますか？
[ここをクリックしてダウンロード](https://go2tencentcloud-1251783334.cos.ap-guangzhou.myqcloud.com/latest/go2tencentcloud.zip)で、移行ツール圧縮パッケージをダウンロードします。また、[ツールを使用した移行操作ガイド](https://intl.cloud.tencent.com/document/product/213/35640)を参照して操作を行います。


### ツールの使い方は？
移行ツールをソースサーバーにダウンロードまたはアップロードし、マシンの実際の状況に応じて設定ファイルを修正した後に移行ツールを実行する必要があります。バッチ移行を実行したい場合は、スクリプトを作成することでバッチ処理を実装できます。


### ツールを使用した移行がエラーとなった場合、または失敗した場合はどうすればよいですか？

移行エラーまたは失敗には多くの原因があります。通常は次のとおりです：
- 移行先CVMのセキュリティグループが80、443ポートを開放していません。
- ソースの移行時にデータディスクがありますが、user.jsonのDataDisksフィールドがソースデータディスクを移行するように設定されていません。すべてのデータが移行先CVMのシステムディスクに送信されるため、ディスク容量が不足しています。
- [プライベートネットワーク移行モード](https://intl.cloud.tencent.com/zh/document/product/213/44340#.E6.94.AF.E6.8C.81.E7.9A.84.E8.BF.81.E7.A7.BB.E6.A8.A1.E5.BC.8F)で、第三段階の移行が実行されず、移行先CVMが移行モデルを終了します。

依然として問題が解決されない場合、または上記の原因に該当しない場合は、その時点の移行ログファイル（デフォルトで、移行ツールディレクトリのlogファイル）を保持し、[お問い合わせ](https://intl.cloud.tencent.com/document/product/213/34837)して解決することができます。



  

