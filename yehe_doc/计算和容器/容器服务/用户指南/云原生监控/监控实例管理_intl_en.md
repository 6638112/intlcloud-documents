




## Overview

In the TKE console, you can easily create a TPS instance and associate it with a cluster in the current region. Clusters associated with the same TPS instance share the same monitoring metrics and alarming policies. Currently, TPS supports managed clusters, self-deployed clusters, elastic clusters and edge clusters. This document describes how to create and manage TPS instances on TKE console.

## Directions

### Service authorization

When using the cloud native monitoring for the first time, you need to assign the role TKE_QCSLinkedRoleInPrometheusService to the service, which is used to authorize the cloud native monitoring service to access the COS bucket.
1. Log in to the [TKE console](https://console.cloud.tencent.com/tke2) and click **Cloud Native Monitoring** on the left sidebar to pop up the **Service Authorization** window.
2. Click **Go to Cloud Access Management** to go to the **Role management** page.
3. Click **Grant** to complete authentication as shown in the figure below:
![](https://qcloudimg.tencent-cloud.cn/raw/69b3d895837162b8d49f07d0d5baf7b6.png)


### Creating TPS instance
1. Log in to the [TKE console](https://console.cloud.tencent.com/tke2) and click **Cloud Native Monitoring** on the left sidebar.
2. Click **Create** at the top of the instance list page.
3. On **Create Monitor** page, configure the basic information of the instance as shown in the figure below:
![](https://qcloudimg.tencent-cloud.cn/raw/a2efb2553a223eea6b08c1b0f2cd9e5f.png)
 - **Instance Name**: enter a custom instance name within 60 characters.
 - **Region**: select a region to deploy this instance. For now, it only supports Beijing, Shanghai and Guangzhou regions. The region cannot be modified after the instance is created. We recommend that you choose the region closest to your business to minimize access latency and improve reporting speed.
 - **Network**: select an existing private network and subnet in the current region, which cannot be modified after the instance is created. If there are no VPC resources in the region, you can go to the VPC console to create a VPC. For more information, see [Network Settings for Containers and Nodes](https://intl.cloud.tencent.com/document/product/457/38966).
 - **Data Retaining Time**: select the data storage time (30 days/3 months/6 months/1 year). After the instance is successfully created, a COS bucket will be automatically created and billed based on actual resource usage. For more information, see [COS Billing Overview](https://intl.cloud.tencent.com/document/product/436/16871).
 - **Grafana component**: select whether to enable Grafana access. If you enable it, you need to set the user name and password for Grafana logins. After the instance is created, the Grafana username and password cannot be modified. You can enable Grafana public network access according to your business needs.
 - **AlertManager**: you can add a custom AlertManager address to send the alarms generated by the instance to the your AlertManager.
>? After the instance is successfully created, you can monitor kubernetes clusters under the VPC to which the instance belongs. If you need to monitor clusters in multiple regions or clusters under different VPCs, you need to create the instance in the same VPC.
>
4. Click **Complete**.
5. You can check the instance creation progress on the **Cloud Native Monitoring** page. If the instance status changes to "Running" as shown in the figure below, the instance was successfully created and is running properly.
![](https://qcloudimg.tencent-cloud.cn/raw/ea617c5d4d10051ecb1d62f8f9165fcc.png)
>? If it takes too long to create an instance or the displayed status is abnormal, [submit a ticket](https://console.intl.cloud.tencent.com/workorder).



### Deleting TPS instance
1. Log in to the [TKE console](https://console.cloud.tencent.com/tke2) and click **Cloud Native Monitoring** on the left sidebar.
2. On the instance list page, click **Delete** on the right of an instance to be deleted.
3. In the pop up **Delete TPS Instance** window, click **OK** to delete the instance as shown in the figure below:
![](https://qcloudimg.tencent-cloud.cn/raw/d9dab09c8bbe536aa7cd406b9b0823c9.png)
>? When the current instance is deleted, the monitoring components installed in the cluster and the COS bucket associated with the instance will be deleted at the same time by default. To backup the related monitoring data, please go to COS console.

