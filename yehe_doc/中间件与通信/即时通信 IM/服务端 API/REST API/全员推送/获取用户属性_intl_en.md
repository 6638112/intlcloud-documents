## Feature Description
This API is used to obtain user attributes. To call this API, you must use the admin account. You can obtain a maximum of 100 usersâ€™ attributes at a time.You need to [set the App attribute name](https://intl.cloud.tencent.com/document/product/1047/37167) before calling the API.
## API Call Description
This feature **can only be applied for by Ultimate Edition users (but not by Pro Edition users). You can apply for this feature by submitting a ticket, and we will evaluate your needs for approval. If we determine that this feature suits your needs, we will approve your application so that you can use the feature**.
### Sample request URL
```
https://xxxxxx/v4/all_member_push/im_get_attr?usersig=xxx&identifier=admin&sdkappid=88888888&random=99999999&contenttype=json
```



### Request parameters

| Parameter | Description |
| ------------------ | ------------------------------------ |
| https       | The request protocol is HTTPS, and the request method is POST.       |
| xxxxxx  | The country/region where your SDKAppID is located.<li>China:  `console.tim.qq.com `<li>Singapore:  `adminapisgp.im.qcloud.com `<li>Seoul: `adminapikr.im.qcloud.com`<li>Frankfurt: `adminapiger.im.qcloud.com` |
| v4/all_member_push/im_get_attr | Request API |
| usersig | Signature generated by the app admin account. For more information, see the [UserSig backend API](https://intl.cloud.tencent.com/document/product/1047/34385). |
| identifier | The value must be the app admin account. |
| sdkappid | SDKAppID assigned by the IM console when the app is created |
| random | A random 32-bit unsigned integer |
| contenttype | Fixed value: JSON |

### Maximum call frequency

The maximum call frequency is 100 times per second.

### Sample request packet

```
{
    "To_Account": [
        "Zhang Xiaohong",
        "Chen Xiaoming",
        "abc"
    ]
}
```

### Request packet fields

| Field | Type | Attribute | Description |
|---------|---------|---------|-------|
| To_Account | Array | Required | List of target user accounts |

### Sample response packet

```
{
	"ActionStatus": "OK",
	"ErrorInfo": "",
	"ErrorCode": 0,
	"UserAttrs": [
		{
			"To_Account": "Zhang Xiaohong",
			"Attrs": {
				"sex": "Female",
				"city": "New York"
			}
		},
		{
			"To_Account": "abc",
			"Attrs": {}
		},
		{
			"To_Account": "Chen Xiaoming",
			"Attrs": {
				"sex": "Male",
				"city": "Shenzhen"
			}
		}
	]
}
```

### Response packet fields

| Field | Type | Description |
|---------|---------|---------|
| ActionStatus | String | Processing result of the request. Valid values: OK for succeeded, and FAIL for failed |
| ErrorCode | Integer | Error code |
| ErrorInfo | String | Error information |
| UserAttrs | Array | List of user tag content |
| To_Account | String | User account |
| Attrs|Object | Attribute content |


## Error Codes
The HTTP return code for this API is always 200 unless a network error (such as error 502) occurs. **The actual error code and error message are indicated by ErrorCode and ErrorInfo in the response packet, respectively.** For public error codes 60000 to 79999, see [Error Codes](https://intl.cloud.tencent.com/document/product/1047/34348).
The error codes specific to this API are as follows:

| Error Code | Description |
|---------|---------|
| 90001 | Failed to parse the JSON format. To correct it, check whether the JSON request packet meets JSON specifications. |
| 90018 | The number of accounts requested exceeds the limit. |
| 91000 | An internal service error occurred. To correct it, try again. |

## API Debugging Tool
To debug this API, you can use the [online debugging tool for RESTful APIs](https://29294-22989-29805-29810.cdn-go.cn/api-test.html#v4/all_member_push/im_get_attr).

## References
- [API for Pushing to All Users](https://intl.cloud.tencent.com/document/product/1047/37165) 
- [Pushing to All Users](https://intl.cloud.tencent.com/document/product/1047/37166) 
- [Setting App Attribute Names](https://intl.cloud.tencent.com/document/product/1047/37167) 
- [Obtaining App Attribute Names](https://intl.cloud.tencent.com/document/product/1047/37168) 
- [Setting User Attributes](https://intl.cloud.tencent.com/document/product/1047/37170)  
- [Deleting User Attributes](https://intl.cloud.tencent.com/document/product/1047/37171)  
- [Adding User Tags](https://intl.cloud.tencent.com/document/product/1047/37173)  
- [Obtaining User Tags](https://intl.cloud.tencent.com/document/product/1047/37172)  
- [Deleting User Tags](https://intl.cloud.tencent.com/document/product/1047/37174)  
- [Deleting All Tags of a User](https://intl.cloud.tencent.com/document/product/1047/37175)  
