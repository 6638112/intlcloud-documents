## Feature Description
 This API is used by app admins to recall messages of a specified group. The messages must be within the roaming validity period.

## API Calling Description
### Applicable group types

| Group Type ID | Is Recalling Group Messages Supported? |
|-----------|------------|
| Private | Yes. Same as Work (work group for friends) in the new version. |
| Public | Yes. |
| ChatRoom | Yes. Same as Meeting (temporary meeting group) in the new version. |
| AVChatRoom | No. |
|Community|Yes.|

These are the 4 built-in group types in IM. For detailed information, see the [Group System](https://intl.cloud.tencent.com/document/product/1047/33529).

### Sample request URL
```
https://xxxxxx/v4/group_open_http_svc/group_msg_recall?sdkappid=88888888&identifier=admin&usersig=xxx&random=99999999&contenttype=json
```


### Request parameters
The list below contains only the parameters commonly used when calling this API and their descriptions. For more parameters, see [RESTful API Overview](https://intl.cloud.tencent.com/document/product/1047/34620).

| Parameter | Description |
| ------------------ | ------------------------------------ |
| https       | The request protocol is HTTPS, and the request method is POST.       |
| xxxxxx  | The country/region where your SDKAppID is located.<li>China:  `console.tim.qq.com `<li>Singapore:  `adminapisgp.im.qcloud.com `<li>Seoul: `adminapikr.im.qcloud.com`<li>Frankfurt: `adminapiger.im.qcloud.com`<li>India: `adminapiind.im.qcloud.com` |
| v4/group_open_http_svc/group_msg_recall | Request API |
| sdkappid | SDKAppID assigned by the IM console when the application is created |
| identifier | The value must be the app admin account. For more information, see [App Admins](https://intl.cloud.tencent.com/document/product/1047/33517). |
| usersig | Signature generated by the app admin account. For details, see [Generating UserSig](https://intl.cloud.tencent.com/document/product/1047/34385). |
| random | A random 32-bit unsigned integer ranging from 0 to 4294967295 |
| contenttype | Request format. The value is always `json`. |

### Maximum calling frequency

The maximum calling frequency is 200 calls per second.

### Sample request packet
Messages that have been recalled cannot be restored. Therefore, use this API with caution.
```
{
    "GroupId": "@TGS#2J4SZEAEL",
    "MsgSeqList":[
        {
			"MsgSeq":100
        },
        {
            "MsgSeq":101
        }
    ]
}
```

### Request packet fields

| Field | Type | Property | Description |
|---------|---------|---------|---------|
| GroupId | String | Required | ID of the target group |
| MsgSeqList | Array | Required | List of the sequence numbers of messages to be recalled. A single request can recall up to 10 messages. |
| MsgSeq | Integer | Required | Sequence number of the message to be recalled by the request |

### Sample response packet body

```
{
    "ActionStatus": "OK",
    "ErrorInfo": "",
    "ErrorCode": 0,
    "RecallRetList":[
        {
            "MsgSeq":100,
            "RetCode":10030
        },
        {
            "MsgSeq":101,
            "RetCode":0
        }
    ]
}
```

### Response packet fields

| Field | Type | Description |
|---------|---------|---------|
| ActionStatus | String | Result of the request. `OK` indicates that the request was successful, and `FAIL` indicates that the request failed. |
| ErrorCode | Integer | Error code. `0` indicates that the request was successful, and any non-zero value indicates that the request failed. |
| ErrorInfo | String | Detailed error information |
| RecallRetList | Array | Detailed result of the message recall request |
| MsgSeq | Integer | Sequence number of the single recalled message |
| RetCode | Integer | Recall result of the single message. 0: successful. Others: failed. For details, see the description of error codes below. |


## Error Codes

Unless a network error (such as error 502) occurs, the returned HTTP status code for this API is always 200. The specific error code and details can be found in the response packet fields such as `ErrorCode` and `ErrorInfo`.
For public error codes (60000 to 79999), see [Error Codes](https://intl.cloud.tencent.com/document/product/1047/34348).
The list below contains error codes specific to this API:

| Error Code | Description |
| ------ | ------------------------------------------------------------ |
| 10002 | An internal server error occurred. Please try again. |
| 10003 | The request command word is invalid. |
| 10004 | A parameter is invalid. Check the error description and troubleshoot the issue. |
| 10007 | The operator does not have sufficient permissions for this operation. The operator must have the necessary role in the group to perform this operation. |
| 10010 | The group does not exist, or once existed but has been disbanded. |
| 10015 | The group ID is invalid. Be sure to use the correct group ID. |
| 10030 | The message to be recalled does not exist. |
| 10031 | The message to be recalled has passed the time limit. |
| 10032 | The message to be recalled does not support the recall operation. |
| 10033  | The group type does not support the recall operation. |
| 10041 | This app (SDKAppID) has been configured to prohibit recalling group messages. |

## API Debugging Tool

Use the [online debugging tool for RESTful APIs](https://29294-22989-29805-29810.cdn-go.cn/api-test.html#v4/group_open_http_svc/group_msg_recall) to debug this API.

## Reference
Sending system messages in a group ([v4/group_open_http_svc/send_group_system_notification](https://intl.cloud.tencent.com/document/product/1047/34958))
