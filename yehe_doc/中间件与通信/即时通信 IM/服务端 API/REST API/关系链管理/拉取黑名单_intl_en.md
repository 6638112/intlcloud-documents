## Feature Description

 This API is used pull a blocklist by page.

## API Invocation Description

### Request URL example

```
https://xxxxxx/v4/sns/black_list_get?sdkappid=88888888&identifier=admin&usersig=xxx&random=99999999&contenttype=json
```



### Request parameters

The following table lists and describes only the parameters to be modified when this API is invoked. For details on other parameters, see [RESTful API Overview](https://intl.cloud.tencent.com/document/product/1047/34620).

| Parameter | Description |
| ------------------ | ------------------------------------ |
| https       | The request protocol is HTTPS, and the request method is POST.       |
| xxxxxx  | The country/region where your SDKAppID is located.<li>China:  `console.tim.qq.com `<li>Singapore:  `adminapisgp.im.qcloud.com `<li>Seoul: `adminapikr.im.qcloud.com`<li>Frankfurt: `adminapiger.im.qcloud.com` |
| v4/sns/black_list_get | Request API |
| sdkappid | SDKAppID assigned by the IM console when an application is created |
| identifier | This must be the app admin account. For details, see [App Admins](https://intl.cloud.tencent.com/document/product/1047/33517#app-.E7.AE.A1.E7.90.86.E5.91.98). |
| usersig | The signature generated by the app admin account. For details, see [Generating UserSig](https://intl.cloud.tencent.com/document/product/1047/34385). |
| random | Enter a random 32-bit unsigned integer ranging from 0 to 4294967295. |
| contenttype | Request format. The value is always `json`. |

### Maximum invocation frequency

The maximum invocation frequency is 200 times per second.

### Request packet example

```
{
"From_Account": "id",
"StartIndex": 0,
"MaxLimited": 30,
"LastSequence": 12
}
```

### Request packet fields

| Field | Type | Attribute | Description |
| ------------ | ------- | ---- | ------------------------------------------------------ |
| From_Account | String | Required | The identifier of the blocklist to be pulled. |
| StartIndex | Integer | Required | The starting pull position. |
| MaxLimited | Integer | Required | The maximum number of blocked users that can be pulled on each page. |
| LastSequence | Integer | Required | The sequence that was returned by the server to the client during the previous blocklist pull. Its value is 0 for the initial pull. |

### Response packet examples

```
{
"BlackListItem": [
{
"To_Account": "id1",
"AddBlackTimeStamp": 1430000001
},
{
"To_Account": "id2",
"AddBlackTimeStamp": 1430000002
}
],
"StartIndex": 0,
"CurruentSequence": 13,
"ActionStatus": "OK",
"ErrorCode": 0,
"ErrorInfo": "",
"ErrorDisplay": ""
}
```

### Response packet fields

| Field | Type | Description |
| ----------------- | ------- | ------------------------------------------------------------ |
| BlackListItem | Array | The blocklist object array. Each blocklist object includes To_Account and AddBlackTimeStamp. |
| To_Account | String | The identifier of a blocklist. |
| AddBlackTimeStamp | Integer | The time when users was added to the blocklist. |
| StartIndex | Integer | The starting pull position on the next page. The 0 value indicates that the pull is completed. |
| CurruentSequence | Integer | The latest sequence of the blocklist. |
| ActionStatus | String | The request processing result. OK: succeeded. FAIL: failed. |
| ErrorCode | Integer | The error code. 0: succeeded. Others: failed. |
| ErrorInfo | String | The detailed error information. |
| ErrorDisplay | String | The detailed error information to be displayed on the client. |

## Error Codes

 Unless a network error (such as error 502) occurs, the HTTP return code for this API is always 200. ErrorCode and ErrorInfo in the response packet represent the actual error code and error information, respectively.
For common error codes (60000 to 79999), see [Error Codes](https://intl.cloud.tencent.com/document/product/1047/34348).
The following table describes the error codes specific to this API.

| Error Code | Description |
| ------ | ------------------------------------------------------------ |
| 30001 | A request parameter is incorrect. In this case, check request parameters based on the error description. |
| 30003 | The requested user account does not exist. |
| 30004 | The request requires app admin permissions. |
| 30006 | An internal server error occurred. In this case, try again. |
| 30007 | The network connection timed out. In this case, try again later. |

## API Commissioning Tool

Use the [RESTful online commissioning tool for APIs](https://avc.cloud.tencent.com/im/APITester/APITester.html#v4/sns/black_list_get) to commission this API.

## References

- Adding users to blocklist (<a href="https://intl.cloud.tencent.com/document/product/1047/34911">v4/sns/black_list_add</a>).
- Removing users from blocklist (<a href="https://intl.cloud.tencent.com/document/product/1047/34912">v4/sns/black_list_delete</a>).
- Verifying a blocklist (<a href="https://intl.cloud.tencent.com/document/product/1047/34913">v4/sns/black_list_check</a>).