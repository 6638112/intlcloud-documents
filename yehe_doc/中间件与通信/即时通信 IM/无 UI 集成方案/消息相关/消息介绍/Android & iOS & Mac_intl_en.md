## Message Class
In the Tencent Cloud IM SDK, the message class is `V2TIMMessage` ([Android](https://im.sdk.qcloud.com/doc/en/classcom_1_1tencent_1_1imsdk_1_1v2_1_1V2TIMMessage.html) / [iOS and macOS](https://im.sdk.qcloud.com/doc/en/interfaceV2TIMMessage.html)), which will be frequently used for message sending and receiving.

The `V2TIMMessage` class defines the following content:

| Attribute |  Definition | Description |
| --- |  --- | --- |
| msgID | Message ID | It is empty when a message is created and is returned synchronously when `sendMessage` is called. |
| timestamp | Message timestamp | The time a message is sent to the server, which can be used for message sorting |
| sender | `userID` of the message sender | It can be set by usersand must be the same as the `userID` passed in during login. |
| nickName | Nickname of the message sender | It can be set by users and modified by calling `setSelfInfo`. For more information, see [User Profile](https://intl.cloud.tencent.com/document/product/1047/48162). |
| friendRemark | Remarks of the message sender's friend | It is used by the receiver. For example, if Alice sets Bob's remarks to `bob01`, when Bob sends a message to Alice, Alice will see that `friendRemark` in the message is `bob01`. It can be set by calling `setFriendInfo`. |
| nameCard | Group name card of the sender | It applies only to group messages. For example, if Alice changes her group name card to `doctorA` and sends a message to the group, other group members will receive the message where the `nameCard` field is `doctorA`. The receiver can prioritize this field as the username for display. `nameCard` can be set by calling `setGroupMemberInfo`. For more information, see [Group Member Profile](https://intl.cloud.tencent.com/document/product/1047/48178). |
| faceURL | Profile photo of the message sender | It can be set by users and can be used to download the photo. |
| groupID | Group ID | `groupID` is the group ID in a group message or `nil` in a one-to-one message. |
| userID | User ID | `userID` is the ID of the receiver in a one-to-one message or `nil` in a group message. |
| seq | Message serial number | The `seq` values of one-to-one messages are locally generated and may not be in ascending order and unique; the `seq` values of group messages are generated by the server and are in ascending order and unique in the group. |
| random | Random message code | It is generated in the SDK. |
| status | Message sending status | Currently, the following statuses are supported: sending, sent successfully, failed to send, deleted, imported locally, and recalled. |
| isSelf | Whether the message is sent by oneself | It can be used to filter messages. |
| needReadReceipt | Whether the message requires a read receipt | It is set by the sender and valid for the Ultimate edition on v6.1 or later. For more information, see [Read Receipt](https://intl.cloud.tencent.com/document/product/1047/48022). |
| priority | Message priority | It applies only to group messages and can be set by calling the `sendMessage` API. |
| groupAtUserList | List of users mentioned in the group message | It applies only to group messages and stores the `userID`. For more information, see [Group @ Message](https://intl.cloud.tencent.com/document/product/1047/48027). |
| elemType | Message type | Currently, the following message types are supported: text, custom, image, audio, video, file, geographical location, emoji, group tip, and merged messages. For more information, see [Message Types](#messageType). |
| textElem | Text message storage element | It needs to be created and entered when a text message is sent. When the message is received and `elemType` is identified as `TEXT`, the content can be parsed from `textElem`. For more information, see [Sending Message](https://intl.cloud.tencent.com/document/product/1047/47994) / [Receiving Message](https://intl.cloud.tencent.com/document/product/1047/47995). |
| customElem | Custom message storage element | It needs to be created and entered when a custom message is sent. When the message is received and `elemType` is identified as `CUSTOM`, the content can be parsed from `customElem`. |
| imageElem | Image message storage element | It needs to be created and entered when an image message is sent. When the message is received and `elemType` is identified as `IMAGE`, the content can be parsed from `imageElem`. |
| soundElem | Audio message storage element | It needs to be created and entered when an audio message is sent. When the message is received and `elemType` is identified as `SOUND`, the content can be parsed from `soundElem`. |
| videoElem | Video message storage element | It needs to be created and entered when a video message is sent. When the message is received and `elemType` is identified as `VIDEO`, the content can be parsed from `videoElem`. |
| fileElem | File message storage element | It needs to be created and entered when a file message is sent. When the message is received and `elemType` is identified as `FILE`, the content can be parsed from `fileElem`. |
| locationElem | Geographical location message storage element | It needs to be created and entered when a geographical location message is sent. When the message is received and `elemType` is identified as `LOCATION`, the content can be parsed from `locationElem`. |
| faceElem | Emoji message storage element | It needs to be created and entered when an emoji message is sent. When the message is received and `elemType` is identified as `FACE`, the content can be parsed from `faceElem`. |
| mergerElem | Merged message storage element | It needs to be created and entered when a merged message is sent. When the message is received and `elemType` is identified as `MERGER`, the content can be parsed from `mergerElem`. For more information, see [Forwarding Message](https://intl.cloud.tencent.com/document/product/1047/48001). |
| groupTipsElem | Group tip message storage element | Currently, a group tip message can be sent only by the server. When the message is received by the SDK and `elemType` is identified as `GROUP_TIPS`, the content can be parsed from `groupTipsElem`. |
| cloudCustomData | Custom message data | It is set by the sender and can be customized. It is saved in the cloud, will be sent to the receiver, and can still be pulled after the application is uninstalled and reinstalled. |
| isExcludedFromUnreadCount | Whether the message is excluded from the unread message count of the conversation | It is set by the sender. By default, messages are included in the unread message count. This field is supported by v5.3.425 or later. For more information, see [Unread Message Count in Conversation](https://intl.cloud.tencent.com/document/product/1047/48320). |
| isExcludedFromLastMessage | Whether the message is excluded from the `lastMsg` of the conversation | It is set by the sender. By default, messages are included in the `lastMsg` of the conversation. This field is supported by v5.4.666 or later. For more information, see [Conversation List](https://intl.cloud.tencent.com/document/product/1047/48326). |
| offlinePushInfo | Custom offline push message | For more information, see [Android](https://intl.cloud.tencent.com/document/product/1047/39156) / [iOS](https://intl.cloud.tencent.com/document/product/1047/39157). |
| isRead | Whether the message is read at the local end | A message is read by default if it is sent by oneself. |
| isPeerRead | Whether the message is read by the receiver | It applies only to one-to-one messages. |
| localCustomData | Custom message data | It is set by the sender. It is saved locally, will not be sent to the receiver, and will become invalid after the application is uninstalled and reinstalled. |
| localCustomInt | Custom message data | It is set by the sender. It is saved locally, will not be sent to the receiver, and will become invalid after the application is uninstalled and reinstalled. It can be used to mark whether an audio or video message has been played back. |

[](id:messageType)
## Message Types

IM messages can be classified by message destination into two types: one-to-one messages (also called C2C messages) and group messages.

| Message Type | API Keyword | Description |
| --- | --- | --- |
| One-to-one message | C2CMessage | It is also called the C2C message. When sending a one-to-one message, you must specify the `UserID` of the receiver, and only the receiver can receive this message. |
| Group message | GroupMessage | When sending a group message, you must specify the `groupID` of the target group, and all users in the group can receive this message. |

IM messages can also be classified by content into text messages, custom (signaling) messages, image messages, video messages, audio messages, file messages, location messages, and merged messages.

| Message Type | API Keyword | Description |
| --- | --- | --- |
| Text message | TextElem |	Ordinary text message |
| Custom message | CustomElem | It is a section of binary buffer and often used to transfer custom signaling in your application. |
| Image message | ImageElem | When the SDK sends an original image, it automatically generates two images in different sizes. The three images are called the original image, large image, and thumbnail. |
| Video message | VideoElem | A video message contains a video file and a thumbnail. |
| Audio message | SoundElem | It supports displaying a red dot before the playback of the audio message. |
| File message | FileElem | A file message cannot exceed 100 MB. |
| Location message | LocationElem | A location message contains three fields: location description, longitude, and latitude. |
| Merged message | MergerElem | It is suitable for merging and forwarding chat history. Up to 300 messages can be merged. |


## Message Storage Policy

IM messages can be classified by message storage policy into two types: online messages and non-online messages.
Online messages can be received only by online users and will not be pushed when they are offline. Non-online messages can be received by users whether they are online or not.

Online messages are delivered in real time and not stored on the server or in the SDK. Therefore, they cannot be pulled from historical messages after the device is changed or the application is uninstalled and reinstalled.

> ?
> 1. All messages in an audio-video group are online messages.
> 2. Messages pushed to all users are online messages.

Non-online messages are stored in the SDK and on the server. By default, they are stored on the roaming server for seven days. If you want a longer storage period, you need to purchase the value-added service. For more information on the service content and billing, see [Pricing](https://intl.cloud.tencent.com/document/product/1047/34350).

These messages can be pulled from historical messages after the device is changed or the application is uninstalled and reinstalled.


