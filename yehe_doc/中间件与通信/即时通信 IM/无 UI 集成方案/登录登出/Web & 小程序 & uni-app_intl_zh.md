## Feature Description
Users can send and receive messages only after they have logged in to the IM SDK. To log in to the Tencent backend server, a user needs to provide information, including the `UserID` and `UserSig`. For more information on these parameters, see [Login Authentication](https://intl.cloud.tencent.com/document/product/1047/33517).

## Login

>!
>- After the successful login, wait until the SDK enters the `ready` status (by listening to the [TIM.EVENT.SDK_READY](https://web.sdk.qcloud.com/im/doc/en/module-EVENT.html#.SDK_READY) event), and then call APIs that require authentication, such as [sendMessage](https://web.sdk.qcloud.com/im/doc/en/SDK.html#sendMessage).
>- To support multi-instance login (allowing logging in to the same account concurrently on multiple webpages), log in to the [IM console](https://console.cloud.tencent.com/im), find the target `SDKAppID`, and click **Application Configuration** > **Feature Configuration** > **Login and Message** > **Login Settings** > **Web** to configure the number of instances. The configuration will take effect in 5 minutes.

**API**

<dx-codeblock>
:::  js

tim.login(options);

:::
</dx-codeblock>

**Parameter**

The `options` parameter is of the `Object` type. It contains the following attribute values:

| Name    | Type   | Description                                                  |
| ------- | ------ | ------------------------------------------------------------ |
| UserID  | String | User ID.                                                     |
| UserSig | String | The password with which the user logs in to the IM console. It is essentially the ciphertext generated by encrypting information such as the UserID.<br/>For the detailed generation method, see [Generating UserSig](https://intl.cloud.tencent.com/document/product/1047/34385). |

**Returned value**

`Promise` object.

**Sample**

<dx-codeblock>
:::  js

let promise = tim.login({userID: 'your userID', userSig: 'your userSig'});
promise.then(function(imResponse) {
  console.log(imResponse.data); // Logged in successfully
  if (imResponse.data.repeatLogin === true) {
    // This indicates that the account is already logged in. This feature is supported from v2.5.1.
    console.log(imResponse.data.errorInfo);
  }
}).catch(function(imError) {
  console.warn('login error:', imError); // Error information
});

:::
</dx-codeblock>

## Logout

This API is used to log out of the IM SDK. It is usually called when you switch between accounts. This API clears the login status of the current account and all the data in the memory. 

>!
>- When calling this API, the instance publishes the [`SDK_NOT_READY`](https://web.sdk.qcloud.com/im/doc/en/module-EVENT.html#.SDK_NOT_READY) event. In this case, the instance is automatically logged out and cannot receive or send messages.
>- Assume that the value of the **Web** configuration item in the [IM console](https://console.cloud.tencent.com/im) is greater than 1, and the same account has been used to log in to instances `a1` and `a2`. After `a1.logout()` is executed, `a1` will be automatically logged out and cannot receive or send messages, while `a2` will not be affected.
>- Assume that the **Online Web Instances** is set to 2, and your account has been used to log in to instances `a1` and `a2`. When you use this account to log in to instance `a3`, either `a1` or `a2` will be forcibly logged out. In most cases, the instance that first entered the login state is forcibly logged out. This is called **kicked offline due to multi-instance login**. If `a1` is forcibly logged out, a logout process is executed within `a1` and the [KICKED_OUT](https://web.sdk.qcloud.com/im/doc/en/module-EVENT.html#.KICKED_OUT) event is triggered. You can listen for this event and redirect to the login page when the event is triggered. At this time, `a1` is forcibly logged out, whereas `a2` and `a3` can continue to run properly.

**API**

<dx-codeblock>
:::  js
tim.logout();
:::
</dx-codeblock>

**Parameter**

None

**Returned value**

`Promise` object.

**Sample**

<dx-codeblock>
:::  js

let promise = tim.logout();
promise.then(function(imResponse) {
  console.log(imResponse.data); // Logged out successfully
}).catch(function(imError) {
  console.warn('logout error:', imError);
});

:::
</dx-codeblock>

## Terminating

You can terminate SDK instances, including logout, disconnecting persistent connection, and releasing all resources.

**API**

<dx-codeblock>
:::  js
tim.destroy();
:::
</dx-codeblock>

**Parameter**

None

**Returned value**

`Promise` object.

**Sample**

<dx-codeblock>
:::  js
tim.destroy().then(() => {
  console.log('sdk destroyed');
});

:::
</dx-codeblock>

## Login Settings

By default, multi-instance login is not supported. If you use an account that has been logged in on another page to log in on the current page, the account may be forcibly logged out on the other page, which will trigger the `TIM.EVENT.KICKED_OUT` event. You can proceed accordingly after detecting the event through listening. Below is an example:

<dx-codeblock>
:::  js

let onKickedOut = function (event) {
  console.log(event.data.type);
  // TIM.TYPES.KICKED_OUT_MULT_ACCOUNT (The user is forcibly logged out because the same account logs in from multiple webpages on the web client.)
  // TIM.TYPES.KICKED_OUT_MULT_DEVICE (The user is forcibly logged out because the same account logs in from multiple terminals.)
  // TIM.TYPES.KICKED_OUT_USERSIG_EXPIRED (The signature expired.)
  // TIM.TYPES.KICKED_OUT_REST_API (The user is forcibly logged out by the RESTful API, which is supported since v2.20.0/)
};
tim.on(TIM.EVENT.KICKED_OUT, onKickedOut);

:::
</dx-codeblock>