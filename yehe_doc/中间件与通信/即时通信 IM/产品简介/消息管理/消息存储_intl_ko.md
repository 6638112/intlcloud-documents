## 로밍 메시지 저장

IM은 메시지 로밍을 지원하여 사용자가 디바이스를 변경한 경우에도 다른 사용자 또는 특정 그룹의 채팅 기록을 가져올 수 있습니다. 
기본적으로 1:1 채팅 메시지와 그룹 채팅 메시지의 로밍 기간은 7일이며 이 기간을 초과하면 메시지는 삭제됩니다. IM은 콘솔로 메시지 로밍 시간을 수정할 수 있으며, 메시지 로밍 시간 연장은 부가가치 서비스입니다. 과금에 대한 자세한 내용은 [요금 안내](https://intl.cloud.tencent.com/document/product/1047/34350)를 참고하십시오.
[](id:MsgType)
SDK 버전에 따라 이전 메시지 저장 시간 연장을 지원하는 메시지 유형이 다릅니다. 자세한 내용은 다음 표를 참고하십시오.

| SDK 버전 | 텍스트 | 사용자 정의 메시지 | 이미지| 파일 | 짧은 음성 | 쇼트 비디오 | 리치 미디어 메시지 | 
|---------|---------|---------|---------|---------|---------|---------|---------|
| Android 5.X 버전 | ✓ | ✓  | ✓| ✓ | ✓ | ✓ | ✓ |
| Android 4.X 버전 | ✓ | ✓  | ✓| ✓ | ✓ | ✓ | ✓ |
| Android 3.X 버전 | ✓ | ✓  | × | × | × | × | × |
| Android 2.X 버전 | ✓ |  ✓ | × | × | × | × | × |
| iOS 5.X 버전 | ✓ | ✓  | ✓| ✓ | ✓ | ✓ | ✓ |
| iOS 4.X 버전 | ✓ | ✓  | ✓| ✓ | ✓ | ✓ | ✓ |
| iOS 3.X 버전 | ✓ |  ✓ | × | × | × | × | × |
| iOS 2.X 버전 | ✓ |  ✓ | × | × | × | × | × |
| PC SDK 2.X 버전 | ✓ |  ✓ | × | × | × | × | × |
| Web 및 미니 프로그램 SDK 2.X 버전| ✓ | ✓  | ✓| ✓ | ✓ | ✓ | ✓ |
| Web 및 미니 프로그램 SDK 1.X 버전| ✓ |  ✓ | × | × | × | × | × |

>?사용자 경험 향상을 위해 최신 버전 SDK로 업그레이드 할 것을 권장합니다.

## 읽지 않은 메시지 저장

IM은 읽지 않은 메시지를 저장할 수 있어 로그인 후 오프라인 상태였을 때 받은 읽지 않은 메시지를 풀링할 수 있습니다. 

1:1 채팅의 읽지 않은 메시지는 기본적으로 7일 동안 저장됩니다. 모든 사용자는 최대 100개의 1:1 채팅 세션을 저장할 수 있으며 세션별로 읽지 않은 메시지를 최대 100개까지 저장할 수 있습니다. 이 값을 초과한 부분은 읽지 않음 숫자에 카운트되지는 않지만 메시지 로밍에는 저장됩니다. 그룹 채팅의 경우 수량 제한이 없습니다.

## 최근 대화 상대

최근 대화 상대는 QQ의 최근 대화 상대 목록과 유사하며 최근 사용자와 대화한 사람 및 가장 최근 메시지를 표시합니다.

기본적으로 클라이언트는 로그인 시, SDK를 통해 최근 대화 상대 정보를 가져오기하여 세션 목록을 표시합니다. 최근 대화 상대는 기본적으로 100명까지 저장하지만 저장 시간은 최근 대화 상대에서 가장 마지막으로 주고 받은 메시지 저장 시간과 같습니다. 예를 들어 기본적으로 7일 이상 주고 받은 메시지가 없으면 마지막 메시지는 만료되고 최근 대화 상대에서 해당 사용자 정보를 가져올 수 없습니다.

## App 로컬 저장

기본적으로 SDK는 받은 메시지를 저장하기 때문에 사용자가 따로 저장할 필요는 없습니다. 사용자는 인터페이스를 호출하여 로컬 메시지(네트워크 작업 필요 없음)를 가져올 수 있으며, getMessage 인터페이스를 통해서도 로컬 메시지를 가져올 수 있습니다. 로컬 메시지 기록에 공백(gap)이 있는 경우 로밍 메시지를 사용하여 공백을 채웁니다.
SDK는 기본적으로 사용자 메시지를 삭제하지 않지만 로컬 메시지를 삭제할 수 있는 옵션이 제공됩니다. 
>!로컬 저장은 디스크 공간을 사용하고 CPU 성능에 영향을 미치므로, 불필요한 경우(라이브 방송의 경우 메시지 기록 보다는 메시지 처리 성능이 더 중요) 로컬 저장 기능을 비활성화할 수 있습니다.





