CLB 인스턴스를 생성한 후에는 이에 대한 리스너를 구성해야 합니다. 리스너는 인스턴스에 대한 요청을 수신하고 로드 밸런싱 정책에 따라 트래픽을 리얼 서버로 라우팅합니다.

다음 항목을 사용하여 CLB 리스너를 구성해야 합니다.
1. 수신 프로토콜 및 포트. 수신 포트 또는 프런트엔드 포트는 요청을 수신하고 리얼 서버로 포워딩하는 데 사용됩니다.
2. 로드 밸런싱 정책 및 [Session Persistence](https://intl.cloud.tencent.com/document/product/214/6154) 등의 수신 정책.
3. [Health Check](https://intl.cloud.tencent.com/document/product/214/6097) 정책.
4. 리얼 서버. 리얼 서버의 IP와 포트를 선택하여 바인딩합니다. 서비스 포트 또는 백엔드 포트는 리얼 서버에서 요청을 수신하는 데 사용됩니다.

## 지원되는 프로토콜 유형
CLB 리스너는 CLB 인스턴스에서 레이어 4 및 레이어 7 요청을 수신하고 처리를 위해 리얼 서버로 라우팅할 수 있습니다. 레이어 4 CLB와 레이어 7 CLB의 주요 차이점은 레이어 4 프로토콜(예: TCP 또는 UDP) 또는 레이어 7 프로토콜(예: HTTP 또는 HTTPS)이 사용자 요청의 로드 밸런싱을 위해 트래픽을 포워딩하는 데 사용되는지 여부입니다.
- 레이어 4 프로토콜: 요청을 수신하고 주로 VIP + Port를 통해 트래픽을 리얼 서버로 포워딩하는 전송 레이어 프로토콜입니다.
- 레이어 7 프로토콜: URL 및 HTTP 헤더와 같은 애플리케이션 레이어 정보를 기반으로 트래픽을 분산하는 애플리케이션 레이어 프로토콜입니다.

레이어 4 리스너(즉, 레이어 4 프로토콜 포워딩)를 사용하는 경우 CLB 인스턴스는 수신 포트에서 리얼 서버와 TCP 연결을 설정하고 요청을 리얼 서버로 직접 포워딩합니다. 이 프로세스는 데이터 패킷을 수정하지 않으며(통과 모드에서) 포워딩 효율성이 높습니다.

Tencent Cloud CLB는 다음 프로토콜을 통한 요청 포워딩을 지원합니다.
- TCP(전송 레이어)
- UDP(전송 레이어)
- TCP SSL(전송 레이어)
- QUIC(전송 레이어)
- HTTP(애플리케이션 레이어)
- HTTPS(애플리케이션 레이어)
>? TCP SSL 리스너는 현재 공중망 CLB 인스턴스를 지원하지만 사설망 또는 클래식 CLB 인스턴스는 지원하지 않습니다.


<table>
<thead>
<tr>
<th width="12%">프로토콜 유형</th>
<th width="12%">프로토콜</th>
<th width="40%">설명</th>
<th width="36%">사용 사례</th>
</tr>
<tr>
<td rowspan="4">레이어 4 프로토콜</td>
<td>TCP</td>
<td>연결 지향적이고 안정적인 전송 레이어 프로토콜 <li>소스 및 타깃 엔드는 데이터 전송 전에 연결을 설정하기 위해 3방향 핸드셰이크를 수행해야 합니다. </li><li>클라이언트 IP(소스 IP) 기반 세션 지속성을 지원합니다. </li><li>클라이언트 IP는 네트워크 레이어에서 찾을 수 있습니다. </li><li>서버는 클라이언트 IP를 직접 가져올 수 있습니다.</li></td>
<td>파일 전송, 이메일 송수신, 원격 로그인과 같이 신뢰성과 데이터 정확도에 대한 요구 사항은 높지만 전송 속도에 대한 요구 사항은 상대적으로 낮은 시나리오에 적합합니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/32517">TCP 리스너 구성</a>을 참고하십시오.</td>
</tr>
<tr>
<td>UDP</td>
<td>연결 없는 전송 레이어 프로토콜 <li>소스 및 타깃 엔드는 연결을 설정하지 않으며 연결 상태를 유지하지도 않습니다. </li><li>각 UDP 연결은 지점 간입니다.</li><li>일대일, 일대다, 다대일 및 다대다 통신이 지원됩니다. </li><li>클라이언트 IP(소스 IP) 기반 세션 지속성을 지원합니다. </li><li>서버는 클라이언트 IP를 직접 가져올 수 있습니다.</li></td>
<td>인스턴트 메시징 및 온라인 비디오와 같이 전송 효율성에 대한 요구 사항은 높지만 정확도에 대한 요구 사항은 상대적으로 낮은 시나리오에 적합합니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/32518">UDP 리스너 구성</a>을 참고하십시오.</td>
</tr>
<tr>
<td>TCP SSL</td>
<td>보안 TCP <li>TCP SSL 리스너는 무단 액세스 요청을 방지하기 위해 인증서 구성을 지원합니다. </li><li>CLB가 복호화를 구현할 수 있도록 통합 인증서 관리가 제공됩니다. </li><li>단방향 및 양방향 인증이 지원됩니다. </li><li>서버는 클라이언트 IP를 직접 가져올 수 있습니다.</li></td>
<td>TCP를 사용할 때 보안 요구 사항이 높은 시나리오에 적합하며 TCP 기반 사용자 지정 프로토콜을 지원합니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/32519">TCP SSL 리스너 구성</a>을 참고하십시오.</td>
</tr>
<tr>
<td>QUIC </td>
<td>UDP 기반 다중화 동시 전송 레이어 프로토콜입니다. <li>UDP를 통한 안정적인 데이터 전송, 보안 및 HTTP2를 구현하며 TCP + TLS + HTTP2와 유사합니다. </li><li>QIUC 연결에서는 IP나 포트에 무슨 일이 일어나도 연결이 끊기지 않아 끊김 없는 연결 마이그레이션이 가능합니다.</li></td>
<td>오디오/비디오 서비스, 게임 서비스 등에 적합합니다. 4G 네트워크와 Wi-Fi 네트워크 간의 빈번한 전환 등 네트워크가 불안정한 경우 중단 없이 원활하게 서비스 마이그레이션 및 연결할 수 있습니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/44832">QUIC 리스너 구성</a>을 참고하십시오.</td>
</tr>
<tr>
<td rowspan="2">레이어 7 프로토콜</td>
<td>HTTP</td>
<td>애플리케이션 레이어 프로토콜 <li>요청된 도메인 이름 및 URL을 기반으로 하는 포워딩이 지원됩니다. </li><li>Cookie 기반 세션 지속성이 지원됩니다.</li></td>
<td>Web 애플리케이션, 모바일 App 등 요청 내용을 식별해야 하는 애플리케이션에 적합합니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/32515">HTTP 리스너 구성</a>을 참고하십시오.</td>
</tr>
<tr>
<td>HTTPS</td>
<td>암호화된 애플리케이션 레이어 프로토콜 <li>요청된 도메인 이름 및 URL을 기반으로 하는 포워딩이 지원됩니다. </li><li>Cookie 기반 세션 지속성이 지원됩니다. </li><li>CLB가 복호화를 구현할 수 있도록 통합 인증서 관리가 제공됩니다. </li><li>단방향 및 양방향 인증이 지원됩니다.</li></td>
<td>암호화된 전송이 필요한 HTTP 애플리케이션에 적합합니다. <br>자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/32516">HTTPS 리스너 구성</a>을 참고하십시오.</td>
</tr>
</tbody></table>

## 포트 구성
<table>
<thead>
<tr>
<th width="16%">포트 유형</th>
<th>설명</th>
<th width="50%">제한 사항</th>
</tr>
</thead>
<tbody><tr>
<td>수신 포트(프론트엔드 포트)</td>
<td>수신 포트는 CLB 인스턴스에서 요청을 수신하고 리얼 서버로 포워딩하는 데 사용됩니다. <br/>포트 21(FTP), 25(SMTP), 80(HTTP) 및 443(HTTPS) 등과 같은 포트 1 - 65535에 대해 CLB 인스턴스를 구성할 수 있습니다.</td>
<td><ul>하나의 CLB 인스턴스에서: <li>UDP의 수신 포트는 TCP에 사용할 수 있습니다. 예를 들어 TCP:80 리스너와 UDP:80 리스너가 공존할 수 있습니다. </li><li>수신 포트는 동일한 유형의 프로토콜에 대해 고유해야 합니다. TCP, TCP SSL, HTTP, HTTPS는 TCP이므로 TCP:80 리스너와 HTTP:80 리스너가 공존할 수 없습니다.</li></ul></td>
</tr>
<tr>
<td>서비스 포트(백엔드 포트)</td>
<td>서비스 포트는 CVM 인스턴스에서 서비스를 제공하고 CLB 인스턴스에서 트래픽을 수신 및 처리하는 데 사용됩니다. <br/>하나의 CLB 인스턴스에서 하나의 수신 포트는 여러 CVM 인스턴스의 포트로 트래픽을 포워딩할 수 있습니다. </td>
<td><ul>하나의 CLB 인스턴스에서: <li>다른 수신 프로토콜의 서비스 포트는 고유할 필요가 없습니다. 예를 들어 리스너 HTTP:80 및 HTTPS:443은 모두 CVM 인스턴스의 동일한 포트에 바인딩될 수 있습니다. </li><li>동일한 수신 프로토콜을 사용할 때 각 실제 서버 포트는 하나의 리스너에만 바인딩될 수 있습니다. 즉, 쿼드러플(VIP, 리스닝 프로토콜, 실제 서버의 사설망 IP 및 실제 서버 포트)이 고유해야 합니다.</li></ul></td>
</tr>
</tbody></table>



## 관련 문서
[Use Limits](https://intl.cloud.tencent.com/document/product/214/6187)
