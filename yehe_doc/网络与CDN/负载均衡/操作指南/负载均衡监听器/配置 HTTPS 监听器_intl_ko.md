CLB 인스턴스에 대한 HTTPS 리스너를 생성하여 클라이언트의 HTTPS 요청을 포워딩할 수 있습니다. HTTPS는 데이터 전송을 암호화해야 하는 HTTP 애플리케이션에 적합합니다.

## 전제 조건
먼저 [CLB 인스턴스를 생성](https://intl.cloud.tencent.com/document/product/214/6149)해야 합니다.

## 작업 단계

### 1단계: 리스너 구성
1. [CLB 콘솔](https://console.cloud.tencent.com/clb)에 로그인하고 왼쪽 사이드바에서 **인스턴스 관리**를 클릭합니다.
2. CLB 인스턴스 목록 페이지의 왼쪽 상단 모서리에서 리전을 선택하고 오른쪽의 작업 열에서 **리스너 구성**을 클릭합니다.
![]()
3. HTTP/HTTPS 리스너에서 **생성**을 클릭하고 ‘리스너 생성’ 팝업 창에서 HTTPS 리스너를 구성합니다.
**a. 리스너 생성**
<table>
<thead>
<tr>
<th width="15%">구성 항목</th>
<th width="70%">설명</th>
<th width="15%">예시</th>
</tr>
</thead>
<tbody><tr>
<td>이름</td>
<td>리스너 이름입니다.</td>
<td><span>test-https-443</span></td>
</tr>
<tr>
<td>리스너 프로토콜 및 포트</td>
<td>
<ul><li>리스너 프로토콜: 이 예시에서는 HTTPS가 사용됩니다. </li><li>리스너 포트: 요청을 수신하여 리얼 서버로 포워딩하는 데 사용되는 포트입니다. 포트 범위: 1 - 65535. 포트 843, 1020, 1433, 1434, 3306, 3389, 6006, 20000, 36000, 42222, 48369, 56000 및 65010은 시스템 예약 포트이며 열 수 없습니다. </li><li>리스너 포트는 동일한 CLB 인스턴스에서 고유해야 합니다.</li></ul></td>
<td>HTTPS:443</td>
</tr>
<tr>
<td>지속 연결 활성화</td>
<td>이 기능이 활성화되면 CLB와 리얼 서버 간에 지속 연결이 사용되며 CLB는 XFF에서 얻을 수 있는 소스 IP를 더 이상 통과하지 않습니다. 정상적인 포워딩을 위해서는 CLB 보안 그룹에서 기본적으로 허용 기능을 활성화하거나 CVM 보안 그룹에서 '100.127.0.0/16'을 허용합니다.</td>
<td><span>기존 인증서</span></td>
</tr>
<tr>
<td>SNI 활성화</td>
<td>SNI가 활성화된 경우 리스너의 여러 도메인 이름을 다른 인증서로 구성할 수 있습니다. 비활성화된 경우 하나의 인증서로만 리스너의 여러 도메인 이름을 구성할 수 있습니다.</td>
<td><span>비활성화</span></td>
</tr>
<tr>
<td>SSL 파싱 메소드</td>
<td>단방향 인증 및 양방향 인증이 지원됩니다. CLB는 액세스 보안을 보장하기 위해 SSL 암호화 및 복호화의 오버헤드를 인수합니다.</td>
<td><span>단방향 인증</span></td>
</tr>
<tr>
<td>서버 인증서</td>
<td><a href="https://console.cloud.tencent.com/ssl">SSL 인증서 서비스</a>에서 기존 인증서를 선택하거나 인증서를 업로드할 수 있습니다. </td>
<td><span>단방향 인증</span></td>
</tr>
</tbody>
</table>
 <b>b. 포워딩 규칙 생성</b>
 <table>
<tr>
<th>포워딩 규칙 구성</th>
<th>설명</th>
<th>예시</th>
</tr>
<tr>
<td>도메인 이름</td>
<td>포워딩 도메인 이름: <ul style="margin-bottom:0px;"><li>길이: 1 - 80자. </li><li>밑줄 `_`로 시작할 수 없습니다. </li><li>정확한 도메인 이름과 와일드카드 도메인 이름이 지원됩니다. </li><li>정규식이 지원됩니다. </li><li>자세한 구성 규칙은 <a href="https://intl.cloud.tencent.com/document/product/214/9032">레이어 7 도메인 이름 포워딩 및 URL 규칙</a>을 참고하십시오.</li></ul></td>
<td>www.example.com</td>
</tr>
<tr>
<td>기본 도메인 이름</td>
<td><li>리스너의 모든 도메인 이름이 일치하지 않으면 시스템은 요청을 기본 도메인 이름으로 보내 기본 액세스를 제어할 수 있게 합니다. </li><li>각 리스너는 기본 도메인 이름 하나만으로 구성할 수 있습니다.</li></td>
<td>활성화</td>
</tr>
<tr>
<td>HTTP 2.0</td>
<td>HTTP 2.0이 활성화된 후 CLB 인스턴스는 HTTP 2.0 요청을 수신할 수 있습니다. CLB 인스턴스는 클라이언트가 CLB 인스턴스에 액세스하는 데 사용하는 HTTP 버전에 관계없이 HTTP 1.1을 통해 리얼 서버에 액세스합니다.</td>
<td>활성화</td>
</tr>
<tr>
<td>URL 경로</td>
<td>포워딩 URL 경로: <ul style="margin-bottom:0px;"><li>길이: 1 - 200자. </li><li>정규식이 지원됩니다. </li><li>자세한 구성 규칙은 <a href="https://intl.cloud.tencent.com/document/product/214/9032">레이어 7 도메인 이름 포워딩 및 URL 규칙</a>을 참고하십시오.</li></ul></td>
<td>/index</td>
</tr>
<tr>
<td>분산 방식 </td>
<td>HTTP 리스너의 경우 CLB는 WRR(가중 라운드 로빈), WLC(가중 최소 연결) 및 IP Hash의 세 가지 스케쥴링 알고리즘을 지원합니다. <ul style="margin-bottom:0px;"><li>WRR: 요청이 가중치에 따라 다른 리얼 서버에 순차적으로 전달됩니다. 스케쥴링은 **새 연결 수**를 기반으로 수행됩니다. 여기서 가중치가 더 높은 서버는 더 많은 폴링(즉, 더 높은 확률)을 받는 반면 동일한 가중치를 가진 서버는 동일한 수의 연결을 처리합니다. </li><li>WLC: 서버에 대한 활성 연결 수에 따라 서버 부하가 추정됩니다. 스케쥴링은 서버 로드 및 가중치를 기반으로 수행됩니다. 가중치가 같으면 활성 연결이 적은 서버가 더 많은 폴링을 받게 됩니다(즉, 더 높은 확률). </li><li>IP Hash: 해시 키(Hash Key)는 요청의 소스 IP를 기반으로 정적 해시 테이블에서 해당 서버를 찾는 데 사용됩니다. 서버를 사용할 수 있고 오버로드되지 않은 경우 요청이 해당 서버로 전달됩니다. 그렇지 않으면 null 값이 반환됩니다.</li></ul></td>
<td>WRR</td>
</tr>
<tr>
<td>백엔드 프로토콜</td>
<td>백엔드 프로토콜은 CLB 인스턴스와 리얼 서버 사이에 배포됩니다. <ul style="margin-bottom:0px;"> <li>백엔드 프로토콜로 HTTP를 선택한 경우 리얼 서버에 HTTP 서비스를 배포해야 합니다. </li><li>백엔드 프로토콜로 HTTPS를 선택한 경우 리얼 서버에 HTTPS 서비스를 배포해야 하며 HTTPS 서비스의 암호화 및 암호 해독은 리얼 서버에서 더 많은 리소스를 소모합니다. </li></ul></td>
<td>HTTP</td>
</tr>
<tr>
<td>클라이언트 IP 가져오기</td>
<td>기본적으로 활성화</td>
<td>활성화됨</td>
</tr>
<tr>
<td>Gzip 압축</td>
<td> 기본적으로 활성화</td>
<td>활성화됨</td>
</tr>
</table>
 <b>c. 상태 확인</b>
자세한 내용은 <a href="https://intl.cloud.tencent.com/document/product/214/39251">HTTP 상태 확인</a>을 참고하십시오.</br> 
 <b>b. 세션 지속성</b>
<table>
<tr>
<th>세션 지속성 구성</th>
<th>설명</th>
<th>예시</th>
</tr>
<tr>
<td>세션 지속성 스위치</td>
<td><ul><li>세션 지속성이 활성화되면 CLB 리스너는 동일한 클라이언트에서 동일한 리얼 서버로 액세스 요청을 분산합니다. </li><li>TCP 세션 지속성은 클라이언트 IP 주소를 기반으로 구현됩니다. 동일한 IP 주소의 액세스 요청은 동일한 리얼 서버로 포워딩됩니다. </li><li>세션 지속성은 WRR 스케쥴링에 대해 활성화할 수 있지만 WLC 스케쥴링에는 활성화할 수 없습니다.</li></ul></td>
<td>활성화</td>
</tr>
<tr>
<td>세션 지속 시간</td>
<td><ul><li>세션 지속 기간을 초과하여 연결 내에서 새 요청이 없으면 세션 지속이 자동으로 비활성화됩니다. </li><li>값 범위: 30 - 3600초.</li></ul></td>
<td>30s</td>
</tr>
</table>


### 2단계: 리얼 서버 바인딩
1. ‘리스너 관리’ 페이지에서 생성된 리스너 `HTTP:443`을 선택합니다. 왼쪽의 **+**를 클릭하여 도메인 이름과 URL 경로를 확장하고 원하는 URL 경로를 선택하면 리스너 오른쪽의 경로에 바인딩된 리얼 서버를 볼 수 있습니다.
2. **바인딩**을 클릭하고 대상 리얼 서버를 선택하고 팝업 창에서 서버 포트 및 가중치를 구성합니다.
>? 기본 포트: ‘기본 포트’를 먼저 입력한 다음 CVM 인스턴스를 선택합니다. 모든 CVM 인스턴스의 포트는 기본 포트입니다.
>

### 3단계: 보안 그룹 구성(선택 사항)
공중망 트래픽을 격리하도록 CLB 보안 그룹을 구성할 수 있습니다. 자세한 내용은 [Configuring CLB Security Group](https://intl.cloud.tencent.com/document/product/214/14733)을 참고하십시오.

### 4단계: 리스너 수정 및 삭제(선택 사항)
생성된 리스너를 수정하거나 삭제해야 하는 경우 ‘리스너 관리’ 페이지에서 리스너를 클릭한 후 ![](https://qcloudimg.tencent-cloud.cn/raw/4ab10b98316964812832043bbfd99df6.svg) 수정 또는 ![](https://qcloudimg.tencent-cloud.cn/raw/e863cc51c29790d665d53feba800fd90.svg) 삭제를 클릭합니다.
