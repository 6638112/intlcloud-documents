## CLBとは何ですか。
Cloud Load Balancer（CLB）は複数の[CVM](https://intl.cloud.tencent.com/document/product/213/495)に対しトラフィックの分配を行うサービスです。CLBはトラフィックの分配によってアプリケーションシステムの外部に対するサービス機能の拡張を可能にするほか、単一点障害の解消によってアプリケーションシステムの可用性を高めることができます。

CLBサービスは、virtual IP（VIP）を設定することにより、**同じリージョン**にある複数のCVMリソースを高性能で可用性の高いアプリケーションサービスプールに仮想化します。アプリケーションで指定された方法に従って、クライアントからのネットワークリクエストをCVMプールに分配します。

CLBサービスは、CVMプール内のCVMインスタンスのヘルスステータスをチェックし、異常な状態のインスタンスを自動的に隔離することで、CVMのシングルポイントの問題を解消するとともに、アプリケーションの全体的なサービス機能を向上させます。

Tencent Cloudが提供するCLBサービスには自己管理、障害自己修復、ネットワーク攻撃防御などの高度な機能が含まれ、企業、コミュニティ、電子商取引、ゲームなどのさまざまなユーザーシナリオに適用可能です。

## 構成部分
サービスを提供するCLBグループは、一般的に次の部分で構成されます。
- **Cloud Load Balancer**：CLBインスタンスです。トラフィックの分配に用いられます。
- **VIP**(virtual IP)：CLBがクライアントにサービスを提供するためのIPアドレスです。
- **Backend/Real Server**：バックエンドの1組のCVMインスタンスであり、実際のリクエストの処理に用いられます。
- **VPC/基幹ネットワーク**：ネットワーク環境全体です。

CLB以外からのアクセスリクエストは、CLBインスタンスを介し、関連のポリシーおよび転送ルールによってバックエンドCVMに分配されて処理されます。

## 用語の説明
<table>
<tr>
<th width="19%">用語</th>
<th width="15%">正式名称</th>
<th width="66%">説明</th>
</tr>
<tr>
<td>CLB</td>
<td>Cloud Load Balancer</td>
<td>Tencent Cloudが提供するネットワークロードバランシングサービスです。Cloud Virtual Machine（CVM ）と組み合わせることで、TCP/UDPおよびHTTPをベースにしたロードバランシングサービスをユーザーにご提供できます。</td>
</tr>
<tr>
<td>CLBリスナー</td>
<td>Load Balance Listener</td>
<td>ロードバランシングサービスのリスナーであり、リスニングポート、ロードバランシングポリシー、ヘルスチェック設定などが含まれます。各リスニング項目はバックエンドのアプリケーションサービスにそれぞれ対応します。</td>
</tr>
<tr>
<td>バックエンドサーバー</td>
<td>Real Server</td>
<td>CLBから分配されたリクエストを受信する1組のCVMインスタンスです。ロードバランシングサービスはユーザーが設定したルールに従ってアクセスリクエストをこのバックエンドCVMに転送し、CVMはそれらを処理します。</td>
</tr>
<tr>
<td>virtual IP</td>
<td>Virtual IP</td>
<td>システムが割り当てたサービスアドレスであり、現在のIPアドレスです。ユーザーはこのサービスアドレスを外部に公開するかどうかを選択でき、パブリックネットワークタイプとプライベートネットワークタイプのロードバランシングサービスをそれぞれ作成できます。<ul><li>パブリックVIP<ul><li>標準IP：一般的なBGP IPであり、ネットワーク品質とコストのバランスをとるために用いられます。</li><li>アクセラレーションIP：Anycastを使用したアクセラレーションであり、パブリックネットワークアクセスをより安定した、信頼性の高い、低レイテンシーなものにします。</li><li>静的単一IP：単一のネットワークキャリアによってパブリックネットワークにアクセスします。低コストかつセルフスケジューリングに便利です。</li></ul></li><li>プライベートネットワークVIP<ul><li>VPCネットワーク：VPC内のIPです。</li><li>基幹ネットワークのプライベートIPです。</li></ul></li></ul></td>
</tr>
</table>

## 動作原理
### 基本動作原理
CLBはクライアントからのインバウンドトラフィックを受信し、リクエストを1つまたは複数のアベイラビリティーゾーンのバックエンドCVMインスタンスにルーティングして処理を行います。

ロードバランシングサービスは主にCLBリスナーによって提供されます。リスナーはCLBインスタンス上のリクエスト、実行ポリシーによるバックエンドサーバーへの分配などのサービスの監視を担います。**クライアント - CLB**および**CLB - バックエンドサーバー**という2つのディメンションの転送プロトコルおよびプロトコルポートを設定することで、CLBはバックエンドCVMにリクエストを直接転送することが可能になります。

CLBのバックエンドCVMインスタンスは複数のアベイラビリティーゾーンに設定することをお勧めします。1つのアベイラビリティーゾーンが使用不能となった場合に、CLBがトラフィックを別のアベイラビリティーゾーンの正常に実行中のインスタンスにルーティングすることで、アベイラビリティーゾーンの障害によるサービス中断を防止できるためです。

### リクエストルーティングの選択
クライアントリクエストはドメイン名によってサービスにアクセスします。リクエストがCLBに送信される前に、DNSサーバーがCLBドメイン名を解決し、リクエストを受信するCLBのIPアドレスをクライアントに返します。CLBリスナーはリクエストを受信すると、異なるロードバランシングアルゴリズムを使用してリクエストをバックエンドサーバーに分配します。現在Tencent Cloudは重み付けラウンドロビン、ip_hash、重み付け最小接続などの複数のバランシングアルゴリズムをサポートしています。

### バックエンドサービスステータスの監視
CLBはバックエンドインスタンスの実行状況を監視することで、正常に実行中のインスタンスのみにトラフィックがルーティングされるよう保証することもできます。CLBは正常に実行していないインスタンスを検出した場合、このインスタンスへのトラフィックのルーティングを停止し、次にインスタンスの正常な実行が検出されてから、トラフィックのルーティングを再開します。

## 関連サービス
CLBは次のサービスと併用することで、アプリケーションの可用性と拡張性を向上させることができます。
- [CVM](https://intl.cloud.tencent.com/document/product/213)インスタンス：アプリケーションがクラウド上で実行する仮想サーバーです。
- [Auto Scaling](https://intl.cloud.tencent.com/document/product/377)：インスタンスの数をフレキシブルに制御します。Auto ScalingでCLBインスタンスを有効化すると、スケーリングされたインスタンスが自動的にCLBグループに追加され、また終了したインスタンスは自動的にCLBグループから削除されます。
- [CM](https://intl.cloud.tencent.com/document/product/248)：CLBとすべてのバックエンドインスタンスの実行状況を監視し、必要な操作の実施をサポートします。


