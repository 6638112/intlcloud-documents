
## 1. CLB의 HTTPS 기능
프로토콜 스택과 서버를 최적화함으로써 Tencent Cloud CLB는 HTTPS 성능을 크게 향상시킵니다. 한편, Tencent Cloud는 국제 협력을 통해 인증서 비용을 대폭 절감합니다. Tencent CLB는 다음과 같은 측면에서 귀하의 비즈니스에 도움이 될 수 있습니다.
1. HTTPS 사용은 Client의 액세스 속도에 영향을 미치지 않습니다.
2. 클러스터 내 단일 서버의 SSL 암호화 및 복호화 성능은 고성능 CPU보다 최소 3.5배 높은 초당 최대 6.5W cps의 전체 핸드셰이크를 지원합니다. 이를 통해 서버 비용을 절감하고 비즈니스 운영 및 트래픽 급증 시 서비스 기능을 크게 향상시키며 공격 방지 기능을 강화합니다.
3. 여러 프로토콜의 오프로딩 및 변환이 지원되어 다양한 클라이언트 프로토콜에 적응하는 비즈니스의 스트레스를 줄입니다. 비즈니스 백엔드는 HTTP2, SPDY, SSL 3.0 및 TLS 1.2와 같은 다른 버전의 프로토콜을 사용하기 위해 HTTP1.1만 지원하면 됩니다.
4. 원스톱 SSL 인증서 적용, 모니터링, 교체를 지원합니다. Tencent Cloud는 국제 인증 기관인 comodo 및 symantec과 협력하여 인증서 신청 프로세스를 간소화하고 비용을 절감합니다.
5. Anti-CC 및 WAF 기능을 제공하여 느린 HTTP 공격, 고빈도 표적 공격, SQL 인젝션 및 웹 사이트 트로이 목마와 같은 애플리케이션 레이어 공격을 효과적으로 제거합니다.

## 2. 테스트 목적
HTTPS 서비스는 본인 인증, 정보 암호화, 무결성 검증 등의 장점이 있습니다. 그러나 SSL 프로토콜을 사용하여 보안 통신을 구현하면 암호화 및 암호 해독에 의한 대기 시간 증가 및 CPU 리소스 소비를 포함하여 특정 성능 손실이 발생합니다. 본문은 SSL 암호화 및 복호화 시 Tencent Cloud HTTPS 서비스의 극한 성능 테스트 데이터가 포함되어 있습니다. 기존 HTTPS 성능 데이터와 비교할 수 있습니다.

## 3. 테스트 환경
- 스트레스 테스트 툴: wrk 4.0.2
- Tencent Cloud의 기본 서비스 환경: Nginx 1.1.6_1.9.9 + Openssl 1.0.2h
– Nginx가 설치된 OS 정보: inux TENCENT64.site 3.10.94-1-tlinux2-0036.tl2 #1 SMP Thu Jan 21 03:40:59 CST 2016 x86_64 x86_64 x86_64 GNU/Linux
- 다른 스트레스 서버의 OS: Linux TENCENT64.site 2.6.32.43-tlinux-1.0.17-default #1 SMP Tue Nov 17 18:03:12 CST 2015 x86_64 x86_64 x86_64 GNU/Linux

## 4. WebServer 클러스터 테스트 방식
단일 서버의 스트레스는 Tencent Cloud의 https 서비스의 성능 제한을 테스트하기에 충분하지 않습니다. 여러 스트레스 서버가 필요합니다. 테스트에는 세 부분이 포함됩니다.
1. 스트레스 테스트 클러스터. http/https 스트레스를 분산시키고 단일 스트레스 서버의 스트레스 테스트 결과를 출력하는데 사용됩니다.
2. 스트레스 테스트 클러스터의 시작과 끝을 동기적으로 제어하는 중앙 제어 서버는 각 스트레스 서버에서 테스트 데이터를 가져와 데이터를 집계하여 출력합니다.
3. 웹 서버는 Tencent Cloud의 HTTPS 서비스를 호스팅하는 CVM 인스턴스입니다. WebServer 성능이 테스트되면 upstream 연결 없이 페이지를 직접 반환할 수 있습니다.
연결은 다음과 같습니다.

![](https://mc.qcloudimg.com/static/img/180044320ba540f396a06925d8f07bbd/CLB-OPS+Guidelines-Load+Balancer+HTTPS+Service+Performance+Test.jpg)

## 5. HTTPS WebServer의 성능 테스트 데이터

| 연결 유형 | Session cache | 패킷 크기(bytes) | 암호화 제품군 | 성능(qps) |
|---------|---------|---------|---------|---------|
| 지속 | On | 230 | ECDHE-RSA-AES128-GCM-SHA256 | 296241 |
| 비지속 | Off | 230 | ECDHE-RSA-AES128-GCM-SHA256 | 65630 |

## 6. CLB HTTPS 성능 테스트 결론
상기와 같이 Tencent Cloud의 HTTPS 서비스는 SSL 암호화 및 복호화를 지원합니다. 백엔드에 여러 서버 클러스터가 있으며 클러스터의 단일 서버는 전체 핸드셰이크 중에 최대 65000 qps, 지속 연결 중에 약 300000 qps의 성능을 달성할 수 있습니다.

정상적인 상황에서 HTTPS 프로토콜은 SSL 프로토콜을 사용할 때 하나 이상의 전체 핸드셰이크 프로세스를 추가하고 대기 시간은 2 × 왕복 시간(RTT)만큼 증가합니다. 또한 SSL 대칭/비대칭 암호화는 많은 양의 CPU 리소스를 사용합니다. RSA의 암호 해독 기능은 HTTPS 기반 액세스의 주요 장애물입니다.

Tencent Cloud의 HTTPS 서비스를 사용하면 SSL 암호화 및 복호화를 위한 추가 서비스를 배포할 필요가 없습니다. 추가 요금이 부과되지 않는 이 서비스를 통해 강력한 비즈니스 호스팅 및 공격 방지 기능을 누릴 수 있습니다.
