本ドキュメントでは、COSコンソールでCDNアクセラレーションCOSを実現する全体的な操作フローと具体的な操作方法を詳しく説明します。

## 前提条件
1. Tencent Cloudのアカウント登録を完了し、実名認証します。
2. CDN サービス有効化の詳細については、[CDN クイックスタート](https://intl.cloud.tencent.com/document/product/228/32978)をご参照ください。

## 操作ガイド
### バケットの作成
バケット作成の操作フローと方法については、[バケットの作成](https://intl.cloud.tencent.com/document/product/436/13309)をご参照ください。

### アクセラレーション設定
1. バケットを作成後、直接そのバケットの設定管理ページに進むか、またはバケットリストにある設定バケットの操作欄から【設定管理】をクリックし、設定管理ページで【ドメイン名管理】を選択します。
2. **デフォルトCDNアクセラレーション**を有効化します
**デフォルトCDNアクセラレーション**はシステムによってデフォルトで発行され、CDNアクセラレーションノードのドメイン名から、ユーザーは有効か無効を選択できます。
(1) デフォルトCDNアクセラレーションモジュールにおいて、【編集】をクリックし、現在のステータスを手動で有効化すると、デフォルトCDNアクセラレーションの設定に進みます
![](https://main.qcloudimg.com/raw/260fde070f4b2f999c0d9d09bec13d55.png)
(2) デフォルトCDNアクセラレーションを設定します：
![](https://main.qcloudimg.com/raw/2b72c25d2bf11f0c53a2e8286fcecf07.png)
**オリジンサーバータイプ**：通常デフォルトは**デフォルトオリジンサーバー**で、オリジンサーバーのバケットとして静的ウェブサイトを有効化した場合、且つ静的ウェブサイトアクセラレーションを希望する場合、**静的ウェブサイトオリジンサーバー**を選択します。
**back-to-origin認証**：バケットがパブリックリードの場合、back-to-origin認証を有効化する必要はありません。バケットがプライベートリードの場合、CDNサービスの権限承認を追加し、手動でback-to-origin認証を有効化する必要があります。詳細情報については、[back-to-origin認証の有効化](https://intl.cloud.tencent.com/document/product/436/31505)をご参照ください。
**CDNサービス権限承認**：【CDNサービス権限承認の追加】をクリックし、CDNがバケット内のリソースへアクセスすることを選択してそれに同意します。
![](https://main.qcloudimg.com/raw/41e745800445225d042ef82c6febcc19.png)
(3) 設定が完了した後、【保存】をクリックすると、CDNアクセラレーションが有効化されます
![](https://main.qcloudimg.com/raw/5ffc31cb49410b4685316e75860c9385.png)

>!プライベートリードバケットに対して、back-to-origin認証とＣＤＮサービス権限承認を同時に有効化すると、CDNがオリジンサーバーへアクセスする際に署名を必要としないため、CDNキャッシュリソースがパブリックネットワーク配信を行い、データセキュリティに影響します。CDN認証を有効化することを推奨します。
>
3. **カスタムCDNアクセラレーション**を有効化します
ユーザーはICP登録済みの**カスタムドメイン名**をバケットにバインドでき、且つCDNアクセラレーションを有効化できます。
>?COSコンソールで追加できるカスタムドメイン名は10個までです。
>
(1) **カスタムCDNアクセラレーション**モジュールで【ドメイン名の追加】をクリックすると、ICP登録済みのカスタムドメイン名が追加されます
![](https://main.qcloudimg.com/raw/eda34cc24d82cebf109e3507a2ae142f.png)
(2) ドメイン名追加の設定は次のとおりです：
**ドメイン名**：バインド対象のカスタムドメイン名（例えば`www.example.com`）を入力します。入力するドメイン名はICP登録済みであること、及びDNSサービスプロバイダーが対応するCNAMEを設定していることが必要です。詳細については、[CNAME設定](https://intl.cloud.tencent.com/document/product/228/3121) をご参照ください。
**back-to-origin認証**：プライベートリードバケットに対して、back-to-origin認証を手動で有効化してオリジンサーバーを保護してください。
設定が完了した後、【保存】をクリックすると、ドメイン名への追加を完了できます。
![](https://main.qcloudimg.com/raw/e21189d91929209ded554581d267a505.png)
>!プライベートリードバケットに対して、back-to-origin認証とＣＤＮサービス権限承認を同時に有効化すると、CDNがオリジンサーバーへアクセスする際に署名を必要としないため、CDNキャッシュリソースがパブリックネットワーク配信を行い、データセキュリティに影響します。CDN認証を有効化することを推奨します。
>
(3) 保存すると、**CDN認証**欄にCDN認証機能スイッチが出現し、カスタムドメイン名CDN認証を手動で有効化できます。
**CDN認証：**タイムスタンプ認証設定を有効化すると、ユーザーコンテンツの悪質な盗難を防止できます。ドメイン名追加完了後に設定する必要があります。

COSコンソールでCDNアクセラレーションCOSを実現する詳細内容については、[COSドメイン名管理の概要](https://intl.cloud.tencent.com/document/product/436/18424)をご参照ください。


## 推奨設定
1. 設定完了後、 [CDNコンソール](https://console.cloud.tencent.com/cdn)にアクセスしてCOS下のリソースファイルに対してプリフェッチを行います。事前に静的リソースをCDNアクセラレーションノードにプリフェッチし、オリジンサーバーのストレスを軽減してレスポンスとダウンロードの速度を向上させます。詳細については、[キャッシュプリフェッチ](https://intl.cloud.tencent.com/document/product/228/39000)をご参照ください。
2. クロスドメインのヘッダーパラメーターを設定します。リソースのクロスドメイン権限に関する問題を解決する場合、詳細は[HTTPレスポンスヘッダーの設定](https://intl.cloud.tencent.com/document/product/228/35320)をご参照ください。
3. クライアントオリジンサーバーのリソースが変更済みの場合、キャッシュを更新してからプリフェッチを行うことを推奨します。詳細は[キャッシュ更新](https://intl.cloud.tencent.com/document/product/228/6299)をご参照ください。
