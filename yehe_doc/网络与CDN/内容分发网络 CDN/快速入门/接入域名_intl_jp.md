<style> 
table th:nth-of-type(1) { width:18%; } 
table th:nth-of-type(2){ width:82%; } 
</style>

CDNサービスをアクティブにした後、[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、メニューバーで**ドメイン名管理**を選択すると、アクセラレーションドメイン名を追加し、Tencent Cloud CDNが提供するアクセラレーションサービスをご利用いただけます。ドメイン名が追加されると、関連ドメイン名の設定がネットワーク全体のCDNアクセラレーションノードに配信され、実稼働環境でのサービスに直接影響することはありません。アクセラレーションを有効にするには、CNAMEレコードを設定する必要があります。操作手順の詳細については、[CNAMEの設定](https://intl.cloud.tencent.com/document/product/228/3121)をご参照ください。



## ドメイン名の追加

ドメイン名管理ページに入り、**ドメイン名の追加**をクリックします。
![](https://main.qcloudimg.com/raw/020628a1fba4d8529bf3b5be7f459170.png)

ドメイン名の追加ページは3つの部分で設定されています。

- ドメイン名属性の設定
- オリジンサーバーの設定
- アクセラレーションサービスの設定

Tencent Cloud CDNは、選択したドメイン名の属性設定とオリジンサーバー設定に基づいて、キャッシュ機能設定を推奨し、変更せずに直接送信できます。

### その1：ドメイン名属性の設定

ドメイン名設定モジュールに業務用のサービスドメイン名を入力し、そのプロジェクト、アクセラレーションリージョンおよびサービスタイプを選択します。
![](https://main.qcloudimg.com/raw/6ec038f7f063b01cc1d68ecbfe4cb5c8.png)

**設定項目の詳細説明：**

| 設定項目        | 説明                                                     |
| ------------- | ------------------------------------------------------------ |
| ドメイン名     | 1. ドメイン名の長さは81文字以内です。<br/>2. ドメイン名は工信部にてICP登録済みのものとします。<br/>3.ドメイン名はa.test.com、a.b.test.comのなどの形式のサブドメイン名または\*.test.com、\*.a.test.com形式の汎用ドメイン名とします。<br/>4. ドメイン名にアクセスするのが汎用ドメイン名である場合、他のユーザーによってアクセスされている場合、または新しいドメイン名に初めてアクセスする場合は、[ドメイン名所有検証](#m1)を行う必要があります。<br/><br/><strong>注意事項：</strong><br/>1. 汎用ドメイン名にアクセスした後、そのサブドメイン名または第2レベル汎用ドメイン名については、他のアカウントでのアクセスを現在サポートしていません。<br/>2. `*.test.com` と`*.a.test.com`の同時アクセスは現在サポートしていません。</strong><br/>3. 現在、ホワイトリストはアンダーラインを含むドメイン名および中国語ドメイン名の punycode 変換によるアクセスをサポートしています。申請書を提出し ホワイトリストへの登録を申請することができます。<br/>　• 中国本土の中国語ドメイン名はまず中国語の形式で関連の登録を行う必要があります。<br/>　• 「中国語.ドメイン名」などの中国語ドメイン名は、ホワイトリストへの登録が完了した後、サードパーティのツールで「xn--fiq228c.xn--eqrt2g」に変換した後、アクセスすることができます。<br/>　• 「test_qq.tencent.cloud」などのアンダーラインを含むドメイン名は、ホワイトリストへの登録が完了した後、直接追加することができます。<br/>4. ドメイン名が悪意のドメイン名や高リスクのドメイン名である場合は、アクセスできません。詳細については、 [使用制限](https://intl.cloud.tencent.com/document/product/228/32981)をご参照ください。 |
| 所属プロジェクト      | プロジェクトは、Tencent Cloudのすべてのクラウドサービスの共有リソースセットの概念です。[プロジェクト管理](https://console.cloud.tencent.com/project)ページでプロジェクト関連の操作を実行できます。|
| アクセラレーションリージョン      | 中国本土：グローバルユーザーからのアクセスは、中国本土のアクセラレーションノードにスケジューリングされてサービスを提供します。<br/>中国本土以外：グローバルユーザーからのアクセスは、中国本土以外のアクセラレーションノードにスケジューリングされてサービスを提供します。<br/>グローバル：グローバルユーザーからのアクセスは、最も近いノードにスケジューリングされてサービスを提供します。<br/><br/><strong>注意事項：</strong><br/>中国本土と中国本土以外アクセラレーションサービスは別々で課金されます。課金ポリシーの詳細について[クリックして確認](https://intl.cloud.tencent.com/document/product/228/2949)してください。|
| 業務タイプ      | Tencent Cloud CDN/ECDNは、さまざまな業務タイプに応じてターゲットを絞ったアクセラレーションパフォーマンスの最適化を行いました。<br/>より良いアクセラレーション効果を得るために、ご自身の業務により近い業務タイプを選択することをお勧めします。<br/><br/>静的アクセラレーション：eコマース、ウェブサイト系、ゲーム画像系といった小さなリソースアクセラレーションシナリオに適しています。<br/>ダウンロードアクセラレーション：ゲームのインストールパッケージ、オーディオビデオソースファイルのダウンロード、携帯電話のファームウェアの配布といったシナリオのダウンロードに適しています。<br/>ストリーミングメディアのオンデマンドアクセラレーション：eラーニング、オンライン動画オンデマンドなどのシナリオに適しています。<br/><br/>動的・静的アクセラレーション：さまざまなウェブサイトのホームページなど、動的・静的データが統合されているビジネスシナリオに適しています。<br/>動的アクセラレーション：アカウントログイン、注文トランザクション、API呼び出し、リアルタイムな照会などのシナリオに適しています。<br/><br/><strong>注意事項：</strong><br/>既存のものでCDNサービスのみをアクティブ化したユーザーの場合、動的・静的アクセラレーション/動的アクセラレーションドメイン名を初めて追加する際、システムによってECDNサービスが自動的にアクティブ化されます。ECDNドメイン名によって発生した料金は、[ECDNの課金方法](https://intl.cloud.tencent.com/document/product/570/37505)に従って、お客様の伝票に反映されます。 |
| IPv6アクセス<br> | IPv6アクセススイッチはデフォルトで無効になっています。有効にすると、IPv6プロトコル経由でCDNノードにアクセスできるようになります。ドメイン名を追加した後、自分でこのスイッチを有効化/無効化できます。<br/><strong><br/>注意事項：</strong><br>• 一部のプラットフォームはアップグレード中となり、現在IPv6アクセスの有効化がサポートされていません。フルリリースされるまで今しばらくお待ちください。<br/>• 中国本土でのみIPv6 アクセスをサポートしています。ドメイン名のアクセラレーションリージョンがグローバルである場合は、IPv6アクセススイッチを有効にした後、中国本土でのみ有効になります。ドメイン名のアクセラレーションリージョンが中国本土以外の場合は、有効になりません。 |
| タグ          | 最大50個のタグを追加できます。<br/>既存のタグの選択のみをサポートします（タグコンソールで追加されたタグ）。<br/>タグを追加するには、タグキーとタグ値が入力必須で、必ず入力する必要があります。[タグ管理](https://console.cloud.tencent.com/tag/taglist)でタグの関連操作が行えます。 |

### その2：オリジンサーバーの設定

サービスオリジンサーバー関連情報を設定します。CDNノードはキャッシュにリソースがない場合、オリジンサーバーに戻り、プルしてキャッシュします。
![](https://main.qcloudimg.com/raw/947c24efc846a11b25dca0f8ea552422.png)

**設定項目の詳細説明：**

| 設定項目    | 説明                                                     |
| --------- | ------------------------------------------------------------ |
| オリジンサーバータイプ  | ユーザー保有オリジンサーバー：<br>安定して稼働しているビジネスサーバー（つまり、オリジンサーバー）のシナリオがすでにあります。<br/><br><a href = "https://intl.cloud.tencent.com/product/cos">COSオリジンサーバー</a>：<br>リソースはTencent CloudのCOSにストレージされており、bucketを直接選択してオリジンサーバーにすることができます。<br><br/>サードパーティCOS：<br>Tencent Cloud以外のサードパーティCOSです。現在サポートされているサードパーティは、AWS S3とAlibaba Cloud OSSです。<br/>**注**：一部のプラットフォームは当面、サードパーティのCOSCloud Object Storageをサポートしません。フルリリースまでしばらくお待ちください。 |
| オリジンサーバーアドレス | ユーザー保有オリジンサーバー：<br/>1. 複数のIPをオリジンサーバーとして設定することをサポートし、back-to-originのときにポーリングback-to-originを実行します。<br/>2. 設定ポート(0～65535)と重み(1～100)の追加をサポートします。`オリジンサーバー:ポート:重み`（ポートはデフォルト設定可能：`オリジンサーバー::重み`）、HTTPSプロトコルのみポート443を一時的にサポートします。<br/> 3.オリジンサーバーとしてドメイン名の設定をサポートします。このドメイン名は、CDNアクセラレーションドメイン名と同じにできません。<br/>**注**：オリジンサーバーのアドレスがアクセスされたCDNアクセラレーションドメイン名である場合、解析がループされ、back-to-originが正常にできなくなります。<br/><br/>COSオリジンサーバー：<br/>1. Tencent CloudのCOSのバケットをオリジンサイトとして選択します。<br/>2. バケットの設定と実際のビジネスシナリオに応じて、デフォルトのドメイン名または静的ウェブサイトタイプを選択します。<br/>3. バケットがプライベートバケットの場合は、CDNを承認し、back-to-originの認証を有効にして、 プライベートバケットへのアクセスを有効にしてください。<br/><br/>サードパーティCOS：<br/>1. リソースがサードパーティのCOSに保存されている場合は、オリジンサーバーとして有効なバケットアクセスアドレスを入力してください。現在サポートされているサードパーティは、AWS S3およびAlibaba Cloud OSSです。<br/>**例**： プロトコルヘッダー`http://`または`http://`プロトコルヘッダー、`my-bucket.oss-cn-beijing.aliyuncs.com`または`my-bucket.s3.ap-east-1.amazonaws.com`を含めることはできません。<br/>2. サードパーティのプライベートバケットにback-to-originするには、有効なキーを入力し、back-to-origin認証を有効にして、プライベートバケットへのアクセスを有効にする必要があります。 |
| back-to-originプロトコル  | オリジンサーバーでのサポート状況に応じて、back-to-originのリクエストプロトコルを選択します。<br/>HTTP：<br/>HTTP/HTTPSアクセスはHTTP back-to-originを使用します。<br/><br/>HTTPS：<br/>HTTP/HTTPSアクセスはHTTPS back-to-originを使用します。（オリジンサーバーはHTTPSアクセスをサポートする必要があります）。<br/><br/>Follow protocol：<br/>HTTPアクセスはHTTP back-to-originを使用します。HTTPSアクセスはHTTPS back-to-originを使用します。（オリジンサーバーはHTTPSアクセスをサポートする必要があります）。 |
| back-to-origin Host | back-to-originドメイン名です。CDNノードがback-to-originのときにアクセスした、オリジンサーバーのIPアドレスの下にある具体的なサイトドメイン名のことです。<br/><br/>セルフソース：<br/>デフォルトは現在のアクセラレーションドメイン名です。汎用ドメイン名にアクセスする場合、デフォルトは汎用ドメイン名であり、実際のback-to-origin HOSTはアクセスドメイン名です。実際の業務状況に応じて、ご自身で変更することができます。<br/><br/>COSソース：<br/>デフォルトはバケットアクセスアドレスです。これはソースサイトアドレスと一致しており、変更できません。<br/><br/>サードパーティCOS：<br/>デフォルトはバケットアクセスアドレスです。これはオリジンサーバーと一致しており、変更できません。|

### その3：アクセラレーションサービスの設定

ノードアクセラレーションサービス関連の設定を行います。
![](https://main.qcloudimg.com/raw/6e918f4e91d4c5249172589475f292a1.png)

**設定項目の詳細説明：**

| 設定項目   | 説明                                                     |
| :------- | :----------------------------------------------------------- |
| パラメータ無視 | ノードがリソースをキャッシュするには、Key-Valueマッピングに従います。ここでのKeyはリソースURLです。「パラメータの無視」を有効にすると、KeyはURLの「?」以降のパラメータを無視してマッピングします。「パラメータを無視」を有効にしない場合、Keyは完全なリソースURLになります。静的アクセラレーションタイプは、デフォルトでは無効になっており、ダウンロードおよびストリーミングメディアVODアクセラレーションタイプは、デフォルトでは有効になっています。|
| Back-to-Origin of Range | back-to-origin時にパート化するかどうかを設定します。有効化するにはオリジンサーバーがパート化をサポートしている必要があります。オリジンサーバータイプがCOSオリジンサーバーである場合、またはサービスタイプがダウンロード、ストリーミングメディアVODアクセラレーションである場合、Back-to-Origin of Rangeがデフォルトで有効になっています。 |
| キャッシュルール | ノードキャッシュの有効期限の設定を指します。静的アクセラレーションタイプの場合、通常の動的ファイル（ php、jsp、asp、aspxなど）はデフォルトでキャッシュされず、その他すべてのファイルはデフォルトで30日間キャッシュされます。ダウンロードおよびストリーミングメディアVODアクセラレーションの場合、すべてのファイルのキャッシュ有効期限はデフォルトで30日です。設定されたノードキャッシュの有効期限は最長有効期限であり、ノードのストレージリソースの影響を受けます。実際のキャッシュ時間は、状況に応じて決定されます。 |

## アクセスの完了

**送信を確認**をクリックし、ドメイン名追加操作を完了します。ドメイン名の設定をネットワーク全体のノードに配信するには約5～10分かかります。しばらくお待ちください。
![](https://main.qcloudimg.com/raw/d5bcb556ac1b89946ec15642d3249676.png)

## 後続の操作

>アクセスが完了した後、Tencent Cloud CDNは対応するCNAMEアドレスをアサインします。CDNサービスを有効にするには、まずCNAMEを設定する必要があります。詳細については、[CNAMEの設定](https://intl.cloud.tencent.com/document/product/228/3121)をご参照ください。

## ドメイン名所有権検証[](id:m1)

アクセスするドメイン名が汎用ドメイン名か、または他のユーザーからすでにアクセスされている場合、もしくは初めて新しいドメイン名にアクセスする場合は、ドメイン名所有権の検証を実施する必要があります。検証に通ってからドメイン名にアクセス、またはドメイン名が戻されるようになります。
ドメイン名所有権の検証方法がDNSによる検証の場合、次の手順で検証します。

1.**検証方法**をクリックして、DNS検証に追加する必要がある解決レコード情報を取得します。検証が完了するまでページを閉じないでください。
   ![img](https://main.qcloudimg.com/raw/c05c0d869a71dbe68092ccee632c2d1a.png)
2. ドメイン名解析サービスプロバイダ側で、レコードタイプがTXTのDNSレコードを追加します。ホストレコードに_cdnauthを入力し、レコード値は検証方法のところでランダムに生成されたレコード値とします。
3. TXT解析が有効になるのを待ち、**検証**ボタンをクリックして確認します。「検証に失敗しました」と表示された場合は、DNSレコードが有効になってからもう一度試して、TXTレコードが正しく入力されているかどうかを確認します。
