## スポットインスタンスとは何ですか。
スポットインスタンス（Spot）はCVMインスタンスの新しい稼働モードです。その中核である特徴は割引価格及びシステム中断メカニズムです。つまり、スポットインスタンスを割引価格で購入できますが、その同時にシステムはスポットインスタンスを自動的に回収する可能性があります。1つのスポットインスタンスを購入し入手した後に、その利用方法（コンソール操作、リモートログイン、サービスデプロイ、VPCとの関連付け等を含む）は従量課金 CVM インスタンスと基本的に同じです。

- 関連リンク：[よくある質問 > インスタンス関連 > スポットインスタンス](https://intl.cloud.tencent.com/document/product/213/17817)
- 関連リンク：[スポットインスタンスの購入方法](https://intl.cloud.tencent.com/document/product/213/17926)

## 現段階での特別なポリシー
- **固定の割引比例**：すべての仕様のスポットインスタンスは固定した割引で販売されます（同じ仕様の従量課金インスタンスの20%の価格で販売されます）。一部のタイプのインスタンスは価格を若干調整することがあります。
- **供給不足によるシステムの中断**：現段階では、システムは市場価格がユーザーの指値以上なことで中断することはありませんが、スポットインスタンスの在庫不足により中断することはあります。在庫不足の場合は、システムは割り当てられたスポットインスタンスからランダムに回収します。
- **すべてのリージョンで利用可能**：スポットインスタンスはTencent Cloudの大部分のリージョンで利用できます。スポットインスタンスでサポートされるインスタンスタイプは、従量課金インスタンスでサポートされるインスタンスタイプと同じです。サポートされている最新リージョンとインスタンスタイプについては、 [スポットインスタンス - サポートされているリージョンとインスタンスタイプ>>](https://intl.cloud.tencent.com/document/product/213/17817)をご参照ください。　　

## 製品の特徴
### I. 高いコストパフォーマンス
![](https://main.qcloudimg.com/raw/8179ef6629ac0a0b4b9c3c9cd6f80ffa.png)
スポットインスタンスは、従量課金インスタンスの割引価格で販売されています。最低は9割引です。
- **割引幅**：スポットインスタンスは同じ仕様の従量課金インスタンスの価格を基準とし、割引販売を行っています。割引価格の範囲は10%の価格から原価までです。
- **割引対象**：CVM CPUとメモリのみが割引対象になります。ほかの部分（例えばシステムディスク、データディスク、帯域幅、有料イメージなどのCVM関連課金項目）は、割引の対象にはなりません。
- **価格変動**：この割引率は一定期間は安定していますが、アベイラビリティゾーンで大量購入が発生した場合は、価格は変動する可能性があります（現段階では、割引率は80％に固定されます）。

### II. システム中断メカニズム
![](https://main.qcloudimg.com/raw/a4db964d52400b9a00d3c7e96c0b833d.png)
従量課金インスタンスがユーザーによるリリースしかできないのとは異なり、スポットインスタンスはシステムによって中断されることがあります。システムは現在の価格とリソースプール容量等の総合的な状況により、割り当てたスポットインスタンスを中断するか判断します。
![](https://main.qcloudimg.com/raw/824a585f8dfeb1914f4d72ea1eafdb6c.png)
- **価格による中断**：市場価格がお客様の最高指値より高い場合、スポットインスタンスが回収されます（現段階では、市場価格は固定されます）。
- **在庫による中断**：スポットインスタンスが不足している場合、システムが在庫不足の状況によりスポットインスタンスを回収します。在庫が回復したら、スポットインスタンスを再度申請できます。

## 適用しないシナリオ
システム中断メカニズムにより、顧客はインスタンスのライフサイクルを完全に把握できません。したがって、スポットインスタンスで安定性に対する要求の高いサービスを稼動しないことをお薦めします。例：
- データベースサービス
- ロードバランサーを使用しないオンラインサービスとウェブサイトサービス
- 分散型アーキテクチャのコアコントロールノード
- 長時間（10+時間）のビッグデータコンピューティング作業

## 適用シナリオ及び業界
### 適用シナリオ
- ビッグデータコンピューティング
- ロードバランサーを使用したオンラインサービスとウェブサイトサービス
- Webクローラーサービス
- ほかの細粒度コンピューティングケース

### 適用業界
- 遺伝子配列解析及び分析
- 薬物結晶分析
- ビデオのトランスコーディング、ビデオレンダリング
- 金融、取引データの分析
- 画像及びマルチメディア処理
- 地理学や流体力学などの科学技術コンピューティング

## 制限事項
- **割り当て制限**：CVMの台数制限とは異なり、スポットインスタンスは、アベイラビリティゾーン内のユーザーが所有するすべてのスポットインスタンスのvCPUコアの合計を割り当て制限の指標としています。現段階では、各アカウントはアベイラビリティゾーンごとに最大50のvCPUコアを持つことができます。（割り当て量を増やすには、チケットを送信してください。）
- **操作制限1**：スポットインスタンスは、構成のアップグレードとデグレードはサポートされていません。
- **操作制限2**：スポットインスタンスはサブスクリプション課金に切り替えることはできません。

## ベストプライクティス
### I. タスクを分割する
- タスクをより細かいサブタスクに分解して、中断される可能性を減少します。
- 分割メカニズムが付属しているEMRなどのビッグデータスイートを使用します。

### II. ロードバランサーを使用してオンラインサービスとWebサイトサービスの安定性を確保する
- 例として、アクセスレイヤーはCloud Load Balancerを利用します。　　　
- バックエンドリソースは一部の従量課金インスタンス + 大量のスポットインスタンスの組合せを使用します。
- スポットインスタンスの中断状況をモニタリングし、中断しようとしているインスタンスをCLBから削除します。

### III. チェックポイントからの再起動をサポートするコンピューティングスケジューリングモード
- コンピューティングの中間結果をCOS/CFS/NASなどの永続ストレージサービスに保存します。
- インスタンスのメタデータを使用して中断されるインスタンスを監視し、2分の保存期間内に計算結果を保存します。
- スポットインスタンスが再起動すると、前回のコンピューティングを継続します。
