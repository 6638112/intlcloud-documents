보안 그룹은 스테이트풀 데이터 패킷 필터링 기능을 갖춘 일종의 가상 방화벽으로, CVM, CLB, CDB 등의 인스턴스 설정에 사용하여 네트워크 액세스를 제어하는 데 사용됩니다. 인스턴스의 인바운드/아웃바운드 트래픽 제어는 네트워크 보안의 중요한 격리 수단입니다.
보안 그룹 규칙을 설정하여 보안 그룹 내 인스턴스의 인바운드/아웃바운드 트래픽을 허용 또는 차단할 수 있습니다.

## 보안 그룹 특징
- 보안 그룹은 하나의 로직 그룹으로, 동일한 리전 내에서 같은 수준의 네트워크 보안 격리가 요구되는 CVM, Elastic Network Inferface(ENI), CDB 등 인스턴스를 동일한 보안 그룹에 추가할 수 있습니다.
- 동일한 보안 그룹에 연결된 인스턴스는 기본적으로 상호 통신되지 않으므로 사용자가 해당하는 허용 규칙을 추가해야 합니다.
- 보안 그룹은 스테이트풀하여 사용자가 허용한 모든 인바운드 트래픽에 대해 자동 유출을 허용하며, 그 반대의 경우도 마찬가지입니다.
- 언제든 보안 그룹의 규칙을 수정할 수 있으며, 새로운 규칙은 즉시 적용됩니다.

## 사용 제한

보안 그룹의 사용 제한 및 쿼터에 대한 자세한 내용은 [사용 제한 개요](https://intl.cloud.tencent.com/document/product/213/15379)에서 보안 그룹 관련 제한 내용을 참조 바랍니다.

## 보안 그룹 규칙
### 구성 요소
보안 그룹 규칙은 다음과 같은 구성 요소를 포함합니다.
- 출처: 원본 데이터(인바운드) 또는 타깃 데이터(아웃바운드)의 IP.
- 프로토콜 유형 및 프로토콜 포트: TCP, UDP 등과 같은 프로토콜 유형.
- 정책: 허용 또는 거부.

### 규칙 우선순위
- 보안 그룹 내 규칙은 우선순위가 있으며, 규칙의 우선순위는 리스트의 위치를 통해 표시됩니다. 리스트 최상단에 있는 규칙은 우선순위가 가장 높아 우선적으로 적용되며, 최하단에 있는 규칙은 우선순위가 가장 낮습니다.
- 규칙 충돌이 발생할 경우, 더 앞쪽에 위치한 규칙을 기본 적용합니다.
- 트래픽 인바운드/아웃바운드가 한 보안 그룹의 인스턴스를 바인딩할 때, 보안 그룹 규칙 리스트의 최상단 규칙부터 마지막 행까지 순서대로 적용합니다. 적용된 규칙이 성공적으로 매핑되고 통과가 허용되면 해당 규칙 이후의 규칙은 더 이상 매핑되지 않습니다.

### 여러 보안 그룹
1개 인스턴스는 1개 또는 여러 개의 보안 그룹을 바인딩할 수 있습니다. 여러 보안 그룹을 바인딩할 경우 위부터 아래로 순서대로 매칭되며 언제든지 보안 그룹의 우선순위를 조정할 수 있습니다.

## 보안 그룹 템플릿
보안 그룹 생성 시, Tecent Cloud에서 제공하는 두 가지 보안 그룹 템플릿을 선택할 수 있습니다.
- 모든 포트 개방 템플릿: 모든 인바운드/아웃바운드 트래픽을 개방합니다.
- 상용 포트 개방 템플릿: TCP 22 포트(Linux SSH 로그인), 80 및 443 포트(웹서비스), 3389 포트(Windows 원격 로그인), ICMP 프로토콜(Ping), 내부 네트워크 등을 개방합니다.

>?
>- 제공된 보안 그룹 템플릿이 사용자 실제 사용에 적합하지 않을 경우 사용자 정의 보안 그룹을 생성할 수 있습니다. 자세한 내용은 [보안 그룹 생성](https://intl.cloud.tencent.com/document/product/213/34271) 및 [보안 그룹 응용 사례](https://intl.cloud.tencent.com/document/product/213/32369)를 참조 바랍니다.
>- 응용 레이어(HTTP/HTTPS)에 보안 요구가 있을 경우 [Tencent Cloud Web Application Firewall(WAF)](https://intl.cloud.tencent.com/product/waf)을 별도로 구매하면 응용 레이어 Web 보안을 제공하고, Web 취약점 공격과 악성 크롤러 및 CC 공격 등의 행위를 막으며 웹 사이트와 Web MS를 보호합니다.
>

## 사용 과정
보안 그룹의 사용 과정은 아래 이미지와 같습니다.
![](https://main.qcloudimg.com/raw/fbd5b2ec62e94f2cfee45d8b125f3e82.png)

## 보안 그룹 권장 사례

### 보안 그룹 생성
- API 호출로 CVM을 구매할 경우 보안 그룹을 지정하시길 권장합니다. 보안 그룹을 지정하지 않으면 시스템이 자동 생성한 기본 보안 그룹이 사용되며, 기본 보안 그룹은 삭제할 수 없습니다.
- 인스턴스 보안 정책이 변경되면 먼저 보안 그룹의 규칙을 수정하길 권장드리며, 새로운 보안 그룹을 생성할 필요는 없습니다.

### 규칙 관리
- 규칙을 수정해야 할 경우 현재 보안 그룹을 내보내 백업할 수 있습니다. 새로운 규칙에 안 좋은 영향이 있다면 이전의 보안 그룹 규칙을 가져와 복구할 수 있습니다.
- 필요한 규칙 항목이 많을 때는 [매개변수 템플릿](https://intl.cloud.tencent.com/document/product/215/31867)을 사용할 수 있습니다.

### 보안 그룹 관련
- 인스턴스마다 별도의 보안 그룹을 생성하지 않고, 동일한 보안 요구를 가진 인스턴스에 하나의 보안 그룹을 추가할 수 있습니다.
- 하나의 인스턴스에 너무 많은 보안 그룹을 바인딩하면 보안 그룹 규칙끼리 충돌하여 네트워크 연결이 끊어질 수 있습니다.

