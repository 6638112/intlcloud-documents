セキュリティグループは、同一グループ外のインスタンスと通信を行う際のトラフィックを制御する仮想ファイアウォールです。CVM、Cloud Load Balancer及びTencentDBおよびその他のインスタンスのネットワークアクセス制御を設定し、インスタンスレベルのインバウンド・アウトバウンドトラフィックを制御するために使用されます。これは、ネットワークセキュリティを分離するための重要な手段です。
セキュリティグループルールを設定することにより、セキュリティグループ内のインスタンスのインバウンドおよびアウトバウンドトラフィックを許可または拒否できます。

## セキュリティグループの特徴
- セキュリティグループは、論理グループであり、同一リージョン内にある同じネットワークセキュリティ分離要件を持つCVM、ENI、TencentDBなどのインスタンスを同じセキュリティグループ内に追加することができます。
- 同じセキュリティグループに関連付けたインスタンスは、デフォルトで相互接続されません。相互接続したい場合、許可ルールを追加する必要があります。
- セキュリティグループはステートフルであり、許可されたインバウンドトラフィックに対して、自動的にアウトバウンドも許可され、逆の場合も同じです。
- いつでもセキュリティグループルールを変更できます。新しいルールはすぐに有効になります。

## 使用制限

セキュリティグループの利用制限とクォータの詳細については、[利用制限一覧](https://intl.cloud.tencent.com/document/product/213/15379)のセキュリティグループの制限に関する内容をご参照ください。

## セキュリティグループルール
### 構成要素
セキュリティグループルールの構成要素は、以下のことを含みます：
- ソース：ソースデータ（インバウンド）またはターゲットデータ（アウトバウンド）のIPアドレス。
- プロトコルタイプとプロトコルポート：TCP、UDP、HTTPなどのプロトコルタイプ。
- ポリシー：許可または拒否。

### ルールの優先順位
- セキュリティグループ内のルールは、優先順位があります。リストの一番上が、最も優先順位が高くなります。下になるほど優先順位は低くなります。
- ルールに競合がある場合、優先順位の高いルールがデフォルトで優先されます。
- トラフィックがセキュリティグループにバインドされているインスタンスに出入りする場合、セキュリティグループルールは上から順番にマッチします。一つのルールがマッチされると、通信を許可し、後続のルールはマッチしません。

### 複数のセキュリティグループ
インスタンスは、1つまたは複数のセキュリティグループにバインドすることができます。インスタンを複数のセキュリティグループにバインドされている場合、セキュリティグループルールは上から下に順次実行されます。いつでもセキュリティグループの優先順位を調整することができます。

## セキュリティグループテンプレート
セキュリティグループを新規作成する際に、Tencent Cloudが提供する2つのセキュリティグループテンプレートのいずれかを選択できます。
- すべてのポートを開放：すべてのインバウンドおよびアウトバウンドトラフィックの通過が許可されます。
- 主要なポートを開放：ポートTCP 22（Linux SSHログインの場合）、ポート80および443（Webサービスの場合）、ポート3389（Windowsリモートログインの場合）、ICMPプロトコル（Pingコマンドの場合）、及びプライベートネットワークをインターネットにオープンします。

>?
>- 提供されたセキュリティグループテンプレートがお客様の要求を満たさない場合は、カスタムセキュリティグループを新規作成することができます。詳細については、[セキュリティグループの作成](https://intl.cloud.tencent.com/document/product/213/34271)、[セキュリティグループの適用例](https://intl.cloud.tencent.com/document/product/213/32369)をご参照ください。
>- アプリケーション層（HTTP/HTTPS）を保護する必要がある場合は、 [Tencent Cloud Web Application Firewall（WAF）](https://intl.cloud.tencent.com/product/waf)を別途購入することが可能です。WAFはお客様にアプリケーション層のWebセキュリティ保護を提供し、Web 脆弱性の攻撃、悪意のあるクローラー及びCC攻撃などの脅威を防ぎ、ウェブサイトとWebアプリケーションのセキュリティを確保します。
>

## 使用手順
セキュリティグループの使用手順は次の図に示します。
![](https://main.qcloudimg.com/raw/fbd5b2ec62e94f2cfee45d8b125f3e82.png)

## セキュリティグループのベストプラクティス

### セキュリティグループの作成
- APIを介してCVMを購入する場合、セキュリティグループを指定することをお勧めします。セキュリティグループが指定されていない場合、システムによって自動的に生成されたデフォルトのセキュリティグループが使用されます。またデフォルトのセキュリティグループは削除できません。
- インスタンス保護ポリシーを変更する必要がある場合は、新しいセキュリティグループを作成するのではなく、既存のルールを変更することをお勧めします。

### ルールの管理
- ルールを変更する必要がある場合は、現在のセキュリティグループをエクスポートしてバックアップを行うことができます。新しいルールに不利な影響を与える場合、以前のセキュリティグループのルールをインポートしてリカバリを行うことができます。
- 複数のセキュリティグループルールを作成するには、[パラメータテンプレート](https://intl.cloud.tencent.com/document/product/215/31867)を使用してください。

### セキュリティグループと関連付ける
- インスタンスごとに個別のセキュリティグループを設定する必要がなく、同じ保護要件を持つインスタンスを同じセキュリティグループに追加することができます。
- 1つのインスタンスに多くのセキュリティグループにバインドすることはお勧めしません。異なるセキュリティグループのルールが競合すると、ネットワークが切断される可能性があります。

