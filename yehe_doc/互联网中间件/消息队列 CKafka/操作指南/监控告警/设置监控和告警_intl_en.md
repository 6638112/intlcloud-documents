Tencent Cloud provides the Cloud Monitor service for all users by default; therefore, you do not need to manually activate it. Cloud Monitor will start collecting monitoring data only after a Tencent Cloud product is used.

CKafka allows you to monitor the resources created under your account, including instances, topics, and consumer groups, so that you can keep track of the status of your resources in real time. You can configure alarm rules for monitoring metrics. When a monitoring metric reaches the set alarm threshold, Cloud Monitor will notify you of exceptions by email, SMS, WeChat, and phone call.

## Monitoring Metric Description

The following lists the CKafka monitoring metrics and their description. Based on user feedback and statistics, we recommend you to configure monitoring and alarming policies for metrics marked with the word **recommended**. Please configure policies properly as needed.

### Instance monitoring

| Monitoring Metric | Description |
| -------------------------------- | ------------------------------------------------------------ |
| Production traffic in MB | Production traffic of the instance (excluding traffic generated by replicas), which is the total traffic in the selected time period. |
| Consumption traffic in MB | Consumption traffic of the instance (excluding traffic generated by replicas), which is the total traffic in the selected time period. |
| Number of produced messages | Number of messages produced in the instance, which is the total number of messages in the selected time period. |
| Number of consumed messages | Number of messages consumed in the instance, which is the total number of messages in the selected time period. |
| Used disk capacity in MB | Total size of messages (including those produced by replicas) that actually use disk capacity, which is the latest value in the selected time period. |
| Number of persistent messages | Total number of messages stored in disks (excluding those produced by replicas), which is the latest value in the selected time period. |
| Peak production bandwidth in MB/s **(recommended)** | Peak traffic generated when the instance produces messages (excluding the traffic generated by replicas). |
| Peak consumption bandwidth in MB/s **(recommended)** | Peak traffic generated when the instance consumes messages (consumption does not involve replicas). |
| Disk utilization in % **(recommended)** | Ratio of the currently used disk capacity to the total disk capacity of the instance. |
| Number of connections **(recommended)** | Number of connections between clients and servers in the cluster. |

### Topic monitoring

| Monitoring Metric | Description |
| -------------------------------- | ------------------------------------------------------------ |
| Production traffic in MB | Production traffic in the topic (excluding traffic generated by replicas), which is the total traffic in the selected time period. |
| Consumption traffic in MB | Consumption traffic in the topic (excluding traffic generated by replicas), which is the total traffic in the selected time period. |
| Number of produced messages | Number of messages produced in the topic, which is the total number of messages in the selected time period. |
| Number of consumed messages | Number of messages consumed in the topic, which is the total number of messages in the selected time period. |
| Used disk capacity in MB **(recommended)** | Total size of messages in the topic (excluding those produced by replicas) that actually use disk capacity, which is the latest value in the selected time period. |
| Number of persistent messages | Total number of stored messages in the topic (excluding those produced by replicas), which is the latest value in the selected time period. |

### Consumer group - topic monitoring

| Monitoring Metric | Description |
| ------------------------------------- | ------------------------------------------- |
| Maximum offset | Maximum offset in all partitions of the topic. |
| Consumption offset | Maximum consumption offset of consumer groups in all partitions of the topic. |
| Number of unconsumed messages | Total number of messages not consumed by the consumer group in all partitions of the topic. |
| Consumption speed (messages/min) | Total number of messages consumed by consumer groups from all partitions in the topic per second. |

### Consumer group - partition monitoring

| Monitoring Metric | Description |
| ---------------------------------- | --------------------------------------- |
| Consumption speed (messages/min) | Number of messages consumed by consumer groups in the partition per second. |
| Current consumption offset | Current consumption offset of consumer groups in the partition |
| Maximum offset | Maximum offset on the partition |
| Number of unconsumed messages **(recommended)** | Number of messages not consumed by consumer groups in the partition  |


For more information on the metric names and descriptions, please see [CKafka Monitoring Metrics](https://intl.cloud.tencent.com/document/product/248/17296).

## Setting Alarm Policies

The created alarm can determine whether an alarm notification should be sent based on the comparison between the monitoring metric and the given threshold in the selected time period. You can take appropriate precautionary or remedial measures in a timely manner when the alarm is triggered because the status of CKafka changes. Properly creating alarm policies can help improve the robustness and reliability of your applications.

1. Log in to the [CKafka console](https://console.cloud.tencent.com/ckafka).
2. In the instance list, click **Configure Alarms** in the **Operation** column to go to the alarm configuration page.
3. On the alarm configuration page, select a policy type and instance, and set the alarm rule and notification template.
   >!Make sure to configure alarms for your instance to prevent exceptions caused by a sudden traffic spike or specification limits.
4. Click **Completed**.

For more information on alarms, see [here](https://intl.cloud.tencent.com/document/product/248/38908).

## Viewing Monitoring Data

1. Log in to the [CKafka console](https://console.cloud.tencent.com/ckafka).
2. In the instance list, click the ID/name of an instance to go to the instance details page.
3. At the top of the instance details page, Click **Monitor**, select resource tags, and set the time range to view the monitoring data about the instance.
4. On the resource tag page, click **Set Alarm** on the upper right corner to view or modify the alarm policy.

## CKafka Monitoring API Documentation

For more information on CKafka monitoring APIs, please see:

- [Topic Monitoring Metrics](https://intl.cloud.tencent.com/document/product/248/17296)
- [Instance Monitoring Metrics](https://intl.cloud.tencent.com/document/product/248/17297) 
- [Consumer Group Monitoring Metrics](https://intl.cloud.tencent.com/document/product/248/17298)

