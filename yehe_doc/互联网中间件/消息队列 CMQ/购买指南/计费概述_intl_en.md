>
>- CMQ is currently being upgraded (to be completed in September 2020) and will be launched as a brand new message queue product.
>- The new version of CMQ will have a similar billing mode as the legacy version. The impacts on costs due to version migration will be minimized.

Currently, queuing service and message retention/requests to CMQ topics are free of charge.
Traffic generated by public network access to CMQ is free of charge between April 3 and October 31, 2020. After then, traffic will be billed as follows:
- If CMQ is accessed over the public network, the inbound traffic will be free of charge, while the outbound traffic will incur traffic fees. For more information, please see [Public Network Billing](https://intl.cloud.tencent.com/document/product/213/10578).
- If CMQ is accessed over the private network, both outbound and inbound traffic are free of charge. We recommend accessing CMQ over the private network.
Â 
## Queue Pricing

**Total fees**: = request fees + message retention fees + outbound traffic fees.
**Billing mode**: fees are charged separately by regions and settled hourly.

>Currently, requests and message retention in CMQ are free of charge. You will be notified by email or SMS before the billing starts.


### Number of requests
After the CMQ service is activated in a region, Tencent Cloud will count the number of API/SDK requests in CMQ **per hour**. The unit is in millions and accurate to two decimal places. The request fee is **2.00 USD/million requests** and is settled hourly.

#### Example 1
If the total number of user requests between 16:00 and 17:00 on May 20, 2016 is 1,323,454, the number of requests billed will be 1.32 (million requests) and the total fees are 1.32 * 2.00 = 2.64 USD.
#### Example 2
If the total number of user requests between 18:00 and 19:00 on May 20, 2016 is 181,000, the number of requests billed will be 0.18 (million requests) and the total fees are 0.18 * 2.00 = 0.36 USD.

### Message retention (including message rewind)
CMQ charges message retention fees per hour by regions using the following equation:
```
Message retention fees = total number of messages * unit price of retained messages
```
The unit price of retained messages is **0.010 USD/million messages/hour**. The total number of messages in an hour is the average number of retained messages per minute (i.e., 60 sample points are collected per hour and then averaged). The fees are accurate to two decimal places. Message rewind fees will be calculated together with message retention fees.

#### Example
If the number of retained messages in queue A between 16:00 and 17:00 on May 20, 2016 is 1,323,450, the message retention fees for queue A during this period are 0.01 * 1.32 = 0.01 USD.

### Outbound traffic
Tencent Cloud network traffic billing rule: inbound traffic is free of charge, while outbound traffic is billed (public network traffic is billed normally during beta testing. We recommend using the private network API address for testing).

| Traffic Type | Definition | Usage | Unit Price |
|---------|---------|---------|---------|
| Inbound traffic | Data traffic to CMQ | All | Free of charge |
| Private network outbound traffic (intra-region) | Traffic generated when a business system (in the same region as CMQ) actively pulls data from CMQ or CMQ actively pushes data to it using the private domain name of CMQ (over the Tencent Cloud private network) | All | Free of charge |
| Public network outbound traffic | Traffic generated when a business system (in the same region as CMQ) actively pulls data from CMQ or CMQ actively pushes data to it using the Internet domain name of CMQ (over the Internet) | All | Mainland China: 0.80 USD/GB; Hong Kong (China): 1.00 USD/GB; other regions: 0.50 USD/GB |

## Topic Pricing
**Total fees**: = API request fees + message retention fees + outbound traffic fees
**Billing mode**: pay-as-you-go (by hour) and region-specific (fees are charged separately by regions)
> Currently, API requests and message retention in CMQ are free of charge. You will be notified by email or SMS before the billing starts.


### API requests
- Currently, the maximum size allowed for published messages is 64 KB. Every 64 KB of published data is billed as one request (less than 64 KB is also billed at 64 KB). One API call by one subscriber to a topic will be billed as one request. For example, if there are 30 subscribers, one API call with a load of 64 KB will be billed as 30 requests.
- **Unit price of published messages**: 2 USD/million messages.
The fees are rounded to two decimal places. For example, if the number of published messages is 1,431,321 (1.43 million), the fees will be 2.86 USD.
- **Billing scenario**
When a queue is configured as a subscriber to a topic, two fees will be charged after the topic sends messages: API request fees for the queue to receive messages and fees for the topic to send messages.

### Message retention
If messages are retained on the topic (not published or failed after multiple retries), the retained messages will be billed as follows:
```
Message retention fees = total number of messages * unit price of retained messages
```
**Unit price of retained messages**: 0.010 USD/million messages/hour
Fees are calculated based on the average number of retained messages in the current hour (i.e., 60 sample points are collected per hour and then averaged).
The fees are rounded to two decimal places. For example, if the number of retained messages is 1,431,321 (1.43 million), the fees will be 0.01 USD.


#### Billing example
If the number of retained messages in topic A between 16:00 and 17:00 on May 20, 2016 is 1,323,450, the message retention fees for topic A during this hour will be 0.01 USD.

### Outbound traffic
Tencent Cloud traffic billing rule: inbound topic traffic is free of charge, while outbound traffic when the topic sends messages to a subscription is billed (public network traffic fees is billed normally during beta testing. We recommend using the private network API address for testing).
**Pricing**: mainland China: 0.80 USD/GB; Hong Kong (China): 1.00 USD/GB; other regions: 0.50 USD/GB.
**Billing dimension**: fees are charged separately by topics. With multiple topics, the outbound traffic will be aggregated.

| Traffic Type | Definition | Usage | Unit Price |
|---------|---------|---------|---------|
| Inbound traffic 	| Data traffic to CMQ 	| All	 | Free of charge |
| Private network outbound traffic (intra-region) | Traffic generated when a CMQ topic sends data within the same region (over the Tencent Cloud private network) | All | Free of charge |
| Public network outbound traffic | Traffic generated when CMQ sends messages to a subscription (over the public network) | All | Mainland China: 0.80 USD/GB; Hong Kong (China): 1.00 USD/GB; other regions: 0.50 USD/GB |







