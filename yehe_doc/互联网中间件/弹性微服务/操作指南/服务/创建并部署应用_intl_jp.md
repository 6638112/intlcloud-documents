## 操作シナリオ

ここでは主にTEMコンソールでアプリケーションを作成してデプロイする具体的な手順について説明します。

## 前提条件

1. すでに[環境の作成](https://cloud.tencent.com/document/product/1371/53293)を行っていること。
2. すでに[環境リソースの追加](https://cloud.tencent.com/document/product/1371/55684)（必要に応じてCloud Log Service、Storage Service、レジストリを選択）を行っていること。

## 操作手順

1. [TEMコンソール](https://console.cloud.tencent.com/tem)にログインします。
2. 左側ナビゲーションバーで、【アプリケーションリスト】をクリックしてアプリケーションリストページに進み、アプリケーションデプロイのリージョンを選択します。

| リージョン | デプロイがサポートされているアベイラビリティーゾーン       |
| ---- | ---------------------- |
| 広州 | 3区、4区、6区       |
| 上海 | 2区、3区、4区、5区 |

3. 【新規作成】をクリックして、アプリケーションの新規作成ページに進み、アプリケーション情報を入力します。
   ![](https://main.qcloudimg.com/raw/2c1f93d99627476463220a0ac816ac5d.png)

   - 名称：アプリケーション名を入力します。最大長は45文字で、アルファベット小文字、数字および区切り文字(「-」)のみ使用できます。区切り文字で開始または終了することはできません
   - 開発言語：自分の開発言語を選択します。
   - パッケージのアップロード方法：パッケージのアップロード方法を選択します。Java言語はイメージ、JARパッケージおよびWARパッケージのアップロードをサポートしていますが、他の言語はイメージのアップロードのみをサポートしています。JARパッケージまたはWARパッケージ方式を選択する場合、TEMは自動的にコンテナイメージを構築し、TEMが作成したパーソナル版のコンテナイメージをレジストリにプッシュします。

4. 【サブミット】をクリックし、ポップアップウィンドウで【OK】を選択して、デプロイアプリケーションページに進みます。【キャンセル】を選択した場合、続いてアプリケーションリストの【新しい環境にデプロイ】をクリックすれば、アプリケーションのデプロイを完了することができます。
   <img src="https://main.qcloudimg.com/raw/bb7fced232f38d419d5cf62fa972fecd.png" />
5. アプリケーションデプロイページで、アプリケーションの具体的な状況に応じて関連パラメータを設定します。
   ![](https://main.qcloudimg.com/raw/12d9fc6c543e46ad5d6cfe9aa6a1851e.png)

   パラメータの説明は次のとおりです。
	

   | パラメータ            | 説明                                                         |
   | --------------- | ------------------------------------------------------------ |
   | 環境のパブリッシュ        |アプリケーションが存在する環境を選択します。適切な環境がない場合は、[環境ページ](https://console.cloud.tencent.com/tem/env)に移動して新規作成を実行します（[環境の作成](https://cloud.tencent.com/document/product/1371/53293)を参照）。 |
   | JDKバージョン        | OpenJDK8やKonaJDK8をサポートするJDKバージョンを選択します。                        |
   | パッケージ/イメージのアップロード | パッケージやイメージをアップロード、またはコンソール上の体験Demoをダウンロードして、体験TEMのすべての機能のデプロイを実行します。 |
   | バージョン番号          | アプリケーションのバージョン番号を設定します。バージョン番号を入力するか、**タイムスタンプをバージョン番号として使用する**をクリックすると、タイムスタンプをアプリケーションのバージョン番号として使用することができます。 |
   | バージョンの説明        | バージョンの説明を入力します。                                                 |
   | 起動パラメータ        | 起動パラメータを設定します。                                                 |

>?お客様のサービスがJava言語であり、レジストリに関連付けられている場合、TEMはレジストリ情報を自動的に挿入する機能を提供します。詳細については、[サービスの登録と検出](https://cloud.tencent.com/document/product/1371/56367)をご参照ください。

6. （オプション）必要に応じて、次の詳細オプションを設定できます。


| パラメータ       | 入力必須かどうか | 説明                                                         |
| ---------- | -------- | ------------------------------------------------------------ |
| リソース構成   | 必須       | 手動で設定またはエラスティックルールを設定して自動スケーリングすることができます。                   |
| アクセス設定   | 必須ではない       | <li>アクセス方法：環境内のアクセス、パブリックネットワークアクセスの場合、[環境](https://console.cloud.tencent.com/tem/env)のグローバル構成に移動します。[サービスアクセスとルートの設定](https://cloud.tencent.com/document/product/1371/55685)をご参照ください。</li><li>プロトコル：TCPプロトコルとUDPプロトコルをサポートします。パブリックネットワーク/プライベートネットワークのCLBを使用する場合、TCPプロトコルとUDPプロトコルを混在させることはできません。 </li> |
| 環境変数   | 必須ではない       | 環境変数を構成します。                                               |
| <nobr>永続ストレージ</nobr> | 必須ではない       | 永続ストレージ：コンテナにストレージを提供します。現在、Cloud File Storage(CFS)がサポートされており、コンテナの指定されたパスにマウントする必要があります。<li>  データ量：[環境リソースの追加](https://cloud.tencent.com/document/product/1371/55684)に関連付けられているCFSストレージリソースに追加します。</li><li> マウントポイント：この手順で追加したデータ量を選択し、対象のパスにマウントします。バージョンの説明を入力します。</li> |
| セキュリティグループ     |必須ではない       |セキュリティグループルールを設定することによって、セキュリティグループ内のインスタンスのアウトバウンドトラフィックとインバウンドトラフィックを許可または禁止することができます。業務ニーズにより他のポートを開放する必要がある場合は、[セキュリティグループを新規作成](https://console.cloud.tencent.com/vpc/securitygroup)することができます。 |
| ログ構成   |必須ではない       |「CLSへの永続ストレージ」を有効にすると、標準出力「stdout」と`*`構成パスをサポートします。`/logs/*`などのように、半角コンマで区切ります。標準出力はデフォルトで収集されます。 |

7. 【サブミット】をクリックして、アプリケーションのデプロイを完了します。
8.マイクロサービスアプリケーションの場合、コンシューマーアプリケーションとサーバーアプリケーションのデプロイは手順3～7と同様なので、ここでは繰り返しての説明はいたしません。

## アプリケーションへのアクセス

Tencent Cloud Elastic Microserviceはマイクロアプリケーション環境内とパブリックネットワークアクセスという2種類の方式を提供しています。

- 環境内のアクセス：同じ環境内のマイクロサービスは、登録されたサービス名を介して相互に呼び出すことができます。consul、eurekaなどのレジストリに基づくサービスの登録と検出、およびkubernetesに基づくサービスの検出をサポートします。
- パブリックネットワークアクセス：環境カードをクリックすると、【アクセス設定】ページで、パブリックネットワークLBとHTTP/HTTPSプロトコル転送ルールを作成してアプリケーションにアクセスできます。

例としてパブリックネットワークへのアクセスを取り上げます。操作手順は次のとおりです。
1. [サービスアクセスとルートの設定](https://cloud.tencent.com/document/product/1371/52886) を参照して、パブリックネットワークアクセスルートを構築します。
2. アプリケーションの「ID」をクリックして、インスタンスリストページに進みます。
3. ページトップの【基本情報】を選択します。【アクセス設定】モジュールで、アプリケーションがアクセスするドメイン名とルートを確認できます。
	![](https://main.qcloudimg.com/raw/03329c758488287b56cd2d57a4dd487d.png)
4. ブラウザのアドレスバーに次のURLを入力します。
  ```xml
   <パブリックネットワークアクセスアドレス/ドメイン名> + <パス>
  ```
   例：`http://xx.xx.xx.xx/ping-provider`と入力し、次の結果が返された場合は、アプリケーションが正常にデプロイされたことを意味します。
   ```
   Hello World!
   ```



