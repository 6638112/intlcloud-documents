## 소개

COS는 저장 데이터에 대한 모니터링 기능을 제공하며, COS 데이터 통계의 데이터 모니터링 창에서 요청량, 트래픽, 반환 코드, 데이터 읽기 등 데이터를 보여줍니다. 모니터링 데이터 창을 통해 시간대별로 스토리지 유형에 따른 데이터양 및 추이를 조회할 수 있습니다. 다음은 루트 계정 또는 서브 계정으로 단일 버킷의 모니터링 데이터를 조회하는 방법을 소개하는 내용입니다.

>?사용자 계정 아래 모든 스토리지 데이터의 취합 정보를 조회해야 할 경우, COS 콘솔 중 [데이터 모니터링](https://console.cloud.tencent.com/cos5/monitor/overview)에서 조회할 수 있습니다.


## 루트 계정을 통한 작업 절차 조회

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인한 뒤, 왼쪽 메뉴에서 [버킷 리스트]를 클릭하여 버킷 리스트 페이지로 이동합니다.
2. 통계 데이터가 필요한 버킷을 찾아 오른쪽 [모니터링]을 클릭합니다. 또는 버킷을 클릭하고 리디렉션 인터페이스에서 [데이터 모니터링]을 클릭하면 모니터링 항목 소개에서 다음과 같은 설명을 참조할 수 있습니다.
3. 모니터링 데이터 인터페이스로 이동하면 다음 이미지와 같이 나타나며, 모니터링 항목 설명은 다음과 같습니다.
 - 스토리지: 스토리지 유형별 스토리지 용량을 조회할 수 있습니다.
 - 객체 수량: 버킷에 있는 객체 수량을 의미하며, 객체 수량은 파일 조각 수량을 포함합니다.
 - 파일 조각 수량: 버킷에 있는 파일 조각 수량을 의미합니다. 객체 업로드 과정에서 업로드를 잠시 중단하거나 취소한 파일은 조각으로 버킷에 저장됩니다.
 >?
 >
 >- 폴더의 객체 수량을 조회해야 할 경우, [폴더 상세 정보 조회](https://intl.cloud.tencent.com/document/product/436/31633) 문서를 참조하십시오.
 >- 버전 제어 기능을 활성화하면, 동명 객체의 이전 버전은 모두 하나의 독립된 객체로 존재하며 객체 수량으로 계산됩니다.
 - 요청: 표준, 표준IA 스토리지 유형 데이터의 읽기 및 쓰기 요청 수 조회를 지원합니다.
 - 트래픽: 외부 네트워크 다운스트림 트래픽, 내부 네트워크 트래픽 및 CDN Origin-pull 트래픽, 업로드 트래픽 조회를 지원합니다.
 - 반환 코드: 2xx 상태 코드, 3xx 상태 코드, 4xx 상태 코드, 5xx 상태 코드의 통계 데이터 조회를 지원합니다.
 - 데이터 읽기: 일반 데이터 읽기, 저빈도 데이터 검색의 통계 데이터 조회를 지원합니다.
   ![](https://main.qcloudimg.com/raw/2af3c5e7b113003ca1379547903751ed.png)

>?
>
>- 사용자는 [현재 데이터] 페이지 아래 [상세 지표]에서 통계 항목(예: 스토리지 용량, 객체 수량, 요청 횟수, 트래픽, 반환 코드 및 데이터 읽기)에 따라 시간대(예: 오늘, 어제, 최근 7일, 최근 30일, 최근 3개월, 최근 6개월)를 선택해 조회가 가능합니다.
>- [당원 누계] 창에서 당원 일평균 스토리지 유형별 객체의 스토리지 용량 및 총 트래픽(누적 외부 네트워크 트래픽, 누적 CDN Origin-pull 트래픽 및 누적 리전 간 복제 트래픽)을 조회할 수 있습니다.
>- 스토리지 용량 및 객체 수량에 대해서는 2020년 3월 1일 이후의 데이터만 조회 가능합니다. 더 많은 상세 데이터를 조회해야 할 경우, [과금 센터](https://console.cloud.tencent.com/expense/bill/dosageDownload)로 가 해당 시간대를 선택하고 데이터를 내보내 조회합니다.

## 서브 계정을 통한 작업 절차 조회

서브 계정을 통해 모니터링 리포트를 조회하려면 먼저 서브 계정으로 모니터링 리포트를 조회할 수 있는 권한을 부여해야 합니다. 그 후에야 서브 계정을 사용해 콘솔로 모니터링 리포트를 조회할 수 있습니다.

**정책 템플릿** 또는 **사용자 정의 액세스 정책** 방식을 사용해 서브 계정에 모니터링 리포트에 액세스할 수 있는 권한을 부여할 수 있습니다.


<a id="celie"></a>

### 정책 템플릿을 통한 권한 부여

1. 루트 계정을 사용해 [CAM 콘솔](https://console.cloud.tencent.com/cam)에 로그인한 후, [사용자]>[사용자 리스트]를 선택해 사용자 리스트 페이지로 이동합니다.
2. 서브 계정을 찾아 오른쪽 작업 열 아래 [라이선스]를 클릭합니다.
   ![](https://main.qcloudimg.com/raw/03804c04df5e91fc0472e8d0297f694d.png)
3. 정책 리스트에서 QcloudMonitorFullAccess 정책을 검색하고 해당 정책을 선택한 후, [확인]을 클릭하면 정책이 이 서브 계정으로 추가되어 서브 계정을 사용해 모니터링 리포트를 조회할 수 있습니다.
   ![](https://main.qcloudimg.com/raw/c2e07335d2e68e2f077138ff9d73837f.png)
>!정책 템플릿은 Cloud Monitoring 액세스를 위한 **모든 권한**을 부여합니다. 계정 보안을 보호하려면 서브 계정 읽기 권한의 액세스 정책을 사용자 정의로 설정할 수 있습니다.

### 사용자 정의 액세스 정책을 통한 권한 부여

1. 루트 계정을 사용해 [CAM 콘솔](https://console.cloud.tencent.com/cam)에 로그인한 후, [정책]>[사용자 정의 정책 생성]>[정책 구문에 따른 생성]을 선택합니다.
2. 빈 템플릿에 따라 정책 생성을 선택합니다.
   ![](https://main.qcloudimg.com/raw/4a61be28b1ab0146eca948215aad0f2e.png)
3. 빈 템플릿에 아래의 정책 내용을 **정책 내용 편집** 입력 상자에 입력합니다. 자신의 업무 필요에 따라 찾기 쉬운 정책 이름으로 수정할 수 있습니다.
   정책 구문:

```shell
{
    "version": "2.0",
    "statement": [
        {
            "effect": "allow",
            "action": [
                "monitor:GetMonitorData"
            ],
            "resource": "*"
        }
    ]
}
```

정책 콘텐츠 편집 입력 상자:
![](https://main.qcloudimg.com/raw/f6a4b0d8573745139beb03cdb3a1b3ec.png)

5. [정책 생성]을 클릭합니다. 정책 생성 성공 후, 서브 계정에 해당 정책에 대한 권한을 부여할 수 있습니다. 작업 순서는 [정책을 통한 템플릿 설정](#celie)을 참조하십시오.
