## 소개

Cloud Object Storage(COS)는 저장 데이터를 모니터링하는 기능을 제공합니다. 통계 데이터의 데이터 모니터링 창에서 요청량, 트래픽, 반환 코드, 읽어온 데이터 등의 데이터를 확인할 수 있으며, 데이터 모니터링 창을 통해 시간대별로 서로 다른 스토리지 유형의 데이터에 대한 데이터 양과 추세를 조회할 수 있습니다. 다음은 루트 계정 또는 서브 계정에서 단일 버킷의 모니터링 데이터를 조회하는 방법을 소개합니다.

>?사용자 계정의 모든 저장 데이터의 종합 정보를 조회하고 싶은 경우, COS 콘솔의 [데이터 모니터링](https://console.cloud.tencent.com/cos5/monitor/overview)에서 조회할 수 있습니다.


## 루트 계정에서의 조회 방법

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인한 후, 왼쪽 메뉴에서 [버킷 리스트]를 클릭하여 버킷 리스트 페이지로 이동합니다.
2. 데이터를 통계할 버킷을 찾아 해당 버킷 이름의 오른쪽에 있는 [모니터링]을 클릭합니다. 또는 버킷을 클릭하여 이동하는 인터페이스 상의 [데이터 모니터링]을 클릭합니다. 모니터링 항목에 대한 설명은 다음을 참조하십시오.
3. 데이터 모니터링 인터페이스로 이동하면 다음과 같이 표시됩니다. 모니터링 항목 설명은 다음과 같습니다.
 - 스토리지: 스토리지 유형별 스토리지 용량을 조회할 수 있습니다.
 - 객체 수: 버킷에 존재하는 객체 수이며, 객체 수에는 파일 조각 수도 포함되어 있습니다.
 - 파일 조각 수: 버킷에 존재하는 파일 조각 수입니다. 객체 업로드 중 업로드가 일시 중지되거나 취소되는 파일은 조각 파일이 되며, 버킷에 저장됩니다.
 >?
 >
 >- 폴더의 객체 수를 확인하고 싶은 경우 [폴더 상세 정보 조회](https://intl.cloud.tencent.com/document/product/436/31633) 문서를 참조하십시오.
 >- 버전 제어 기능을 활성화하면 동일한 이름의 객체의 이전 버전이 하나의 독립적인 객체로 존재하게 되며 객체 수에 집계됩니다.
 - 요청: 총 요청 수(총 Get 요청 수, 총 Put 요청 수 포함) 및 표준, 표준IA 스토리지 유형의 데이터 읽기 및 쓰기 요청 수를 조회할 수 있습니다.
 - 트래픽: 공인 네트워크 트래픽, 내부 네트워크 트래픽, CDN Origin-pull 대역폭/리전 간 복제 대역폭, 내부/공인 네트워크 업로드 총 대역폭을 조회할 수 있습니다.
 - 반환 코드: 2xx, 3xx, 4xx, 5xx 상태 코드의 개수 및 점유율을 조회할 수 있습니다.
 - 데이터 검색: 저빈도 데이터 검색 통계 데이터를 조회할 수 있습니다.
   ![](https://main.qcloudimg.com/raw/2af3c5e7b113003ca1379547903751ed.png)

>?
>
>- [현재 데이터] 페이지의 [상세 지표]에서 각 통계 항목(예: 스토리지 용량, 객체 수량, 요청 횟수, 트래픽, 반환 코드, 데이터 검색)에 따라 서로 다른 시간 구간(예: 오늘, 어제, 최근 7일, 최근 30일, 사용자 정의 시간대)을 선택하여 조회할 수 있습니다.
>- [당월 누계] 창에서 당월 일 평균 스토리지 유형별 객체의 스토리지 용량 및 총 트래픽(누적 공인 네트워크 트래픽, 누적 CDN Origin-pull 트래픽, 누적 리전 간 복제 트래픽)을 조회할 수 있습니다.
>- 스토리지 용량 및 객체 수량은 2020년 3월 1일 이후 데이터만 조회할 수 있으며, 더 많은 상세 데이터를 조회해야 하는 경우 [과금 센터](https://console.cloud.tencent.com/expense/bill/dosageDownload)에서 해당 시간대를 선택하고 데이터를 내보내 조회할 수 있습니다.

## 서브 계정에서의 조회 방법

서브 계정으로 모니터링 리포트를 조회하는 경우, 먼저 서브 계정에 모니터링 리포트 조회 권한을 부여해야 합니다. 권한을 부여한 후 서브 계정에서 콘솔을 통해 모니터링 리포트를 조회할 수 있습니다.

**정책 템플릿** 또는 **사용자 정의 액세스 정책**을 사용해 서브 계정에 모니터링 리포트 액세스 권한을 부여할 수 있습니다.


<a id="celie"></a>

### 정책 템플릿을 사용한 권한 부여

1. 루트 계정으로 [CAM 콘솔](https://console.cloud.tencent.com/cam)에 로그인한 후, [사용자]>[사용자 리스트]를 선택해 사용자 리스트 페이지로 이동합니다.
2. 서브 계정을 찾아 오른쪽 작업 열에 있는 [라이선스]를 클릭합니다.
   ![](https://main.qcloudimg.com/raw/03804c04df5e91fc0472e8d0297f694d.png)
3. 정책 리스트에서 QcloudMonitorFullAccess 정책을 검색하고 해당 정책을 선택한 후 [확인]을 클릭하면 해당 서브 계정에 정책이 추가됩니다. 즉, 해당 서브 계정에서 모니터링 리포트를 조회할 수 있습니다.
   ![](https://main.qcloudimg.com/raw/c2e07335d2e68e2f077138ff9d73837f.png)
>!정책 템플릿은 클라우드 모니터링에 액세스할 수 있는 **모든 권한**을 부여합니다. 계정 보안이 필요한 경우 서브 계정의 읽기 권한에 대한 액세스 정책을 사용자 정의 설정하십시오.

### 사용자 정의 액세스 정책을 사용한 권한 부여

1. 루트 계정으로 [CAM 콘솔](https://console.cloud.tencent.com/cam)에 로그인한 후, [정책]>[사용자 정의 정책 생성]>[정책 구문에 따른 생성]을 선택합니다.
2. 빈 템플릿을 선택하여 정책을 생성합니다.
   ![](https://main.qcloudimg.com/raw/4a61be28b1ab0146eca948215aad0f2e.png)
3. 빈 템플릿의 **정책 내용 편집** 입력창에 다음 정책 구문을 입력합니다. 사용자의 비즈니스 수요에 따라 쉽게 찾을 수 있는 정책 이름으로 수정할 수 있습니다.
   정책 구문:

```shell
{
    "version": "2.0",
    "statement": [
        {
            "effect": "allow",
            "action": [
                "monitor:GetMonitorData"
            ],
            "resource": "*"
        }
    ]
}
```

정책 내용 편집 입력창:
![](https://main.qcloudimg.com/raw/f6a4b0d8573745139beb03cdb3a1b3ec.png)

4. [정책 생성]을 클릭합니다. 정책 생성이 완료되면 서브 계정에 해당 정책을 추가할 수 있습니다. 자세한 작업 방법은 [정책 템플릿을 사용해 설정하기](#celie)를 참조하십시오.
