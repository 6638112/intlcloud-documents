## Overview

This document provides an overview of SDK code samples related to generating pre-signed object links.

>?
> - You are advised to use a temporary key to generate pre-signed URLs for the security of your requests such as uploads and downloads. When you apply for a temporary key, follow the [Principle of Least Privilege](https://intl.cloud.tencent.com/document/product/436/32972) to avoid leaking resources besides your buckets and objects.
> - If you need to use a permanent key to generate a pre-signed URL, you are advised to limit the permission of the permanent key to uploads and downloads only to avoid risks.
> 


## SDK API References

For the parameters and method description of all the APIs in the SDK, see [Api Documentation](https://cos-dotnet-sdk-doc-1253960454.file.myqcloud.com/).

## Generating an Unsigned URL

If the ACL attribute of an object is set to public-read, you can directly access it using the URL generated by the following SDK API:

```C#
 string GetObjectUrl(string bucket, string key);
 ```

## Generating a Pre-Signed Object URL

#### Sample 1. Generating a pre-signed upload link

[//]: # (.cssg-snippet-get-presign-upload-url)
```cs
try
{
  PreSignatureStruct preSignatureStruct = new PreSignatureStruct();
  preSignatureStruct.appid = "1250000000";// APPID of your Tencent Cloud account
  preSignatureStruct.region = "COS_REGION"; // Bucket region
  preSignatureStruct.bucket = "examplebucket-1250000000"; // Bucket
  preSignatureStruct.key = "exampleobject"; // Object key
  preSignatureStruct.httpMethod = "PUT"; // HTTP request method
  preSignatureStruct.isHttps = true; // Generate an HTTPS request URL
  preSignatureStruct.signDurationSecond = 600; // Request signature duration is 600s
  preSignatureStruct.headers = null;// Header in the signature that needs to be verified
  preSignatureStruct.queryParameters = null; // URL request parameters in the signature that need to be verified

  // Pre-signed URL for upload (signed URL calculated with the permanent key method)
  string requestSignURL = cosXml.GenerateSignURL(preSignatureStruct);

  string srcPath = @"temp-source-file";// Absolute path to the local file
  PutObjectRequest request = new PutObjectRequest(null, null, srcPath);
  // Set the pre-signed URL for the upload request
  request.RequestURLWithSign = requestSignURL;
  // Set the progress callback
  request.SetCosProgressCallback(delegate (long completed, long total)
  {
    Console.WriteLine(String.Format("progress = {0:##.##}%", completed * 100.0 / total));
  });
  // Execute the request.
  PutObjectResult result = cosXml.PutObject(request);
  // Request successful
  Console.WriteLine(result.GetResultInfo());
}
catch (COSXML.CosException.CosClientException clientEx)
{
  // Request failed
  Console.WriteLine("CosClientException: " + clientEx);
}
catch (COSXML.CosException.CosServerException serverEx)
{
  // Request failed
  Console.WriteLine("CosServerException: " + serverEx.GetInfo());
}
```

>? For the complete sample, go to [GitHub](https://github.com/tencentyun/cos-snippets/tree/master/dotnet/dist/ObjectPresignUrl.cs).
>

#### Sample 2. Generating a pre-signed download link

[//]: # (.cssg-snippet-get-presign-download-url)
```cs
try
{
  PreSignatureStruct preSignatureStruct = new PreSignatureStruct();
  preSignatureStruct.appid = "1250000000";// APPID of your Tencent Cloud account
  preSignatureStruct.region = "COS_REGION"; // Bucket region
  preSignatureStruct.bucket = "examplebucket-1250000000"; // Bucket
  preSignatureStruct.key = "exampleobject"; // Object key
  preSignatureStruct.httpMethod = "GET"; // HTTP request method
  preSignatureStruct.isHttps = true; // Generate an HTTPS request URL
  preSignatureStruct.signDurationSecond = 600; // Request signature duration is 600s
  preSignatureStruct.headers = null;// Header in the signature that needs to be verified
  preSignatureStruct.queryParameters = null; // URL request parameters in the signature that need to be verified

  string requestSignURL = cosXml.GenerateSignURL(preSignatureStruct); 

  // Pre-signed URL for download request (signed URL calculated with the permanent key method)
  string localDir = System.IO.Path.GetTempPath();// Local file directory
  string localFileName = "my-local-temp-file"; // Specify the name of the file to be saved locally
  GetObjectRequest request = new GetObjectRequest(null, null, localDir, localFileName);
  // Set the pre-signed URL for the download request
  request.RequestURLWithSign = requestSignURL;
  // Set the progress callback
  request.SetCosProgressCallback(delegate (long completed, long total)
  {
    Console.WriteLine(String.Format("progress = {0:##.##}%", completed * 100.0 / total));
  });
  // Execute the request.
  GetObjectResult result = cosXml.GetObject(request);
  // Request successful
  Console.WriteLine(result.GetResultInfo());
}
catch (COSXML.CosException.CosClientException clientEx)
{
  // Request failed
  Console.WriteLine("CosClientException: " + clientEx);
}
catch (COSXML.CosException.CosServerException serverEx)
{
  // Request failed
  Console.WriteLine("CosServerException: " + serverEx.GetInfo());
}
```

>? For the complete sample, go to [GitHub](https://github.com/tencentyun/cos-snippets/tree/master/dotnet/dist/ObjectPresignUrl.cs).
>

