Cloud Object Storage(COS) 일괄 작업 기능은 버킷 내 객체 리스트를 지정하여 지정 작업을 실행할 수 있습니다. 리스트 기능을 통해 객체 리스트를 생성해 객체 리스트를 지정하는 방법, 또는 처리해야 하는 객체를 매니페스트 파일 포맷에 따라 CVS 포맷의 파일에 기록하는 방법이 있으며, 해당 객체 매니페스트 파일에 따라 일괄 작업합니다.

리스트 기능에 대한 자세한 내용은 [리스트 기능 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참조하십시오.

현재 COS 일괄 작업 기능은 다음 지정 작업만 지원합니다.

- [객체 일괄 복사](https://intl.cloud.tencent.com/document/product/436/32960)
- [보관 객체 일괄 복구](https://intl.cloud.tencent.com/document/product/436/34075)

COS 콘솔을 통해 COS 일괄 작업 기능을 사용할 수 있으며, 자세한 내용은 [일괄 작업](https://intl.cloud.tencent.com/document/product/436/32956)을 참조하십시오.



## 원리

일괄 작업이 필요한 경우 먼저 일괄 작업을 수립해야 합니다. 일괄 작업에는 객체 리스트에 지정 작업을 실행할 때 필요한 모든 정보가 포함되어야 하며, 리스트를 객체 리스트로 사용할 수 있습니다.

객체 리스트를 제공하는 경우 일괄 작업 수립 및 실행 후 리스트 내에 있는 객체 하나하나에 지정 작업을 실행합니다. 작업 실행 중 COS 콘솔을 통해 해당 작업의 실행 상태를 제어할 수 있으며, 해당 작업 완료 후 작업 보고서를 출력하도록 설정할 수도 있습니다. 작업 보고서에는 해당 작업 중 실행된 모든 작업의 상태가 상세히 표시됩니다.

> !일괄 작업 기능은 현재 버킷 내의 객체에만 적용되며, 다른 버킷의 객체 데이터를 일괄 작업해야 하는 경우 해당 버킷 내에서 일괄 작업을 시작하십시오.

## 객체 리스트

객체 리스트는 처리 대기 중인 모든 객체를 기록한 리스트입니다. 일괄 작업을 생성하고 싶은 경우, 먼저 객체 리스트를 제공하여 COS에 처리해야 할 객체를 알려줘야 합니다. 객체 리스트 파일을 버킷에 저장하고 해당 파일의 이름, ETag, VersionID(있을 경우) 등의 정보를 제공해야 하며, 다음 두 가지 방법을 통해 객체 리스트를 생성할 수 있습니다.

- **COS 리스트 기능**: 해당 기능은 CSV 포맷의 객체 리스트가 출력됩니다. 객체 리스트에 대한 자세한 정보는 [리스트 기능 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참조하십시오. 객체 리스트에 객체 버전 ID 정보가 포함되어 있는 경우, COS에서 일괄 작업 시 해당 버전 ID의 객체를 처리합니다.
- **CSV 파일 설정**: 해당 파일의 모든 행에는 반드시 버킷 이름, 처리 대기 중인 객체 이름, 객체 버전 ID(선택 사항)이 포함되어 있어야 합니다. 버전 제어 기능을 한번도 활성화하지 않은 경우 객체 버전 ID 정보는 생략할 수 있으며, CSV 파일 설정 형식은 다음과 같습니다.

```
examplebucket-appid, exampleobject, PZ9ibn9D5lP6p298B7S9_ceqx1n5EJ0p
examplebucket-appid, exampleobject, PZ9ibn9D5lP6p298B7S9_ceqx1n5EJ0p
examplebucket-appid, exampleobject, jbo9_jhdPEyB4RrmOxWS0kU0EoNrU_oI
```

> !
> - 버킷에 버전 제어를 활성화하였거나 활성화한 적이 있는 경우 객체 리스트에 객체 버전 정보를 제공해야 합니다. COS는 작업 실행 전 귀하가 제공한 리스트를 리졸브하며 리스트에 따라 처리 대기 중인 객체를 확정합니다.
> - 객체 리스트에 버킷 내에 있는 모든 객체를 포함시킬 수 있습니다. 단, 너무 많은 객체를 처리해야 하는 경우 실행 시간이 비교적 오래 걸릴 수 있습니다.
> - 버전 ID를 지정하지 않는 경우 COS는 기본적으로 최신 버전의 객체를 작업합니다. 작업 생성 전 처리 대기 중인 객체와 동일한 이름의 객체 파일을 업로드한 경우, COS는 기본적으로 최신 버전의 객체를 처리하며, 객체 리스트 생성 시의 객체를 처리하지 않습니다. 이와 같은 작업을 방지하기 위한 방법으로 버전 제어 기능을 활성화하여 객체 리스트에 버전 ID를 지정하는 방법이 있습니다.
> 

## 일괄 작업

본 부분에서는 일괄 작업 생성 방법과 일괄 작업 생성 후 시스템의 피드백 상황을 자세히 설명합니다.

일괄 작업 생성 시에는 다음 정보를 제공해야 합니다.

| 유형 | 설명 |
|---------|---------|
| 작업 | 리스트 상의 처리 대기 중인 객체에 어떤 작업을 실행할지 명확히 지정해야 합니다. 모든 작업에는 해당 매개변수를 설정할 수 있으며, COS는 해당 작업 설정 정보에 따라 리스트의 객체를 순차적으로 처리합니다. |
| 객체 리스트 | 객체 리스트는 처리 대기 중인 모든 객체를 기록한 파일입니다. 리스트 기능을 통해 객체 리스트를 생성할 수 있으며, 자세한 내용은 [리스트 기능 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참조하십시오. 또는 처리 대기 중인 객체를 매니페스트 파일 포맷에 따라 CSV 포맷의 파일에 기록하여 객체 리스트 파일로 지정할 수 있습니다. |
| 우선순위 | 우선순위를 사용하여 현재 일괄 작업에서 기타 일괄 작업 대비 우선순위 상태를 식별할 수 있습니다. 작업 우선순위는 작업을 완료한 순서대로 결정되는 것이 아닙니다. 여러 개의 작업을 순서대로 실행하고 싶은 경우 작업 실행 상태를 모니터링해야 하며 작업 완료 후 다른 작업이 시작됩니다. |
| 권한 규칙 | 일괄 작업 설정 후에는 귀하의 계정에 일괄 작업을 실행할 수 있는 IAM 권한이 있어야 합니다. 예를 들어 일괄 작업을 설정하여 `PUT Object-copy` 일괄 작업을 실행하는 경우, 원본 버킷에 대한 `Get Object` 권한이 있어야 하며 타깃 버킷에 대한 `PUT Object` 권한도 있어야 합니다. 이외에도 모든 일괄 작업에 대해 객체 리스트 읽기 및 작업 보고서 쓰기 권한을 가지고 있어야 합니다. 권한 설정에 대한 자세한 내용은 [권한 설정](https://intl.cloud.tencent.com/document/product/436/18023) 및 [버킷 액세스 정책](https://intl.cloud.tencent.com/document/product/436/45235)을 참고하십시오. |
| 작업 보고서 | 작업 완료 후 작업 보고서 출력을 설정할 수 있습니다. 작업 보고서를 출력하고 싶은 경우 일괄 작업 생성 시 해당 매개변수를 작성하면 시스템에서 작업 보고서를 지정 버킷으로 출력합니다. 작업 보고서를 저장할 버킷, 작업 보고서 포맷, 작업 보고서에 모든 작업 정보 포함 여부 등은 필수 입력 항목이며, 작업 보고서의 파일 접두사는 선택 항목입니다. |
| 작업 설명(옵션) | 생성한 일괄 작업에 256바이트의 작업 설명을 작성할 수 있으며, 이는 작업 추적 및 모니터링에 도움이 될 수 있습니다. COS는 콘솔에 작업 설명 세부 정보를 표시하며, 작업 설명에 따라 정렬하거나 생성한 작업을 필터링할 수 있습니다. 작업 설명은 내용이 중복될 수 있으며, 유사한 작업 설정에 동일한 작업 설명(예: 주간 로그 데이터 복사 동기화)을 입력하여 유사 작업을 관리할 수 있습니다. |


