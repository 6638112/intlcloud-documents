## 概要

証券業界のSecurities Exchange Commission(SEC)Rule 17A-4に適合するため、Tencent Cloud COSはオブジェクトロック機能を提供し、設定した期限内においてオブジェクトが改変または削除されず、なおかつすぐにアクセスできることを確実にしています。

>? SEC 17A-4は米国証券取引委員会が1934年の米国証券取引法に基づいて公布した法令です。この法令はデータ保存、インデックス、アクセシビリティの要件について概要を述べたもので、株式、債券、先物などの金融証券取引または仲介業務を行う会社に適用されます。この法令に基づき、様々な種類の取引記録は保存必須かつ上書きおよび消去禁止となり、少なくとも6年間はすぐにアクセスできる状態であることが求められます。

オブジェクトロック機能は現時点ではバケットレベルの機能であり、各バケットには時間ポリシーに基づいたオブジェクトロックのみを設定することが可能です。保持期間は1日～100年です。保持期間は必ず設定しなければならず、永久の期限は存在しません。

バケットにオブジェクトロックを設定すると、保持期間中は次のようになります。

- オブジェクトは削除、変更できません。
- オブジェクトのストレージタイプは変更できません。
- オブジェクトのHTTPヘッダーおよびユーザーメタデータはどちらも変更できません。これには、Content-Type、Content-Encoding、 Content-Language、Content-Disposition、Cache-Control、Expires、x-cos-meta-が含まれます。

時間ポリシーに基づいたオブジェクトロックにはステータスが1種類しかなく、時間ポリシーを作成して送信するとすぐに有効になります。このステータスの下ではルールを変更および削除することはできず、保持期間の延長のみが許可されます。




## 利用方法

コンソール、API方式でオブジェクトロックを設定できます。

#### COSコンソールの使用

COSコンソールでオブジェクトロックを設定することができます。[オブジェクトロックの設定](https://intl.cloud.tencent.com/document/product/436/40136) のコンソールガイドドキュメントをご参照ください。

#### REST APIの使用

次のAPIによってオブジェクトロックを直接管理できます。

- [PUT Bucket ObjectLockConfiguration](https://intl.cloud.tencent.com/document/product/436/40133)
- [GET Bucket ObjectLockConfiguration](https://intl.cloud.tencent.com/document/product/436/40134)
- [GET Object Retention](https://intl.cloud.tencent.com/document/product/436/40135) 



## 制限事項

1. オブジェクトロック機能は現在ホワイトリストのお客様だけに開放され、かつバージニア（アメリカ東部）、シリコンバレー（アメリカ西部）リージョンのみサポートされています。ご利用をご希望の場合は、[お問い合わせ](https://intl.cloud.tencent.com/support)ください。

2. オブジェクトロック機能は既存バケットの既存オブジェクトをサポートしています。次の例をご参照ください。

例えばお客様が、2012年7月1日にexamplebucketという名前のバケットを作成し、かつ異なる時点でtest1.txt、 test2.txt、test3.txtという3ファイルをアップロードし、その後2013年9月1日に保持期間を5年とするオブジェクトロックポリシーを作成したとします。これらの3ファイルの具体的なアップロード時間および対応するオブジェクトロックルールの有効期限は次のとおりです。 
<table>
	<tr><th>ファイル名</th><th>アップロード時間</th><th>オブジェクトロックルールの有効期限</th></tr>
	<tr><td>test1.txt</td><td>2012年7月1日</td><td>2017年6月30日</td></tr>
	<tr><td>test2.txt</td><td>2013年9月1日</td><td>2018年8月31日</td></tr>
	<tr><td>test3.txt</td><td>2017年7月30日</td><td>2022年7月29日</td></tr>
	
</table>
3. オブジェクトロックはバケットコピーをサポートしておらず、ターゲットバケットにすることもソースバケットにすることもできません。
4. オブジェクトロック後はオブジェクトのストレージタイプを変更できなくなり、かつオブジェクトのライフサイクルもサポートされなくなります。

>? ユーザーの操作によって同一のオブジェクトにライフサイクルとオブジェクトロックの両方を設定した場合、そのライフサイクル設定は無効となります。

5. ユーザーはフラグメントのクリーンアップ操作を行うことができます。
6. オブジェクトロックは一度設定すると単独で削除することはできず、バケットが空の場合のみ、そのバケットを削除することによってオブジェクトロックルールを削除することができます。
7. オブジェクトロックを有効にしていても、バケットおよびオブジェクトACLはどちらも変更できます。
8. バージョン管理を有効にした状態と有効にしていない状態のどちらでオブジェクトロック機能を使用しても、オブジェクトの削除および変更に対する効果は同じです。





























































