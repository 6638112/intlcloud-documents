## 단일 페이지 애플리케이션이란 무엇입니까?

단일 페이지 애플리케이션(single-page application, SPA)은 네트워크 애플리케이션 또는 웹 사이트의 모델입니다. 일반적으로 서버에서 전체 새 페이지를 다시 로딩하는 대신, 현재 페이지를 동적으로 다시 작성하여 사용자와 인터랙티브합니다. 이 방법은 페이지 사이를 전환하여 사용자 경험이 차단되는 것을 방지하고, 애플리케이션을 데스크톱 애플리케이션처럼 만듭니다. 단일 페이지 애플리케이션에서는 필요한 모든 코드(HTML, JavaScript, CSS)를 단일 페이지 로딩으로 인덱스하거나, 필요에 따라(일반적으로 사용자의 작업에 대한 응답) 동적으로 적절한 리소스를 페이지에 추가합니다.

현재 프런트 엔드 개발 분야에서 일반적인 단일 페이지 애플리케이션 개발 프레임워크는 React, Vue, Angular 등이 있습니다.

본문은 현재 널리 사용되는 두 가지 프레임워크를 사용하여 **Tencent Cloud COS(Cloud Object Storage)**에서 제공하는 **정적 웹 사이트** 기능을 사용하여 온라인 단일 페이지 애플리케이션을 빠르게 구축하고 몇 가지 일반적인 문제에 대한 솔루션을 제공하는 방법을 단계별로 설명합니다.


## 준비 작업

1. [Node.js](https://nodejs.org/zh-cn/download/) 환경을 설치합니다.
2. Tencent Cloud 계정 가입 및 실명 인증을 완료하여 [Tencent Cloud COS 콘솔](https://console.cloud.tencent.com/cos5)에 정상 로그인할 수 있도록 합니다.
3. 버킷을 생성합니다(테스트 편의를 위해 권한을 **공개 읽기/비공개 쓰기**로 설정 권장).

## 프런트 엔드 코드 작성

>! 이미 코드를 직접 구현했다면 [버킷 정적 웹 사이트 설정 활성화](#configuration) 단계로 건너뛰십시오.
>

### Vue를 사용하여 단일 페이지 애플리케이션 빠르게 구축

1. 다음 명령어를 실행하여 vue-cli를 설치합니다.
```
npm install -g @vue/cli
```
2. 다음 명령어를 실행하여 vue-cli를 사용하여 vue 프로젝트를 빠르게 생성합니다. [공식 홈페이지 문서](https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create)를 참고하십시오.
```
vue create vue-spa
```
3. 다음 명령어를 실행하여 프로젝트 루트 디렉터리에 vue-router를 설치합니다.
```
npm install vue-router -S  （Vue2.x）
```
 또는 
```
npm install vue-router@4 -S  （Vue3.x）
```
4. 프로젝트에서 main.js 및 App.vue 파일을 수정합니다.
main.js는 아래 이미지와 같습니다:
<img src="https://qcloudimg.tencent-cloud.cn/raw/aa25c6be5a57a7fcfe786e48c0a31ef2.png" style="width: 70%" /></br>
주로 아래 이미지와 같이 App.vue 컴포넌트의 template을 수정합니다.
<img src="https://qcloudimg.tencent-cloud.cn/raw/5be1dfb77701e071ef7829237396d481.png" style="width: 70%" /></br>
>? 본문에서는 일부 키 코드만 소개합니다. 전체 코드는 [여기를 클릭](https://cos-code-demo-1253960454.cos.ap-shanghai.myqcloud.com/vue-spa.zip)하여 다운로드할 수 있습니다.
>
5. 코드 수정 후 다음 명령어를 실행하여 로컬 미리보기를 실행합니다.
```
npm run serve
```
6. 디버깅 및 미리보기에 오류 없음을 확인한 후, 다음 명령어를 실행하여 프로덕션 환경 코드를 패키징 합니다.
```
npm run build
```
이 때 프로젝트 루트 디렉터리에 dist 디렉터리가 생성되며 Vue 프로그램 코드가 준비됩니다.


### React를 사용하여 단일 페이지 애플리케이션을 빠르게 구축

1. 다음 명령어를 실행하여 create-react-app을 설치합니다.
```
npm install -g create-react-app
```
2. create-react-app을 사용하여 react 프로젝트를 빠르게 생성합니다. [공식 홈페이지 문서](https://create-react-app.dev/docs/getting-started)를 참고하십시오.
3. 다음 명령어를 실행하여 프로젝트 루트 디렉터리에 react-router-dom을 설치합니다.
```
npm install react-router-dom -S
```
4. 프로젝트에서 App.js 파일을 수정합니다.
<img src="https://qcloudimg.tencent-cloud.cn/raw/c35e3011b1c4f083782bcc11834673f4.png" style="width: 70%" /></br>
>? 본문에서는 일부 키 코드만 소개합니다. 전체 코드는 [여기를 클릭](https://cos-code-demo-1253960454.cos.ap-shanghai.myqcloud.com/react-spa.zip)하여 다운로드할 수 있습니다.
>
5. 코드 수정 후 다음 명령어를 실행하여 로컬 미리보기를 실행합니다.
```
npm run start
```
6. 디버깅 및 미리보기에 오류 없음을 확인한 후, 다음 명령어를 실행하여 프로덕션 환경 코드를 패키징 합니다.
```
npm run build
```
이 때 프로젝트 루트 디렉터리에 build 디렉터리가 생성되며 React 프로그램 코드가 준비됩니다.


<span id="configuration"></span>
## 버킷 정적 웹 사이트 설정 활성화

1. 생성된 버킷 세부 사항 페이지로 이동하여 왼쪽 사이드바에서 **기본 설정** > **정적 웹 사이트**를 클릭합니다.
2. 정적 웹 사이트 관리 페이지에서 아래 이미지를 참고하여 설정합니다. 자세한 작업은 [정적 웹 사이트 설정](https://intl.cloud.tencent.com/document/product/436/14984)을 참고하십시오.



## COS에 배포

1. 이전에 설정되어 있던 정적 웹 사이트의 버킷을 찾아서 파일 리스트 페이지로 들어갑니다.
2. 컴파일 디렉터리(Vue 기본값: dist 디렉터리, react 기본값: build 디렉터리)의 모든 파일을 버킷의 루트 디렉터리에 업로드합니다. 자세한 작업은 [객체 업로드](https://intl.cloud.tencent.com/document/product/436/13321)를 참고하십시오.

3. 버킷의 정적 웹 사이트 도메인(아래 이미지의 액세스 노드)에 액세스합니다.

배포된 애플리케이션의 메인 페이지를 볼 수 있습니다. 다음은 Vue 애플리케이션 예시입니다.

4. 라우팅(Home, Foo, Bar)을 전환하고 페이지를 새로고침하여 예상에 부합하는지 확인합니다(즉, 라우팅에서 새로고침할 때 404 오류가 발생하지 않음).

## FAQ

### 정적 웹 사이트의 기본 도메인을 사용하지 않으려면 어떻게 해야 하나요? 자체 도메인을 사용할 수 있습니까?

상기에서 사용된 기본 정적 웹 사이트 도메인 외에도 COS는 기본 CDN 가속 도메인, 사용자 정의 CDN 가속 도메인 및 사용자 정의 원본 서버 도메인과 같은 다른 옵션도 제공합니다.

자세한 내용은 [도메인 관리 개요](https://intl.cloud.tencent.com/document/product/436/18424) 문서를 참고하여 설정을 완료한 후 애플리케이션에 액세스하고자 하는 도메인을 사용할 수 있습니다.


### 애플리케이션 배포 후 라우팅 전환 시 렌더링이 성공적이지만 페이지 새로고침 시 404 오류 발생 원인이 무엇인가요?

가능한 원인은 정적 웹 사이트를 설정할 때 설정이 누락되었거나 **오류 문서**가 잘못 설정되었기 때문일 수 있습니다. 본문 시작 부분의 표준 설정 스크린샷에서 오류 문서와 인덱스 문서 모두 `index.html` 로 설정되어 있는 것을 확인할 수 있습니다.

단일 페이지 애플리케이션의 특성으로 인해 후속 라우팅을 위한 일련의 내부 로직을 트리거 하려면 어떤 상황에서도 애플리케이션 게이트(일반적으로 'index.html')에 액세스 되도록 해야 합니다.


### 라우팅 전환 후 페이지가 정상적으로 표시되지만 HTTP 상태 코드는 여전히 404입니다. 어떻게 해야 정상적으로 200이 반환됩니까?

원인은 정적 웹 사이트를 설정할 때 설정 **오류 문서 응답 코드**가 부족하기 때문입니다. 본문 시작 부분의 표준 설정 스크린샷을 참고하여 200으로 설정하면 해결됩니다.

### 오류 문서 설정 후 오류 액세스 경로에 여전히 404 기능을 표시하려면 어떻게 처리해야 하나요?

프런트 엔드 코드에서 404 로직을 구현하는 것을 추천합니다. 라우팅 설정 하단에 하위 수준에 일치하는 규칙을 설정하고 이전의 모든 규칙이 일치하지 않을 때 404 컴포넌트가 렌더링됩니다. 컴포넌트 콘텐츠는 필요에 따라 설계 및 구현할 수 있습니다. 자세한 내용은 본문에서 제공하는 코드 demo의 라우팅 설정의 마지막 설정을 참고하십시오.


### 페이지 액세스 시 403 Access Denied 오류가 발생하는 이유는 무엇입니까?

버킷의 권한이 **개인 읽기/쓰기**로 설정되어 있을 수 있습니다. **공개 읽기/개인 쓰기**로 수정하여 해결할 수 있습니다.

또한 CDN 가속 도메인을 사용하여 **개인 읽기/쓰기** 버킷에 액세스하는 경우 **Origin-pull 인증** 설정도 활성화해야 CDN에 COS 리소스 액세스 권한이 부여됩니다.

